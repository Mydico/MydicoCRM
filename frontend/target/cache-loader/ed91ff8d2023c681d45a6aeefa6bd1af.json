{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Import/create-warehouse-return.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Import/create-warehouse-return.js","mtime":1619203472517},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgQ0J1dHRvbiwgQ0NhcmQsIENDYXJkSGVhZGVyLCBDQ2FyZEJvZHksIENDb2wsIENGb3JtLCBDVGV4dGFyZWEsIENGb3JtR3JvdXAsIENMYWJlbCwgQ0lucHV0LCBDUm93LCBDU2VsZWN0LCBDQ2FyZFRpdGxlIH0gZnJvbSAnQGNvcmV1aS9yZWFjdCc7CmltcG9ydCBDSWNvbiBmcm9tICdAY29yZXVpL2ljb25zLXJlYWN0JzsKaW1wb3J0IHsgRm9ybWlrIH0gZnJvbSAnZm9ybWlrJzsKaW1wb3J0ICogYXMgWXVwIGZyb20gJ3l1cCc7CmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgY3JlYXRpbmdXYXJlaG91c2VJbXBvcnQgfSBmcm9tICcuL3dhcmVob3VzZS1pbXBvcnQuYXBpJzsKaW1wb3J0IFRvYXN0ZXIgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9ub3RpZmljYXRpb25zL3RvYXN0ZXIvVG9hc3Rlcic7CmltcG9ydCB7IGN1cnJlbnQgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JzsKaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgeyBmZXRjaGluZyB9IGZyb20gJy4vd2FyZWhvdXNlLWltcG9ydC5yZWR1Y2VyJzsKaW1wb3J0IFNlbGVjdCBmcm9tICdyZWFjdC1zZWxlY3QnOwppbXBvcnQgeyBGb3JtRmVlZGJhY2ssIFRhYmxlIH0gZnJvbSAncmVhY3RzdHJhcCc7CmltcG9ydCB7IGdsb2JhbGl6ZWRXYXJlaG91c2VTZWxlY3RvcnMgfSBmcm9tICcuLi9XYXJlaG91c2Uvd2FyZWhvdXNlLnJlZHVjZXInOwppbXBvcnQgeyBnZXRXYXJlaG91c2UgfSBmcm9tICcuLi9XYXJlaG91c2Uvd2FyZWhvdXNlLmFwaSc7CmltcG9ydCB7IGdsb2JhbGl6ZWRQcm9kdWN0U2VsZWN0b3JzIH0gZnJvbSAnLi4vLi4vcHJvZHVjdC9Qcm9kdWN0TGlzdC9wcm9kdWN0LnJlZHVjZXInOwppbXBvcnQgeyBnZXRQcm9kdWN0IH0gZnJvbSAnLi4vLi4vcHJvZHVjdC9Qcm9kdWN0TGlzdC9wcm9kdWN0LmFwaSc7CmltcG9ydCB7IFdhcmVob3VzZUltcG9ydFR5cGUgfSBmcm9tICcuL2NvbnRhbnRzJzsKaW1wb3J0IHsgZ2xvYmFsaXplZEN1c3RvbWVyU2VsZWN0b3JzIH0gZnJvbSAnLi4vLi4vY3VzdG9tZXIvY3VzdG9tZXIucmVkdWNlcic7CmltcG9ydCB7IGdldEN1c3RvbWVyIH0gZnJvbSAnLi4vLi4vY3VzdG9tZXIvY3VzdG9tZXIuYXBpJzsKaW1wb3J0IHsgY3VycmVuY3lNYXNrIH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9jdXJyZW5jeS1pbnB1dC9jdXJyZW5jeS1pbnB1dCc7CmltcG9ydCBNYXNrZWRJbnB1dCBmcm9tICdyZWFjdC10ZXh0LW1hc2snOwppbXBvcnQgeyBjb25maXJtQWxlcnQgfSBmcm9tICdyZWFjdC1jb25maXJtLWFsZXJ0JzsgLy8gSW1wb3J0CgppbXBvcnQgJ3JlYWN0LWNvbmZpcm0tYWxlcnQvc3JjL3JlYWN0LWNvbmZpcm0tYWxlcnQuY3NzJzsgLy8gSW1wb3J0IGNzcwoKdmFyIHZhbGlkYXRpb25TY2hlbWEgPSBmdW5jdGlvbiB2YWxpZGF0aW9uU2NoZW1hKHZhbHVlcykgewogIGNvbnNvbGUubG9nKHZhbHVlcyk7CiAgcmV0dXJuIFl1cC5vYmplY3QoKS5zaGFwZSh7CiAgICBzdG9yZTogWXVwLm9iamVjdCgpLnJlcXVpcmVkKCdLaG8ga2jDtG5nIMSR4buDIHRy4buRbmcnKSwKICAgIGN1c3RvbWVyOiBZdXAub2JqZWN0KCkucmVxdWlyZWQoJ0tow6FjaCBow6BuZyBraMO0bmcgxJHhu4MgdHLhu5FuZycpCiAgfSk7Cn07Cgp2YXIgdmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZShnZXRWYWxpZGF0aW9uU2NoZW1hKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZXMpIHsKICAgIHZhciB2YWxpZGF0aW9uU2NoZW1hID0gZ2V0VmFsaWRhdGlvblNjaGVtYSh2YWx1ZXMpOwoKICAgIHRyeSB7CiAgICAgIHZhbGlkYXRpb25TY2hlbWEudmFsaWRhdGVTeW5jKHZhbHVlcywgewogICAgICAgIGFib3J0RWFybHk6IGZhbHNlCiAgICAgIH0pOwogICAgICByZXR1cm4ge307CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICByZXR1cm4gZ2V0RXJyb3JzRnJvbVZhbGlkYXRpb25FcnJvcihlcnJvcik7CiAgICB9CiAgfTsKfTsKCmV4cG9ydCB2YXIgbWFwcGluZ1N0YXR1cyA9IHsKICBBQ1RJVkU6ICfEkEFORyBIT+G6oFQgxJDhu5hORycsCiAgSU5BQ1RJVkU6ICdLSMOUTkcgSE/huqBUIMSQ4buYTkcnLAogIERFTEVURUQ6ICfEkMODIFjDk0EnCn07Cgp2YXIgZ2V0RXJyb3JzRnJvbVZhbGlkYXRpb25FcnJvciA9IGZ1bmN0aW9uIGdldEVycm9yc0Zyb21WYWxpZGF0aW9uRXJyb3IodmFsaWRhdGlvbkVycm9yKSB7CiAgdmFyIEZJUlNUX0VSUk9SID0gMDsKICByZXR1cm4gdmFsaWRhdGlvbkVycm9yLmlubmVyLnJlZHVjZShmdW5jdGlvbiAoZXJyb3JzLCBlcnJvcikgewogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZXJyb3JzKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgZXJyb3IucGF0aCwgZXJyb3IuZXJyb3JzW0ZJUlNUX0VSUk9SXSkpOwogIH0sIHt9KTsKfTsKCnZhciBmaW5kRmlyc3RFcnJvciA9IGZ1bmN0aW9uIGZpbmRGaXJzdEVycm9yKGZvcm1OYW1lLCBoYXNFcnJvcikgewogIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbZm9ybU5hbWVdOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcm0ubGVuZ3RoOyBpKyspIHsKICAgIGlmIChoYXNFcnJvcihmb3JtW2ldLm5hbWUpKSB7CiAgICAgIGZvcm1baV0uZm9jdXMoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQp9OwoKdmFyIHZhbGlkYXRlRm9ybSA9IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybShlcnJvcnMpIHsKICBmaW5kRmlyc3RFcnJvcignc2ltcGxlRm9ybScsIGZ1bmN0aW9uIChmaWVsZE5hbWUpIHsKICAgIHJldHVybiBCb29sZWFuKGVycm9yc1tmaWVsZE5hbWVdKTsKICB9KTsKfTsKCnZhciBDcmVhdGVXYXJlaG91c2UgPSBmdW5jdGlvbiBDcmVhdGVXYXJlaG91c2UoKSB7CiAgdmFyIF91c2VTZWxlY3RvciA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLndhcmVob3VzZUltcG9ydDsKICB9KSwKICAgICAgaW5pdGlhbFN0YXRlID0gX3VzZVNlbGVjdG9yLmluaXRpYWxTdGF0ZTsKCiAgdmFyIF91c2VTZWxlY3RvcjIgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5jdXN0b21lcjsKICB9KSwKICAgICAgY3VzdG9tZXJJbml0aWFsU3RhdGUgPSBfdXNlU2VsZWN0b3IyLmluaXRpYWxTdGF0ZTsKCiAgdmFyIF91c2VTZWxlY3RvcjMgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5hdXRoZW50aWNhdGlvbjsKICB9KSwKICAgICAgYWNjb3VudCA9IF91c2VTZWxlY3RvcjMuYWNjb3VudDsKCiAgdmFyIHNlbGVjdEFsbFdhcmVob3VzZSA9IGdsb2JhbGl6ZWRXYXJlaG91c2VTZWxlY3RvcnMuc2VsZWN0QWxsOwogIHZhciBzZWxlY3RBbGxQcm9kdWN0ID0gZ2xvYmFsaXplZFByb2R1Y3RTZWxlY3RvcnMuc2VsZWN0QWxsOwogIHZhciBzZWxlY3RBbGxDdXN0b21lciA9IGdsb2JhbGl6ZWRDdXN0b21lclNlbGVjdG9ycy5zZWxlY3RBbGw7CiAgdmFyIGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTsKICB2YXIgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKTsKCiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKG51bGwpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgc2VsZWN0ZWRXYXJlaG91c2UgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRTZWxlY3RlZFdhcmVob3VzZSA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUodHJ1ZSksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgaXNTZWxlY3RlZFdhcmVob3VzZSA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldElzU2VsZWN0ZWRXYXJlaG91c2UgPSBfdXNlU3RhdGU0WzFdOwoKICB2YXIgX3VzZVN0YXRlNSA9IHVzZVN0YXRlKFtdKSwKICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLAogICAgICBwcm9kdWN0TGlzdCA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFByb2R1Y3RMaXN0ID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTcgPSB1c2VTdGF0ZShudWxsKSwKICAgICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLAogICAgICBzZWxlY3RlZEN1c3RvbWVyID0gX3VzZVN0YXRlOFswXSwKICAgICAgc2V0U2VsZWN0ZWRDdXN0b21lciA9IF91c2VTdGF0ZThbMV07CgogIHZhciB3YXJlaG91c2VzID0gdXNlU2VsZWN0b3Ioc2VsZWN0QWxsV2FyZWhvdXNlKTsKICB2YXIgcHJvZHVjdHMgPSB1c2VTZWxlY3RvcihzZWxlY3RBbGxQcm9kdWN0KTsKICB2YXIgY3VzdG9tZXJzID0gdXNlU2VsZWN0b3Ioc2VsZWN0QWxsQ3VzdG9tZXIpOwogIHZhciBpbml0aWFsVmFsdWVzID0gewogICAgbm90ZTogJycKICB9OwoKICB2YXIgb25TZWxlY3RXYXJlaG91c2UgPSBmdW5jdGlvbiBvblNlbGVjdFdhcmVob3VzZSh2YWx1ZSkgewogICAgc2V0U2VsZWN0ZWRXYXJlaG91c2UodmFsdWUpOwogICAgc2V0SXNTZWxlY3RlZFdhcmVob3VzZSh0cnVlKTsKICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgdmFyIF9hY2NvdW50JGRlcGFydG1lbnQ7CgogICAgZGlzcGF0Y2goZ2V0V2FyZWhvdXNlKHsKICAgICAgZGVwYXJ0bWVudDogSlNPTi5zdHJpbmdpZnkoWygoX2FjY291bnQkZGVwYXJ0bWVudCA9IGFjY291bnQuZGVwYXJ0bWVudCkgPT09IG51bGwgfHwgX2FjY291bnQkZGVwYXJ0bWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FjY291bnQkZGVwYXJ0bWVudC5pZCkgfHwgJyddKQogICAgfSkpOwogICAgZGlzcGF0Y2goZ2V0UHJvZHVjdCgpKTsKICAgIGRpc3BhdGNoKGdldEN1c3RvbWVyKCkpOwogIH0sIFtdKTsKCiAgdmFyIG9uU3VibWl0ID0gZnVuY3Rpb24gb25TdWJtaXQodmFsdWVzLCBfcmVmKSB7CiAgICB2YXIgc2V0U3VibWl0dGluZyA9IF9yZWYuc2V0U3VibWl0dGluZywKICAgICAgICBzZXRFcnJvcnMgPSBfcmVmLnNldEVycm9ycywKICAgICAgICBzZXRTdGF0dXMgPSBfcmVmLnNldFN0YXR1cywKICAgICAgICByZXNldEZvcm0gPSBfcmVmLnJlc2V0Rm9ybTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhbHVlcy5zdG9yZUlucHV0RGV0YWlscyA9IHByb2R1Y3RMaXN0OwogICAgICB2YWx1ZXMudG90YWxNb25leSA9IHByb2R1Y3RMaXN0LnJlZHVjZShmdW5jdGlvbiAoc3VtLCBjdXJyZW50KSB7CiAgICAgICAgcmV0dXJuIHN1bSArIGN1cnJlbnQucHJpY2UgKiBjdXJyZW50LnF1YW50aXR5OwogICAgICB9LCAwKTsKICAgICAgdmFsdWVzLnR5cGUgPSBXYXJlaG91c2VJbXBvcnRUeXBlLlJFVFVSTjsKICAgICAgZGlzcGF0Y2goZmV0Y2hpbmcoKSk7CiAgICAgIGRpc3BhdGNoKGNyZWF0aW5nV2FyZWhvdXNlSW1wb3J0KHZhbHVlcykpOwogICAgfTsKICB9OwoKICB2YXIgb25TZWxlY3RDdXN0b21lciA9IGZ1bmN0aW9uIG9uU2VsZWN0Q3VzdG9tZXIoX3JlZjIpIHsKICAgIHZhciB2YWx1ZSA9IF9yZWYyLnZhbHVlOwogICAgc2V0U2VsZWN0ZWRDdXN0b21lcih2YWx1ZSk7CiAgfTsKCiAgdmFyIG9uQ2hhbmdlUXVhbnRpdHkgPSBmdW5jdGlvbiBvbkNoYW5nZVF1YW50aXR5KF9yZWYzLCBpbmRleCkgewogICAgdmFyIHRhcmdldCA9IF9yZWYzLnRhcmdldDsKCiAgICB2YXIgY29weUFyciA9IF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCk7CgogICAgY29weUFycltpbmRleF0ucXVhbnRpdHkgPSB0YXJnZXQudmFsdWU7CiAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICB9OwoKICB2YXIgb25SZW1vdmVQcm9kdWN0ID0gZnVuY3Rpb24gb25SZW1vdmVQcm9kdWN0KGluZGV4KSB7CiAgICB2YXIgY29weUFyciA9IF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCk7CgogICAgY29weUFyci5zcGxpY2UoaW5kZXgsIDEpOwogICAgc2V0UHJvZHVjdExpc3QoY29weUFycik7CiAgfTsKCiAgdmFyIG9uQ2hhbmdlUHJpY2UgPSBmdW5jdGlvbiBvbkNoYW5nZVByaWNlKF9yZWY0LCBpbmRleCkgewogICAgdmFyIHRhcmdldCA9IF9yZWY0LnRhcmdldDsKICAgIHZhciBjb3B5QXJyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwcm9kdWN0TGlzdCkpOwogICAgY29weUFycltpbmRleF0ucHJpY2UgPSBOdW1iZXIodGFyZ2V0LnZhbHVlLnJlcGxhY2UoL1xEL2csICcnKSk7CiAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICB9OwoKICB2YXIgb25TZWxlY3RlZFByb2R1Y3QgPSBmdW5jdGlvbiBvblNlbGVjdGVkUHJvZHVjdChfcmVmNSwgaW5kZXgpIHsKICAgIHZhciB2YWx1ZSA9IF9yZWY1LnZhbHVlOwogICAgdmFyIGFyciA9IHByb2R1Y3RMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5wcm9kdWN0LmlkID09PSB2YWx1ZS5pZDsKICAgIH0pOwoKICAgIGlmIChhcnIubGVuZ3RoID09PSAwKSB7CiAgICAgIHZhciBjb3B5QXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KTsKCiAgICAgIGNvcHlBcnJbaW5kZXhdLnByb2R1Y3QgPSB2YWx1ZTsKICAgICAgY29weUFycltpbmRleF0ucXVhbnRpdHkgPSAxOwogICAgICBjb3B5QXJyW2luZGV4XS5wcmljZSA9IE51bWJlcih2YWx1ZS5wcmljZSk7CiAgICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogICAgfQogIH07CgogIHZhciBvbkNoYW5nZVJlZHVjZVBlcmNlbnQgPSBmdW5jdGlvbiBvbkNoYW5nZVJlZHVjZVBlcmNlbnQoX3JlZjYsIGluZGV4KSB7CiAgICB2YXIgdGFyZ2V0ID0gX3JlZjYudGFyZ2V0OwoKICAgIHZhciBjb3B5QXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KTsKCiAgICBjb3B5QXJyW2luZGV4XS5yZWR1Y2VQZXJjZW50ID0gdGFyZ2V0LnZhbHVlOwogICAgY29weUFycltpbmRleF0ucHJpY2VUb3RhbCA9IGNvcHlBcnJbaW5kZXhdLnByaWNlICogY29weUFycltpbmRleF0ucXVhbnRpdHkgLSBjb3B5QXJyW2luZGV4XS5wcmljZSAqIGNvcHlBcnJbaW5kZXhdLnF1YW50aXR5ICogY29weUFycltpbmRleF0ucmVkdWNlUGVyY2VudCAvIDEwMDsKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvbkFkZFByb2R1Y3QgPSBmdW5jdGlvbiBvbkFkZFByb2R1Y3QoKSB7CiAgICB2YXIgZGF0YSA9IHsKICAgICAgcHJvZHVjdDoge30sCiAgICAgIHF1YW50aXR5OiAxLAogICAgICByZWR1Y2VQZXJjZW50OiAwCiAgICB9OwogICAgc2V0UHJvZHVjdExpc3QoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCksIFtkYXRhXSkpOwogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoaW5pdGlhbFN0YXRlLnVwZGF0aW5nU3VjY2VzcykgewogICAgICBoaXN0b3J5LmdvQmFjaygpOwogICAgfQogIH0sIFtpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzXSk7CgogIHZhciBlZGl0QWxlcnQgPSBmdW5jdGlvbiBlZGl0QWxlcnQodmFsdWVzLCBfcmVmNykgewogICAgdmFyIHNldFN1Ym1pdHRpbmcgPSBfcmVmNy5zZXRTdWJtaXR0aW5nLAogICAgICAgIHNldEVycm9ycyA9IF9yZWY3LnNldEVycm9yczsKICAgIGNvbmZpcm1BbGVydCh7CiAgICAgIHRpdGxlOiAnWMOhYyBuaOG6rW4nLAogICAgICBtZXNzYWdlOiAnQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHThuqFvIHBoaeG6v3UgbsOgeT8nLAogICAgICBidXR0b25zOiBbewogICAgICAgIGxhYmVsOiAnxJDhu5NuZyDDvScsCiAgICAgICAgb25DbGljazogb25TdWJtaXQodmFsdWVzLCB7CiAgICAgICAgICBzZXRTdWJtaXR0aW5nOiBzZXRTdWJtaXR0aW5nLAogICAgICAgICAgc2V0RXJyb3JzOiBzZXRFcnJvcnMKICAgICAgICB9KQogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICdI4buneScKICAgICAgfV0KICAgIH0pOwogIH07CgogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWlrLCB7CiAgICBpbml0aWFsVmFsdWVzOiBpbml0aWFsVmFsdWVzLAogICAgdmFsaWRhdGU6IHZhbGlkYXRlKHZhbGlkYXRpb25TY2hlbWEpLAogICAgb25TdWJtaXQ6IGVkaXRBbGVydAogIH0sIGZ1bmN0aW9uIChfcmVmOCkgewogICAgdmFyIF9zZWxlY3RlZFdhcmVob3VzZSRkZSwgX3NlbGVjdGVkQ3VzdG9tZXIkYnJhLCBfc2VsZWN0ZWRDdXN0b21lciRjaXQsIF9zZWxlY3RlZEN1c3RvbWVyJGRpcywgX3NlbGVjdGVkQ3VzdG9tZXIkdHlwOwoKICAgIHZhciB2YWx1ZXMgPSBfcmVmOC52YWx1ZXMsCiAgICAgICAgZXJyb3JzID0gX3JlZjguZXJyb3JzLAogICAgICAgIHRvdWNoZWQgPSBfcmVmOC50b3VjaGVkLAogICAgICAgIHN0YXR1cyA9IF9yZWY4LnN0YXR1cywKICAgICAgICBkaXJ0eSA9IF9yZWY4LmRpcnR5LAogICAgICAgIGhhbmRsZUNoYW5nZSA9IF9yZWY4LmhhbmRsZUNoYW5nZSwKICAgICAgICBoYW5kbGVCbHVyID0gX3JlZjguaGFuZGxlQmx1ciwKICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmOC5oYW5kbGVTdWJtaXQsCiAgICAgICAgc2V0RmllbGRWYWx1ZSA9IF9yZWY4LnNldEZpZWxkVmFsdWUsCiAgICAgICAgaXNTdWJtaXR0aW5nID0gX3JlZjguaXNTdWJtaXR0aW5nLAogICAgICAgIGlzVmFsaWQgPSBfcmVmOC5pc1ZhbGlkLAogICAgICAgIGhhbmRsZVJlc2V0ID0gX3JlZjguaGFuZGxlUmVzZXQsCiAgICAgICAgc2V0VG91Y2hlZCA9IF9yZWY4LnNldFRvdWNoZWQ7CiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm0sIHsKICAgICAgb25TdWJtaXQ6IGhhbmRsZVN1Ym1pdCwKICAgICAgbm9WYWxpZGF0ZTogdHJ1ZSwKICAgICAgbmFtZTogInNpbXBsZUZvcm0iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgewogICAgICBjbGFzc05hbWU6ICJjYXJkLWFjY2VudC1pbmZvIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkVGl0bGUsIG51bGwsICJLaG8gaFx4RTBuZyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCB7CiAgICAgIGNsYXNzTmFtZTogIm1iLTMiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIHNtOiA0CiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogImxhc3ROYW1lIgogICAgfSwgIkNoXHUxRUNEbiBLaG8iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgIG5hbWU6ICJzdG9yZSIsCiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShpdGVtKSB7CiAgICAgICAgc2V0RmllbGRWYWx1ZSgnc3RvcmUnLCBpdGVtLnZhbHVlKTsKICAgICAgICBvblNlbGVjdFdhcmVob3VzZShpdGVtLnZhbHVlKTsKICAgICAgfSwKICAgICAgb3B0aW9uczogd2FyZWhvdXNlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IGl0ZW0sCiAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KGl0ZW0ubmFtZSkKICAgICAgICB9OwogICAgICB9KQogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1GZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLnN0b3JlKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJUXHhFQW4ga2hvOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IG51bGwgfHwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkV2FyZWhvdXNlLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlNcdTFFRDEgXHUwMTExaVx1MUVDN24gdGhvXHUxRUExaToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkV2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkV2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZFdhcmVob3VzZS50ZWwpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI2IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIkNoaSBuaFx4RTFuaDoiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkV2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkV2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3NlbGVjdGVkV2FyZWhvdXNlJGRlID0gc2VsZWN0ZWRXYXJlaG91c2UuZGVwYXJ0bWVudCkgPT09IG51bGwgfHwgX3NlbGVjdGVkV2FyZWhvdXNlJGRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2VsZWN0ZWRXYXJlaG91c2UkZGUubmFtZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiXHUwMTEwXHUxRUNCYSBjaFx1MUVDOToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkV2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkV2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZFdhcmVob3VzZS5hZGRyZXNzKSkpKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgewogICAgICBjbGFzc05hbWU6ICJjYXJkLWFjY2VudC1wcmltYXJ5IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkVGl0bGUsIG51bGwsICJUaFx4RjRuZyB0aW4ga2hceEUxY2ggaFx4RTBuZyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCB7CiAgICAgIGNsYXNzTmFtZTogIm1iLTMiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIHNtOiA4CiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogImxhc3ROYW1lIgogICAgfSwgIkNoXHUxRUNEbiBraFx4RTFjaCBoXHhFMG5nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICBuYW1lOiAiY3VzdG9tZXIiLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoaXRlbSkgewogICAgICAgIHNldEZpZWxkVmFsdWUoJ2N1c3RvbWVyJywgaXRlbS52YWx1ZSk7CiAgICAgICAgb25TZWxlY3RDdXN0b21lcihpdGVtKTsKICAgICAgfSwKICAgICAgb3B0aW9uczogY3VzdG9tZXJzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogaXRlbSwKICAgICAgICAgIGxhYmVsOiAiWyIuY29uY2F0KGl0ZW0uY29kZSwgIl0gIikuY29uY2F0KGl0ZW0ubmFtZSwgIiAiKS5jb25jYXQoaXRlbS5hZGRyZXNzKQogICAgICAgIH07CiAgICAgIH0pCiAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtRmVlZGJhY2ssIHsKICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgIH0sIGVycm9ycy5jdXN0b21lcikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJNXHhFMyBraFx4RTFjaCBoXHhFMG5nOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRDdXN0b21lciA9PT0gbnVsbCB8fCBzZWxlY3RlZEN1c3RvbWVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZEN1c3RvbWVyLmNvZGUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIkhcdTFFQ0QgdFx4RUFuOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRDdXN0b21lciA9PT0gbnVsbCB8fCBzZWxlY3RlZEN1c3RvbWVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZEN1c3RvbWVyLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlNcdTFFRDEgXHUwMTExaVx1MUVDN24gdGhvXHUxRUExaToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkQ3VzdG9tZXIgPT09IG51bGwgfHwgc2VsZWN0ZWRDdXN0b21lciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRDdXN0b21lci50ZWwpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIkNoaSBuaFx4RTFuaDoiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkQ3VzdG9tZXIgPT09IG51bGwgfHwgc2VsZWN0ZWRDdXN0b21lciA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9zZWxlY3RlZEN1c3RvbWVyJGJyYSA9IHNlbGVjdGVkQ3VzdG9tZXIuYnJhbmNoKSA9PT0gbnVsbCB8fCBfc2VsZWN0ZWRDdXN0b21lciRicmEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zZWxlY3RlZEN1c3RvbWVyJGJyYS5uYW1lKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJcdTAxMTBcdTFFQ0JhIGNoXHUxRUM5OiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRDdXN0b21lciA9PT0gbnVsbCB8fCBzZWxlY3RlZEN1c3RvbWVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZEN1c3RvbWVyLmFkZHJlc3MpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlRoXHhFMG5oIHBoXHUxRUQxOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRDdXN0b21lciA9PT0gbnVsbCB8fCBzZWxlY3RlZEN1c3RvbWVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3NlbGVjdGVkQ3VzdG9tZXIkY2l0ID0gc2VsZWN0ZWRDdXN0b21lci5jaXR5KSA9PT0gbnVsbCB8fCBfc2VsZWN0ZWRDdXN0b21lciRjaXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zZWxlY3RlZEN1c3RvbWVyJGNpdC5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJRdVx1MUVBRG4gaHV5XHUxRUM3bjoiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkQ3VzdG9tZXIgPT09IG51bGwgfHwgc2VsZWN0ZWRDdXN0b21lciA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9zZWxlY3RlZEN1c3RvbWVyJGRpcyA9IHNlbGVjdGVkQ3VzdG9tZXIuZGlzdHJpY3QpID09PSBudWxsIHx8IF9zZWxlY3RlZEN1c3RvbWVyJGRpcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NlbGVjdGVkQ3VzdG9tZXIkZGlzLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIkxvXHUxRUExaSBraFx4RTFjaCBoXHhFMG5nOiAiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkQ3VzdG9tZXIgPT09IG51bGwgfHwgc2VsZWN0ZWRDdXN0b21lciA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9zZWxlY3RlZEN1c3RvbWVyJHR5cCA9IHNlbGVjdGVkQ3VzdG9tZXIudHlwZSkgPT09IG51bGwgfHwgX3NlbGVjdGVkQ3VzdG9tZXIkdHlwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2VsZWN0ZWRDdXN0b21lciR0eXAubmFtZSkpKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICBjb2xvcjogInByaW1hcnkiLAogICAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgc2l6ZTogInNtIiwKICAgICAgY2xhc3NOYW1lOiAibWwtMyBtYi0zIiwKICAgICAgb25DbGljazogb25BZGRQcm9kdWN0CiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICBuYW1lOiAnY2lsQXJyb3dDaXJjbGVSaWdodCcsCiAgICAgIGNsYXNzTmFtZTogIm1yLTIiCiAgICB9KSwgIlRoXHhFQW0gc1x1MUVBM24gcGhcdTFFQTltIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhYmxlLCB7CiAgICAgIHJlc3BvbnNpdmU6IHRydWUsCiAgICAgIHN0cmlwZWQ6IHRydWUKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aGVhZCIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIG51bGwsICJTXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIlx1MDExMFx1MDFBMW4gdlx1MUVDQiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCBudWxsLCAiRHVuZyB0XHhFRGNoIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIG51bGwsICJTXHUxRUQxIGxcdTAxQjBcdTFFRTNuZyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCBudWxsLCAiR2lceEUxIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIG51bGwsICJDaGlcdTFFQkZ0IGtoXHUxRUE1dSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCBudWxsLCAiVGhceEUwbmggdGlcdTFFQzFuIikpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRib2R5IiwgbnVsbCwgcHJvZHVjdExpc3QubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICB2YXIgX2l0ZW0kcHJvZHVjdCwgX2l0ZW0kcHJvZHVjdDIsIF9pdGVtJHByb2R1Y3QzOwoKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIHsKICAgICAgICBrZXk6IGluZGV4CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgd2lkdGg6IDUwMAogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgIHZhbHVlOiBpdGVtLAogICAgICAgICAgbGFiZWw6IGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJHByb2R1Y3QgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3QubmFtZQogICAgICAgIH0sCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gb25TZWxlY3RlZFByb2R1Y3QoZXZlbnQsIGluZGV4KTsKICAgICAgICB9LAogICAgICAgIG1lbnVQb3J0YWxUYXJnZXQ6IGRvY3VtZW50LmJvZHksCiAgICAgICAgb3B0aW9uczogcHJvZHVjdHMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICB2YXIgX2l0ZW0kcHJvZHVjdEJyYW5kOwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbHVlOiBpdGVtLAogICAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJHByb2R1Y3RCcmFuZCA9IGl0ZW0ucHJvZHVjdEJyYW5kKSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0QnJhbmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3RCcmFuZC5uYW1lLCAiLSIpLmNvbmNhdChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0ubmFtZSwgIi0iKS5jb25jYXQoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLnZvbHVtZSkKICAgICAgICAgIH07CiAgICAgICAgfSkKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRwcm9kdWN0MiA9IGl0ZW0ucHJvZHVjdCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3QyLnVuaXQpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRwcm9kdWN0MyA9IGl0ZW0ucHJvZHVjdCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3QzLnZvbHVtZSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgd2lkdGg6IDEwMAogICAgICAgIH0KICAgICAgfSwgaXRlbS5mb2xsb3dJbmRleCA+PSAwID8gaXRlbS5xdWFudGl0eSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgIG1pbjogMSwKICAgICAgICBuYW1lOiAiY29kZSIsCiAgICAgICAgaWQ6ICJjb2RlIiwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvbkNoYW5nZVF1YW50aXR5KGV2ZW50LCBpbmRleCk7CiAgICAgICAgfSwKICAgICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgICAgdmFsdWU6IGl0ZW0ucXVhbnRpdHkKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNYXNrZWRJbnB1dCwgewogICAgICAgIG1hc2s6IGN1cnJlbmN5TWFzaywKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvbkNoYW5nZVByaWNlKGV2ZW50LCBpbmRleCk7CiAgICAgICAgfSwKICAgICAgICB2YWx1ZTogdHlwZW9mIHByb2R1Y3RMaXN0W2luZGV4XS5wcmljZSAhPT0gJ251bWJlcicgPyBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ3ZpLVZOJywgewogICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeScsCiAgICAgICAgICBjdXJyZW5jeTogJ1ZORCcKICAgICAgICB9KS5mb3JtYXQocHJvZHVjdExpc3RbaW5kZXhdLnByaWNlKSA6IHByb2R1Y3RMaXN0W2luZGV4XS5wcmljZSwKICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyZWYsIHByb3BzKSB7CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCBfZXh0ZW5kcyh7CiAgICAgICAgICAgIGlubmVyUmVmOiByZWYKICAgICAgICAgIH0sIHByb3BzKSk7CiAgICAgICAgfQogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgd2lkdGg6IDEwMAogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgICAgbWluOiAxLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uQ2hhbmdlUmVkdWNlUGVyY2VudChldmVudCwgaW5kZXgpOwogICAgICAgIH0sCiAgICAgICAgdmFsdWU6IGl0ZW0ucmVkdWNlUGVyY2VudAogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgd2lkdGg6IDEwMAogICAgICAgIH0KICAgICAgfSwgKGl0ZW0ucHJpY2UgKiBpdGVtLnF1YW50aXR5IC0gaXRlbS5wcmljZSAqIGl0ZW0ucXVhbnRpdHkgKiBpdGVtLnJlZHVjZVBlcmNlbnQgLyAxMDApLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgICBzdHlsZTogJ2N1cnJlbmN5JywKICAgICAgICBjdXJyZW5jeTogJ1ZORCcKICAgICAgfSkgfHwgJycpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHdpZHRoOiAxMDAKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICBzaXplOiAic20iLAogICAgICAgIGNsYXNzTmFtZTogIm1yLTMiLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICByZXR1cm4gb25SZW1vdmVQcm9kdWN0KGluZGV4KTsKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgICAgbmFtZTogImNpbFhDaXJjbGUiCiAgICAgIH0pKSkpOwogICAgfSkpKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkVGl0bGUsIG51bGwsICJUaFx4RjRuZyB0aW4ga2hceEUxYyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNCIsCiAgICAgIHNtOiAiNSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAidXNlck5hbWUiCiAgICB9LCAiR2hpIGNoXHhGQSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDVGV4dGFyZWEsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAibm90ZSIsCiAgICAgIGlkOiAibm90ZSIsCiAgICAgIHBsYWNlaG9sZGVyOiAiIiwKICAgICAgYXV0b0NvbXBsZXRlOiAiYWRkcmVzcyIsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5ub3RlCiAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNCIsCiAgICAgIHNtOiAiNSIsCiAgICAgIGNsYXNzTmFtZTogIm1sLWF1dG8iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWJsZSwgewogICAgICBjbGFzc05hbWU6ICJ0YWJsZS1jbGVhciIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgY2xhc3NOYW1lOiAibGVmdCIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAiVFx1MUVENW5nIHNcdTFFRDEgbFx1MDFCMFx1MUVFM25nIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgfSwgcHJvZHVjdExpc3QucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGN1cnJlbnQpIHsKICAgICAgcmV0dXJuIHN1bSArIE51bWJlcihjdXJyZW50LnF1YW50aXR5KTsKICAgIH0sIDApIHx8ICcnKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgY2xhc3NOYW1lOiAibGVmdCIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAiQ1x1MUVEOW5nIHRpXHUxRUMxbiBoXHhFMG5nIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgfSwgcHJvZHVjdExpc3QucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGN1cnJlbnQpIHsKICAgICAgcmV0dXJuIHN1bSArIGN1cnJlbnQucHJpY2UgKiBjdXJyZW50LnF1YW50aXR5OwogICAgfSwgMCkudG9Mb2NhbGVTdHJpbmcoJ2l0LUlUJywgewogICAgICBzdHlsZTogJ2N1cnJlbmN5JywKICAgICAgY3VycmVuY3k6ICdWTkQnCiAgICB9KSB8fCAnJykpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImxlZnQiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIlRcdTFFRDVuZyB0aVx1MUVDMW4gY2hpXHUxRUJGdCBraFx1MUVBNXUiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgY2xhc3NOYW1lOiAicmlnaHQiCiAgICB9LCBwcm9kdWN0TGlzdC5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgY3VycmVudCkgewogICAgICByZXR1cm4gc3VtICsgY3VycmVudC5wcmljZSAqIGN1cnJlbnQucXVhbnRpdHkgKiBjdXJyZW50LnJlZHVjZVBlcmNlbnQgLyAxMDA7CiAgICB9LCAwKS50b0xvY2FsZVN0cmluZygnaXQtSVQnLCB7CiAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICBjdXJyZW5jeTogJ1ZORCcKICAgIH0pIHx8ICcnKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgY2xhc3NOYW1lOiAibGVmdCIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAiVFx1MUVENW5nIHRpXHUxRUMxbiB0aGFuaCB0b1x4RTFuIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgfSwgcHJvZHVjdExpc3QucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGN1cnJlbnQpIHsKICAgICAgcmV0dXJuIHN1bSArIChjdXJyZW50LnByaWNlICogY3VycmVudC5xdWFudGl0eSAtIGN1cnJlbnQucHJpY2UgKiBjdXJyZW50LnF1YW50aXR5ICogY3VycmVudC5yZWR1Y2VQZXJjZW50IC8gMTAwKTsKICAgIH0sIDApLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgc3R5bGU6ICdjdXJyZW5jeScsCiAgICAgIGN1cnJlbmN5OiAnVk5EJwogICAgfSkgfHwgJycpKSkpKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICBjbGFzc05hbWU6ICJkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgIHNpemU6ICJsZyIsCiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIGRpc2FibGVkOiBpbml0aWFsU3RhdGUubG9hZGluZwogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogImNpbC1zYXZlIgogICAgfSksICIgIiwgaW5pdGlhbFN0YXRlLmxvYWRpbmcgPyAnxJBhbmcgeOG7rSBsw70nIDogJ1ThuqFvIG3hu5tpJyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInJlc2V0IiwKICAgICAgc2l6ZTogImxnIiwKICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICBvbkNsaWNrOiBoYW5kbGVSZXNldCwKICAgICAgY2xhc3NOYW1lOiAibWwtNSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICJjaWwtYmFuIgogICAgfSksICIgWFx4RjNhIG5oXHUxRUFEcCBsaVx1MUVDN3UiKSkpOwogIH0pKTsKfTsKCmV4cG9ydCBkZWZhdWx0IENyZWF0ZVdhcmVob3VzZTs="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Import/create-warehouse-return.js"],"names":["React","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CTextarea","CFormGroup","CLabel","CInput","CRow","CSelect","CCardTitle","CIcon","Formik","Yup","useDispatch","useSelector","creatingWarehouseImport","Toaster","current","useHistory","fetching","Select","FormFeedback","Table","globalizedWarehouseSelectors","getWarehouse","globalizedProductSelectors","getProduct","WarehouseImportType","globalizedCustomerSelectors","getCustomer","currencyMask","MaskedInput","confirmAlert","validationSchema","values","console","log","object","shape","store","required","customer","validate","getValidationSchema","validateSync","abortEarly","error","getErrorsFromValidationError","mappingStatus","ACTIVE","INACTIVE","DELETED","validationError","FIRST_ERROR","inner","reduce","errors","path","findFirstError","formName","hasError","form","document","forms","i","length","name","focus","validateForm","fieldName","Boolean","CreateWarehouse","state","warehouseImport","initialState","customerInitialState","authentication","account","selectAllWarehouse","selectAll","selectAllProduct","selectAllCustomer","dispatch","history","selectedWarehouse","setSelectedWarehouse","isSelectedWarehouse","setIsSelectedWarehouse","productList","setProductList","selectedCustomer","setSelectedCustomer","warehouses","products","customers","initialValues","note","onSelectWarehouse","value","department","JSON","stringify","id","onSubmit","setSubmitting","setErrors","setStatus","resetForm","storeInputDetails","totalMoney","sum","price","quantity","type","RETURN","onSelectCustomer","onChangeQuantity","index","target","copyArr","onRemoveProduct","splice","onChangePrice","parse","Number","replace","onSelectedProduct","arr","filter","item","product","onChangeReducePercent","reducePercent","priceTotal","onAddProduct","data","updatingSuccess","goBack","editAlert","title","message","buttons","label","onClick","touched","status","dirty","handleChange","handleBlur","handleSubmit","setFieldValue","isSubmitting","isValid","handleReset","setTouched","map","tel","address","code","branch","city","district","width","event","body","productBrand","volume","unit","followIndex","Intl","NumberFormat","style","currency","format","ref","props","toLocaleString","loading"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CTextarea,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CSelect,\n  CCardTitle\n} from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { creatingWarehouseImport } from './warehouse-import.api';\n\nimport Toaster from '../../../components/notifications/toaster/Toaster';\nimport { current } from '@reduxjs/toolkit';\nimport { useHistory } from 'react-router-dom';\nimport { fetching } from './warehouse-import.reducer';\nimport Select from 'react-select';\nimport { FormFeedback, Table } from 'reactstrap';\nimport { globalizedWarehouseSelectors } from '../Warehouse/warehouse.reducer';\nimport { getWarehouse } from '../Warehouse/warehouse.api';\nimport { globalizedProductSelectors } from '../../product/ProductList/product.reducer';\nimport { getProduct } from '../../product/ProductList/product.api';\nimport { WarehouseImportType } from './contants';\nimport { globalizedCustomerSelectors } from '../../customer/customer.reducer';\nimport { getCustomer } from '../../customer/customer.api';\nimport { currencyMask } from '../../../components/currency-input/currency-input';\nimport MaskedInput from 'react-text-mask';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\n\nconst validationSchema = function(values) {\n  console.log(values);\n  return Yup.object().shape({\n    store: Yup.object().required('Kho không để trống'),\n    customer: Yup.object().required('Khách hàng không để trống')\n  });\n};\n\nconst validate = getValidationSchema => {\n  return values => {\n    const validationSchema = getValidationSchema(values);\n    try {\n      validationSchema.validateSync(values, { abortEarly: false });\n      return {};\n    } catch (error) {\n      return getErrorsFromValidationError(error);\n    }\n  };\n};\n\nexport const mappingStatus = {\n  ACTIVE: 'ĐANG HOẠT ĐỘNG',\n  INACTIVE: 'KHÔNG HOẠT ĐỘNG',\n  DELETED: 'ĐÃ XÓA'\n};\n\nconst getErrorsFromValidationError = validationError => {\n  const FIRST_ERROR = 0;\n  return validationError.inner.reduce((errors, error) => {\n    return {\n      ...errors,\n      [error.path]: error.errors[FIRST_ERROR]\n    };\n  }, {});\n};\n\nconst findFirstError = (formName, hasError) => {\n  const form = document.forms[formName];\n  for (let i = 0; i < form.length; i++) {\n    if (hasError(form[i].name)) {\n      form[i].focus();\n      break;\n    }\n  }\n};\n\nconst validateForm = errors => {\n  findFirstError('simpleForm', fieldName => {\n    return Boolean(errors[fieldName]);\n  });\n};\n\nconst CreateWarehouse = () => {\n  const { initialState } = useSelector(state => state.warehouseImport);\n  const { initialState: customerInitialState } = useSelector(state => state.customer);\n  const { account } = useSelector(state => state.authentication);\n\n  const { selectAll: selectAllWarehouse } = globalizedWarehouseSelectors;\n  const { selectAll: selectAllProduct } = globalizedProductSelectors;\n  const { selectAll: selectAllCustomer } = globalizedCustomerSelectors;\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [selectedWarehouse, setSelectedWarehouse] = useState(null);\n  const [isSelectedWarehouse, setIsSelectedWarehouse] = useState(true);\n  const [productList, setProductList] = useState([]);\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\n\n  const warehouses = useSelector(selectAllWarehouse);\n  const products = useSelector(selectAllProduct);\n  const customers = useSelector(selectAllCustomer);\n\n  const initialValues = {\n    note: ''\n  };\n  const onSelectWarehouse = value => {\n    setSelectedWarehouse(value);\n    setIsSelectedWarehouse(true);\n  };\n\n  useEffect(() => {\n    dispatch(getWarehouse({ department: JSON.stringify([account.department?.id || '']) }));\n    dispatch(getProduct());\n    dispatch(getCustomer());\n  }, []);\n\n  const onSubmit = (values, { setSubmitting, setErrors, setStatus, resetForm }) => () => {\n    values.storeInputDetails = productList;\n    values.totalMoney = productList.reduce((sum, current) => sum + current.price * current.quantity, 0);\n    values.type = WarehouseImportType.RETURN;\n    dispatch(fetching());\n    dispatch(creatingWarehouseImport(values));\n  };\n\n  const onSelectCustomer = ({ value }) => {\n    setSelectedCustomer(value);\n  };\n\n  const onChangeQuantity = ({ target }, index) => {\n    const copyArr = [...productList];\n    copyArr[index].quantity = target.value;\n    setProductList(copyArr);\n  };\n\n  const onRemoveProduct = index => {\n    const copyArr = [...productList];\n    copyArr.splice(index, 1);\n    setProductList(copyArr);\n  };\n\n  const onChangePrice = ({ target }, index) => {\n    const copyArr = JSON.parse(JSON.stringify(productList));\n    copyArr[index].price = Number(target.value.replace(/\\D/g, ''));\n    setProductList(copyArr);\n  };\n\n  const onSelectedProduct = ({ value }, index) => {\n    const arr = productList.filter(item => item.product.id === value.id);\n    if (arr.length === 0) {\n      const copyArr = [...productList];\n      copyArr[index].product = value;\n      copyArr[index].quantity = 1;\n      copyArr[index].price = Number(value.price);\n      setProductList(copyArr);\n    }\n  };\n\n  const onChangeReducePercent = ({ target }, index) => {\n    const copyArr = [...productList];\n    copyArr[index].reducePercent = target.value;\n    copyArr[index].priceTotal =\n      copyArr[index].price * copyArr[index].quantity -\n      (copyArr[index].price * copyArr[index].quantity * copyArr[index].reducePercent) / 100;\n    setProductList(copyArr);\n  };\n\n  const onAddProduct = () => {\n    const data = { product: {}, quantity: 1, reducePercent: 0 };\n    setProductList([...productList, data]);\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  const editAlert = (values, { setSubmitting, setErrors }) => {\n    confirmAlert({\n      title: 'Xác nhận',\n      message: 'Bạn có chắc chắn muốn tạo phiếu này?',\n      buttons: [\n        {\n          label: 'Đồng ý',\n          onClick: onSubmit(values, { setSubmitting, setErrors })\n        },\n        {\n          label: 'Hủy'\n        }\n      ]\n    });\n  };\n\n  return (\n    <CCard>\n      <Formik initialValues={initialValues} validate={validate(validationSchema)} onSubmit={editAlert}>\n        {({\n          values,\n          errors,\n          touched,\n          status,\n          dirty,\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          setFieldValue,\n          isSubmitting,\n          isValid,\n          handleReset,\n          setTouched\n        }) => (\n          <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n            <CCard className=\"card-accent-info\">\n              <CCardHeader>\n                <CCardTitle>Kho hàng</CCardTitle>\n              </CCardHeader>\n              <CCardBody>\n                <CRow className=\"mb-3\">\n                  <CCol sm={4}>\n                    <CLabel htmlFor=\"lastName\">Chọn Kho</CLabel>\n                    <Select\n                      name=\"store\"\n                      onChange={item => {\n                        setFieldValue('store', item.value);\n                        onSelectWarehouse(item.value);\n                      }}\n                      options={warehouses.map(item => ({\n                        value: item,\n                        label: `${item.name}`\n                      }))}\n                    />\n                    <FormFeedback className=\"d-block\">{errors.store}</FormFeedback>\n                  </CCol>\n                </CRow>\n                <CRow>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Tên kho:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Số điện thoại:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.tel}</dd>\n                    </dl>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Chi nhánh:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.department?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Địa chỉ:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.address}</dd>\n                    </dl>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n            <CCard className=\"card-accent-primary\">\n              <CCardHeader>\n                <CCardTitle>Thông tin khách hàng</CCardTitle>\n              </CCardHeader>\n\n              <CCardBody>\n                <CFormGroup>\n                  <CRow className=\"mb-3\">\n                    <CCol sm={8}>\n                      <CLabel htmlFor=\"lastName\">Chọn khách hàng</CLabel>\n                      <Select\n                        name=\"customer\"\n                        onChange={item => {\n                          setFieldValue('customer', item.value);\n                          onSelectCustomer(item);\n                        }}\n                        options={customers.map(item => ({\n                          value: item,\n                          label: `[${item.code}] ${item.name} ${item.address}`\n                        }))}\n                      />\n                    </CCol>\n                  </CRow>\n                  <FormFeedback className=\"d-block\">{errors.customer}</FormFeedback>\n                </CFormGroup>\n\n                <CRow>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Mã khách hàng:</dt>\n                      <dd className=\"col-sm-9\">{selectedCustomer?.code}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Họ tên:</dt>\n                      <dd className=\"col-sm-9\">{selectedCustomer?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Số điện thoại:</dt>\n                      <dd className=\"col-sm-9\">{selectedCustomer?.tel}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Chi nhánh:</dt>\n                      <dd className=\"col-sm-9\">{selectedCustomer?.branch?.name}</dd>\n                    </dl>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Địa chỉ:</dt>\n                      <dd className=\"col-sm-9\">{selectedCustomer?.address}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Thành phố:</dt>\n                      <dd className=\"col-sm-9\">{selectedCustomer?.city?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Quận huyện:</dt>\n                      <dd className=\"col-sm-9\">{selectedCustomer?.district?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Loại khách hàng: </dt>\n                      <dd className=\"col-sm-9\">{selectedCustomer?.type?.name}</dd>\n                    </dl>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n\n            <CButton color=\"primary\" variant=\"outline\" shape=\"square\" size=\"sm\" className=\"ml-3 mb-3\" onClick={onAddProduct}>\n              <CIcon name={'cilArrowCircleRight'} className=\"mr-2\" />\n              Thêm sản phẩm\n            </CButton>\n            <CCard>\n              <CCardBody>\n                <Table responsive striped>\n                  <thead>\n                    <tr>\n                      <th>Sản phẩm</th>\n                      <th>Đơn vị</th>\n                      <th>Dung tích</th>\n                      <th>Số lượng</th>\n                      <th>Giá</th>\n                      <th>Chiết khấu</th>\n                      <th>Thành tiền</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {productList.map((item, index) => {\n                      return (\n                        <tr key={index}>\n                          <td style={{ width: 500 }}>\n                            <Select\n                              value={{\n                                value: item,\n                                label: item?.product?.name\n                              }}\n                              onChange={event => onSelectedProduct(event, index)}\n                              menuPortalTarget={document.body}\n                              options={products.map(item => ({\n                                value: item,\n                                label: `${item?.productBrand?.name}-${item?.name}-${item?.volume}`\n                              }))}\n                            />\n                          </td>\n                          <td>{item?.product?.unit}</td>\n                          <td>{item?.product?.volume}</td>\n                          <td style={{ width: 100 }}>\n                            {item.followIndex >= 0 ? (\n                              item.quantity\n                            ) : (\n                              <CInput\n                                type=\"number\"\n                                min={1}\n                                name=\"code\"\n                                id=\"code\"\n                                onChange={event => onChangeQuantity(event, index)}\n                                onBlur={handleBlur}\n                                value={item.quantity}\n                              />\n                            )}\n                          </td>\n                          <td>\n                            {\n                              <MaskedInput\n                                mask={currencyMask}\n                                onChange={event => onChangePrice(event, index)}\n                                value={\n                                  typeof productList[index].price !== 'number'\n                                    ? new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(\n                                        productList[index].price\n                                      )\n                                    : productList[index].price\n                                }\n                                render={(ref, props) => <CInput innerRef={ref} {...props} />}\n                              />\n                            }\n                          </td>\n                          <td style={{ width: 100 }}>\n                            <CInput\n                              type=\"number\"\n                              min={1}\n                              onChange={event => onChangeReducePercent(event, index)}\n                              value={item.reducePercent}\n                            />\n                          </td>\n                          <td style={{ width: 100 }}>\n                            {(item.price * item.quantity - (item.price * item.quantity * item.reducePercent) / 100).toLocaleString(\n                              'it-IT',\n                              {\n                                style: 'currency',\n                                currency: 'VND'\n                              }\n                            ) || ''}\n                          </td>\n                          <td style={{ width: 100 }}>\n                            <CButton\n                              color=\"danger\"\n                              variant=\"outline\"\n                              shape=\"square\"\n                              size=\"sm\"\n                              className=\"mr-3\"\n                              onClick={() => onRemoveProduct(index)}\n                            >\n                              <CIcon name=\"cilXCircle\" />\n                            </CButton>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </Table>\n              </CCardBody>\n            </CCard>\n            <CCard>\n              <CCardHeader>\n                <CCardTitle>Thông tin khác</CCardTitle>\n              </CCardHeader>\n              <CCardBody>\n                <CRow>\n                  <CCol lg=\"4\" sm=\"5\">\n                    <CFormGroup>\n                      <CLabel htmlFor=\"userName\">Ghi chú</CLabel>\n                      <CTextarea\n                        type=\"text\"\n                        name=\"note\"\n                        id=\"note\"\n                        placeholder=\"\"\n                        autoComplete=\"address\"\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.note}\n                      />\n                    </CFormGroup>\n                  </CCol>\n                  <CCol lg=\"4\" sm=\"5\" className=\"ml-auto\">\n                    <Table className=\"table-clear\">\n                      <tbody>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Tổng số lượng</strong>\n                          </td>\n                          <td className=\"right\">{productList.reduce((sum, current) => sum + Number(current.quantity), 0) || ''}</td>\n                        </tr>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Cộng tiền hàng</strong>\n                          </td>\n                          <td className=\"right\">\n                            {productList\n                              .reduce((sum, current) => sum + current.price * current.quantity, 0)\n                              .toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                          </td>\n                        </tr>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Tổng tiền chiết khấu</strong>\n                          </td>\n                          <td className=\"right\">\n                            {productList\n                              .reduce((sum, current) => sum + (current.price * current.quantity * current.reducePercent) / 100, 0)\n                              .toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                          </td>\n                        </tr>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Tổng tiền thanh toán</strong>\n                          </td>\n                          <td className=\"right\">\n                            {productList\n                              .reduce(\n                                (sum, current) =>\n                                  sum +\n                                  (current.price * current.quantity - (current.price * current.quantity * current.reducePercent) / 100),\n                                0\n                              )\n                              .toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                          </td>\n                        </tr>\n                      </tbody>\n                    </Table>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n            <CFormGroup className=\"d-flex justify-content-center\">\n              <CButton type=\"submit\" size=\"lg\" color=\"primary\" disabled={initialState.loading}>\n                <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Tạo mới'}\n              </CButton>\n              <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={handleReset} className=\"ml-5\">\n                <CIcon name=\"cil-ban\" /> Xóa nhập liệu\n              </CButton>\n            </CFormGroup>\n          </CForm>\n        )}\n      </Formik>\n    </CCard>\n  );\n};\n\nexport default CreateWarehouse;\n"]}]}