{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/EditLongTermPromotion.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/EditLongTermPromotion.js","mtime":1624680107533},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBDQnV0dG9uLCBDQ2FyZCwgQ0NhcmRIZWFkZXIsIENDYXJkQm9keSwgQ0NvbCwgQ0Zvcm0sIENJbnZhbGlkRmVlZGJhY2ssIENGb3JtR3JvdXAsIENMYWJlbCwgQ0lucHV0LCBDUm93LCBDU2VsZWN0LCBDQ2FyZFRpdGxlLCBDVGV4dGFyZWEsIENJbnB1dENoZWNrYm94IH0gZnJvbSAnQGNvcmV1aS9yZWFjdC9saWInOwppbXBvcnQgQ0ljb24gZnJvbSAnQGNvcmV1aS9pY29ucy1yZWFjdC9saWIvQ0ljb24nOwo7CmltcG9ydCB7IEZvcm1payB9IGZyb20gJ2Zvcm1payc7CmltcG9ydCAqIGFzIFl1cCBmcm9tICd5dXAnOwppbXBvcnQgeyB1c2VEaXNwYXRjaCwgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCB7IGdldERldGFpbFByb21vdGlvbiwgdXBkYXRlUHJvbW90aW9uIH0gZnJvbSAnLi9wcm9tb3Rpb24uYXBpJzsKaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgeyBmZXRjaGluZywgZ2xvYmFsaXplZFByb21vdGlvblNlbGVjdG9ycyB9IGZyb20gJy4vcHJvbW90aW9uLnJlZHVjZXInOwppbXBvcnQgeyBnZXRDdXN0b21lclR5cGUgfSBmcm9tICcuLi8uLi9jdXN0b21lci9DdXN0b21lclR5cGUvY3VzdG9tZXItdHlwZS5hcGknOwppbXBvcnQgeyBnbG9iYWxpemVkY3VzdG9tZXJUeXBlU2VsZWN0b3JzIH0gZnJvbSAnLi4vLi4vY3VzdG9tZXIvQ3VzdG9tZXJUeXBlL2N1c3RvbWVyLXR5cGUucmVkdWNlcic7CmltcG9ydCBTZWxlY3QgZnJvbSAncmVhY3Qtc2VsZWN0JzsKaW1wb3J0IHsgZ2xvYmFsaXplZHByb2R1Y3RHcm91cHNTZWxlY3RvcnMgfSBmcm9tICcuLi8uLi9wcm9kdWN0L1Byb2R1Y3RHcm91cC9wcm9kdWN0LWdyb3VwLnJlZHVjZXInOwppbXBvcnQgeyBnZXRQcm9kdWN0R3JvdXAgfSBmcm9tICcuLi8uLi9wcm9kdWN0L1Byb2R1Y3RHcm91cC9wcm9kdWN0LWdyb3VwLmFwaSc7Cgp2YXIgdmFsaWRhdGlvblNjaGVtYSA9IGZ1bmN0aW9uIHZhbGlkYXRpb25TY2hlbWEoKSB7CiAgcmV0dXJuIFl1cC5vYmplY3QoKS5zaGFwZSh7CiAgICBuYW1lOiBZdXAuc3RyaW5nKCkubWluKDUsICJUXHhFQW4gcGhcdTFFQTNpIGxcdTFFREJuIGhcdTAxQTFuIDUga1x4RUQgdFx1MUVGMSIpLnJlcXVpcmVkKCdUw6puIGtow7RuZyDEkeG7gyB0cuG7kW5nJyksCiAgICBzdGFydFRpbWU6IFl1cC5zdHJpbmcoKS5yZXF1aXJlZCgnTmfDoHkgYuG6r3QgxJHhuqd1IGtow7RuZyDEkeG7gyB0cuG7kW5nJyksCiAgICBlbmRUaW1lOiBZdXAuc3RyaW5nKCkucmVxdWlyZWQoJ05nw6B5IGvhur90IHRow7pjIGtow7RuZyDEkeG7gyB0cuG7kW5nJykKICB9KTsKfTsKCmltcG9ydCB7IHZhbGlkYXRlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL3V0aWxzL25vcm1hbGl6ZSc7CmltcG9ydCB7IGJsb2NrSW52YWxpZENoYXIgfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvdXRpbHMvaGVscGVyJzsKdmFyIHNlbGVjdEFsbCA9IGdsb2JhbGl6ZWRjdXN0b21lclR5cGVTZWxlY3RvcnMuc2VsZWN0QWxsOwp2YXIgc2VsZWN0QWxsUHJvZHVjdEdyb3VwID0gZ2xvYmFsaXplZHByb2R1Y3RHcm91cHNTZWxlY3RvcnMuc2VsZWN0QWxsOwp2YXIgc2VsZWN0QnlJZCA9IGdsb2JhbGl6ZWRQcm9tb3Rpb25TZWxlY3RvcnMuc2VsZWN0QnlJZDsKCnZhciBFZGl0UHJvbW90aW9uID0gZnVuY3Rpb24gRWRpdFByb21vdGlvbihwcm9wcykgewogIHZhciBfdXNlU2VsZWN0b3IgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5wcm9tb3Rpb247CiAgfSksCiAgICAgIGluaXRpYWxTdGF0ZSA9IF91c2VTZWxlY3Rvci5pbml0aWFsU3RhdGU7CgogIHZhciBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7CiAgdmFyIGhpc3RvcnkgPSB1c2VIaXN0b3J5KCk7CiAgdmFyIHByb21vdGlvbkdyb3VwID0gW107CiAgdmFyIGluaXRpYWxWYWx1ZXMgPSB1c2VSZWYoewogICAgbmFtZTogJycsCiAgICBkZXNjcmlwdGlvbjogJycsCiAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgIGVuZFRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgIGlzTG9jazogZmFsc2UsCiAgICBjdXN0b21lclR5cGU6IG51bGwKICB9KTsKICB2YXIgY3VzdG9tZXJUeXBlID0gdXNlU2VsZWN0b3Ioc2VsZWN0QWxsKTsKICB2YXIgcHJvZHVjdEdyb3VwcyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbFByb2R1Y3RHcm91cCk7CiAgdmFyIHByb21vdGlvbiA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHNlbGVjdEJ5SWQoc3RhdGUsIHByb3BzLm1hdGNoLnBhcmFtcy5pZCk7CiAgfSk7CgogIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShudWxsKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGluaXRWYWx1ZXMgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRJbml0VmFsdWVzID0gX3VzZVN0YXRlMlsxXTsKCiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoKGdldEN1c3RvbWVyVHlwZSh7CiAgICAgIHBhZ2U6IDAsCiAgICAgIHNpemU6IDIwLAogICAgICBzb3J0OiAnY3JlYXRlZERhdGUsREVTQycsCiAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgIH0pKTsKICAgIGRpc3BhdGNoKGdldFByb2R1Y3RHcm91cCh7CiAgICAgIHBhZ2U6IDAsCiAgICAgIHNpemU6IDIwLAogICAgICBzb3J0OiAnY3JlYXRlZERhdGUsREVTQycsCiAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgIH0pKTsKICAgIGRpc3BhdGNoKGdldERldGFpbFByb21vdGlvbih7CiAgICAgIGlkOiBwcm9wcy5tYXRjaC5wYXJhbXMuaWQsCiAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgIH0pKTsKICB9LCBbXSk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChwcm9tb3Rpb24pIHsKICAgICAgc2V0SW5pdFZhbHVlcyhwcm9tb3Rpb24pOwogICAgICBzZXRQcm9tb3Rpb25JdGVtTGlzdChwcm9tb3Rpb24ucHJvbW90aW9uSXRlbXMpOwogICAgfQogIH0sIFtwcm9tb3Rpb25dKTsKCiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShbXSksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgcHJvbW90aW9uSXRlbUxpc3QgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRQcm9tb3Rpb25JdGVtTGlzdCA9IF91c2VTdGF0ZTRbMV07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoY3VzdG9tZXJUeXBlLmxlbmd0aCA+IDApIHsKICAgICAgaW5pdGlhbFZhbHVlcy5jdXJyZW50LmN1c3RvbWVyVHlwZSA9IGN1c3RvbWVyVHlwZVswXS5pZDsKICAgIH0KICB9LCBbY3VzdG9tZXJUeXBlXSk7CgogIHZhciBvbkFkZFByb2R1Y3QgPSBmdW5jdGlvbiBvbkFkZFByb2R1Y3QoKSB7CiAgICB2YXIgZGF0YSA9IHsKICAgICAgbmFtZTogJycsCiAgICAgIHRvdGFsTW9uZXk6IDAsCiAgICAgIHJlZHVjZVBlcmNlbnQ6IDAsCiAgICAgIHByb2R1Y3RHcm91cDoge30KICAgIH07CiAgICBzZXRQcm9tb3Rpb25JdGVtTGlzdChbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHByb21vdGlvbkl0ZW1MaXN0KSwgW2RhdGFdKSk7CiAgfTsKCiAgdmFyIG9uU2VsZWN0ZWRQcm9kdWN0ID0gZnVuY3Rpb24gb25TZWxlY3RlZFByb2R1Y3QoaXRlbSwgaW5kZXgpIHsKICAgIHZhciBjb3B5QXJyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwcm9tb3Rpb25JdGVtTGlzdCkpOwogICAgY29weUFycltpbmRleF0ucHJvZHVjdEdyb3VwID0gewogICAgICBpZDogaXRlbS52YWx1ZQogICAgfTsKICAgIHNldFByb21vdGlvbkl0ZW1MaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24gPSBmdW5jdGlvbiBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24odmFsdWUsIGluZGV4LCB0eXBlKSB7CiAgICB2YXIgY29weUFyciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocHJvbW90aW9uSXRlbUxpc3QpKTsKICAgIGNvcHlBcnJbaW5kZXhdW3R5cGVdID0gdmFsdWU7CiAgICBzZXRQcm9tb3Rpb25JdGVtTGlzdChjb3B5QXJyKTsKICB9OwoKICB2YXIgb25TdWJtaXQgPSBmdW5jdGlvbiBvblN1Ym1pdCh2YWx1ZXMsIF9yZWYpIHsKICAgIHZhciByZXNldEZvcm0gPSBfcmVmLnJlc2V0Rm9ybTsKICAgIGRpc3BhdGNoKGZldGNoaW5nKCkpOwogICAgdmFsdWVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZXMpKTsKICAgIGlmICghdmFsdWVzLmN1c3RvbWVyVHlwZSkgdmFsdWVzLmN1c3RvbWVyVHlwZSA9IGluaXRpYWxWYWx1ZXMuY3VycmVudC5jdXN0b21lclR5cGU7CiAgICB2YWx1ZXMucHJvbW90aW9uSXRlbXMgPSBwcm9tb3Rpb25JdGVtTGlzdDsKICAgIGRpc3BhdGNoKHVwZGF0ZVByb21vdGlvbih2YWx1ZXMpKTsKICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGluaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3MpIHsKICAgICAgaGlzdG9yeS5nb0JhY2soKTsKICAgIH0KICB9LCBbaW5pdGlhbFN0YXRlLnVwZGF0aW5nU3VjY2Vzc10pOwogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIHsKICAgIGNsYXNzOiAiY2FyZC1oZWFkZXIiCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRUaXRsZSwgbnVsbCwgIkNoXHUxRUM5bmggc1x1MUVFRGEgY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCBkXHhFMGkgaFx1MUVBMW4iKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkQm9keSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWlrLCB7CiAgICBpbml0aWFsVmFsdWVzOiBpbml0VmFsdWVzIHx8IGluaXRpYWxWYWx1ZXMuY3VycmVudCwKICAgIGVuYWJsZVJlaW5pdGlhbGl6ZTogdHJ1ZSwKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSh2YWxpZGF0aW9uU2NoZW1hKSwKICAgIG9uU3VibWl0OiBvblN1Ym1pdAogIH0sIGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIF9lcnJvcnMkbmFtZSwgX3ZhbHVlcyRjdXN0b21lclR5cGU7CgogICAgdmFyIHZhbHVlcyA9IF9yZWYyLnZhbHVlcywKICAgICAgICBlcnJvcnMgPSBfcmVmMi5lcnJvcnMsCiAgICAgICAgdG91Y2hlZCA9IF9yZWYyLnRvdWNoZWQsCiAgICAgICAgaGFuZGxlQ2hhbmdlID0gX3JlZjIuaGFuZGxlQ2hhbmdlLAogICAgICAgIGhhbmRsZUJsdXIgPSBfcmVmMi5oYW5kbGVCbHVyLAogICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYyLmhhbmRsZVN1Ym1pdCwKICAgICAgICBzZXRGaWVsZFZhbHVlID0gX3JlZjIuc2V0RmllbGRWYWx1ZSwKICAgICAgICBoYW5kbGVSZXNldCA9IF9yZWYyLmhhbmRsZVJlc2V0OwogICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtLCB7CiAgICAgIG9uU3VibWl0OiBoYW5kbGVTdWJtaXQsCiAgICAgIG5vVmFsaWRhdGU6IHRydWUsCiAgICAgIG5hbWU6ICJzaW1wbGVGb3JtIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjYiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogImxhc3ROYW1lIgogICAgfSwgIlRceEVBbiBjaFx1MDFCMFx1MDFBMW5nIHRyXHhFQ25oIGJceEUxbiBoXHhFMG5nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICB0eXBlOiAidGV4dCIsCiAgICAgIG5hbWU6ICJuYW1lIiwKICAgICAgaWQ6ICJuYW1lIiwKICAgICAgcGxhY2Vob2xkZXI6ICJUXHhFQW4gY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCBiXHhFMW4gaFx4RTBuZyIsCiAgICAgIGF1dG9Db21wbGV0ZTogIm5hbWUiLAogICAgICB2YWxpZDogKGVycm9ycyA9PT0gbnVsbCB8fCBlcnJvcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZXJyb3JzJG5hbWUgPSBlcnJvcnMubmFtZSkgPT09IG51bGwgfHwgX2Vycm9ycyRuYW1lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3JzJG5hbWUubGVuZ3RoKSA+IDUgfHwgbnVsbCwKICAgICAgaW52YWxpZDogZXJyb3JzLm5hbWUsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgIHZhbHVlOiB2YWx1ZXMubmFtZQogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIG51bGwsIGVycm9ycy5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAidXNlck5hbWUiCiAgICB9LCAiTVx4RjQgdFx1MUVBMyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDVGV4dGFyZWEsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAiZGVzY3JpcHRpb24iLAogICAgICBpZDogImRlc2NyaXB0aW9uIiwKICAgICAgcGxhY2Vob2xkZXI6ICJNXHhGNCB0XHUxRUEzIiwKICAgICAgYXV0b0NvbXBsZXRlOiAiZGVzY3JpcHRpb24iLAogICAgICB2YWxpZDogZXJyb3JzLmRlc2NyaXB0aW9uIHx8IG51bGwsCiAgICAgIGludmFsaWQ6IHRvdWNoZWQuZGVzY3JpcHRpb24gJiYgISFlcnJvcnMuZGVzY3JpcHRpb24sCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5kZXNjcmlwdGlvbgogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIG51bGwsIGVycm9ycy5kZXNjcmlwdGlvbikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogImN1c3RvbWVyVHlwZSIKICAgIH0sICJcdTAxMTBcdTFFRDFpIHRcdTAxQjBcdTFFRTNuZyBraFx4RTFjaCBoXHhFMG5nIFx4RTFwIGRcdTFFRTVuZyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDU2VsZWN0LCB7CiAgICAgIGN1c3RvbTogdHJ1ZSwKICAgICAgbmFtZTogImN1c3RvbWVyVHlwZSIsCiAgICAgIGlkOiAiY3VzdG9tZXJUeXBlIiwKICAgICAgdmFsdWU6IChfdmFsdWVzJGN1c3RvbWVyVHlwZSA9IHZhbHVlcy5jdXN0b21lclR5cGUpID09PSBudWxsIHx8IF92YWx1ZXMkY3VzdG9tZXJUeXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWVzJGN1c3RvbWVyVHlwZS5pZCwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICBzZXRGaWVsZFZhbHVlKCdjdXN0b21lclR5cGUnLCBlLnRhcmdldC52YWx1ZSk7CiAgICAgIH0KICAgIH0sIGN1c3RvbWVyVHlwZSAmJiBjdXN0b21lclR5cGUubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgib3B0aW9uIiwgewogICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICB2YWx1ZTogaXRlbS5pZAogICAgICB9LCBpdGVtLm5hbWUpOwogICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCBudWxsLCBlcnJvcnMuY3VzdG9tZXJUeXBlKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICB9LCAiVGhcdTFFRERpIGdpYW4gYlx1MUVBRnQgXHUwMTExXHUxRUE3dSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogImRhdGUiLAogICAgICBpZDogInN0YXJ0VGltZSIsCiAgICAgIG5hbWU6ICJzdGFydFRpbWUiLAogICAgICBkZWZhdWx0VmFsdWU6IHZhbHVlcy5zdGFydFRpbWUuc3BsaXQoJ1QnKVswXSwKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgcGxhY2Vob2xkZXI6ICJUaFx1MUVERGkgZ2lhbiBiXHUxRUFGdCBcdTAxMTFcdTFFQTd1IgogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgIH0sIGVycm9ycy5zdGFydFRpbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgIH0sICJUaFx1MUVERGkgZ2lhbiBrXHUxRUJGdCB0aFx4RkFjIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICB0eXBlOiAiZGF0ZSIsCiAgICAgIGlkOiAiZW5kVGltZSIsCiAgICAgIG5hbWU6ICJlbmRUaW1lIiwKICAgICAgZGVmYXVsdFZhbHVlOiB2YWx1ZXMuZW5kVGltZS5zcGxpdCgnVCcpWzBdLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBwbGFjZWhvbGRlcjogIlRoXHUxRUREaSBnaWFuIGtcdTFFQkZ0IHRoXHhGQWMiCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLmVuZFRpbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICB2YXJpYW50OiAiY3VzdG9tLWNoZWNrYm94IiwKICAgICAgY2xhc3NOYW1lOiAicGItMyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dENoZWNrYm94LCB7CiAgICAgIGN1c3RvbTogdHJ1ZSwKICAgICAgaWQ6ICJpc0xvY2siLAogICAgICBuYW1lOiAiaXNMb2NrIiwKICAgICAgdmFsaWQ6ICFlcnJvcnMuaXNMb2NrLAogICAgICBpbnZhbGlkOiB0b3VjaGVkLmlzTG9jayAmJiAhIWVycm9ycy5pc0xvY2ssCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1cgogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICB2YXJpYW50OiAiY3VzdG9tLWNoZWNrYm94IiwKICAgICAgaHRtbEZvcjogImlzTG9jayIKICAgIH0sICJLaFx4RjNhIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmgiKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgc2hhcGU6ICJzcXVhcmUiLAogICAgICBzaXplOiAic20iLAogICAgICBjbGFzc05hbWU6ICJtbC0zIiwKICAgICAgb25DbGljazogb25BZGRQcm9kdWN0CiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICBuYW1lOiAnY2lsQXJyb3dDaXJjbGVSaWdodCcsCiAgICAgIGNsYXNzTmFtZTogIm1yLTIiCiAgICB9KSwgIlRoXHhFQW0gZG9hbmggc1x1MUVEMSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiMTIiCiAgICB9LCBwcm9tb3Rpb25JdGVtTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgIHZhciBfaXRlbSRwcm9kdWN0R3JvdXAsIF9pdGVtJHByb2R1Y3RHcm91cDI7CgogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICAgIGtleTogaW5kZXgsCiAgICAgICAgY2xhc3NOYW1lOiAibXQtMyIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICAgIGxnOiAiMyIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgICAgaHRtbEZvcjogInBhc3N3b3JkIgogICAgICB9LCAiVFx4RUFuIGRvYW5oIHNcdTFFRDEiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgICAgdHlwZTogInRleHQiLAogICAgICAgIG5hbWU6ICJuYW1lIiwKICAgICAgICBpZDogIm5hbWUiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiVFx4RUFuIGRvYW5oIHNcdTFFRDEiLAogICAgICAgIGF1dG9Db21wbGV0ZTogIm5hbWUiLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uQ2hhbmdlUHJvZHVjdFByb21vdGlvbihldmVudC50YXJnZXQudmFsdWUsIGluZGV4LCAnbmFtZScpOwogICAgICAgIH0sCiAgICAgICAgaW52YWxpZDogIXByb21vdGlvbkl0ZW1MaXN0W2luZGV4XS5uYW1lLAogICAgICAgIHZhbGlkOiBwcm9tb3Rpb25JdGVtTGlzdFtpbmRleF0ubmFtZSwKICAgICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgICAgdmFsdWU6IHByb21vdGlvbkl0ZW1MaXN0W2luZGV4XS5uYW1lCiAgICAgIH0pLCAhcHJvbW90aW9uSXRlbUxpc3RbaW5kZXhdLm5hbWUgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICAgIH0sICJUXHhFQW4ga2hceEY0bmcgXHUwMTExXHUxRUMzIHRyXHUxRUQxbmciKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICBsZzogIjMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgICAgfSwgIk1cdTFFRTljIGRvYW5oIHRodShcdTAxMTFcdTAxQTFuIHZcdTFFQ0I6IHRyaVx1MUVDN3UgXHUwMTExXHUxRUQzbmcpIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgIG5hbWU6ICJ0b3RhbE1vbmV5IiwKICAgICAgICBpZDogInRvdGFsTW9uZXkiLAogICAgICAgIG1pbjogMCwKICAgICAgICBvbktleURvd246IGJsb2NrSW52YWxpZENoYXIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJNXHUxRUU5YyBkb2FuaCB0aHUiLAogICAgICAgIGF1dG9Db21wbGV0ZTogInRvdGFsTW9uZXkiLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uQ2hhbmdlUHJvZHVjdFByb21vdGlvbihldmVudC50YXJnZXQudmFsdWUsIGluZGV4LCAndG90YWxNb25leScpOwogICAgICAgIH0sCiAgICAgICAgaW52YWxpZDogIXByb21vdGlvbkl0ZW1MaXN0W2luZGV4XS50b3RhbE1vbmV5LAogICAgICAgIHZhbGlkOiBwcm9tb3Rpb25JdGVtTGlzdFtpbmRleF0udG90YWxNb25leSwKICAgICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgICAgdmFsdWU6IHByb21vdGlvbkl0ZW1MaXN0W2luZGV4XS50b3RhbE1vbmV5CiAgICAgIH0pLCAhcHJvbW90aW9uSXRlbUxpc3RbaW5kZXhdLnRvdGFsTW9uZXkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICAgIH0sICJHaVx4RTEgdHJcdTFFQ0IgcGhcdTFFQTNpIGxcdTFFREJuIGhcdTAxQTFuIDAiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICBsZzogIjMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgICAgfSwgIkNoaVx1MUVCRnQga2hcdTFFQTV1KFx1MDExMVx1MDFBMW4gdlx1MUVDQjogJSkiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgICAgbmFtZTogInJlZHVjZVBlcmNlbnQiLAogICAgICAgIGlkOiAicmVkdWNlUGVyY2VudCIsCiAgICAgICAgbWluOiAwLAogICAgICAgIHBsYWNlaG9sZGVyOiAiQ2hpXHUxRUJGdCBraFx1MUVBNXUiLAogICAgICAgIGF1dG9Db21wbGV0ZTogInJlZHVjZVBlcmNlbnQiLAogICAgICAgIG9uS2V5RG93bjogYmxvY2tJbnZhbGlkQ2hhciwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24oZXZlbnQudGFyZ2V0LnZhbHVlLCBpbmRleCwgJ3JlZHVjZVBlcmNlbnQnKTsKICAgICAgICB9LAogICAgICAgIGludmFsaWQ6IHByb21vdGlvbkl0ZW1MaXN0W2luZGV4XS5yZWR1Y2VQZXJjZW50IDwgMCwKICAgICAgICB2YWxpZDogcHJvbW90aW9uSXRlbUxpc3RbaW5kZXhdLnJlZHVjZVBlcmNlbnQsCiAgICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICAgIHZhbHVlOiBwcm9tb3Rpb25JdGVtTGlzdFtpbmRleF0ucmVkdWNlUGVyY2VudAogICAgICB9KSwgcHJvbW90aW9uSXRlbUxpc3RbaW5kZXhdLnJlZHVjZVBlcmNlbnQgPCAwICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgICB9LCAiR2lceEUxIHRyXHUxRUNCIHBoXHUxRUEzaSBsXHUxRURCbiBoXHUwMUExbiBob1x1MUVCN2MgYlx1MUVCMW5nIDAiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICBsZzogIjMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgICAgfSwgIk5oXHhGM20gc1x1MUVBM24gcGhcdTFFQTltIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICAgIGRlZmF1bHRWYWx1ZTogewogICAgICAgICAgdmFsdWU6IChfaXRlbSRwcm9kdWN0R3JvdXAgPSBpdGVtLnByb2R1Y3RHcm91cCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdEdyb3VwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0R3JvdXAuaWQsCiAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KChfaXRlbSRwcm9kdWN0R3JvdXAyID0gaXRlbS5wcm9kdWN0R3JvdXApID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3RHcm91cDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3RHcm91cDIubmFtZSkKICAgICAgICB9LAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uU2VsZWN0ZWRQcm9kdWN0KGV2ZW50LCBpbmRleCk7CiAgICAgICAgfSwKICAgICAgICBvcHRpb25zOiBwcm9kdWN0R3JvdXBzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWQsCiAgICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQoaXRlbS5uYW1lKQogICAgICAgICAgfTsKICAgICAgICB9KQogICAgICB9KSkpKTsKICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIHsKICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXIiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIHR5cGU6ICJzdWJtaXQiLAogICAgICBzaXplOiAibGciLAogICAgICBjb2xvcjogInByaW1hcnkiLAogICAgICBkaXNhYmxlZDogaW5pdGlhbFN0YXRlLmxvYWRpbmcKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICJjaWwtc2F2ZSIKICAgIH0pLCAiICIsIGluaXRpYWxTdGF0ZS5sb2FkaW5nID8gJ8SQYW5nIHjhu60gbMO9JyA6ICdMxrB1IGzhuqFpJyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInJlc2V0IiwKICAgICAgc2l6ZTogImxnIiwKICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICBvbkNsaWNrOiBoYW5kbGVSZXNldCwKICAgICAgY2xhc3NOYW1lOiAibWwtNSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICJjaWwtYmFuIgogICAgfSksICIgWFx4RjNhIG5oXHUxRUFEcCBsaVx1MUVDN3UiKSkpOwogIH0pKSk7Cn07CgpleHBvcnQgZGVmYXVsdCBFZGl0UHJvbW90aW9uOw=="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/EditLongTermPromotion.js"],"names":["React","useEffect","useRef","useState","useCallback","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CInvalidFeedback","CFormGroup","CLabel","CInput","CRow","CSelect","CCardTitle","CTextarea","CInputCheckbox","CIcon","Formik","Yup","useDispatch","useSelector","getDetailPromotion","updatePromotion","useHistory","fetching","globalizedPromotionSelectors","getCustomerType","globalizedcustomerTypeSelectors","Select","globalizedproductGroupsSelectors","getProductGroup","validationSchema","object","shape","name","string","min","required","startTime","endTime","validate","blockInvalidChar","selectAll","selectAllProductGroup","selectById","EditPromotion","props","state","promotion","initialState","dispatch","history","promotionGroup","initialValues","description","Date","toISOString","isLock","customerType","productGroups","match","params","id","initValues","setInitValues","page","size","sort","dependency","setPromotionItemList","promotionItems","promotionItemList","length","current","onAddProduct","data","totalMoney","reducePercent","productGroup","onSelectedProduct","item","index","copyArr","JSON","parse","stringify","value","onChangeProductPromotion","type","onSubmit","values","resetForm","updatingSuccess","goBack","errors","touched","handleChange","handleBlur","handleSubmit","setFieldValue","handleReset","e","target","map","split","event","label","loading"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,MAA1B,EAAkCC,QAAlC,EAA4CC,WAA5C,QAA8D,OAA9D;AACA,SACEC,OADF,EAEEC,KAFF,EAGEC,WAHF,EAIEC,SAJF,EAKEC,IALF,EAMEC,KANF,EAOEC,gBAPF,EAQEC,UARF,EASEC,MATF,EAUEC,MAVF,EAWEC,IAXF,EAYEC,OAZF,EAaEC,UAbF,EAcEC,SAdF,EAeEC,cAfF,QAgBO,mBAhBP;AAiBA,OAAOC,KAAP,MAAkB,+BAAlB;AAAkD;AAClD,SAAQC,MAAR,QAAqB,QAArB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,kBAAR,EAA4BC,eAA5B,QAAkD,iBAAlD;AAGA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,QAAR,EAAkBC,4BAAlB,QAAqD,qBAArD;AAGA,SAAQC,eAAR,QAA8B,+CAA9B;AACA,SAAQC,+BAAR,QAA8C,mDAA9C;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,SAAQC,gCAAR,QAA+C,kDAA/C;AACA,SAAQC,eAAR,QAA8B,8CAA9B;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAW;AAClC,SAAOb,GAAG,CAACc,MAAJ,GAAaC,KAAb,CAAmB;AACxBC,IAAAA,IAAI,EAAEhB,GAAG,CAACiB,MAAJ,GACDC,GADC,CACG,CADH,wDAEDC,QAFC,CAEQ,oBAFR,CADkB;AAIxBC,IAAAA,SAAS,EAAEpB,GAAG,CAACiB,MAAJ,GAAaE,QAAb,CAAsB,6BAAtB,CAJa;AAKxBE,IAAAA,OAAO,EAAErB,GAAG,CAACiB,MAAJ,GAAaE,QAAb,CAAsB,8BAAtB;AALe,GAAnB,CAAP;AAOD,CARD;;AAUA,SAAQG,QAAR,QAAuB,oCAAvB;AACA,SAASC,gBAAT,QAAiC,iCAAjC;IACOC,S,GAAaf,+B,CAAbe,S;IACWC,qB,GAAyBd,gC,CAApCa,S;IACAE,U,GAAcnB,4B,CAAdmB,U;;AAEP,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAW;AAAA,qBACR1B,WAAW,CAAC,UAAC2B,KAAD;AAAA,WAAWA,KAAK,CAACC,SAAjB;AAAA,GAAD,CADH;AAAA,MACxBC,YADwB,gBACxBA,YADwB;;AAG/B,MAAMC,QAAQ,GAAG/B,WAAW,EAA5B;AACA,MAAMgC,OAAO,GAAG5B,UAAU,EAA1B;AACA,MAAM6B,cAAc,GAAG,EAAvB;AACA,MAAMC,aAAa,GAAGvD,MAAM,CAAC;AAC3BoC,IAAAA,IAAI,EAAE,EADqB;AAE3BoB,IAAAA,WAAW,EAAE,EAFc;AAG3BhB,IAAAA,SAAS,EAAE,IAAIiB,IAAJ,GAAWC,WAAX,EAHgB;AAI3BjB,IAAAA,OAAO,EAAE,IAAIgB,IAAJ,GAAWC,WAAX,EAJkB;AAK3BC,IAAAA,MAAM,EAAE,KALmB;AAM3BC,IAAAA,YAAY,EAAE;AANa,GAAD,CAA5B;AAUA,MAAMA,YAAY,GAAGtC,WAAW,CAACsB,SAAD,CAAhC;AACA,MAAMiB,aAAa,GAAGvC,WAAW,CAACuB,qBAAD,CAAjC;AACA,MAAMK,SAAS,GAAG5B,WAAW,CAAC,UAAC2B,KAAD;AAAA,WAAWH,UAAU,CAACG,KAAD,EAAQD,KAAK,CAACc,KAAN,CAAYC,MAAZ,CAAmBC,EAA3B,CAArB;AAAA,GAAD,CAA7B;;AAlB+B,kBAmBK/D,QAAQ,CAAC,IAAD,CAnBb;AAAA;AAAA,MAmBxBgE,UAnBwB;AAAA,MAmBZC,aAnBY;;AAqB/BnE,EAAAA,SAAS,CAAC,YAAM;AACdqD,IAAAA,QAAQ,CAACxB,eAAe,CAAC;AAAEuC,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,IAAI,EAAE,EAAjB;AAAqBC,MAAAA,IAAI,EAAE,kBAA3B;AAA+CC,MAAAA,UAAU,EAAE;AAA3D,KAAD,CAAhB,CAAR;AACAlB,IAAAA,QAAQ,CAACpB,eAAe,CAAC;AAAEmC,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,IAAI,EAAE,EAAjB;AAAqBC,MAAAA,IAAI,EAAE,kBAA3B;AAA+CC,MAAAA,UAAU,EAAE;AAA3D,KAAD,CAAhB,CAAR;AACAlB,IAAAA,QAAQ,CAAC7B,kBAAkB,CAAC;AAAEyC,MAAAA,EAAE,EAAEhB,KAAK,CAACc,KAAN,CAAYC,MAAZ,CAAmBC,EAAzB;AAA6BM,MAAAA,UAAU,EAAE;AAAzC,KAAD,CAAnB,CAAR;AACD,GAJQ,EAIN,EAJM,CAAT;AAMAvE,EAAAA,SAAS,CAAC,YAAM;AACd,QAAImD,SAAJ,EAAe;AACbgB,MAAAA,aAAa,CAAChB,SAAD,CAAb;AACAqB,MAAAA,oBAAoB,CAACrB,SAAS,CAACsB,cAAX,CAApB;AACD;AACF,GALQ,EAKN,CAACtB,SAAD,CALM,CAAT;;AA3B+B,mBAkCmBjD,QAAQ,CAAC,EAAD,CAlC3B;AAAA;AAAA,MAkCxBwE,iBAlCwB;AAAA,MAkCLF,oBAlCK;;AAoC/BxE,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI6D,YAAY,CAACc,MAAb,GAAsB,CAA1B,EAA6B;AAC3BnB,MAAAA,aAAa,CAACoB,OAAd,CAAsBf,YAAtB,GAAqCA,YAAY,CAAC,CAAD,CAAZ,CAAgBI,EAArD;AACD;AACF,GAJQ,EAIN,CAACJ,YAAD,CAJM,CAAT;;AAMA,MAAMgB,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAMC,IAAI,GAAG;AAACzC,MAAAA,IAAI,EAAE,EAAP;AAAW0C,MAAAA,UAAU,EAAE,CAAvB;AAA0BC,MAAAA,aAAa,EAAE,CAAzC;AAA4CC,MAAAA,YAAY,EAAE;AAA1D,KAAb;AACAT,IAAAA,oBAAoB,8BAAKE,iBAAL,IAAwBI,IAAxB,GAApB;AACD,GAHD;;AAKA,MAAMI,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,IAAD,EAAOC,KAAP,EAAiB;AACzC,QAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAed,iBAAf,CAAX,CAAhB;AACAW,IAAAA,OAAO,CAACD,KAAD,CAAP,CAAeH,YAAf,GAA8B;AAAChB,MAAAA,EAAE,EAAEkB,IAAI,CAACM;AAAV,KAA9B;AACAjB,IAAAA,oBAAoB,CAACa,OAAD,CAApB;AACD,GAJD;;AAMA,MAAMK,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACD,KAAD,EAAQL,KAAR,EAAeO,IAAf,EAAwB;AACvD,QAAMN,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAed,iBAAf,CAAX,CAAhB;AACAW,IAAAA,OAAO,CAACD,KAAD,CAAP,CAAeO,IAAf,IAAuBF,KAAvB;AACAjB,IAAAA,oBAAoB,CAACa,OAAD,CAApB;AACD,GAJD;;AAMA,MAAMO,QAAQ,GAAG,SAAXA,QAAW,CAACC,MAAD,QAAyB;AAAA,QAAfC,SAAe,QAAfA,SAAe;AACxCzC,IAAAA,QAAQ,CAAC1B,QAAQ,EAAT,CAAR;AACAkE,IAAAA,MAAM,GAAGP,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeK,MAAf,CAAX,CAAT;AACA,QAAI,CAACA,MAAM,CAAChC,YAAZ,EAA0BgC,MAAM,CAAChC,YAAP,GAAsBL,aAAa,CAACoB,OAAd,CAAsBf,YAA5C;AAC1BgC,IAAAA,MAAM,CAACpB,cAAP,GAAwBC,iBAAxB;AACArB,IAAAA,QAAQ,CAAC5B,eAAe,CAACoE,MAAD,CAAhB,CAAR;AACD,GAND;;AAQA7F,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIoD,YAAY,CAAC2C,eAAjB,EAAkC;AAChCzC,MAAAA,OAAO,CAAC0C,MAAR;AACD;AACF,GAJQ,EAIN,CAAC5C,YAAY,CAAC2C,eAAd,CAJM,CAAT;AAMA,sBACE,oBAAC,KAAD,qBACE,oBAAC,WAAD;AAAa,IAAA,KAAK,EAAC;AAAnB,kBACE,oBAAC,UAAD,wEADF,CADF,eAIE,oBAAC,SAAD,qBACE,oBAAC,MAAD;AACE,IAAA,aAAa,EAAE7B,UAAU,IAAIV,aAAa,CAACoB,OAD7C;AAEE,IAAA,kBAAkB,MAFpB;AAGE,IAAA,QAAQ,EAAEjC,QAAQ,CAACT,gBAAD,CAHpB;AAIE,IAAA,QAAQ,EAAE0D;AAJZ,KAMG,iBAcK;AAAA;;AAAA,QAbJC,MAaI,SAbJA,MAaI;AAAA,QAZJI,MAYI,SAZJA,MAYI;AAAA,QAXJC,OAWI,SAXJA,OAWI;AAAA,QARJC,YAQI,SARJA,YAQI;AAAA,QAPJC,UAOI,SAPJA,UAOI;AAAA,QANJC,YAMI,SANJA,YAMI;AAAA,QALJC,aAKI,SALJA,aAKI;AAAA,QAFJC,WAEI,SAFJA,WAEI;AACJ,wBACE,oBAAC,KAAD;AAAO,MAAA,QAAQ,EAAEF,YAAjB;AAA+B,MAAA,UAAU,MAAzC;AAA0C,MAAA,IAAI,EAAC;AAA/C,oBACE,oBAAC,IAAD,qBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC;AAAT,oBACE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,yDADF,eAEE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,EAAE,EAAC,MAHL;AAIE,MAAA,WAAW,EAAC,iDAJd;AAKE,MAAA,YAAY,EAAC,MALf;AAME,MAAA,KAAK,EAAE,CAAAJ,MAAM,SAAN,IAAAA,MAAM,WAAN,4BAAAA,MAAM,CAAE5D,IAAR,8DAAcsC,MAAd,IAAuB,CAAvB,IAA4B,IANrC;AAOE,MAAA,OAAO,EAAEsB,MAAM,CAAC5D,IAPlB;AAQE,MAAA,QAAQ,MARV;AASE,MAAA,QAAQ,EAAE8D,YATZ;AAUE,MAAA,MAAM,EAAEC,UAVV;AAWE,MAAA,KAAK,EAAEP,MAAM,CAACxD;AAXhB,MAFF,eAeE,oBAAC,gBAAD,QAAmB4D,MAAM,CAAC5D,IAA1B,CAfF,CADF,eAkBE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,uBADF,eAEE,oBAAC,SAAD;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,aAFP;AAGE,MAAA,EAAE,EAAC,aAHL;AAIE,MAAA,WAAW,EAAC,eAJd;AAKE,MAAA,YAAY,EAAC,aALf;AAME,MAAA,KAAK,EAAE4D,MAAM,CAACxC,WAAP,IAAsB,IAN/B;AAOE,MAAA,OAAO,EAAEyC,OAAO,CAACzC,WAAR,IAAuB,CAAC,CAACwC,MAAM,CAACxC,WAP3C;AAQE,MAAA,QAAQ,EAAE0C,YARZ;AASE,MAAA,MAAM,EAAEC,UATV;AAUE,MAAA,KAAK,EAAEP,MAAM,CAACpC;AAVhB,MAFF,eAcE,oBAAC,gBAAD,QAAmBwC,MAAM,CAACxC,WAA1B,CAdF,CAlBF,eAkCE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,wEADF,eAEE,oBAAC,OAAD;AACE,MAAA,MAAM,MADR;AAEE,MAAA,IAAI,EAAC,cAFP;AAGE,MAAA,EAAE,EAAC,cAHL;AAIE,MAAA,KAAK,0BAAEoC,MAAM,CAAChC,YAAT,yDAAE,qBAAqBI,EAJ9B;AAKE,MAAA,QAAQ,EAAE,kBAACuC,CAAD,EAAO;AACfF,QAAAA,aAAa,CAAC,cAAD,EAAiBE,CAAC,CAACC,MAAF,CAAShB,KAA1B,CAAb;AACD;AAPH,OASG5B,YAAY,IACXA,YAAY,CAAC6C,GAAb,CAAiB,UAACvB,IAAD;AAAA,0BACf;AAAQ,QAAA,GAAG,EAAEA,IAAI,CAAClB,EAAlB;AAAsB,QAAA,KAAK,EAAEkB,IAAI,CAAClB;AAAlC,SACGkB,IAAI,CAAC9C,IADR,CADe;AAAA,KAAjB,CAVJ,CAFF,eAkBE,oBAAC,gBAAD,QAAmB4D,MAAM,CAACpC,YAA1B,CAlBF,CAlCF,CADF,eAwDE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC;AAAT,oBACE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,+CADF,eAEE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,EAAE,EAAC,WAFL;AAGE,MAAA,IAAI,EAAC,WAHP;AAIE,MAAA,YAAY,EAAEgC,MAAM,CAACpD,SAAP,CAAiBkE,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,CAJhB;AAKE,MAAA,QAAQ,EAAER,YALZ;AAME,MAAA,WAAW,EAAC;AANd,MAFF,eAUE,oBAAC,gBAAD;AAAkB,MAAA,SAAS,EAAC;AAA5B,OAAuCF,MAAM,CAACxD,SAA9C,CAVF,CADF,eAcE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,yCADF,eAEE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,EAAE,EAAC,SAFL;AAGE,MAAA,IAAI,EAAC,SAHP;AAIE,MAAA,YAAY,EAAEoD,MAAM,CAACnD,OAAP,CAAeiE,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAJhB;AAKE,MAAA,QAAQ,EAAER,YALZ;AAME,MAAA,WAAW,EAAC;AANd,MAFF,eAUE,oBAAC,gBAAD;AAAkB,MAAA,SAAS,EAAC;AAA5B,OAAuCF,MAAM,CAACvD,OAA9C,CAVF,CAdF,eA0BE,oBAAC,UAAD;AAAY,MAAA,OAAO,EAAC,iBAApB;AAAsC,MAAA,SAAS,EAAC;AAAhD,oBACE,oBAAC,cAAD;AACE,MAAA,MAAM,MADR;AAEE,MAAA,EAAE,EAAC,QAFL;AAGE,MAAA,IAAI,EAAC,QAHP;AAIE,MAAA,KAAK,EAAE,CAACuD,MAAM,CAACrC,MAJjB;AAKE,MAAA,OAAO,EAAEsC,OAAO,CAACtC,MAAR,IAAkB,CAAC,CAACqC,MAAM,CAACrC,MALtC;AAME,MAAA,QAAQ,EAAEuC,YANZ;AAOE,MAAA,MAAM,EAAEC;AAPV,MADF,eAUE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,iBAAhB;AAAkC,MAAA,OAAO,EAAC;AAA1C,2CAVF,CA1BF,CAxDF,eAiGE,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAC,SAAf;AAAyB,MAAA,OAAO,EAAC,SAAjC;AAA2C,MAAA,KAAK,EAAC,QAAjD;AAA0D,MAAA,IAAI,EAAC,IAA/D;AAAoE,MAAA,SAAS,EAAC,MAA9E;AAAqF,MAAA,OAAO,EAAEvB;AAA9F,oBACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,qBAAb;AAAoC,MAAA,SAAS,EAAC;AAA9C,MADF,0BAjGF,eAqGE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC;AAAT,OACGH,iBAAiB,CAACgC,GAAlB,CAAsB,UAACvB,IAAD,EAAOC,KAAP;AAAA;;AAAA,0BACrB,oBAAC,UAAD;AAAY,QAAA,GAAG,EAAEA,KAAjB;AAAwB,QAAA,SAAS,EAAC;AAAlC,sBACE,oBAAC,IAAD,qBACE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC;AAAT,sBACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC;AAAhB,gCADF,eAEE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,EAAE,EAAC,MAHL;AAIE,QAAA,WAAW,EAAC,sBAJd;AAKE,QAAA,YAAY,EAAC,MALf;AAME,QAAA,QAAQ,EAAE,kBAACwB,KAAD;AAAA,iBAAWlB,wBAAwB,CAACkB,KAAK,CAACH,MAAN,CAAahB,KAAd,EAAqBL,KAArB,EAA4B,MAA5B,CAAnC;AAAA,SANZ;AAOE,QAAA,OAAO,EAAE,CAACV,iBAAiB,CAACU,KAAD,CAAjB,CAAyB/C,IAPrC;AAQE,QAAA,KAAK,EAAEqC,iBAAiB,CAACU,KAAD,CAAjB,CAAyB/C,IARlC;AASE,QAAA,MAAM,EAAE+D,UATV;AAUE,QAAA,KAAK,EAAE1B,iBAAiB,CAACU,KAAD,CAAjB,CAAyB/C;AAVlC,QAFF,EAcG,CAACqC,iBAAiB,CAACU,KAAD,CAAjB,CAAyB/C,IAA1B,iBAAkC,oBAAC,gBAAD;AAAkB,QAAA,SAAS,EAAC;AAA5B,mDAdrC,CADF,eAiBE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC;AAAT,sBACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC;AAAhB,gFADF,eAEE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,IAAI,EAAC,YAFP;AAGE,QAAA,EAAE,EAAC,YAHL;AAIE,QAAA,GAAG,EAAE,CAJP;AAKE,QAAA,SAAS,EAAEO,gBALb;AAME,QAAA,WAAW,EAAC,oBANd;AAOE,QAAA,YAAY,EAAC,YAPf;AAQE,QAAA,QAAQ,EAAE,kBAACgE,KAAD;AAAA,iBAAWlB,wBAAwB,CAACkB,KAAK,CAACH,MAAN,CAAahB,KAAd,EAAqBL,KAArB,EAA4B,YAA5B,CAAnC;AAAA,SARZ;AASE,QAAA,OAAO,EAAE,CAACV,iBAAiB,CAACU,KAAD,CAAjB,CAAyBL,UATrC;AAUE,QAAA,KAAK,EAAEL,iBAAiB,CAACU,KAAD,CAAjB,CAAyBL,UAVlC;AAWE,QAAA,MAAM,EAAEqB,UAXV;AAYE,QAAA,KAAK,EAAE1B,iBAAiB,CAACU,KAAD,CAAjB,CAAyBL;AAZlC,QAFF,EAgBG,CAACL,iBAAiB,CAACU,KAAD,CAAjB,CAAyBL,UAA1B,iBACC,oBAAC,gBAAD;AAAkB,QAAA,SAAS,EAAC;AAA5B,yDAjBJ,CAjBF,eAqCE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC;AAAT,sBACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC;AAAhB,0DADF,eAEE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,IAAI,EAAC,eAFP;AAGE,QAAA,EAAE,EAAC,eAHL;AAIE,QAAA,GAAG,EAAE,CAJP;AAKE,QAAA,WAAW,EAAC,sBALd;AAME,QAAA,YAAY,EAAC,eANf;AAOE,QAAA,SAAS,EAAEnC,gBAPb;AAQE,QAAA,QAAQ,EAAE,kBAACgE,KAAD;AAAA,iBAAWlB,wBAAwB,CAACkB,KAAK,CAACH,MAAN,CAAahB,KAAd,EAAqBL,KAArB,EAA4B,eAA5B,CAAnC;AAAA,SARZ;AASE,QAAA,OAAO,EAAEV,iBAAiB,CAACU,KAAD,CAAjB,CAAyBJ,aAAzB,GAAyC,CATpD;AAUE,QAAA,KAAK,EAAEN,iBAAiB,CAACU,KAAD,CAAjB,CAAyBJ,aAVlC;AAWE,QAAA,MAAM,EAAEoB,UAXV;AAYE,QAAA,KAAK,EAAE1B,iBAAiB,CAACU,KAAD,CAAjB,CAAyBJ;AAZlC,QAFF,EAgBGN,iBAAiB,CAACU,KAAD,CAAjB,CAAyBJ,aAAzB,GAAyC,CAAzC,iBACC,oBAAC,gBAAD;AAAkB,QAAA,SAAS,EAAC;AAA5B,6EAjBJ,CArCF,eAyDE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC;AAAT,sBACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC;AAAhB,sCADF,eAEE,oBAAC,MAAD;AACE,QAAA,YAAY,EAAE;AACZS,UAAAA,KAAK,wBAAEN,IAAI,CAACF,YAAP,uDAAE,mBAAmBhB,EADd;AAEZ4C,UAAAA,KAAK,mCAAK1B,IAAI,CAACF,YAAV,wDAAK,oBAAmB5C,IAAxB;AAFO,SADhB;AAKE,QAAA,QAAQ,EAAE,kBAACuE,KAAD;AAAA,iBAAW1B,iBAAiB,CAAC0B,KAAD,EAAQxB,KAAR,CAA5B;AAAA,SALZ;AAME,QAAA,OAAO,EAAEtB,aAAa,CAAC4C,GAAd,CAAkB,UAACvB,IAAD;AAAA,iBAAW;AACpCM,YAAAA,KAAK,EAAEN,IAAI,CAAClB,EADwB;AAEpC4C,YAAAA,KAAK,YAAK1B,IAAI,CAAC9C,IAAV;AAF+B,WAAX;AAAA,SAAlB;AANX,QAFF,CAzDF,CADF,CADqB;AAAA,KAAtB,CADH,CArGF,CADF,eAqLE,oBAAC,UAAD;AAAY,MAAA,SAAS,EAAC;AAAtB,oBACE,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC,QAAd;AAAuB,MAAA,IAAI,EAAC,IAA5B;AAAiC,MAAA,KAAK,EAAC,SAAvC;AAAiD,MAAA,QAAQ,EAAEe,YAAY,CAAC0D;AAAxE,oBACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC;AAAZ,MADF,OAC6B1D,YAAY,CAAC0D,OAAb,GAAuB,YAAvB,GAAsC,SADnE,CADF,eAIE,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC,OAAd;AAAsB,MAAA,IAAI,EAAC,IAA3B;AAAgC,MAAA,KAAK,EAAC,QAAtC;AAA+C,MAAA,OAAO,EAAEP,WAAxD;AAAqE,MAAA,SAAS,EAAC;AAA/E,oBACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC;AAAZ,MADF,gCAJF,CArLF,CADF;AAgMD,GArNH,CADF,CAJF,CADF;AAgOD,CAzSD;;AA2SA,eAAevD,aAAf","sourcesContent":["import React, {useEffect, useRef, useState, useCallback} from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CInvalidFeedback,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CSelect,\n  CCardTitle,\n  CTextarea,\n  CInputCheckbox,\n} from '@coreui/react/lib';\nimport CIcon from '@coreui/icons-react/lib/CIcon';;\nimport {Formik} from 'formik';\nimport * as Yup from 'yup';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {getDetailPromotion, updatePromotion} from './promotion.api';\n\n\nimport {useHistory} from 'react-router-dom';\nimport {fetching, globalizedPromotionSelectors} from './promotion.reducer';\n\n\nimport {getCustomerType} from '../../customer/CustomerType/customer-type.api';\nimport {globalizedcustomerTypeSelectors} from '../../customer/CustomerType/customer-type.reducer';\nimport Select from 'react-select';\nimport {globalizedproductGroupsSelectors} from '../../product/ProductGroup/product-group.reducer';\nimport {getProductGroup} from '../../product/ProductGroup/product-group.api';\n\nconst validationSchema = function() {\n  return Yup.object().shape({\n    name: Yup.string()\n        .min(5, `Tên phải lớn hơn 5 kí tự`)\n        .required('Tên không để trống'),\n    startTime: Yup.string().required('Ngày bắt đầu không để trống'),\n    endTime: Yup.string().required('Ngày kết thúc không để trống'),\n  });\n};\n\nimport {validate} from '../../../../shared/utils/normalize';\nimport { blockInvalidChar } from '../../../../shared/utils/helper';\nconst {selectAll} = globalizedcustomerTypeSelectors;\nconst {selectAll: selectAllProductGroup} = globalizedproductGroupsSelectors;\nconst {selectById} = globalizedPromotionSelectors;\n\nconst EditPromotion = (props) => {\n  const {initialState} = useSelector((state) => state.promotion);\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const promotionGroup = [];\n  const initialValues = useRef({\n    name: '',\n    description: '',\n    startTime: new Date().toISOString(),\n    endTime: new Date().toISOString(),\n    isLock: false,\n    customerType: null,\n  });\n\n\n  const customerType = useSelector(selectAll);\n  const productGroups = useSelector(selectAllProductGroup);\n  const promotion = useSelector((state) => selectById(state, props.match.params.id));\n  const [initValues, setInitValues] = useState(null);\n\n  useEffect(() => {\n    dispatch(getCustomerType({ page: 0, size: 20, sort: 'createdDate,DESC', dependency: true }));\n    dispatch(getProductGroup({ page: 0, size: 20, sort: 'createdDate,DESC', dependency: true }));\n    dispatch(getDetailPromotion({ id: props.match.params.id, dependency: true }));\n  }, []);\n\n  useEffect(() => {\n    if (promotion) {\n      setInitValues(promotion);\n      setPromotionItemList(promotion.promotionItems);\n    }\n  }, [promotion]);\n\n  const [promotionItemList, setPromotionItemList] = useState([]);\n\n  useEffect(() => {\n    if (customerType.length > 0) {\n      initialValues.current.customerType = customerType[0].id;\n    }\n  }, [customerType]);\n\n  const onAddProduct = () => {\n    const data = {name: '', totalMoney: 0, reducePercent: 0, productGroup: {}};\n    setPromotionItemList([...promotionItemList, data]);\n  };\n\n  const onSelectedProduct = (item, index) => {\n    const copyArr = JSON.parse(JSON.stringify(promotionItemList));\n    copyArr[index].productGroup = {id: item.value};\n    setPromotionItemList(copyArr);\n  };\n\n  const onChangeProductPromotion = (value, index, type) => {\n    const copyArr = JSON.parse(JSON.stringify(promotionItemList));\n    copyArr[index][type] = value;\n    setPromotionItemList(copyArr);\n  };\n\n  const onSubmit = (values, {resetForm}) => {\n    dispatch(fetching());\n    values = JSON.parse(JSON.stringify(values));\n    if (!values.customerType) values.customerType = initialValues.current.customerType;\n    values.promotionItems = promotionItemList;\n    dispatch(updatePromotion(values));\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  return (\n    <CCard>\n      <CCardHeader class=\"card-header\">\n        <CCardTitle>Chỉnh sửa chương trình dài hạn</CCardTitle>\n      </CCardHeader>\n      <CCardBody>\n        <Formik\n          initialValues={initValues || initialValues.current}\n          enableReinitialize\n          validate={validate(validationSchema)}\n          onSubmit={onSubmit}\n        >\n          {({\n            values,\n            errors,\n            touched,\n\n\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue,\n\n\n            handleReset\n            ,\n          }) => {\n            return (\n              <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n                <CRow>\n                  <CCol lg=\"6\">\n                    <CFormGroup>\n                      <CLabel htmlFor=\"lastName\">Tên chương trình bán hàng</CLabel>\n                      <CInput\n                        type=\"text\"\n                        name=\"name\"\n                        id=\"name\"\n                        placeholder=\"Tên chương trình bán hàng\"\n                        autoComplete=\"name\"\n                        valid={errors?.name?.length > 5 || null}\n                        invalid={errors.name}\n                        required\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.name}\n                      />\n                      <CInvalidFeedback>{errors.name}</CInvalidFeedback>\n                    </CFormGroup>\n                    <CFormGroup>\n                      <CLabel htmlFor=\"userName\">Mô tả</CLabel>\n                      <CTextarea\n                        type=\"text\"\n                        name=\"description\"\n                        id=\"description\"\n                        placeholder=\"Mô tả\"\n                        autoComplete=\"description\"\n                        valid={errors.description || null}\n                        invalid={touched.description && !!errors.description}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.description}\n                      />\n                      <CInvalidFeedback>{errors.description}</CInvalidFeedback>\n                    </CFormGroup>\n                    <CFormGroup>\n                      <CLabel htmlFor=\"customerType\">Đối tượng khách hàng áp dụng</CLabel>\n                      <CSelect\n                        custom\n                        name=\"customerType\"\n                        id=\"customerType\"\n                        value={values.customerType?.id}\n                        onChange={(e) => {\n                          setFieldValue('customerType', e.target.value);\n                        }}\n                      >\n                        {customerType &&\n                          customerType.map((item) => (\n                            <option key={item.id} value={item.id}>\n                              {item.name}\n                            </option>\n                          ))}\n                      </CSelect>\n                      <CInvalidFeedback>{errors.customerType}</CInvalidFeedback>\n                    </CFormGroup>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <CFormGroup>\n                      <CLabel htmlFor=\"password\">Thời gian bắt đầu</CLabel>\n                      <CInput\n                        type=\"date\"\n                        id=\"startTime\"\n                        name=\"startTime\"\n                        defaultValue={values.startTime.split('T')[0]}\n                        onChange={handleChange}\n                        placeholder=\"Thời gian bắt đầu\"\n                      />\n                      <CInvalidFeedback className=\"d-block\">{errors.startTime}</CInvalidFeedback>\n                    </CFormGroup>\n\n                    <CFormGroup>\n                      <CLabel htmlFor=\"password\">Thời gian kết thúc</CLabel>\n                      <CInput\n                        type=\"date\"\n                        id=\"endTime\"\n                        name=\"endTime\"\n                        defaultValue={values.endTime.split('T')[0]}\n                        onChange={handleChange}\n                        placeholder=\"Thời gian kết thúc\"\n                      />\n                      <CInvalidFeedback className=\"d-block\">{errors.endTime}</CInvalidFeedback>\n                    </CFormGroup>\n                    <CFormGroup variant=\"custom-checkbox\" className=\"pb-3\">\n                      <CInputCheckbox\n                        custom\n                        id=\"isLock\"\n                        name=\"isLock\"\n                        valid={!errors.isLock}\n                        invalid={touched.isLock && !!errors.isLock}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                      />\n                      <CLabel variant=\"custom-checkbox\" htmlFor=\"isLock\">\n                        Khóa chương trình\n                      </CLabel>\n                    </CFormGroup>\n                  </CCol>\n                  <CButton color=\"primary\" variant=\"outline\" shape=\"square\" size=\"sm\" className=\"ml-3\" onClick={onAddProduct}>\n                    <CIcon name={'cilArrowCircleRight'} className=\"mr-2\" />\n                    Thêm doanh số\n                  </CButton>\n                  <CCol lg=\"12\">\n                    {promotionItemList.map((item, index) => (\n                      <CFormGroup key={index} className=\"mt-3\">\n                        <CRow>\n                          <CCol lg=\"3\">\n                            <CLabel htmlFor=\"password\">Tên doanh số</CLabel>\n                            <CInput\n                              type=\"text\"\n                              name=\"name\"\n                              id=\"name\"\n                              placeholder=\"Tên doanh số\"\n                              autoComplete=\"name\"\n                              onChange={(event) => onChangeProductPromotion(event.target.value, index, 'name')}\n                              invalid={!promotionItemList[index].name}\n                              valid={promotionItemList[index].name}\n                              onBlur={handleBlur}\n                              value={promotionItemList[index].name}\n                            />\n                            {!promotionItemList[index].name && <CInvalidFeedback className=\"d-block\">Tên không để trống</CInvalidFeedback>}\n                          </CCol>\n                          <CCol lg=\"3\">\n                            <CLabel htmlFor=\"password\">Mức doanh thu(đơn vị: triệu đồng)</CLabel>\n                            <CInput\n                              type=\"number\"\n                              name=\"totalMoney\"\n                              id=\"totalMoney\"\n                              min={0}\n                              onKeyDown={blockInvalidChar}\n                              placeholder=\"Mức doanh thu\"\n                              autoComplete=\"totalMoney\"\n                              onChange={(event) => onChangeProductPromotion(event.target.value, index, 'totalMoney')}\n                              invalid={!promotionItemList[index].totalMoney}\n                              valid={promotionItemList[index].totalMoney}\n                              onBlur={handleBlur}\n                              value={promotionItemList[index].totalMoney}\n                            />\n                            {!promotionItemList[index].totalMoney && (\n                              <CInvalidFeedback className=\"d-block\">Giá trị phải lớn hơn 0</CInvalidFeedback>\n                            )}\n                          </CCol>\n                          <CCol lg=\"3\">\n                            <CLabel htmlFor=\"password\">Chiết khấu(đơn vị: %)</CLabel>\n                            <CInput\n                              type=\"number\"\n                              name=\"reducePercent\"\n                              id=\"reducePercent\"\n                              min={0}\n                              placeholder=\"Chiết khấu\"\n                              autoComplete=\"reducePercent\"\n                              onKeyDown={blockInvalidChar}\n                              onChange={(event) => onChangeProductPromotion(event.target.value, index, 'reducePercent')}\n                              invalid={promotionItemList[index].reducePercent < 0}\n                              valid={promotionItemList[index].reducePercent}\n                              onBlur={handleBlur}\n                              value={promotionItemList[index].reducePercent}\n                            />\n                            {promotionItemList[index].reducePercent < 0 && (\n                              <CInvalidFeedback className=\"d-block\">Giá trị phải lớn hơn hoặc bằng 0</CInvalidFeedback>\n                            )}\n                          </CCol>\n                          <CCol lg=\"3\">\n                            <CLabel htmlFor=\"password\">Nhóm sản phẩm</CLabel>\n                            <Select\n                              defaultValue={{\n                                value: item.productGroup?.id,\n                                label: `${item.productGroup?.name}`,\n                              }}\n                              onChange={(event) => onSelectedProduct(event, index)}\n                              options={productGroups.map((item) => ({\n                                value: item.id,\n                                label: `${item.name}`,\n                              }))}\n                            />\n                          </CCol>\n                        </CRow>\n                      </CFormGroup>\n                    ))}\n                  </CCol>\n                </CRow>\n                <CFormGroup className=\"d-flex justify-content-center\">\n                  <CButton type=\"submit\" size=\"lg\" color=\"primary\" disabled={initialState.loading}>\n                    <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Lưu lại'}\n                  </CButton>\n                  <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={handleReset} className=\"ml-5\">\n                    <CIcon name=\"cil-ban\" /> Xóa nhập liệu\n                  </CButton>\n                </CFormGroup>\n              </CForm>\n            );\n          }}\n        </Formik>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default EditPromotion;\n"]}]}