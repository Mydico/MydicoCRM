{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/user/UserPermission/create-permission.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/user/UserPermission/create-permission.js","mtime":1617822485359},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgppbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBDQnV0dG9uLCBDQ2FyZCwgQ0NhcmRIZWFkZXIsIENDYXJkQm9keSwgQ0NvbCwgQ0Zvcm0sIENJbnZhbGlkRmVlZGJhY2ssIENGb3JtR3JvdXAsIENMYWJlbCwgQ0lucHV0LCBDUm93LCBDVG9hc3RlciwgQ0NhcmRUaXRsZSwgQ0lucHV0Q2hlY2tib3gsIENCdXR0b25Hcm91cCwgQ1RleHRhcmVhIH0gZnJvbSAnQGNvcmV1aS9yZWFjdCc7CmltcG9ydCBDSWNvbiBmcm9tICdAY29yZXVpL2ljb25zLXJlYWN0JzsKaW1wb3J0IHsgRm9ybWlrIH0gZnJvbSAnZm9ybWlrJzsKaW1wb3J0ICogYXMgWXVwIGZyb20gJ3l1cCc7CmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgY3JlYXRpbmdQZXJtaXNzaW9uR3JvdXBzLCBnZXRQZXJtaXNzaW9ucywgZ2V0UGVybWlzc2lvblR5cGUgfSBmcm9tICcuL3Blcm1pc3Npb24uYXBpJzsKaW1wb3J0IFRvYXN0ZXIgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9ub3RpZmljYXRpb25zL3RvYXN0ZXIvVG9hc3Rlcic7CmltcG9ydCB7IGN1cnJlbnQgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JzsKaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgeyBmZXRjaGluZywgZ2xvYmFsaXplZFBlcm1pc3Npb25Hcm91cHNTZWxlY3RvcnMsIHJlc2V0IH0gZnJvbSAnLi9wZXJtaXNzaW9uLnJlZHVjZXInOwppbXBvcnQgU2VsZWN0IGZyb20gJ3JlYWN0LXNlbGVjdCc7CmltcG9ydCB7IFRhYmxlIH0gZnJvbSAncmVhY3RzdHJhcCc7Cgp2YXIgdmFsaWRhdGlvblNjaGVtYSA9IGZ1bmN0aW9uIHZhbGlkYXRpb25TY2hlbWEodmFsdWVzKSB7CiAgcmV0dXJuIFl1cC5vYmplY3QoKS5zaGFwZSh7CiAgICBuYW1lOiBZdXAuc3RyaW5nKCkubWluKDUsICJUXHhFQW4gbmhceEYzbSBxdXlcdTFFQzFuIHBoXHUxRUEzaSBsXHUxRURCbiBoXHUwMUExbiA1IGtceEVEIHRcdTFFRjEiKS5yZXF1aXJlZCgnVMOqbiBuaMOzbSBxdXnhu4FuIGtow7RuZyDEkeG7gyB0cuG7kW5nJykKICB9KTsKfTsKCnZhciB2YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKGdldFZhbGlkYXRpb25TY2hlbWEpIHsKICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlcykgewogICAgdmFyIHZhbGlkYXRpb25TY2hlbWEgPSBnZXRWYWxpZGF0aW9uU2NoZW1hKHZhbHVlcyk7CgogICAgdHJ5IHsKICAgICAgdmFsaWRhdGlvblNjaGVtYS52YWxpZGF0ZVN5bmModmFsdWVzLCB7CiAgICAgICAgYWJvcnRFYXJseTogZmFsc2UKICAgICAgfSk7CiAgICAgIHJldHVybiB7fTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIHJldHVybiBnZXRFcnJvcnNGcm9tVmFsaWRhdGlvbkVycm9yKGVycm9yKTsKICAgIH0KICB9Owp9OwoKZXhwb3J0IHZhciBtYXBwaW5nU3RhdHVzID0gewogIEFDVElWRTogJ8SQQU5HIEhP4bqgVCDEkOG7mE5HJywKICBJTkFDVElWRTogJ0tIw5RORyBIT+G6oFQgxJDhu5hORycsCiAgREVMRVRFRDogJ8SQw4MgWMOTQScKfTsKCnZhciBnZXRFcnJvcnNGcm9tVmFsaWRhdGlvbkVycm9yID0gZnVuY3Rpb24gZ2V0RXJyb3JzRnJvbVZhbGlkYXRpb25FcnJvcih2YWxpZGF0aW9uRXJyb3IpIHsKICB2YXIgRklSU1RfRVJST1IgPSAwOwogIHJldHVybiB2YWxpZGF0aW9uRXJyb3IuaW5uZXIucmVkdWNlKGZ1bmN0aW9uIChlcnJvcnMsIGVycm9yKSB7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBlcnJvcnMpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBlcnJvci5wYXRoLCBlcnJvci5lcnJvcnNbRklSU1RfRVJST1JdKSk7CiAgfSwge30pOwp9OwoKdmFyIGZpbmRGaXJzdEVycm9yID0gZnVuY3Rpb24gZmluZEZpcnN0RXJyb3IoZm9ybU5hbWUsIGhhc0Vycm9yKSB7CiAgdmFyIGZvcm0gPSBkb2N1bWVudC5mb3Jtc1tmb3JtTmFtZV07CgogIGZvciAodmFyIGkgPSAwOyBpIDwgZm9ybS5sZW5ndGg7IGkrKykgewogICAgaWYgKGhhc0Vycm9yKGZvcm1baV0ubmFtZSkpIHsKICAgICAgZm9ybVtpXS5mb2N1cygpOwogICAgICBicmVhazsKICAgIH0KICB9Cn07Cgp2YXIgdmFsaWRhdGVGb3JtID0gZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGVycm9ycykgewogIGZpbmRGaXJzdEVycm9yKCdzaW1wbGVGb3JtJywgZnVuY3Rpb24gKGZpZWxkTmFtZSkgewogICAgcmV0dXJuIEJvb2xlYW4oZXJyb3JzW2ZpZWxkTmFtZV0pOwogIH0pOwp9OwoKdmFyIENyZWF0ZVBlcm1pc3Npb25Hcm91cHMgPSBmdW5jdGlvbiBDcmVhdGVQZXJtaXNzaW9uR3JvdXBzKCkgewogIHZhciBfdXNlU2VsZWN0b3IgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5wZXJtaXNzaW9uOwogIH0pLAogICAgICBpbml0aWFsU3RhdGUgPSBfdXNlU2VsZWN0b3IuaW5pdGlhbFN0YXRlOwoKICB2YXIgY2hlY2tib3hSZWYgPSB1c2VSZWYoKTsKICB2YXIgdG9hc3RSZWYgPSB1c2VSZWYoKTsKICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpOwogIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpOwoKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoe30pLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgY2hlY2tib3ggPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRDaGVja2JveCA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoW10pLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIHNlbGVjdGVkUGVybWlzc2lvbiA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldFNlbGVjdGVkUGVybWlzc2lvbiA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBpbml0aWFsVmFsdWVzID0gewogICAgbmFtZTogJycsCiAgICBub3RlOiAnJwogIH07CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoKGdldFBlcm1pc3Npb25UeXBlKCkpOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgZGlzcGF0Y2gocmVzZXQoKSk7CiAgICB9OwogIH0sIFtdKTsKCiAgdmFyIG9uR2V0UGVybWlzc2lvbiA9IGZ1bmN0aW9uIG9uR2V0UGVybWlzc2lvbih2YWx1ZSkgewogICAgdmFyIHBhcmFtcyA9IHsKICAgICAgdHlwZTogdmFsdWUKICAgIH07CiAgICBkaXNwYXRjaChnZXRQZXJtaXNzaW9ucyhwYXJhbXMpKTsKICB9OwoKICB2YXIgb25TdWJtaXQgPSBmdW5jdGlvbiBvblN1Ym1pdCh2YWx1ZXMsIF9yZWYpIHsKICAgIHZhciBzZXRTdWJtaXR0aW5nID0gX3JlZi5zZXRTdWJtaXR0aW5nLAogICAgICAgIHNldEVycm9ycyA9IF9yZWYuc2V0RXJyb3JzLAogICAgICAgIHNldFN0YXR1cyA9IF9yZWYuc2V0U3RhdHVzLAogICAgICAgIHJlc2V0Rm9ybSA9IF9yZWYucmVzZXRGb3JtOwogICAgdmFyIGFyclBlcm1pc3Npb24gPSBbXTsKCiAgICB0cnkgewogICAgICBzZWxlY3RlZFBlcm1pc3Npb24uZm9yRWFjaChmdW5jdGlvbiAoc2VsZWN0UGVyKSB7CiAgICAgICAgaWYgKHNlbGVjdFBlci5wZXJtaXNzaW9ucykgewogICAgICAgICAgYXJyUGVybWlzc2lvbiA9IGFyclBlcm1pc3Npb24uY29uY2F0KHNlbGVjdFBlci5wZXJtaXNzaW9ucyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKGFyclBlcm1pc3Npb24ubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgIGlmIChzZWxlY3RlZFBlcm1pc3Npb24ubWFwKGZ1bmN0aW9uIChwZXJtaXNzaW9uKSB7CiAgICAgICAgcmV0dXJuIHBlcm1pc3Npb24ucGVybWlzc2lvbnM7CiAgICAgIH0pLnJlZHVjZShmdW5jdGlvbiAocHJldiwgY3VycmVudCkgewogICAgICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHByZXYpLCBfdG9Db25zdW1hYmxlQXJyYXkoY3VycmVudCkpOwogICAgICB9LCBbXSkubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgIHZhbHVlcy5wZXJtaXNzaW9ucyA9IGFyclBlcm1pc3Npb247CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgfQoKICAgIGRpc3BhdGNoKGZldGNoaW5nKCkpOwogICAgZGlzcGF0Y2goY3JlYXRpbmdQZXJtaXNzaW9uR3JvdXBzKHZhbHVlcykpOwogICAgcmVzZXRGb3JtKCk7CiAgfTsKCiAgdmFyIG9uQ2hlY2sgPSBmdW5jdGlvbiBvbkNoZWNrKHNldENoZWNrYm94RnVuYywgY2hlY2tib3hWYWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7CiAgICAgIGUucGVyc2lzdCgpOwogICAgICBzZXRDaGVja2JveEZ1bmMoZnVuY3Rpb24gKHByZXZTdGF0ZSkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByZXZTdGF0ZSksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIGUudGFyZ2V0LnZhbHVlLCAhY2hlY2tib3hWYWx1ZVtlLnRhcmdldC52YWx1ZV0pKTsKICAgICAgfSk7CiAgICB9OwogIH07CgogIHZhciBvblNlbGVjdEFsbCA9IGZ1bmN0aW9uIG9uU2VsZWN0QWxsKGNoZWNrZWRWYWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGNvcHlDaGVja2JveCA9IF9vYmplY3RTcHJlYWQoe30sIGNoZWNrYm94KTsKCiAgICAgIE9iamVjdC5rZXlzKGNvcHlDaGVja2JveCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgY29weUNoZWNrYm94W2tleV0gPSBjaGVja2VkVmFsdWU7CiAgICAgIH0pOwogICAgICBzZXRDaGVja2JveChjb3B5Q2hlY2tib3gpOwoKICAgICAgaWYgKGNoZWNrYm94UmVmLmN1cnJlbnQpIHsKICAgICAgICBjaGVja2JveFJlZi5jdXJyZW50LmNoZWNrZWQgPSBjaGVja2VkVmFsdWU7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChjaGVja2JveCAmJiBpbml0aWFsU3RhdGUucGVybWlzc2lvbnMgJiYgQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUucGVybWlzc2lvbnMpICYmIGluaXRpYWxTdGF0ZS5wZXJtaXNzaW9ucy5sZW5ndGggPiAwKSB7CiAgICAgIHZhciBzZWxlY3RlZEFyciA9IFtdOwogICAgICBPYmplY3Qua2V5cyhjaGVja2JveCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKGNoZWNrYm94W2tleV0pIHsKICAgICAgICAgIHNlbGVjdGVkQXJyLnB1c2goa2V5KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBoYW5kbGVTZWxlY3RQZXJtaXNzaW9uKG51bGwsIHNlbGVjdGVkQXJyKTsKICAgIH0KICB9LCBbY2hlY2tib3hdKTsKCiAgdmFyIHJlbW92ZVBlcm1pc3Npb24gPSBmdW5jdGlvbiByZW1vdmVQZXJtaXNzaW9uKGluZGV4KSB7CiAgICB2YXIgYXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHNlbGVjdGVkUGVybWlzc2lvbik7CgogICAgYXJyLnNwbGljZShpbmRleCwgMSk7CiAgICBzZXRTZWxlY3RlZFBlcm1pc3Npb24oYXJyKTsKICB9OwoKICB2YXIgaGFuZGxlU2VsZWN0UGVybWlzc2lvbiA9IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdFBlcm1pc3Npb24oZSwgdmFsdWVzKSB7CiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovCiAgICBpZiAodmFsdWVzICYmIEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkgewogICAgICB2YXIgdHlwZSA9IGluaXRpYWxTdGF0ZS5wZXJtaXNzaW9uc1swXS50eXBlOwogICAgICB2YXIgdHlwZU5hbWUgPSBpbml0aWFsU3RhdGUucGVybWlzc2lvbnNbMF0udHlwZU5hbWU7CiAgICAgIHZhciBmb3VuZGVkSW5kZXggPSBzZWxlY3RlZFBlcm1pc3Npb24uZmluZEluZGV4KGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICByZXR1cm4gcGVyLnR5cGUgPT09IHR5cGU7CiAgICAgIH0pOwoKICAgICAgaWYgKGZvdW5kZWRJbmRleCA+IC0xKSB7CiAgICAgICAgc2VsZWN0ZWRQZXJtaXNzaW9uW2ZvdW5kZWRJbmRleF0ucGVybWlzc2lvbnMgPSBpbml0aWFsU3RhdGUucGVybWlzc2lvbnMuZmlsdGVyKGZ1bmN0aW9uIChwZXJtaXNzaW9uKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWVzLmluY2x1ZGVzKHBlcm1pc3Npb24uaWQpOwogICAgICAgIH0pOwogICAgICAgIHNldFNlbGVjdGVkUGVybWlzc2lvbihfdG9Db25zdW1hYmxlQXJyYXkoc2VsZWN0ZWRQZXJtaXNzaW9uKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHNlbGVjdGVkUGVybWlzc2lvbk9iaiA9IHsKICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICB0eXBlTmFtZTogdHlwZU5hbWUsCiAgICAgICAgICBwZXJtaXNzaW9uczogaW5pdGlhbFN0YXRlLnBlcm1pc3Npb25zLmZpbHRlcihmdW5jdGlvbiAocGVybWlzc2lvbikgewogICAgICAgICAgICByZXR1cm4gdmFsdWVzLmluY2x1ZGVzKHBlcm1pc3Npb24uaWQpOwogICAgICAgICAgfSkKICAgICAgICB9OwogICAgICAgIHNldFNlbGVjdGVkUGVybWlzc2lvbihbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHNlbGVjdGVkUGVybWlzc2lvbiksIFtzZWxlY3RlZFBlcm1pc3Npb25PYmpdKSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodmFsdWVzICYmIEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID09IDApIHsKICAgICAgc2V0U2VsZWN0ZWRQZXJtaXNzaW9uKFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc2VsZWN0ZWRQZXJtaXNzaW9uKSwgW3ZhbHVlc10pKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBhcnIgPSBfdG9Db25zdW1hYmxlQXJyYXkoc2VsZWN0ZWRQZXJtaXNzaW9uKTsKCiAgICAgIHZhciBmaW5kRW1wdHkgPSBhcnIuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucGVybWlzc2lvbnMubGVuZ3RoID09PSAwOwogICAgICB9KTsKICAgICAgaWYgKGZpbmRFbXB0eSA+IC0xKSBhcnIuc3BsaWNlKGZpbmRFbXB0eSwgMSk7CiAgICAgIHNldFNlbGVjdGVkUGVybWlzc2lvbihhcnIpOwogICAgfQogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoaW5pdGlhbFN0YXRlLnBlcm1pc3Npb25zICYmIEFycmF5LmlzQXJyYXkoaW5pdGlhbFN0YXRlLnBlcm1pc3Npb25zKSkgewogICAgICB2YXIgdGVtcFBlciA9IHt9OwogICAgICBpbml0aWFsU3RhdGUucGVybWlzc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAocGVyKSB7CiAgICAgICAgdGVtcFBlcltwZXIuaWRdID0gZmFsc2U7CiAgICAgIH0pOwogICAgICBzZXRDaGVja2JveCh0ZW1wUGVyKTsKICAgIH0KICB9LCBbaW5pdGlhbFN0YXRlLnBlcm1pc3Npb25zXSk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzKSB7CiAgICAgIHRvYXN0UmVmLmN1cnJlbnQuYWRkVG9hc3QoKTsKICAgICAgZGlzcGF0Y2gocmVzZXQoKSk7CiAgICAgIGhpc3RvcnkuZ29CYWNrKCk7CiAgICB9CiAgfSwgW2luaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3NdKTsKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkSGVhZGVyLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZFRpdGxlLCB7CiAgICBjbGFzc05hbWU6ICJjYXJkLXRpdGxlIG1iLTAiCiAgfSwgIlRoXHhFQW0gbVx1MUVEQmkgbmhceEYzbSBxdXlcdTFFQzFuIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1paywgewogICAgaW5pdGlhbFZhbHVlczogaW5pdGlhbFZhbHVlcywKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSh2YWxpZGF0aW9uU2NoZW1hKSwKICAgIG9uU3VibWl0OiBvblN1Ym1pdAogIH0sIGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIHZhbHVlcyA9IF9yZWYyLnZhbHVlcywKICAgICAgICBlcnJvcnMgPSBfcmVmMi5lcnJvcnMsCiAgICAgICAgdG91Y2hlZCA9IF9yZWYyLnRvdWNoZWQsCiAgICAgICAgc3RhdHVzID0gX3JlZjIuc3RhdHVzLAogICAgICAgIGRpcnR5ID0gX3JlZjIuZGlydHksCiAgICAgICAgaGFuZGxlQ2hhbmdlID0gX3JlZjIuaGFuZGxlQ2hhbmdlLAogICAgICAgIGhhbmRsZUJsdXIgPSBfcmVmMi5oYW5kbGVCbHVyLAogICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYyLmhhbmRsZVN1Ym1pdCwKICAgICAgICBzZXRGaWVsZFZhbHVlID0gX3JlZjIuc2V0RmllbGRWYWx1ZSwKICAgICAgICBpc1N1Ym1pdHRpbmcgPSBfcmVmMi5pc1N1Ym1pdHRpbmcsCiAgICAgICAgaXNWYWxpZCA9IF9yZWYyLmlzVmFsaWQsCiAgICAgICAgaGFuZGxlUmVzZXQgPSBfcmVmMi5oYW5kbGVSZXNldCwKICAgICAgICBzZXRUb3VjaGVkID0gX3JlZjIuc2V0VG91Y2hlZDsKICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybSwgewogICAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0LAogICAgICBub1ZhbGlkYXRlOiB0cnVlLAogICAgICBuYW1lOiAic2ltcGxlRm9ybSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICIxMiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAibG9naW4iCiAgICB9LCAiVFx4RUFuIG5oXHhGM20gcXV5XHUxRUMxbiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAibmFtZSIsCiAgICAgIGlkOiAibmFtZSIsCiAgICAgIHBsYWNlaG9sZGVyOiAiVFx4RUFuIG5oXHhGM20gcXV5XHUxRUMxbiIsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5uYW1lCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLm5hbWUpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICIxMiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAidXNlck5hbWUiCiAgICB9LCAiQ2hcdTFFQ0RuIG5oXHhGM20gY2hcdTFFRTljIG5cdTAxMDNuZyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsKICAgICAgbmFtZTogImRlcGFydG1lbnQiLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIG9uR2V0UGVybWlzc2lvbihlLnZhbHVlKTsKICAgICAgfSwKICAgICAgcGxhY2Vob2xkZXI6ICJDaFx1MUVDRG4gbmhceEYzbSBjaFx1MUVFOWMgblx1MDEwM25nIiwKICAgICAgb3B0aW9uczogaW5pdGlhbFN0YXRlLnBlcm1pc3Npb25UeXBlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IGl0ZW0ubmFtZSwKICAgICAgICAgIGxhYmVsOiBpdGVtLmRlc2NyaXB0aW9uCiAgICAgICAgfTsKICAgICAgfSkKICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICIxMiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIHsKICAgICAgY29sdW1uOiB0cnVlCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGNsYXNzTmFtZTogIm1iLTIiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIG51bGwsICJDaFx1MUVFOWMgblx1MDEwM25nIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGNsYXNzTmFtZTogIm1iLTIiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgY29sb3I6ICJzZWNvbmRhcnkiLAogICAgICBvbkNsaWNrOiBvblNlbGVjdEFsbCh0cnVlKQogICAgfSwgIkNoXHUxRUNEbiB0XHUxRUE1dCBjXHUxRUEzIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgY29sb3I6ICJzZWNvbmRhcnkiLAogICAgICBvbkNsaWNrOiBvblNlbGVjdEFsbChmYWxzZSkKICAgIH0sICJCXHUxRUNGIGNoXHUxRUNEbiB0XHUxRUE1dCBjXHUxRUEzIikpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbWQ6ICI5IgogICAgfSwgaW5pdGlhbFN0YXRlLnBlcm1pc3Npb25zICYmIGluaXRpYWxTdGF0ZS5wZXJtaXNzaW9ucy5tYXAoZnVuY3Rpb24gKGVudGl0eSkgewogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICAgIHZhcmlhbnQ6ICJjaGVja2JveCIsCiAgICAgICAgY2xhc3NOYW1lOiAibWItMiIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0Q2hlY2tib3gsIHsKICAgICAgICBjbGFzc05hbWU6ICJmb3JtLWNoZWNrLWlucHV0IiwKICAgICAgICBpZDogZW50aXR5LmlkLAogICAgICAgIGNoZWNrZWQ6IGNoZWNrYm94W2VudGl0eS5pZF0sCiAgICAgICAgb25DaGFuZ2U6IG9uQ2hlY2soc2V0Q2hlY2tib3gsIGNoZWNrYm94KSwKICAgICAgICBuYW1lOiBlbnRpdHkuaWQsCiAgICAgICAgdmFsdWU6IGVudGl0eS5pZAogICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgICAgdmFyaWFudDogImNoZWNrYm94IiwKICAgICAgICBodG1sRm9yOiAicmFkaW8xIgogICAgICB9LCBlbnRpdHkuZGVzY3JpcHRpb24pKTsKICAgIH0pKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWJsZSwgewogICAgICByZXNwb25zaXZlOiB0cnVlCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGhlYWQiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgIGNsYXNzTmFtZTogImhhbmQgdGV4dC1yaWdodCBpbmRleC1jb2x1bW4iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsICJTVFQiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIHsKICAgICAgY2xhc3NOYW1lOiAiaGFuZCB0ZXh0LWxlZnQiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsICJOaFx4RjNtIGNoXHUxRUU5YyBuXHUwMTAzbmciKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIHsKICAgICAgY2xhc3NOYW1lOiAiaGFuZCB0ZXh0LWxlZnQiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsICJEYW5oIHNceEUxY2ggY2hcdTFFRTljIG5cdTAxMDNuZyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAiVGhhbyB0XHhFMWMiKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRib2R5IiwgbnVsbCwgc2VsZWN0ZWRQZXJtaXNzaW9uLm1hcChmdW5jdGlvbiAocGVybWlzc2lvbiwgaSkgewogICAgICBpZiAocGVybWlzc2lvbi5wZXJtaXNzaW9ucyAmJiBwZXJtaXNzaW9uLnBlcm1pc3Npb25zLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgewogICAgICAgICAga2V5OiBwZXJtaXNzaW9uLnR5cGUKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJ0ZXh0LWNlbnRlciIKICAgICAgICB9LCBpICsgMSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIHBlcm1pc3Npb24udHlwZU5hbWUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBwZXJtaXNzaW9uLnBlcm1pc3Npb25zID8gcGVybWlzc2lvbi5wZXJtaXNzaW9ucy5tYXAoZnVuY3Rpb24gKHBlcikgewogICAgICAgICAgcmV0dXJuIHBlci5kZXNjcmlwdGlvbjsKICAgICAgICB9KS5qb2luKCcgLS0gJykgOiAnJyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInRleHQtY2VudGVyIgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICAgIHR5cGU6ICJyZXNldCIsCiAgICAgICAgICBzaXplOiAibGciLAogICAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIHJlbW92ZVBlcm1pc3Npb24oaSk7CiAgICAgICAgICB9LAogICAgICAgICAgY2xhc3NOYW1lOiAibWwtNSIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICAgICAgbmFtZTogImNpbC1iYW4iCiAgICAgICAgfSkpKSk7CiAgICAgIH0KICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICIxMiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAibG9naW4iCiAgICB9LCAiR2hpIGNoXHhGQSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDVGV4dGFyZWEsIHsKICAgICAgdHlwZTogInRleHRhcmVhIiwKICAgICAgbmFtZTogIm5vdGUiLAogICAgICBpZDogIm5vdGUiLAogICAgICBwbGFjZWhvbGRlcjogIkdoaSBjaFx4RkEiLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgIHZhbHVlOiB2YWx1ZXMubm90ZQogICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICBjbGFzc05hbWU6ICJkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgIHNpemU6ICJsZyIsCiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIGRpc2FibGVkOiBpbml0aWFsU3RhdGUubG9hZGluZwogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogImNpbC1zYXZlIgogICAgfSksICIgIiwgaW5pdGlhbFN0YXRlLmxvYWRpbmcgPyAnxJBhbmcgeOG7rSBsw70nIDogJ1ThuqFvIG3hu5tpJyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInJlc2V0IiwKICAgICAgc2l6ZTogImxnIiwKICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICBvbkNsaWNrOiBoYW5kbGVSZXNldCwKICAgICAgY2xhc3NOYW1lOiAibWwtNSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICJjaWwtYmFuIgogICAgfSksICIgWFx4RjNhIG5oXHUxRUFEcCBsaVx1MUVDN3UiKSkpOwogIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9hc3RlciwgewogICAgcmVmOiB0b2FzdFJlZiwKICAgIG1lc3NhZ2U6ICJUXHUxRUExbyBtXHUxRURCaSBuaFx4RjNtIHF1eVx1MUVDMW4gdGhceEUwbmggY1x4RjRuZyIKICB9KSk7Cn07CgpleHBvcnQgZGVmYXVsdCBDcmVhdGVQZXJtaXNzaW9uR3JvdXBzOw=="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/user/UserPermission/create-permission.js"],"names":["React","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CInvalidFeedback","CFormGroup","CLabel","CInput","CRow","CToaster","CCardTitle","CInputCheckbox","CButtonGroup","CTextarea","CIcon","Formik","Yup","useDispatch","useSelector","creatingPermissionGroups","getPermissions","getPermissionType","Toaster","current","useHistory","fetching","globalizedPermissionGroupsSelectors","reset","Select","Table","validationSchema","values","object","shape","name","string","min","required","validate","getValidationSchema","validateSync","abortEarly","error","getErrorsFromValidationError","mappingStatus","ACTIVE","INACTIVE","DELETED","validationError","FIRST_ERROR","inner","reduce","errors","path","findFirstError","formName","hasError","form","document","forms","i","length","focus","validateForm","fieldName","Boolean","CreatePermissionGroups","state","permission","initialState","checkboxRef","toastRef","dispatch","history","checkbox","setCheckbox","selectedPermission","setSelectedPermission","initialValues","note","onGetPermission","value","params","type","onSubmit","setSubmitting","setErrors","setStatus","resetForm","arrPermission","forEach","selectPer","permissions","concat","map","prev","e","console","log","onCheck","setCheckboxFunc","checkboxValue","persist","prevState","target","onSelectAll","checkedValue","copyCheckbox","Object","keys","key","checked","Array","isArray","selectedArr","push","handleSelectPermission","removePermission","index","arr","splice","typeName","foundedIndex","findIndex","per","filter","includes","id","selectedPermissionObj","findEmpty","item","tempPer","updatingSuccess","addToast","goBack","touched","status","dirty","handleChange","handleBlur","handleSubmit","setFieldValue","isSubmitting","isValid","handleReset","setTouched","permissionTypes","label","description","entity","join","loading"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CInvalidFeedback,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CToaster,\n  CCardTitle,\n  CInputCheckbox,\n  CButtonGroup,\n  CTextarea\n} from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { creatingPermissionGroups, getPermissions, getPermissionType } from './permission.api';\n\nimport Toaster from '../../../components/notifications/toaster/Toaster';\nimport { current } from '@reduxjs/toolkit';\nimport { useHistory } from 'react-router-dom';\nimport { fetching, globalizedPermissionGroupsSelectors, reset } from './permission.reducer';\nimport Select from 'react-select';\nimport { Table } from 'reactstrap';\n\nconst validationSchema = function(values) {\n  return Yup.object().shape({\n    name: Yup.string()\n      .min(5, `Tên nhóm quyền phải lớn hơn 5 kí tự`)\n      .required('Tên nhóm quyền không để trống')\n  });\n};\n\nconst validate = getValidationSchema => {\n  return values => {\n    const validationSchema = getValidationSchema(values);\n    try {\n      validationSchema.validateSync(values, { abortEarly: false });\n      return {};\n    } catch (error) {\n      return getErrorsFromValidationError(error);\n    }\n  };\n};\n\nexport const mappingStatus = {\n  ACTIVE: 'ĐANG HOẠT ĐỘNG',\n  INACTIVE: 'KHÔNG HOẠT ĐỘNG',\n  DELETED: 'ĐÃ XÓA'\n};\n\nconst getErrorsFromValidationError = validationError => {\n  const FIRST_ERROR = 0;\n  return validationError.inner.reduce((errors, error) => {\n    return {\n      ...errors,\n      [error.path]: error.errors[FIRST_ERROR]\n    };\n  }, {});\n};\n\nconst findFirstError = (formName, hasError) => {\n  const form = document.forms[formName];\n  for (let i = 0; i < form.length; i++) {\n    if (hasError(form[i].name)) {\n      form[i].focus();\n      break;\n    }\n  }\n};\n\nconst validateForm = errors => {\n  findFirstError('simpleForm', fieldName => {\n    return Boolean(errors[fieldName]);\n  });\n};\n\nconst CreatePermissionGroups = () => {\n  const { initialState } = useSelector(state => state.permission);\n  const checkboxRef = useRef();\n  const toastRef = useRef();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [checkbox, setCheckbox] = useState({});\n  const [selectedPermission, setSelectedPermission] = useState([]);\n  const initialValues = {\n    name: '',\n    note: ''\n  };\n\n  useEffect(() => {\n    dispatch(getPermissionType());\n    return () => {\n      dispatch(reset())\n    }\n  }, []);\n\n  const onGetPermission = value => {\n    const params = { type: value };\n    dispatch(getPermissions(params));\n  };\n\n  const onSubmit = (values, { setSubmitting, setErrors, setStatus, resetForm }) => {\n    let arrPermission = [];\n    try {\n      selectedPermission.forEach(selectPer => {\n        if (selectPer.permissions) {\n          arrPermission = arrPermission.concat(selectPer.permissions);\n        }\n      });\n      if (arrPermission.length === 0) return;\n      if (selectedPermission.map(permission => permission.permissions).reduce((prev, current) => [...prev, ...current], []).length === 0)\n        return;\n      values.permissions = arrPermission;\n    } catch (e) {\n      console.log(e);\n    }\n    dispatch(fetching());\n    dispatch(creatingPermissionGroups(values));\n    resetForm();\n  };\n\n  const onCheck = (setCheckboxFunc, checkboxValue) => {\n    return e => {\n      e.persist();\n      setCheckboxFunc(prevState => ({ ...prevState, [e.target.value]: !checkboxValue[e.target.value] }));\n    };\n  };\n\n  const onSelectAll = checkedValue => () => {\n    const copyCheckbox = { ...checkbox };\n    Object.keys(copyCheckbox).forEach(key => {\n      copyCheckbox[key] = checkedValue;\n    });\n    setCheckbox(copyCheckbox);\n    if (checkboxRef.current) {\n      checkboxRef.current.checked = checkedValue;\n    }\n  };\n\n  useEffect(() => {\n    if (checkbox && initialState.permissions && Array.isArray(initialState.permissions) && initialState.permissions.length > 0) {\n      const selectedArr = [];\n      Object.keys(checkbox).forEach(key => {\n        if (checkbox[key]) {\n          selectedArr.push(key);\n        }\n      });\n      handleSelectPermission(null, selectedArr);\n    }\n  }, [checkbox]);\n\n  const removePermission = index => {\n    const arr = [...selectedPermission];\n    arr.splice(index, 1);\n    setSelectedPermission(arr);\n  };\n\n  const handleSelectPermission = (e, values) => {\n    /* eslint-disable no-console */\n    if (values && Array.isArray(values) && values.length > 0) {\n      const type = initialState.permissions[0].type;\n      const typeName = initialState.permissions[0].typeName;\n      const foundedIndex = selectedPermission.findIndex(per => per.type === type);\n      if (foundedIndex > -1) {\n        selectedPermission[foundedIndex].permissions = initialState.permissions.filter(permission => values.includes(permission.id));\n        setSelectedPermission([...selectedPermission]);\n      } else {\n        const selectedPermissionObj = {\n          type,\n          typeName,\n          permissions: initialState.permissions.filter(permission => values.includes(permission.id))\n        };\n\n        setSelectedPermission([...selectedPermission, selectedPermissionObj]);\n      }\n    } else if (values && Array.isArray(values) && values.length == 0) {\n      setSelectedPermission([...selectedPermission, values]);\n    } else {\n      const arr = [...selectedPermission];\n      const findEmpty = arr.findIndex(item => item.permissions.length === 0);\n      if (findEmpty > -1) arr.splice(findEmpty, 1);\n      setSelectedPermission(arr);\n    }\n  };\n\n  useEffect(() => {\n    if (initialState.permissions && Array.isArray(initialState.permissions)) {\n      const tempPer = {};\n      initialState.permissions.forEach(per => {\n        tempPer[per.id] = false;\n      });\n      setCheckbox(tempPer);\n    }\n  }, [initialState.permissions]);\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      toastRef.current.addToast();\n      dispatch(reset());\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  return (\n    <CCard>\n      <CCardHeader>\n        <CCardTitle className=\"card-title mb-0\">Thêm mới nhóm quyền</CCardTitle>\n      </CCardHeader>\n      <CCardBody>\n        <Formik initialValues={initialValues} validate={validate(validationSchema)} onSubmit={onSubmit}>\n          {({\n            values,\n            errors,\n            touched,\n            status,\n            dirty,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue,\n            isSubmitting,\n            isValid,\n            handleReset,\n            setTouched\n          }) => (\n            <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n              <CCol lg=\"12\">\n                <CFormGroup>\n                  <CLabel htmlFor=\"login\">Tên nhóm quyền</CLabel>\n                  <CInput\n                    type=\"text\"\n                    name=\"name\"\n                    id=\"name\"\n                    placeholder=\"Tên nhóm quyền\"\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    value={values.name}\n                  />\n                  <CInvalidFeedback className=\"d-block\">{errors.name}</CInvalidFeedback>\n                </CFormGroup>\n              </CCol>\n              <CCol lg=\"12\">\n                <CFormGroup>\n                  <CLabel htmlFor=\"userName\">Chọn nhóm chức năng</CLabel>\n                  <Select\n                    name=\"department\"\n                    onChange={e => {\n                      onGetPermission(e.value);\n                    }}\n                    placeholder=\"Chọn nhóm chức năng\"\n                    options={initialState.permissionTypes.map(item => ({\n                      value: item.name,\n                      label: item.description\n                    }))}\n                  />\n                </CFormGroup>\n              </CCol>\n              <CCol lg=\"12\">\n                <CFormGroup column>\n                  <CRow>\n                    <CCol className=\"mb-2\">\n                      <CLabel>Chức năng</CLabel>\n                    </CCol>\n                    <CCol className=\"mb-2\">\n                      <CButtonGroup>\n                        <CButton color=\"secondary\" onClick={onSelectAll(true)}>\n                          Chọn tất cả\n                        </CButton>\n                        <CButton color=\"secondary\" onClick={onSelectAll(false)}>\n                          Bỏ chọn tất cả\n                        </CButton>\n                      </CButtonGroup>\n                    </CCol>\n                  </CRow>\n                  <CCol md=\"9\">\n                    {initialState.permissions &&\n                      initialState.permissions.map(entity => {\n                        return (\n                          <CFormGroup variant=\"checkbox\" className=\"mb-2\">\n                            <CInputCheckbox\n                              className=\"form-check-input\"\n                              id={entity.id}\n                              checked={checkbox[entity.id]}\n                              onChange={onCheck(setCheckbox, checkbox)}\n                              name={entity.id}\n                              value={entity.id}\n                            />\n                            <CLabel variant=\"checkbox\" htmlFor=\"radio1\">\n                              {entity.description}\n                            </CLabel>\n                          </CFormGroup>\n                        );\n                      })}\n                  </CCol>\n                </CFormGroup>\n              </CCol>\n              <Table responsive>\n                <thead>\n                  <tr>\n                    <th className=\"hand text-right index-column\">\n                      <span>STT</span>\n                    </th>\n                    <th className=\"hand text-left\">\n                      <span>Nhóm chức năng</span>\n                    </th>\n                    <th className=\"hand text-left\">\n                      <span>Danh sách chức năng</span>\n                    </th>\n                    <th>\n                      <span>Thao tác</span>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {selectedPermission.map((permission, i) => {\n                    if (permission.permissions && permission.permissions.length > 0) {\n                      return (\n                        <tr key={permission.type}>\n                          <td className=\"text-center\">{i + 1}</td>\n                          <td>{permission.typeName}</td>\n                          <td>{permission.permissions ? permission.permissions.map(per => per.description).join(' -- ') : ''}</td>\n                          <td className=\"text-center\">\n                            <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={() => removePermission(i)} className=\"ml-5\">\n                              <CIcon name=\"cil-ban\" />\n                            </CButton>\n                          </td>\n                        </tr>\n                      );\n                    }\n                  })}\n                </tbody>\n              </Table>\n              <CCol lg=\"12\">\n                <CFormGroup>\n                  <CLabel htmlFor=\"login\">Ghi chú</CLabel>\n                  <CTextarea\n                    type=\"textarea\"\n                    name=\"note\"\n                    id=\"note\"\n                    placeholder=\"Ghi chú\"\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    value={values.note}\n                  />\n                </CFormGroup>\n              </CCol>\n              <CFormGroup className=\"d-flex justify-content-center\">\n                <CButton type=\"submit\" size=\"lg\" color=\"primary\" disabled={initialState.loading}>\n                  <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Tạo mới'}\n                </CButton>\n                <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={handleReset} className=\"ml-5\">\n                  <CIcon name=\"cil-ban\" /> Xóa nhập liệu\n                </CButton>\n              </CFormGroup>\n            </CForm>\n          )}\n        </Formik>\n      </CCardBody>\n      <Toaster ref={toastRef} message=\"Tạo mới nhóm quyền thành công\" />\n    </CCard>\n  );\n};\n\nexport default CreatePermissionGroups;\n"]}]}