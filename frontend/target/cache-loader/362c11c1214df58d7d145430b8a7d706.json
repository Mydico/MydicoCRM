{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/user/UserPermission/create-permission.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/user/UserPermission/create-permission.js","mtime":1620802363158},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgppbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBDQnV0dG9uLCBDQ2FyZCwgQ0NhcmRIZWFkZXIsIENDYXJkQm9keSwgQ0NvbCwgQ0Zvcm0sIENJbnZhbGlkRmVlZGJhY2ssIENGb3JtR3JvdXAsIENMYWJlbCwgQ0lucHV0LCBDUm93LCBDQ2FyZFRpdGxlLCBDSW5wdXRDaGVja2JveCwgQ0J1dHRvbkdyb3VwLCBDVGV4dGFyZWEgfSBmcm9tICdAY29yZXVpL3JlYWN0JzsKaW1wb3J0IENJY29uIGZyb20gJ0Bjb3JldWkvaWNvbnMtcmVhY3QnOwppbXBvcnQgeyBGb3JtaWsgfSBmcm9tICdmb3JtaWsnOwppbXBvcnQgKiBhcyBZdXAgZnJvbSAneXVwJzsKaW1wb3J0IHsgdXNlRGlzcGF0Y2gsIHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnOwppbXBvcnQgeyBjcmVhdGluZ1Blcm1pc3Npb25Hcm91cHMsIGdldFBlcm1pc3Npb25zLCBnZXRQZXJtaXNzaW9uVHlwZSB9IGZyb20gJy4vcGVybWlzc2lvbi5hcGknOwppbXBvcnQgeyB1c2VIaXN0b3J5IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IGZldGNoaW5nLCByZXNldCB9IGZyb20gJy4vcGVybWlzc2lvbi5yZWR1Y2VyJzsKaW1wb3J0IFNlbGVjdCBmcm9tICdyZWFjdC1zZWxlY3QnOwppbXBvcnQgeyBUYWJsZSB9IGZyb20gJ3JlYWN0c3RyYXAnOwoKdmFyIHZhbGlkYXRpb25TY2hlbWEgPSBmdW5jdGlvbiB2YWxpZGF0aW9uU2NoZW1hKCkgewogIHJldHVybiBZdXAub2JqZWN0KCkuc2hhcGUoewogICAgbmFtZTogWXVwLnN0cmluZygpLm1pbig1LCAiVFx4RUFuIG5oXHhGM20gcXV5XHUxRUMxbiBwaFx1MUVBM2kgbFx1MUVEQm4gaFx1MDFBMW4gNSBrXHhFRCB0XHUxRUYxIikucmVxdWlyZWQoJ1TDqm4gbmjDs20gcXV54buBbiBraMO0bmcgxJHhu4MgdHLhu5FuZycpCiAgfSk7Cn07CgppbXBvcnQgeyB2YWxpZGF0ZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC91dGlscy9ub3JtYWxpemUnOwpleHBvcnQgdmFyIG1hcHBpbmdTdGF0dXMgPSB7CiAgQUNUSVZFOiAnxJBBTkcgSE/huqBUIMSQ4buYTkcnLAogIERJU0FCTEVEOiAnS0jDlE5HIEhP4bqgVCDEkOG7mE5HJywKICBERUxFVEVEOiAnxJDDgyBYw5NBJwp9OwoKdmFyIENyZWF0ZVBlcm1pc3Npb25Hcm91cHMgPSBmdW5jdGlvbiBDcmVhdGVQZXJtaXNzaW9uR3JvdXBzKCkgewogIHZhciBfdXNlU2VsZWN0b3IgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5wZXJtaXNzaW9uOwogIH0pLAogICAgICBpbml0aWFsU3RhdGUgPSBfdXNlU2VsZWN0b3IuaW5pdGlhbFN0YXRlOwoKICB2YXIgY2hlY2tib3hSZWYgPSB1c2VSZWYoKTsKICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpOwogIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpOwoKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoe30pLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgY2hlY2tib3ggPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRDaGVja2JveCA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoW10pLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIHNlbGVjdGVkUGVybWlzc2lvbiA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldFNlbGVjdGVkUGVybWlzc2lvbiA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBpbml0aWFsVmFsdWVzID0gewogICAgbmFtZTogJycsCiAgICBub3RlOiAnJwogIH07CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoKGdldFBlcm1pc3Npb25UeXBlKCkpOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgZGlzcGF0Y2gocmVzZXQoKSk7CiAgICB9OwogIH0sIFtdKTsKCiAgdmFyIG9uR2V0UGVybWlzc2lvbiA9IGZ1bmN0aW9uIG9uR2V0UGVybWlzc2lvbih2YWx1ZSkgewogICAgdmFyIHBhcmFtcyA9IHsKICAgICAgdHlwZTogdmFsdWUKICAgIH07CiAgICBkaXNwYXRjaChnZXRQZXJtaXNzaW9ucyhwYXJhbXMpKTsKICB9OwoKICB2YXIgb25TdWJtaXQgPSBmdW5jdGlvbiBvblN1Ym1pdCh2YWx1ZXMsIF9yZWYpIHsKICAgIHZhciByZXNldEZvcm0gPSBfcmVmLnJlc2V0Rm9ybTsKICAgIHZhciBhcnJQZXJtaXNzaW9uID0gW107CgogICAgdHJ5IHsKICAgICAgc2VsZWN0ZWRQZXJtaXNzaW9uLmZvckVhY2goZnVuY3Rpb24gKHNlbGVjdFBlcikgewogICAgICAgIGlmIChzZWxlY3RQZXIucGVybWlzc2lvbnMpIHsKICAgICAgICAgIGFyclBlcm1pc3Npb24gPSBhcnJQZXJtaXNzaW9uLmNvbmNhdChzZWxlY3RQZXIucGVybWlzc2lvbnMpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChhcnJQZXJtaXNzaW9uLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwoKICAgICAgaWYgKHNlbGVjdGVkUGVybWlzc2lvbi5tYXAoZnVuY3Rpb24gKHBlcm1pc3Npb24pIHsKICAgICAgICByZXR1cm4gcGVybWlzc2lvbi5wZXJtaXNzaW9uczsKICAgICAgfSkucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXJyZW50KSB7CiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocHJldiksIF90b0NvbnN1bWFibGVBcnJheShjdXJyZW50KSk7CiAgICAgIH0sIFtdKS5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhbHVlcy5wZXJtaXNzaW9ucyA9IGFyclBlcm1pc3Npb247CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgfQoKICAgIGRpc3BhdGNoKGZldGNoaW5nKCkpOwogICAgZGlzcGF0Y2goY3JlYXRpbmdQZXJtaXNzaW9uR3JvdXBzKHZhbHVlcykpOwogICAgcmVzZXRGb3JtKCk7CiAgfTsKCiAgdmFyIG9uQ2hlY2sgPSBmdW5jdGlvbiBvbkNoZWNrKHNldENoZWNrYm94RnVuYywgY2hlY2tib3hWYWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7CiAgICAgIGUucGVyc2lzdCgpOwogICAgICBzZXRDaGVja2JveEZ1bmMoZnVuY3Rpb24gKHByZXZTdGF0ZSkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByZXZTdGF0ZSksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIGUudGFyZ2V0LnZhbHVlLCAhY2hlY2tib3hWYWx1ZVtlLnRhcmdldC52YWx1ZV0pKTsKICAgICAgfSk7CiAgICB9OwogIH07CgogIHZhciBvblNlbGVjdEFsbCA9IGZ1bmN0aW9uIG9uU2VsZWN0QWxsKGNoZWNrZWRWYWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGNvcHlDaGVja2JveCA9IF9vYmplY3RTcHJlYWQoe30sIGNoZWNrYm94KTsKCiAgICAgIE9iamVjdC5rZXlzKGNvcHlDaGVja2JveCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgY29weUNoZWNrYm94W2tleV0gPSBjaGVja2VkVmFsdWU7CiAgICAgIH0pOwogICAgICBzZXRDaGVja2JveChjb3B5Q2hlY2tib3gpOwoKICAgICAgaWYgKGNoZWNrYm94UmVmLmN1cnJlbnQpIHsKICAgICAgICBjaGVja2JveFJlZi5jdXJyZW50LmNoZWNrZWQgPSBjaGVja2VkVmFsdWU7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChjaGVja2JveCAmJiBpbml0aWFsU3RhdGUucGVybWlzc2lvbnMgJiYgQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUucGVybWlzc2lvbnMpICYmIGluaXRpYWxTdGF0ZS5wZXJtaXNzaW9ucy5sZW5ndGggPiAwKSB7CiAgICAgIHZhciBzZWxlY3RlZEFyciA9IFtdOwogICAgICBPYmplY3Qua2V5cyhjaGVja2JveCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKGNoZWNrYm94W2tleV0pIHsKICAgICAgICAgIHNlbGVjdGVkQXJyLnB1c2goa2V5KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBoYW5kbGVTZWxlY3RQZXJtaXNzaW9uKG51bGwsIHNlbGVjdGVkQXJyKTsKICAgIH0KICB9LCBbY2hlY2tib3hdKTsKCiAgdmFyIHJlbW92ZVBlcm1pc3Npb24gPSBmdW5jdGlvbiByZW1vdmVQZXJtaXNzaW9uKGluZGV4KSB7CiAgICB2YXIgYXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHNlbGVjdGVkUGVybWlzc2lvbik7CgogICAgYXJyLnNwbGljZShpbmRleCwgMSk7CiAgICBzZXRTZWxlY3RlZFBlcm1pc3Npb24oYXJyKTsKICB9OwoKICB2YXIgaGFuZGxlU2VsZWN0UGVybWlzc2lvbiA9IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdFBlcm1pc3Npb24oZSwgdmFsdWVzKSB7CiAgICBjb25zb2xlLmxvZyh2YWx1ZXMpOwogICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqLwoKICAgIHZhciB0eXBlID0gaW5pdGlhbFN0YXRlLnBlcm1pc3Npb25zWzBdLnR5cGU7CiAgICB2YXIgdHlwZU5hbWUgPSBpbml0aWFsU3RhdGUucGVybWlzc2lvbnNbMF0udHlwZU5hbWU7CiAgICBjb25zb2xlLmxvZyh0eXBlLCB0eXBlTmFtZSk7CiAgICB2YXIgZm91bmRlZEluZGV4ID0gc2VsZWN0ZWRQZXJtaXNzaW9uLmZpbmRJbmRleChmdW5jdGlvbiAocGVyKSB7CiAgICAgIHJldHVybiBwZXIudHlwZSA9PT0gdHlwZTsKICAgIH0pOwoKICAgIGlmICh2YWx1ZXMgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7CiAgICAgIGlmIChmb3VuZGVkSW5kZXggPiAtMSkgewogICAgICAgIHNlbGVjdGVkUGVybWlzc2lvbltmb3VuZGVkSW5kZXhdLnBlcm1pc3Npb25zID0gaW5pdGlhbFN0YXRlLnBlcm1pc3Npb25zLmZpbHRlcihmdW5jdGlvbiAocGVybWlzc2lvbikgewogICAgICAgICAgcmV0dXJuIHZhbHVlcy5pbmNsdWRlcyhwZXJtaXNzaW9uLmlkLnRvU3RyaW5nKCkpOwogICAgICAgIH0pOwogICAgICAgIHNldFNlbGVjdGVkUGVybWlzc2lvbihfdG9Db25zdW1hYmxlQXJyYXkoc2VsZWN0ZWRQZXJtaXNzaW9uKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHNlbGVjdGVkUGVybWlzc2lvbk9iaiA9IHsKICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICB0eXBlTmFtZTogdHlwZU5hbWUsCiAgICAgICAgICBwZXJtaXNzaW9uczogaW5pdGlhbFN0YXRlLnBlcm1pc3Npb25zLmZpbHRlcihmdW5jdGlvbiAocGVybWlzc2lvbikgewogICAgICAgICAgICByZXR1cm4gdmFsdWVzLmluY2x1ZGVzKHBlcm1pc3Npb24uaWQudG9TdHJpbmcoKSk7CiAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgICAgc2V0U2VsZWN0ZWRQZXJtaXNzaW9uKFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc2VsZWN0ZWRQZXJtaXNzaW9uKSwgW3NlbGVjdGVkUGVybWlzc2lvbk9ial0pKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh2YWx1ZXMgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPT0gMCkgewogICAgICBjb25zb2xlLmxvZyhzZWxlY3RlZFBlcm1pc3Npb24pOwoKICAgICAgaWYgKGZvdW5kZWRJbmRleCA+IC0xKSB7CiAgICAgICAgdmFyIGFyciA9IF90b0NvbnN1bWFibGVBcnJheShzZWxlY3RlZFBlcm1pc3Npb24pOwoKICAgICAgICBhcnIuc3BsaWNlKGZvdW5kZWRJbmRleCwgMSk7CiAgICAgICAgY29uc29sZS5sb2coYXJyKTsKICAgICAgICBzZXRTZWxlY3RlZFBlcm1pc3Npb24oYXJyKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdmFyIF9hcnIyID0gX3RvQ29uc3VtYWJsZUFycmF5KHNlbGVjdGVkUGVybWlzc2lvbik7CgogICAgICB2YXIgZmluZEVtcHR5ID0gX2FycjIuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucGVybWlzc2lvbnMubGVuZ3RoID09PSAwOwogICAgICB9KTsKCiAgICAgIGlmIChmaW5kRW1wdHkgPiAtMSkgX2FycjIuc3BsaWNlKGZpbmRFbXB0eSwgMSk7CiAgICAgIHNldFNlbGVjdGVkUGVybWlzc2lvbihfYXJyMik7CiAgICB9CiAgfTsKCiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChpbml0aWFsU3RhdGUucGVybWlzc2lvbnMgJiYgQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUucGVybWlzc2lvbnMpKSB7CiAgICAgIHZhciB0ZW1wUGVyID0ge307CiAgICAgIGluaXRpYWxTdGF0ZS5wZXJtaXNzaW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICB0ZW1wUGVyW3Blci5pZF0gPSBmYWxzZTsKICAgICAgfSk7CiAgICAgIHNldENoZWNrYm94KHRlbXBQZXIpOwogICAgfQogIH0sIFtpbml0aWFsU3RhdGUucGVybWlzc2lvbnNdKTsKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGluaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3MpIHsKICAgICAgZGlzcGF0Y2gocmVzZXQoKSk7CiAgICAgIGhpc3RvcnkuZ29CYWNrKCk7CiAgICB9CiAgfSwgW2luaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3NdKTsKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkSGVhZGVyLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZFRpdGxlLCB7CiAgICBjbGFzc05hbWU6ICJjYXJkLXRpdGxlIG1iLTAiCiAgfSwgIlRoXHhFQW0gbVx1MUVEQmkgbmhceEYzbSBxdXlcdTFFQzFuIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1paywgewogICAgaW5pdGlhbFZhbHVlczogaW5pdGlhbFZhbHVlcywKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSh2YWxpZGF0aW9uU2NoZW1hKSwKICAgIG9uU3VibWl0OiBvblN1Ym1pdAogIH0sIGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIHZhbHVlcyA9IF9yZWYyLnZhbHVlcywKICAgICAgICBlcnJvcnMgPSBfcmVmMi5lcnJvcnMsCiAgICAgICAgaGFuZGxlQ2hhbmdlID0gX3JlZjIuaGFuZGxlQ2hhbmdlLAogICAgICAgIGhhbmRsZUJsdXIgPSBfcmVmMi5oYW5kbGVCbHVyLAogICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYyLmhhbmRsZVN1Ym1pdCwKICAgICAgICBoYW5kbGVSZXNldCA9IF9yZWYyLmhhbmRsZVJlc2V0OwogICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtLCB7CiAgICAgIG9uU3VibWl0OiBoYW5kbGVTdWJtaXQsCiAgICAgIG5vVmFsaWRhdGU6IHRydWUsCiAgICAgIG5hbWU6ICJzaW1wbGVGb3JtIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjEyIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJsb2dpbiIKICAgIH0sICJUXHhFQW4gbmhceEYzbSBxdXlcdTFFQzFuIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICB0eXBlOiAidGV4dCIsCiAgICAgIG5hbWU6ICJuYW1lIiwKICAgICAgaWQ6ICJuYW1lIiwKICAgICAgcGxhY2Vob2xkZXI6ICJUXHhFQW4gbmhceEYzbSBxdXlcdTFFQzFuIiwKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICB2YWx1ZTogdmFsdWVzLm5hbWUKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCBlcnJvcnMubmFtZSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjEyIiwKICAgICAgc3R5bGU6IHsKICAgICAgICB6SW5kZXg6IDEwMAogICAgICB9CiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInVzZXJOYW1lIgogICAgfSwgIkNoXHUxRUNEbiBuaFx4RjNtIGNoXHUxRUU5YyBuXHUwMTAzbmciKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgIG5hbWU6ICJkZXBhcnRtZW50IiwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICBvbkdldFBlcm1pc3Npb24oZS52YWx1ZSk7CiAgICAgIH0sCiAgICAgIHBsYWNlaG9sZGVyOiAiQ2hcdTFFQ0RuIG5oXHhGM20gY2hcdTFFRTljIG5cdTAxMDNuZyIsCiAgICAgIG9wdGlvbnM6IGluaXRpYWxTdGF0ZS5wZXJtaXNzaW9uVHlwZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBpdGVtLm5hbWUsCiAgICAgICAgICBsYWJlbDogaXRlbS5kZXNjcmlwdGlvbgogICAgICAgIH07CiAgICAgIH0pCiAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiMTIiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCB7CiAgICAgIGNvbHVtbjogdHJ1ZQogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBjbGFzc05hbWU6ICJtYi0yIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCBudWxsLCAiQ2hcdTFFRTljIG5cdTAxMDNuZyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBjbGFzc05hbWU6ICJtYi0yIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbkdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIGNvbG9yOiAic2Vjb25kYXJ5IiwKICAgICAgb25DbGljazogb25TZWxlY3RBbGwodHJ1ZSkKICAgIH0sICJDaFx1MUVDRG4gdFx1MUVBNXQgY1x1MUVBMyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIGNvbG9yOiAic2Vjb25kYXJ5IiwKICAgICAgb25DbGljazogb25TZWxlY3RBbGwoZmFsc2UpCiAgICB9LCAiQlx1MUVDRiBjaFx1MUVDRG4gdFx1MUVBNXQgY1x1MUVBMyIpKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIG1kOiAiOSIKICAgIH0sIGluaXRpYWxTdGF0ZS5wZXJtaXNzaW9ucyAmJiBpbml0aWFsU3RhdGUucGVybWlzc2lvbnMubWFwKGZ1bmN0aW9uIChlbnRpdHkpIHsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIHsKICAgICAgICB2YXJpYW50OiAiY2hlY2tib3giLAogICAgICAgIGNsYXNzTmFtZTogIm1iLTIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dENoZWNrYm94LCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZm9ybS1jaGVjay1pbnB1dCIsCiAgICAgICAgaWQ6IGVudGl0eS5pZCwKICAgICAgICBjaGVja2VkOiBjaGVja2JveFtlbnRpdHkuaWRdLAogICAgICAgIG9uQ2hhbmdlOiBvbkNoZWNrKHNldENoZWNrYm94LCBjaGVja2JveCksCiAgICAgICAgbmFtZTogZW50aXR5LmlkLAogICAgICAgIHZhbHVlOiBlbnRpdHkuaWQKICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICAgIHZhcmlhbnQ6ICJjaGVja2JveCIsCiAgICAgICAgaHRtbEZvcjogInJhZGlvMSIKICAgICAgfSwgZW50aXR5LmRlc2NyaXB0aW9uKSk7CiAgICB9KSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGFibGUsIHsKICAgICAgcmVzcG9uc2l2ZTogdHJ1ZQogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoZWFkIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICBjbGFzc05hbWU6ICJoYW5kIHRleHQtcmlnaHQgaW5kZXgtY29sdW1uIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAiU1RUIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgIGNsYXNzTmFtZTogImhhbmQgdGV4dC1sZWZ0IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAiTmhceEYzbSBjaFx1MUVFOWMgblx1MDEwM25nIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgIGNsYXNzTmFtZTogImhhbmQgdGV4dC1sZWZ0IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAiRGFuaCBzXHhFMWNoIGNoXHUxRUU5YyBuXHUwMTAzbmciKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgIlRoYW8gdFx4RTFjIikpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIsIG51bGwsIHNlbGVjdGVkUGVybWlzc2lvbi5tYXAoZnVuY3Rpb24gKHBlcm1pc3Npb24sIGkpIHsKICAgICAgaWYgKHBlcm1pc3Npb24ucGVybWlzc2lvbnMgJiYgcGVybWlzc2lvbi5wZXJtaXNzaW9ucy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIHsKICAgICAgICAgIGtleTogcGVybWlzc2lvbi50eXBlCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAidGV4dC1jZW50ZXIiCiAgICAgICAgfSwgaSArIDEpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBwZXJtaXNzaW9uLnR5cGVOYW1lKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgcGVybWlzc2lvbi5wZXJtaXNzaW9ucyA/IHBlcm1pc3Npb24ucGVybWlzc2lvbnMubWFwKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICAgIHJldHVybiBwZXIuZGVzY3JpcHRpb247CiAgICAgICAgfSkuam9pbignIC0tICcpIDogJycpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJ0ZXh0LWNlbnRlciIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgICAgICB0eXBlOiAicmVzZXQiLAogICAgICAgICAgc2l6ZTogImxnIiwKICAgICAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIHJldHVybiByZW1vdmVQZXJtaXNzaW9uKGkpOwogICAgICAgICAgfSwKICAgICAgICAgIGNsYXNzTmFtZTogIm1sLTUiCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgICAgIG5hbWU6ICJjaWwtYmFuIgogICAgICAgIH0pKSkpOwogICAgICB9CiAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiMTIiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogImxvZ2luIgogICAgfSwgIkdoaSBjaFx4RkEiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1RleHRhcmVhLCB7CiAgICAgIHR5cGU6ICJ0ZXh0YXJlYSIsCiAgICAgIG5hbWU6ICJub3RlIiwKICAgICAgaWQ6ICJub3RlIiwKICAgICAgcGxhY2Vob2xkZXI6ICJHaGkgY2hceEZBIiwKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICB2YWx1ZTogdmFsdWVzLm5vdGUKICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIHsKICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXIiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIHR5cGU6ICJzdWJtaXQiLAogICAgICBzaXplOiAibGciLAogICAgICBjb2xvcjogInByaW1hcnkiLAogICAgICBkaXNhYmxlZDogaW5pdGlhbFN0YXRlLmxvYWRpbmcKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICJjaWwtc2F2ZSIKICAgIH0pLCAiICIsIGluaXRpYWxTdGF0ZS5sb2FkaW5nID8gJ8SQYW5nIHjhu60gbMO9JyA6ICdU4bqhbyBt4bubaScpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIHR5cGU6ICJyZXNldCIsCiAgICAgIHNpemU6ICJsZyIsCiAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgb25DbGljazogaGFuZGxlUmVzZXQsCiAgICAgIGNsYXNzTmFtZTogIm1sLTUiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICBuYW1lOiAiY2lsLWJhbiIKICAgIH0pLCAiIFhceEYzYSBuaFx1MUVBRHAgbGlcdTFFQzd1IikpKTsKICB9KSkpOwp9OwoKZXhwb3J0IGRlZmF1bHQgQ3JlYXRlUGVybWlzc2lvbkdyb3Vwczs="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/user/UserPermission/create-permission.js"],"names":["React","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CInvalidFeedback","CFormGroup","CLabel","CInput","CRow","CCardTitle","CInputCheckbox","CButtonGroup","CTextarea","CIcon","Formik","Yup","useDispatch","useSelector","creatingPermissionGroups","getPermissions","getPermissionType","useHistory","fetching","reset","Select","Table","validationSchema","object","shape","name","string","min","required","validate","mappingStatus","ACTIVE","DISABLED","DELETED","CreatePermissionGroups","state","permission","initialState","checkboxRef","dispatch","history","checkbox","setCheckbox","selectedPermission","setSelectedPermission","initialValues","note","onGetPermission","value","params","type","onSubmit","values","resetForm","arrPermission","forEach","selectPer","permissions","concat","length","map","reduce","prev","current","e","console","log","onCheck","setCheckboxFunc","checkboxValue","persist","prevState","target","onSelectAll","checkedValue","copyCheckbox","Object","keys","key","checked","Array","isArray","selectedArr","push","handleSelectPermission","removePermission","index","arr","splice","typeName","foundedIndex","findIndex","per","filter","includes","id","toString","selectedPermissionObj","findEmpty","item","tempPer","updatingSuccess","goBack","errors","handleChange","handleBlur","handleSubmit","handleReset","zIndex","permissionTypes","label","description","entity","i","join","loading"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CInvalidFeedback,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CCardTitle,\n  CInputCheckbox,\n  CButtonGroup,\n  CTextarea\n} from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { creatingPermissionGroups, getPermissions, getPermissionType } from './permission.api';\n\nimport { useHistory } from 'react-router-dom';\nimport { fetching, reset } from './permission.reducer';\nimport Select from 'react-select';\nimport { Table } from 'reactstrap';\n\nconst validationSchema = function() {\n  return Yup.object().shape({\n    name: Yup.string()\n      .min(5, `Tên nhóm quyền phải lớn hơn 5 kí tự`)\n      .required('Tên nhóm quyền không để trống')\n  });\n};\n\nimport { validate } from '../../../../shared/utils/normalize';\n\nexport const mappingStatus = {\n  ACTIVE: 'ĐANG HOẠT ĐỘNG',\n  DISABLED: 'KHÔNG HOẠT ĐỘNG',\n  DELETED: 'ĐÃ XÓA'\n};\n\nconst CreatePermissionGroups = () => {\n  const { initialState } = useSelector(state => state.permission);\n  const checkboxRef = useRef();\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [checkbox, setCheckbox] = useState({});\n  const [selectedPermission, setSelectedPermission] = useState([]);\n  const initialValues = {\n    name: '',\n    note: ''\n  };\n\n  useEffect(() => {\n    dispatch(getPermissionType());\n    return () => {\n      dispatch(reset());\n    };\n  }, []);\n\n  const onGetPermission = value => {\n    const params = { type: value };\n    dispatch(getPermissions(params));\n  };\n\n  const onSubmit = (values, { resetForm }) => {\n    let arrPermission = [];\n    try {\n      selectedPermission.forEach(selectPer => {\n        if (selectPer.permissions) {\n          arrPermission = arrPermission.concat(selectPer.permissions);\n        }\n      });\n      if (arrPermission.length === 0) return;\n      if (selectedPermission.map(permission => permission.permissions).reduce((prev, current) => [...prev, ...current], []).length === 0) {\n        return;\n      }\n      values.permissions = arrPermission;\n    } catch (e) {\n      console.log(e);\n    }\n    dispatch(fetching());\n    dispatch(creatingPermissionGroups(values));\n    resetForm();\n  };\n\n  const onCheck = (setCheckboxFunc, checkboxValue) => {\n    return e => {\n      e.persist();\n      setCheckboxFunc(prevState => ({ ...prevState, [e.target.value]: !checkboxValue[e.target.value] }));\n    };\n  };\n\n  const onSelectAll = checkedValue => () => {\n    const copyCheckbox = { ...checkbox };\n    Object.keys(copyCheckbox).forEach(key => {\n      copyCheckbox[key] = checkedValue;\n    });\n    setCheckbox(copyCheckbox);\n    if (checkboxRef.current) {\n      checkboxRef.current.checked = checkedValue;\n    }\n  };\n\n  useEffect(() => {\n    if (checkbox && initialState.permissions && Array.isArray(initialState.permissions) && initialState.permissions.length > 0) {\n      const selectedArr = [];\n      Object.keys(checkbox).forEach(key => {\n        if (checkbox[key]) {\n          selectedArr.push(key);\n        }\n      });\n      handleSelectPermission(null, selectedArr);\n    }\n  }, [checkbox]);\n\n  const removePermission = index => {\n    const arr = [...selectedPermission];\n    arr.splice(index, 1);\n    setSelectedPermission(arr);\n  };\n\n  const handleSelectPermission = (e, values) => {\n    console.log(values);\n    /* eslint-disable no-console */\n    const type = initialState.permissions[0].type;\n    const typeName = initialState.permissions[0].typeName;\n    console.log(type, typeName);\n    const foundedIndex = selectedPermission.findIndex(per => per.type === type);\n    if (values && Array.isArray(values) && values.length > 0) {\n      if (foundedIndex > -1) {\n        selectedPermission[foundedIndex].permissions = initialState.permissions.filter(permission =>\n          values.includes(permission.id.toString())\n        );\n        setSelectedPermission([...selectedPermission]);\n      } else {\n        const selectedPermissionObj = {\n          type,\n          typeName,\n          permissions: initialState.permissions.filter(permission => values.includes(permission.id.toString()))\n        };\n\n        setSelectedPermission([...selectedPermission, selectedPermissionObj]);\n      }\n    } else if (values && Array.isArray(values) && values.length == 0) {\n      console.log(selectedPermission);\n      if (foundedIndex > -1) {\n        const arr = [...selectedPermission];\n        arr.splice(foundedIndex, 1);\n        console.log(arr);\n\n        setSelectedPermission(arr);\n      }\n    } else {\n      const arr = [...selectedPermission];\n      const findEmpty = arr.findIndex(item => item.permissions.length === 0);\n      if (findEmpty > -1) arr.splice(findEmpty, 1);\n      setSelectedPermission(arr);\n    }\n  };\n\n  useEffect(() => {\n    if (initialState.permissions && Array.isArray(initialState.permissions)) {\n      const tempPer = {};\n      initialState.permissions.forEach(per => {\n        tempPer[per.id] = false;\n      });\n      setCheckbox(tempPer);\n    }\n  }, [initialState.permissions]);\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      dispatch(reset());\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  return (\n    <CCard>\n      <CCardHeader>\n        <CCardTitle className=\"card-title mb-0\">Thêm mới nhóm quyền</CCardTitle>\n      </CCardHeader>\n      <CCardBody>\n        <Formik initialValues={initialValues} validate={validate(validationSchema)} onSubmit={onSubmit}>\n          {({ values, errors, handleChange, handleBlur, handleSubmit, handleReset }) => (\n            <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n              <CCol lg=\"12\">\n                <CFormGroup>\n                  <CLabel htmlFor=\"login\">Tên nhóm quyền</CLabel>\n                  <CInput\n                    type=\"text\"\n                    name=\"name\"\n                    id=\"name\"\n                    placeholder=\"Tên nhóm quyền\"\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    value={values.name}\n                  />\n                  <CInvalidFeedback className=\"d-block\">{errors.name}</CInvalidFeedback>\n                </CFormGroup>\n              </CCol>\n              <CCol lg=\"12\" style={{ zIndex: 100 }}>\n                <CFormGroup>\n                  <CLabel htmlFor=\"userName\">Chọn nhóm chức năng</CLabel>\n                  <Select\n                    name=\"department\"\n                    onChange={e => {\n                      onGetPermission(e.value);\n                    }}\n                    placeholder=\"Chọn nhóm chức năng\"\n                    options={initialState.permissionTypes.map(item => ({\n                      value: item.name,\n                      label: item.description\n                    }))}\n                  />\n                </CFormGroup>\n              </CCol>\n              <CCol lg=\"12\">\n                <CFormGroup column>\n                  <CRow>\n                    <CCol className=\"mb-2\">\n                      <CLabel>Chức năng</CLabel>\n                    </CCol>\n                    <CCol className=\"mb-2\">\n                      <CButtonGroup>\n                        <CButton color=\"secondary\" onClick={onSelectAll(true)}>\n                          Chọn tất cả\n                        </CButton>\n                        <CButton color=\"secondary\" onClick={onSelectAll(false)}>\n                          Bỏ chọn tất cả\n                        </CButton>\n                      </CButtonGroup>\n                    </CCol>\n                  </CRow>\n                  <CCol md=\"9\">\n                    {initialState.permissions &&\n                      initialState.permissions.map(entity => {\n                        return (\n                          <CFormGroup variant=\"checkbox\" className=\"mb-2\">\n                            <CInputCheckbox\n                              className=\"form-check-input\"\n                              id={entity.id}\n                              checked={checkbox[entity.id]}\n                              onChange={onCheck(setCheckbox, checkbox)}\n                              name={entity.id}\n                              value={entity.id}\n                            />\n                            <CLabel variant=\"checkbox\" htmlFor=\"radio1\">\n                              {entity.description}\n                            </CLabel>\n                          </CFormGroup>\n                        );\n                      })}\n                  </CCol>\n                </CFormGroup>\n              </CCol>\n              <Table responsive>\n                <thead>\n                  <tr>\n                    <th className=\"hand text-right index-column\">\n                      <span>STT</span>\n                    </th>\n                    <th className=\"hand text-left\">\n                      <span>Nhóm chức năng</span>\n                    </th>\n                    <th className=\"hand text-left\">\n                      <span>Danh sách chức năng</span>\n                    </th>\n                    <th>\n                      <span>Thao tác</span>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {selectedPermission.map((permission, i) => {\n                    if (permission.permissions && permission.permissions.length > 0) {\n                      return (\n                        <tr key={permission.type}>\n                          <td className=\"text-center\">{i + 1}</td>\n                          <td>{permission.typeName}</td>\n                          <td>{permission.permissions ? permission.permissions.map(per => per.description).join(' -- ') : ''}</td>\n                          <td className=\"text-center\">\n                            <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={() => removePermission(i)} className=\"ml-5\">\n                              <CIcon name=\"cil-ban\" />\n                            </CButton>\n                          </td>\n                        </tr>\n                      );\n                    }\n                  })}\n                </tbody>\n              </Table>\n              <CCol lg=\"12\">\n                <CFormGroup>\n                  <CLabel htmlFor=\"login\">Ghi chú</CLabel>\n                  <CTextarea\n                    type=\"textarea\"\n                    name=\"note\"\n                    id=\"note\"\n                    placeholder=\"Ghi chú\"\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    value={values.note}\n                  />\n                </CFormGroup>\n              </CCol>\n              <CFormGroup className=\"d-flex justify-content-center\">\n                <CButton type=\"submit\" size=\"lg\" color=\"primary\" disabled={initialState.loading}>\n                  <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Tạo mới'}\n                </CButton>\n                <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={handleReset} className=\"ml-5\">\n                  <CIcon name=\"cil-ban\" /> Xóa nhập liệu\n                </CButton>\n              </CFormGroup>\n            </CForm>\n          )}\n        </Formik>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default CreatePermissionGroups;\n"]}]}