{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/user/UserDepartment/departments.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/user/UserDepartment/departments.js","mtime":1625153266007},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90ZW1wbGF0ZU9iamVjdCwgX3RlbXBsYXRlT2JqZWN0MjsKCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAidW5kZWZpbmVkIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQoKZnVuY3Rpb24gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChzdHJpbmdzLCByYXcpIHsgaWYgKCFyYXcpIHsgcmF3ID0gc3RyaW5ncy5zbGljZSgwKTsgfSByZXR1cm4gT2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdHJpbmdzLCB7IHJhdzogeyB2YWx1ZTogT2JqZWN0LmZyZWV6ZShyYXcpIH0gfSkpOyB9CgppbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgQ0J1dHRvbiwgQ0NhcmQsIENDYXJkQm9keSwgQ0NhcmRIZWFkZXIsIENDb2xsYXBzZSwgQ0RhdGFUYWJsZSwgQ1BhZ2luYXRpb24sIENSb3csIENDb2wgfSBmcm9tICdAY29yZXVpL3JlYWN0L2xpYic7CmltcG9ydCBDSWNvbiBmcm9tICdAY29yZXVpL2ljb25zLXJlYWN0L2xpYi9DSWNvbic7CmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgZ2V0RGVwYXJ0bWVudCwgZ2V0VHJlZURlcGFydG1lbnQsIHVwZGF0ZURlcGFydG1lbnQgfSBmcm9tICcuL2RlcGFydG1lbnQuYXBpLmpzJzsKaW1wb3J0IHsgZ2xvYmFsaXplZERlcGFydG1lbnRTZWxlY3RvcnMsIHJlc2V0IH0gZnJvbSAnLi9kZXBhcnRtZW50LnJlZHVjZXIuanMnOwppbXBvcnQgeyB1c2VIaXN0b3J5IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IFRyZWUsIFRyZWVOb2RlIH0gZnJvbSAncmVhY3Qtb3JnYW5pemF0aW9uYWwtY2hhcnQnOwppbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgeyB1c2VyU2FmZVNlbGVjdG9yIH0gZnJvbSAnLi4vLi4vbG9naW4vYXV0aGVudGljYXRlLnJlZHVjZXIuanMnOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBDQmFkZ2UsIENNb2RhbCwgQ01vZGFsQm9keSwgQ01vZGFsRm9vdGVyLCBDTW9kYWxIZWFkZXIsIENNb2RhbFRpdGxlIH0gZnJvbSAnQGNvcmV1aS9yZWFjdCc7CnZhciBTdHlsZWROb2RlID0gc3R5bGVkLmRpdihfdGVtcGxhdGVPYmplY3QgfHwgKF90ZW1wbGF0ZU9iamVjdCA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgcGFkZGluZzogNXB4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgYm9yZGVyOiAxcHggc29saWQgcmVkO1xuIl0pKSk7CnZhciBTdHlsZWRSb290Tm9kZSA9IHN0eWxlZC5kaXYoX3RlbXBsYXRlT2JqZWN0MiB8fCAoX3RlbXBsYXRlT2JqZWN0MiA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgbWFyZ2luLXRvcDogMjVweDtcbiAgbWFyZ2luLWJvdHRvbTogOHB4O1xuIl0pKSk7CnZhciBtYXBwaW5nU3RhdHVzID0gewogIEFDVElWRTogJ8SQQU5HIEhP4bqgVCDEkOG7mE5HJywKICBESVNBQkxFRDogJ0tIw5RORyBIT+G6oFQgxJDhu5hORycsCiAgREVMRVRFRDogJ8SQw4MgWMOTQScKfTsKdmFyIHNlbGVjdEFsbCA9IGdsb2JhbGl6ZWREZXBhcnRtZW50U2VsZWN0b3JzLnNlbGVjdEFsbDsgLy8gQ29kZQlUw6puIG5ow6AgY3VuZyBj4bqlcAlOZ8aw4budaSBsacOqbiBs4bqhYwlOxINtIFNpbmgJxJBp4buHbiB0aG/huqFpCU5ow6JuIHZpw6puIHF14bqjbiBsw70JTG/huqFpIG5ow6AgY3VuZyBj4bqlcAlQaMOibiBsb+G6oWkJU+G7rWEJVOG6oW8gxJHGoW4KCnZhciBmaWVsZHMgPSBbewogIGtleTogJ29yZGVyJywKICBsYWJlbDogJ1NUVCcsCiAgX3N0eWxlOiB7CiAgICB3aWR0aDogJzElJwogIH0sCiAgZmlsdGVyOiBmYWxzZQp9LCB7CiAga2V5OiAnY29kZScsCiAgbGFiZWw6ICdNw6MnLAogIF9zdHlsZTogewogICAgd2lkdGg6ICcxMCUnCiAgfQp9LCB7CiAga2V5OiAnbmFtZScsCiAgbGFiZWw6ICdUw6puIGNoaSBuaMOhbmgnLAogIF9zdHlsZTogewogICAgd2lkdGg6ICcxNSUnCiAgfQp9LCB7CiAga2V5OiAnYWN0aXZhdGVkJywKICBsYWJlbDogJ1Ry4bqhbmcgdGjDoWknLAogIF9zdHlsZTogewogICAgd2lkdGg6ICcxNSUnCiAgfQp9LCB7CiAga2V5OiAnc2hvd19kZXRhaWxzJywKICBsYWJlbDogJycsCiAgX3N0eWxlOiB7CiAgICB3aWR0aDogJzElJwogIH0sCiAgZmlsdGVyOiBmYWxzZQp9XTsKCnZhciBnZXRCYWRnZSA9IGZ1bmN0aW9uIGdldEJhZGdlKHN0YXR1cykgewogIHN3aXRjaCAoc3RhdHVzKSB7CiAgICBjYXNlIHRydWU6CiAgICAgIHJldHVybiAnc3VjY2Vzcyc7CgogICAgY2FzZSBmYWxzZToKICAgICAgcmV0dXJuICdkYW5nZXInOwoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiAncHJpbWFyeSc7CiAgfQp9OwoKdmFyIERlcGFydG1lbnQgPSBmdW5jdGlvbiBEZXBhcnRtZW50KHByb3BzKSB7CiAgdmFyIF91c2VTZWxlY3RvciA9IHVzZVNlbGVjdG9yKHVzZXJTYWZlU2VsZWN0b3IpLAogICAgICBhY2NvdW50ID0gX3VzZVNlbGVjdG9yLmFjY291bnQ7CgogIHZhciBpc0FkbWluID0gYWNjb3VudC5hdXRob3JpdGllcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtID09PSAnUk9MRV9BRE1JTic7CiAgfSkubGVuZ3RoID4gMDsKICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpOwogIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpOwogIHZhciBkZXBhcnRtZW50cyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbCk7CgogIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShbXSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBfZGV0YWlscyA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldERldGFpbHMgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVNlbGVjdG9yMiA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmRlcGFydG1lbnQ7CiAgfSksCiAgICAgIGluaXRpYWxTdGF0ZSA9IF91c2VTZWxlY3RvcjIuaW5pdGlhbFN0YXRlOwoKICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKDEpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGFjdGl2ZVBhZ2UgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRBY3RpdmVQYWdlID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTUgPSB1c2VTdGF0ZSg1MCksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgc2l6ZSA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFNpemUgPSBfdXNlU3RhdGU2WzFdOwoKICB2YXIgX3VzZVN0YXRlNyA9IHVzZVN0YXRlKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLAogICAgICBzaG93ID0gX3VzZVN0YXRlOFswXSwKICAgICAgc2V0U2hvdyA9IF91c2VTdGF0ZThbMV07CgogIHZhciBwYXJhbVJlZiA9IHVzZVJlZihudWxsKTsKICB2YXIgc2VsZWN0ZWREZXBhcnRtZW50ID0gdXNlUmVmKHsKICAgIGlkOiBudWxsLAogICAgYWN0aXZhdGVkOiB0cnVlCiAgfSk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoKHJlc2V0KCkpOyAvLyBkaXNwYXRjaChnZXRUcmVlRGVwYXJ0bWVudCgpKTsKICB9LCBbXSk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoKGdldERlcGFydG1lbnQoX29iamVjdFNwcmVhZCh7CiAgICAgIHBhZ2U6IGFjdGl2ZVBhZ2UgLSAxLAogICAgICBzaXplOiBzaXplLAogICAgICBzb3J0OiAnY3JlYXRlZERhdGUsREVTQycKICAgIH0sIHBhcmFtUmVmLmN1cnJlbnQpKSk7CiAgfSwgW2FjdGl2ZVBhZ2UsIHNpemVdKTsKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGluaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3MpIHsKICAgICAgZGlzcGF0Y2goZ2V0RGVwYXJ0bWVudCh7CiAgICAgICAgcGFnZTogMCwKICAgICAgICBzaXplOiBzaXplLAogICAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJwogICAgICB9KSk7CiAgICAgIGRpc3BhdGNoKHJlc2V0KCkpOwogICAgfQogIH0sIFtpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzXSk7CiAgdmFyIHByb3ZpZGVycyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbCk7CgogIHZhciBjb21wdXRlZEl0ZW1zID0gZnVuY3Rpb24gY29tcHV0ZWRJdGVtcyhpdGVtcykgewogICAgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICBjb2RlOiBpdGVtLmNvZGUgfHwgJycsCiAgICAgICAgY3JlYXRlZERhdGU6IG1vbWVudChpdGVtLmNyZWF0ZWREYXRlKS5mb3JtYXQoJ0RELU1NLVlZWVknKQogICAgICB9KTsKICAgIH0pOwogIH07CgogIHZhciB0b2dnbGVEZXRhaWxzID0gZnVuY3Rpb24gdG9nZ2xlRGV0YWlscyhpbmRleCkgewogICAgdmFyIHBvc2l0aW9uID0gX2RldGFpbHMuaW5kZXhPZihpbmRleCk7CgogICAgdmFyIG5ld0RldGFpbHMgPSBfZGV0YWlscy5zbGljZSgpOwoKICAgIGlmIChwb3NpdGlvbiAhPT0gLTEpIHsKICAgICAgbmV3RGV0YWlscy5zcGxpY2UocG9zaXRpb24sIDEpOwogICAgfSBlbHNlIHsKICAgICAgbmV3RGV0YWlscyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoX2RldGFpbHMpLCBbaW5kZXhdKTsKICAgIH0KCiAgICBzZXREZXRhaWxzKG5ld0RldGFpbHMpOwogIH07CgogIHZhciBjc3ZDb250ZW50ID0gY29tcHV0ZWRJdGVtcyhwcm92aWRlcnMpLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoaXRlbSkuam9pbignLCcpOwogIH0pLmpvaW4oJ1xuJyk7CiAgdmFyIGNzdkNvZGUgPSAnZGF0YTp0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04LFNFUD0sJTBBJyArIGVuY29kZVVSSUNvbXBvbmVudChjc3ZDb250ZW50KTsKCiAgdmFyIHRvRWRpdERlcGFydG1lbnQgPSBmdW5jdGlvbiB0b0VkaXREZXBhcnRtZW50KHVzZXJJZCkgewogICAgaGlzdG9yeS5wdXNoKCIiLmNvbmNhdChwcm9wcy5tYXRjaC51cmwsICIvIikuY29uY2F0KHVzZXJJZCwgIi9lZGl0IikpOwogIH07CgogIHZhciB0b0NyZWF0ZURlcGFydG1lbnQgPSBmdW5jdGlvbiB0b0NyZWF0ZURlcGFydG1lbnQoKSB7CiAgICBoaXN0b3J5LnB1c2goIiIuY29uY2F0KHByb3BzLm1hdGNoLnVybCwgIi9uZXciKSk7CiAgfTsKCiAgdmFyIHRvRGVwYXJ0bWVudFN0cnVjdHVyZSA9IGZ1bmN0aW9uIHRvRGVwYXJ0bWVudFN0cnVjdHVyZSgpIHsKICAgIGhpc3RvcnkucHVzaCgiIi5jb25jYXQocHJvcHMubWF0Y2gudXJsLCAiL3N0cnVjdHVyZSIpKTsKICB9OwoKICB2YXIgZGVib3VuY2VkU2VhcmNoQ29sdW1uID0gXy5kZWJvdW5jZShmdW5jdGlvbiAodmFsdWUpIHsKICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID4gMCkgewogICAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKCF2YWx1ZVtrZXldKSBkZWxldGUgdmFsdWVba2V5XTsKICAgICAgfSk7CiAgICAgIHBhcmFtUmVmLmN1cnJlbnQgPSB2YWx1ZTsKICAgICAgZGlzcGF0Y2goZ2V0RGVwYXJ0bWVudChfb2JqZWN0U3ByZWFkKHsKICAgICAgICBwYWdlOiAwLAogICAgICAgIHNpemU6IHNpemUsCiAgICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLERFU0MnCiAgICAgIH0sIHZhbHVlKSkpOwogICAgfQogIH0sIDMwMCk7CgogIHZhciBvbkZpbHRlckNvbHVtbiA9IGZ1bmN0aW9uIG9uRmlsdGVyQ29sdW1uKHZhbHVlKSB7CiAgICBkZWJvdW5jZWRTZWFyY2hDb2x1bW4odmFsdWUpOwogIH07CgogIHZhciByZW5kZXJDaGlsZCA9IGZ1bmN0aW9uIHJlbmRlckNoaWxkKGNoaWxkcmVuKSB7CiAgICBpZiAoY2hpbGRyZW4gJiYgQXJyYXkuaXNBcnJheShjaGlsZHJlbikgJiYgY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICByZXR1cm4gY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmVlTm9kZSwgewogICAgICAgICAga2V5OiBpbmRleCwKICAgICAgICAgIGxhYmVsOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWROb2RlLCBudWxsLCBpdGVtLm5hbWUpCiAgICAgICAgfSwgcmVuZGVyQ2hpbGQoaXRlbS5jaGlsZHJlbikpOwogICAgICB9KTsKICAgIH0KICB9OwoKICB2YXIgbG9ja1VzZXIgPSBmdW5jdGlvbiBsb2NrVXNlcigpIHsKICAgIGRpc3BhdGNoKHVwZGF0ZURlcGFydG1lbnQoewogICAgICBpZDogc2VsZWN0ZWREZXBhcnRtZW50LmN1cnJlbnQuaWQsCiAgICAgIGFjdGl2YXRlZDogIXNlbGVjdGVkRGVwYXJ0bWVudC5jdXJyZW50LmFjdGl2YXRlZAogICAgfSkpOwogICAgc2V0U2hvdyhmYWxzZSk7CiAgfTsKCiAgdmFyIG1lbW9Db21wdXRlZEl0ZW1zID0gUmVhY3QudXNlQ2FsbGJhY2soZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICByZXR1cm4gY29tcHV0ZWRJdGVtcyhpdGVtcyk7CiAgfSwgW10pOwogIHZhciBtZW1vTGlzdGVkID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gbWVtb0NvbXB1dGVkSXRlbXMoZGVwYXJ0bWVudHMpOwogIH0sIFtkZXBhcnRtZW50c10pOwogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICBuYW1lOiAiY2lsLWdyaWQiCiAgfSksICIgRGFuaCBzXHhFMWNoIGNoaSBuaFx4RTFuaCIsIChpc0FkbWluIHx8IGFjY291bnQucm9sZS5maWx0ZXIoZnVuY3Rpb24gKHJvbCkgewogICAgcmV0dXJuIHJvbC5tZXRob2QgPT09ICdQT1NUJyAmJiByb2wuZW50aXR5ID09PSAnL2FwaS9kZXBhcnRtZW50cyc7CiAgfSkubGVuZ3RoID4gMCkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgY29sb3I6ICJzdWNjZXNzIiwKICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgIGNsYXNzTmFtZTogIm1sLTMiLAogICAgb25DbGljazogdG9DcmVhdGVEZXBhcnRtZW50CiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgIG5hbWU6ICJjaWwtcGx1cyIKICB9KSwgIiBUaFx4RUFtIG1cdTFFREJpIGNoaSBuaFx4RTFuaCIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICBjb2xvcjogImluZm8iLAogICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgY2xhc3NOYW1lOiAibWwtMyIsCiAgICBvbkNsaWNrOiB0b0RlcGFydG1lbnRTdHJ1Y3R1cmUKICB9LCAiQ1x1MUVBNXUgdHJceEZBYyBjaGkgbmhceEUxbmgiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkQm9keSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgY29sb3I6ICJwcmltYXJ5IiwKICAgIGNsYXNzTmFtZTogIm1iLTIiLAogICAgaHJlZjogY3N2Q29kZSwKICAgIGRvd25sb2FkOiAiY29yZXVpLXRhYmxlLWRhdGEuY3N2IiwKICAgIHRhcmdldDogIl9ibGFuayIKICB9LCAiVFx1MUVBM2kgZXhjZWwgKC5jc3YpIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENEYXRhVGFibGUsIHsKICAgIGl0ZW1zOiBtZW1vTGlzdGVkLAogICAgZmllbGRzOiBmaWVsZHMsCiAgICBjb2x1bW5GaWx0ZXI6IHRydWUsCiAgICBpdGVtc1BlclBhZ2VTZWxlY3Q6IHsKICAgICAgbGFiZWw6ICdT4buRIGzGsOG7o25nIHRyw6puIG3hu5l0IHRyYW5nJywKICAgICAgdmFsdWVzOiBbNTAsIDEwMCwgMTUwLCAyMDBdCiAgICB9LAogICAgaXRlbXNQZXJQYWdlOiBzaXplLAogICAgaG92ZXI6IHRydWUsCiAgICBzb3J0ZXI6IHRydWUsCiAgICBub0l0ZW1zVmlldzogewogICAgICBub1Jlc3VsdHM6ICdLaMO0bmcgdMOsbSB0aOG6pXkga+G6v3QgcXXhuqMnLAogICAgICBub0l0ZW1zOiAnS2jDtG5nIGPDsyBk4buvIGxp4buHdScKICAgIH0sCiAgICBsb2FkaW5nOiBpbml0aWFsU3RhdGUubG9hZGluZywKICAgIG9uUGFnaW5hdGlvbkNoYW5nZTogZnVuY3Rpb24gb25QYWdpbmF0aW9uQ2hhbmdlKHZhbCkgewogICAgICByZXR1cm4gc2V0U2l6ZSh2YWwpOwogICAgfSwKICAgIG9uQ29sdW1uRmlsdGVyQ2hhbmdlOiBvbkZpbHRlckNvbHVtbiwKICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgIG9yZGVyOiBmdW5jdGlvbiBvcmRlcihpdGVtLCBpbmRleCkgewogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCAoYWN0aXZlUGFnZSAtIDEpICogc2l6ZSArIGluZGV4ICsgMSk7CiAgICAgIH0sCiAgICAgIGFjdGl2YXRlZDogZnVuY3Rpb24gYWN0aXZhdGVkKGl0ZW0pIHsKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0JhZGdlLCB7CiAgICAgICAgICBjb2xvcjogZ2V0QmFkZ2UoaXRlbS5hY3RpdmF0ZWQpCiAgICAgICAgfSwgaXRlbS5hY3RpdmF0ZWQgPyAnSG/huqF0IMSR4buZbmcnIDogJ0tow7RuZyBob+G6oXQgxJHhu5luZycpKTsKICAgICAgfSwKICAgICAgc2hvd19kZXRhaWxzOiBmdW5jdGlvbiBzaG93X2RldGFpbHMoaXRlbSkgewogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJkLWZsZXggcHktMiIKICAgICAgICB9LCAoaXNBZG1pbiB8fCBhY2NvdW50LnJvbGUuZmlsdGVyKGZ1bmN0aW9uIChyb2wpIHsKICAgICAgICAgIHJldHVybiByb2wubWV0aG9kID09PSAnUFVUJyAmJiByb2wuZW50aXR5ID09PSAnL2FwaS9kZXBhcnRtZW50cyc7CiAgICAgICAgfSkubGVuZ3RoID4gMCkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIsCiAgICAgICAgICBjbGFzc05hbWU6ICJtci0zIiwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIHRvRWRpdERlcGFydG1lbnQoaXRlbS5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgICAgIG5hbWU6ICJjaWwtcGVuY2lsIgogICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIsCiAgICAgICAgICBjbGFzc05hbWU6ICJtci0zIiwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIHRvZ2dsZURldGFpbHMoaXRlbS5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgICAgIG5hbWU6ICJjaWxab29tIgogICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIsCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBzZWxlY3RlZERlcGFydG1lbnQuY3VycmVudCA9IHsKICAgICAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGl0ZW0uYWN0aXZhdGVkCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHNldFNob3coIXNob3cpOwogICAgICAgICAgfQogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgICAgICBuYW1lOiAhaXRlbS5hY3RpdmF0ZWQgPyAnY2lsTG9ja0xvY2tlZCcgOiAnY2lsTG9ja1VubG9ja2VkJwogICAgICAgIH0pKSk7CiAgICAgIH0sCiAgICAgIGRldGFpbHM6IGZ1bmN0aW9uIGRldGFpbHMoaXRlbSkgewogICAgICAgIHZhciBfaXRlbSRwYXJlbnQ7CgogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sbGFwc2UsIHsKICAgICAgICAgIHNob3c6IF9kZXRhaWxzLmluY2x1ZGVzKGl0ZW0uaWQpCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaDUiLCBudWxsLCAiVGhceEY0bmcgdGluIGNoaSBuaFx4RTFuaCIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgICAgICBsZzogIjYiCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgICAgIH0sICJNXHhFMyBjaGkgbmhceEUxbmg6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgICAgIH0sIGl0ZW0uY29kZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICAgICAgfSwgIlRceEVBbiBjaGkgbmhceEUxbmg6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgICAgIH0sIGl0ZW0ubmFtZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICAgICAgfSwgIlRceEVBbiBjaGkgbmhceEUxbmggY2hhOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgICAgICB9LCAoKF9pdGVtJHBhcmVudCA9IGl0ZW0ucGFyZW50KSA9PT0gbnVsbCB8fCBfaXRlbSRwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHBhcmVudC5uYW1lKSB8fCAnJykpKSkpKTsKICAgICAgfQogICAgfQogIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUGFnaW5hdGlvbiwgewogICAgYWN0aXZlUGFnZTogYWN0aXZlUGFnZSwKICAgIHBhZ2VzOiBNYXRoLmZsb29yKGluaXRpYWxTdGF0ZS50b3RhbEl0ZW0gLyBzaXplKSArIDEsCiAgICBvbkFjdGl2ZVBhZ2VDaGFuZ2U6IGZ1bmN0aW9uIG9uQWN0aXZlUGFnZUNoYW5nZShpKSB7CiAgICAgIHJldHVybiBzZXRBY3RpdmVQYWdlKGkpOwogICAgfQogIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ01vZGFsLCB7CiAgICBzaG93OiBzaG93LAogICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHsKICAgICAgcmV0dXJuIHNldFNob3coIXNob3cpOwogICAgfSwKICAgIGNvbG9yOiAicHJpbWFyeSIKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTW9kYWxIZWFkZXIsIHsKICAgIGNsb3NlQnV0dG9uOiB0cnVlCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ01vZGFsVGl0bGUsIG51bGwsICJLaFx4RjNhIHBoXHhGMm5nIGJhbiIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ01vZGFsQm9keSwgbnVsbCwgIkJcdTFFQTFuIGNceEYzIGNoXHUxRUFGYyBjaFx1MUVBRm4gbXVcdTFFRDFuICIuY29uY2F0KCFzZWxlY3RlZERlcGFydG1lbnQuY3VycmVudC5hY3RpdmF0ZWQgPyAnbeG7nyBraMOzYScgOiAna2jDs2EnLCAiIHBoXHhGMm5nIGJhbiBuXHhFMHkga2hceEY0bmc/IikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTW9kYWxGb290ZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICBvbkNsaWNrOiBsb2NrVXNlcgogIH0sICJcdTAxMTBcdTFFRDNuZyBceEZEIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgIGNvbG9yOiAic2Vjb25kYXJ5IiwKICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgIHJldHVybiBzZXRTaG93KCFzaG93KTsKICAgIH0KICB9LCAiSFx1MUVFN3kiKSkpKTsKfTsKCmV4cG9ydCBkZWZhdWx0IERlcGFydG1lbnQ7"},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/user/UserDepartment/departments.js"],"names":["React","useEffect","useRef","useState","useCallback","CButton","CCard","CCardBody","CCardHeader","CCollapse","CDataTable","CPagination","CRow","CCol","CIcon","useDispatch","useSelector","getDepartment","getTreeDepartment","updateDepartment","globalizedDepartmentSelectors","reset","useHistory","Tree","TreeNode","styled","moment","userSafeSelector","_","CBadge","CModal","CModalBody","CModalFooter","CModalHeader","CModalTitle","StyledNode","div","StyledRootNode","mappingStatus","ACTIVE","DISABLED","DELETED","selectAll","fields","key","label","_style","width","filter","getBadge","status","Department","props","account","isAdmin","authorities","item","length","dispatch","history","departments","details","setDetails","state","department","initialState","activePage","setActivePage","size","setSize","show","setShow","paramRef","selectedDepartment","id","activated","page","sort","current","updatingSuccess","providers","computedItems","items","map","code","createdDate","format","toggleDetails","index","position","indexOf","newDetails","slice","splice","csvContent","Object","values","join","csvCode","encodeURIComponent","toEditDepartment","userId","push","match","url","toCreateDepartment","toDepartmentStructure","debouncedSearchColumn","debounce","value","keys","forEach","onFilterColumn","renderChild","children","Array","isArray","name","lockUser","memoComputedItems","memoListed","useMemo","role","rol","method","entity","noResults","noItems","loading","val","order","show_details","includes","parent","Math","floor","totalItem","i"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { CButton, CCard, CCardBody, CCardHeader, CCollapse, CDataTable, CPagination, CRow, CCol } from '@coreui/react/lib';\nimport CIcon from '@coreui/icons-react/lib/CIcon';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getDepartment, getTreeDepartment, updateDepartment } from './department.api.js';\nimport { globalizedDepartmentSelectors, reset } from './department.reducer.js';\nimport { useHistory } from 'react-router-dom';\nimport { Tree, TreeNode } from 'react-organizational-chart';\nimport styled from 'styled-components';\nimport moment from 'moment';\nimport { userSafeSelector } from '../../login/authenticate.reducer.js';\nimport _ from 'lodash';\nimport { CBadge, CModal, CModalBody, CModalFooter, CModalHeader, CModalTitle } from '@coreui/react';\nconst StyledNode = styled.div`\n  padding: 5px;\n  border-radius: 8px;\n  display: inline-block;\n  border: 1px solid red;\n`;\n\nconst StyledRootNode = styled.div`\n  margin-top: 25px;\n  margin-bottom: 8px;\n`;\nconst mappingStatus = {\n  ACTIVE: 'ĐANG HOẠT ĐỘNG',\n  DISABLED: 'KHÔNG HOẠT ĐỘNG',\n  DELETED: 'ĐÃ XÓA'\n};\nconst { selectAll } = globalizedDepartmentSelectors;\n// Code\tTên nhà cung cấp\tNgười liên lạc\tNăm Sinh\tĐiện thoại\tNhân viên quản lý\tLoại nhà cung cấp\tPhân loại\tSửa\tTạo đơn\nconst fields = [\n  {\n    key: 'order',\n    label: 'STT',\n    _style: { width: '1%' },\n    filter: false\n  },\n  { key: 'code', label: 'Mã', _style: { width: '10%' } },\n  { key: 'name', label: 'Tên chi nhánh', _style: { width: '15%' } },\n  { key: 'activated', label: 'Trạng thái', _style: { width: '15%' } },\n  {\n    key: 'show_details',\n    label: '',\n    _style: { width: '1%' },\n    filter: false\n  }\n];\n\nconst getBadge = status => {\n  switch (status) {\n    case true:\n      return 'success';\n    case false:\n      return 'danger';\n    default:\n      return 'primary';\n  }\n};\nconst Department = props => {\n  const { account } = useSelector(userSafeSelector);\n  const isAdmin = account.authorities.filter(item => item === 'ROLE_ADMIN').length > 0;\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const departments = useSelector(selectAll);\n  const [details, setDetails] = useState([]);\n  const { initialState } = useSelector(state => state.department);\n  const [activePage, setActivePage] = useState(1);\n  const [size, setSize] = useState(50);\n  const [show, setShow] = useState(false);\n  const paramRef = useRef(null);\n  const selectedDepartment = useRef({ id: null, activated: true });\n\n  useEffect(() => {\n    dispatch(reset());\n    // dispatch(getTreeDepartment());\n  }, []);\n\n  useEffect(() => {\n    dispatch(getDepartment({ page: activePage - 1, size, sort: 'createdDate,DESC', ...paramRef.current }));\n  }, [activePage, size]);\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      dispatch(getDepartment({ page: 0, size: size, sort: 'createdDate,DESC' }));\n      dispatch(reset());\n    }\n  }, [initialState.updatingSuccess]);\n\n  const providers = useSelector(selectAll);\n  const computedItems = items => {\n    return items.map(item => {\n      return {\n        ...item,\n        code: item.code || '',\n        createdDate: moment(item.createdDate).format('DD-MM-YYYY')\n      };\n    });\n  };\n  const toggleDetails = index => {\n    const position = details.indexOf(index);\n    let newDetails = details.slice();\n    if (position !== -1) {\n      newDetails.splice(position, 1);\n    } else {\n      newDetails = [...details, index];\n    }\n    setDetails(newDetails);\n  };\n\n  const csvContent = computedItems(providers)\n    .map(item => Object.values(item).join(','))\n    .join('\\n');\n  const csvCode = 'data:text/csv;charset=utf-8,SEP=,%0A' + encodeURIComponent(csvContent);\n\n  const toEditDepartment = userId => {\n    history.push(`${props.match.url}/${userId}/edit`);\n  };\n\n  const toCreateDepartment = () => {\n    history.push(`${props.match.url}/new`);\n  };\n  const toDepartmentStructure = () => {\n    history.push(`${props.match.url}/structure`);\n  };\n\n  const debouncedSearchColumn = _.debounce(value => {\n    if (Object.keys(value).length > 0) {\n      Object.keys(value).forEach(key => {\n        if (!value[key]) delete value[key];\n      });\n      paramRef.current = value;\n      dispatch(getDepartment({ page: 0, size: size, sort: 'createdDate,DESC', ...value }));\n    }\n  }, 300);\n\n  const onFilterColumn = value => {\n    debouncedSearchColumn(value);\n  };\n\n  const renderChild = children => {\n    if (children && Array.isArray(children) && children.length > 0) {\n      return children.map((item, index) => (\n        <TreeNode key={index} label={<StyledNode>{item.name}</StyledNode>}>\n          {renderChild(item.children)}\n        </TreeNode>\n      ));\n    }\n  };\n\n  const lockUser = () => {\n    dispatch(updateDepartment({ id: selectedDepartment.current.id, activated: !selectedDepartment.current.activated }));\n    setShow(false);\n  };\n\n  const memoComputedItems = React.useCallback(items => computedItems(items), []);\n  const memoListed = React.useMemo(() => memoComputedItems(departments), [departments]);\n\n  return (\n    <CCard>\n      <CCardHeader>\n        <CIcon name=\"cil-grid\" /> Danh sách chi nhánh\n        {(isAdmin || account.role.filter(rol => rol.method === 'POST' && rol.entity === '/api/departments').length > 0) && (\n          <CButton color=\"success\" variant=\"outline\" className=\"ml-3\" onClick={toCreateDepartment}>\n            <CIcon name=\"cil-plus\" /> Thêm mới chi nhánh\n          </CButton>\n        )}\n        <CButton color=\"info\" variant=\"outline\" className=\"ml-3\" onClick={toDepartmentStructure}>\n          Cấu trúc chi nhánh\n        </CButton>\n      </CCardHeader>\n      <CCardBody>\n        <CButton color=\"primary\" className=\"mb-2\" href={csvCode} download=\"coreui-table-data.csv\" target=\"_blank\">\n          Tải excel (.csv)\n        </CButton>\n        <CDataTable\n          items={memoListed}\n          fields={fields}\n          columnFilter\n          itemsPerPageSelect={{ label: 'Số lượng trên một trang', values: [50, 100, 150, 200] }}\n          itemsPerPage={size}\n          hover\n          sorter\n          noItemsView={{\n            noResults: 'Không tìm thấy kết quả',\n            noItems: 'Không có dữ liệu'\n          }}\n          loading={initialState.loading}\n\n\n\n          onPaginationChange={val => setSize(val)}\n\n\n\n          onColumnFilterChange={onFilterColumn}\n          scopedSlots={{\n            order: (item, index) => <td>{(activePage - 1) * size + index + 1}</td>,\n            activated: item => (\n              <td>\n                <CBadge color={getBadge(item.activated)}>{item.activated ? 'Hoạt động' : 'Không hoạt động'}</CBadge>\n              </td>\n            ),\n            show_details: item => {\n              return (\n                <td className=\"d-flex py-2\">\n                  {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/departments').length > 0) && (\n                    <CButton\n                      color=\"primary\"\n                      variant=\"outline\"\n                      shape=\"square\"\n                      size=\"sm\"\n                      className=\"mr-3\"\n                      onClick={() => {\n                        toEditDepartment(item.id);\n                      }}\n                    >\n                      <CIcon name=\"cil-pencil\" />\n                    </CButton>\n                  )}\n                  <CButton\n                    color=\"primary\"\n                    variant=\"outline\"\n                    shape=\"square\"\n                    size=\"sm\"\n                    className=\"mr-3\"\n                    onClick={() => {\n                      toggleDetails(item.id);\n                    }}\n                  >\n                    <CIcon name=\"cilZoom\" />\n                  </CButton>\n                  <CButton\n                    color=\"primary\"\n                    variant=\"outline\"\n                    shape=\"square\"\n                    size=\"sm\"\n                    onClick={() => {\n                      selectedDepartment.current = { id: item.id, activated: item.activated };\n                      setShow(!show);\n                    }}\n                  >\n                    <CIcon name={!item.activated ? 'cilLockLocked' : 'cilLockUnlocked'} />\n                  </CButton>\n                </td>\n              );\n            },\n            details: item => {\n              return (\n                <CCollapse show={details.includes(item.id)}>\n                  <CCardBody>\n                    <h5>Thông tin chi nhánh</h5>\n                    <CRow>\n                      <CCol lg=\"6\">\n                        <dl className=\"row\">\n                          <dt className=\"col-sm-3\">Mã chi nhánh:</dt>\n                          <dd className=\"col-sm-9\">{item.code}</dd>\n                        </dl>\n                        <dl className=\"row\">\n                          <dt className=\"col-sm-3\">Tên chi nhánh:</dt>\n                          <dd className=\"col-sm-9\">{item.name}</dd>\n                        </dl>\n                        <dl className=\"row\">\n                          <dt className=\"col-sm-3\">Tên chi nhánh cha:</dt>\n                          <dd className=\"col-sm-9\">{item.parent?.name || ''}</dd>\n                        </dl>\n                      </CCol>\n                    </CRow>\n                  </CCardBody>\n                </CCollapse>\n              );\n            }\n          }}\n        />\n        <CPagination\n          activePage={activePage}\n          pages={Math.floor(initialState.totalItem / size) + 1}\n          onActivePageChange={i => setActivePage(i)}\n        />\n      </CCardBody>\n      <CModal show={show} onClose={() => setShow(!show)} color=\"primary\">\n        <CModalHeader closeButton>\n          <CModalTitle>Khóa phòng ban</CModalTitle>\n        </CModalHeader>\n        <CModalBody>{`Bạn có chắc chắn muốn ${!selectedDepartment.current.activated ? 'mở khóa' : 'khóa'} phòng ban này không?`}</CModalBody>\n        <CModalFooter>\n          <CButton color=\"primary\" onClick={lockUser}>\n            Đồng ý\n          </CButton>\n          <CButton color=\"secondary\" onClick={() => setShow(!show)}>\n            Hủy\n          </CButton>\n        </CModalFooter>\n      </CModal>\n    </CCard>\n  );\n};\n\nexport default Department;\n"]}]}