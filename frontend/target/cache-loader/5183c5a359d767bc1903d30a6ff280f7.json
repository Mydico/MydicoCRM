{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Bill/Bill.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Bill/Bill.js","mtime":1625304047635},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgppbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgQ0NhcmRCb2R5LCBDQmFkZ2UsIENCdXR0b24sIENDb2xsYXBzZSwgQ0RhdGFUYWJsZSwgQ0NhcmQsIENDYXJkSGVhZGVyLCBDUm93LCBDQ29sLCBDUGFnaW5hdGlvbiwgQ01vZGFsLCBDTW9kYWxIZWFkZXIsIENNb2RhbEJvZHksIENNb2RhbEZvb3RlciwgQ01vZGFsVGl0bGUsIENMYWJlbCB9IGZyb20gJ0Bjb3JldWkvcmVhY3QvbGliJzsKaW1wb3J0IENJY29uIGZyb20gJ0Bjb3JldWkvaWNvbnMtcmVhY3QvbGliL0NJY29uJzsKaW1wb3J0IHsgdXNlRGlzcGF0Y2gsIHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnOwppbXBvcnQgeyBnZXRCaWxsLCB1cGRhdGVCaWxsLCB1cGRhdGVUcmFuc3BvcnRlckJpbGwgfSBmcm9tICcuL2JpbGwuYXBpJzsKaW1wb3J0IHsgZ2xvYmFsaXplZEJpbGxzU2VsZWN0b3JzLCByZXNldCB9IGZyb20gJy4vYmlsbC5yZWR1Y2VyJzsKaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgeyBUYWJsZSB9IGZyb20gJ3JlYWN0c3RyYXAnOwppbXBvcnQgeyBCaWxsU3RhdHVzIH0gZnJvbSAnLi9iaWxsLXN0YXR1cyc7CmltcG9ydCB7IGNvbmZpcm1BbGVydCB9IGZyb20gJ3JlYWN0LWNvbmZpcm0tYWxlcnQnOyAvLyBJbXBvcnQKCmltcG9ydCAncmVhY3QtY29uZmlybS1hbGVydC9zcmMvcmVhY3QtY29uZmlybS1hbGVydC5jc3MnOyAvLyBJbXBvcnQgY3NzCgppbXBvcnQgU2VsZWN0IGZyb20gJ3JlYWN0LXNlbGVjdCc7CmltcG9ydCB7IGdldFRyYW5wb3J0ZXIsIGdldFVzZXIgfSBmcm9tICcuLi8uLi91c2VyL1VzZXJMaXN0L3VzZXIuYXBpJzsKaW1wb3J0IHsgZ2xvYmFsaXplZFVzZXJTZWxlY3RvcnMgfSBmcm9tICcuLi8uLi91c2VyL1VzZXJMaXN0L3VzZXIucmVkdWNlcic7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgdXNlclNhZmVTZWxlY3RvciB9IGZyb20gJy4uLy4uL2xvZ2luL2F1dGhlbnRpY2F0ZS5yZWR1Y2VyJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgQ0Zvcm1Hcm91cCwgQ0lucHV0IH0gZnJvbSAnQGNvcmV1aS9yZWFjdCc7CmltcG9ydCBjaXRpZXMgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL3V0aWxzL2NpdHknOwppbXBvcnQgZGlzdHJpY3QgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL3V0aWxzL2Rpc3RyaWN0Lmpzb24nOwp2YXIgbWFwcGluZ1N0YXR1cyA9IHsKICBDUkVBVEVEOiAnQ0jhu5wgRFVZ4buGVCcsCiAgQVBQUk9WRUQ6ICfEkMODIERVWeG7hlQnLAogIENBTkNFTDogJ0tIw4FDSCBI4bumWScsCiAgUkVKRUNURUQ6ICdLSMOUTkcgRFVZ4buGVCcsCiAgU1VQUExZX1dBSVRJTkc6ICfEkOG7okkgWFXhuqRUIEtITycsCiAgU0hJUFBJTkc6ICfEkEFORyBW4bqsTiBDSFVZ4buCTicsCiAgU1VDQ0VTUzogJ0dJQU8gVEjDgE5IIEPDlE5HJwp9Owp2YXIgc3RhdHVzTGlzdCA9IFt7CiAgdmFsdWU6ICdDUkVBVEVEJywKICBsYWJlbDogJ0NI4bucIERVWeG7hlQnCn0sIHsKICB2YWx1ZTogJ0FQUFJPVkVEJywKICBsYWJlbDogJ8SQw4MgRFVZ4buGVCcKfSwgewogIHZhbHVlOiAnQ0FOQ0VMJywKICBsYWJlbDogJ0tIw4FDSCBI4bumWScKfSwgewogIHZhbHVlOiAnUkVKRUNURUQnLAogIGxhYmVsOiAnS0jDlE5HIERVWeG7hlQnCn0sIHsKICB2YWx1ZTogJ1NVUFBMWV9XQUlUSU5HJywKICBsYWJlbDogJ8SQ4buiSSBYVeG6pFQgS0hPJwp9LCB7CiAgdmFsdWU6ICdTSElQUElORycsCiAgbGFiZWw6ICfEkEFORyBW4bqsTiBDSFVZ4buCTicKfSwgewogIHZhbHVlOiAnU1VDQ0VTUycsCiAgbGFiZWw6ICdHSUFPIFRIw4BOSCBDw5RORycKfV07CnZhciBzZWxlY3RBbGwgPSBnbG9iYWxpemVkQmlsbHNTZWxlY3RvcnMuc2VsZWN0QWxsOwp2YXIgc2VsZWN0VXNlckFsbCA9IGdsb2JhbGl6ZWRVc2VyU2VsZWN0b3JzLnNlbGVjdEFsbDsgLy8gQ29kZQlUw6puIGPhu61hIGjDoG5nL8SR4bqhaSBsw70JTmfGsOG7nWkgbGnDqm4gbOG6oWMJTsSDbSBTaW5oCcSQaeG7h24gdGhv4bqhaQlOaMOibiB2acOqbiBxdeG6o24gbMO9CXbhuq1uIMSRxqFuZwlQaMOibiBsb+G6oWkJU+G7rWEJVOG6oW8gxJHGoW4KCnZhciBmaWVsZHMgPSBbewogIGtleTogJ2JpbGwnLAogIGxhYmVsOiAnU1RUJywKICBfc3R5bGU6IHsKICAgIHdpZHRoOiAnMSUnCiAgfSwKICBmaWx0ZXI6IGZhbHNlCn0sIHsKICBrZXk6ICdzaG93X2RldGFpbHMnLAogIGxhYmVsOiAnWGVtIGNoaSB0aeG6v3QnLAogIF9zdHlsZTogewogICAgd2lkdGg6ICcxJScKICB9LAogIGZpbHRlcjogZmFsc2UKfSwgewogIGtleTogJ2NvZGUnLAogIGxhYmVsOiAnTcOjIHbhuq1uIMSRxqFuJywKICBfc3R5bGU6IHsKICAgIHdpZHRoOiAnMTAlJwogIH0KfSwgewogIGtleTogJ2N1c3RvbWVyTmFtZScsCiAgbGFiZWw6ICdUw6puIGtow6FjaCBow6BuZy/EkeG6oWkgbMO9JywKICBfc3R5bGU6IHsKICAgIHdpZHRoOiAnMTUlJwogIH0KfSwgewogIGtleTogJ3RyYW5zcG9ydGVyTmFtZScsCiAgbGFiZWw6ICdOZ8aw4budaSB24bqtbiBjaHV54buDbicsCiAgX3N0eWxlOiB7CiAgICB3aWR0aDogJzEwJScKICB9Cn0sIHsKICBrZXk6ICdxdWFudGl0eScsCiAgbGFiZWw6ICdU4buVbmcgc+G6o24gcGjhuqltJywKICBfc3R5bGU6IHsKICAgIHdpZHRoOiAnNSUnCiAgfSwKICBmaWx0ZXI6IGZhbHNlCn0sIHsKICBrZXk6ICd0b3RhbCcsCiAgbGFiZWw6ICdUaeG7gW4gdGhhbmggdG/DoW4nLAogIF9zdHlsZTogewogICAgd2lkdGg6ICcxMCUnCiAgfSwKICBmaWx0ZXI6IGZhbHNlCn0sIHsKICBrZXk6ICdjcmVhdGVkQnknLAogIGxhYmVsOiAnTmjDom4gdmnDqm4gcXXhuqNuIGzDvScsCiAgX3N0eWxlOiB7CiAgICB3aWR0aDogJzEwJScKICB9Cn0sIHsKICBrZXk6ICdjcmVhdGVkRGF0ZScsCiAgbGFiZWw6ICdOZ8OgeSB04bqhbycsCiAgX3N0eWxlOiB7CiAgICB3aWR0aDogJzEwJScKICB9LAogIGZpbHRlcjogZmFsc2UKfSwgewogIGtleTogJ3N0YXR1cycsCiAgbGFiZWw6ICdUcuG6oW5nIHRow6FpJywKICBfc3R5bGU6IHsKICAgIHdpZHRoOiAnMTAlJwogIH0KfSwgewogIGtleTogJ2FjdGlvbicsCiAgbGFiZWw6ICcnLAogIF9zdHlsZTogewogICAgd2lkdGg6ICczMCUnCiAgfSwKICBmaWx0ZXI6IGZhbHNlCn1dOwoKdmFyIGdldEJhZGdlID0gZnVuY3Rpb24gZ2V0QmFkZ2Uoc3RhdHVzKSB7CiAgc3dpdGNoIChzdGF0dXMpIHsKICAgIGNhc2UgQmlsbFN0YXR1cy5BUFBST1ZFRDoKICAgICAgcmV0dXJuICdwcmltYXJ5JzsKCiAgICBjYXNlIEJpbGxTdGF0dXMuU1VDQ0VTUzoKICAgICAgcmV0dXJuICdzdWNjZXNzJzsKCiAgICBjYXNlIEJpbGxTdGF0dXMuU0hJUFBJTkc6CiAgICAgIHJldHVybiAnaW5mbyc7CgogICAgY2FzZSBCaWxsU3RhdHVzLkNSRUFURUQ6CiAgICBjYXNlIEJpbGxTdGF0dXMuU1VQUExZX1dBSVRJTkc6CiAgICAgIHJldHVybiAnd2FybmluZyc7CgogICAgY2FzZSBCaWxsU3RhdHVzLlJFSkVDVEVEOgogICAgY2FzZSBCaWxsU3RhdHVzLkNBTkNFTDoKICAgICAgcmV0dXJuICdkYW5nZXInOwoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiAncHJpbWFyeSc7CiAgfQp9OwoKdmFyIEJpbGwgPSBmdW5jdGlvbiBCaWxsKHByb3BzKSB7CiAgdmFyIF91c2VTZWxlY3RvciA9IHVzZVNlbGVjdG9yKHVzZXJTYWZlU2VsZWN0b3IpLAogICAgICBhY2NvdW50ID0gX3VzZVNlbGVjdG9yLmFjY291bnQ7CgogIHZhciBpc0FkbWluID0gYWNjb3VudC5hdXRob3JpdGllcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtID09PSAnUk9MRV9BRE1JTic7CiAgfSkubGVuZ3RoID4gMDsKICB2YXIgc2VsZWN0ZWRCaWxsID0gdXNlUmVmKG51bGwpOwogIHZhciBzZWxlY3RlZFRyYW5zcG9ydGVyID0gdXNlUmVmKG51bGwpOwoKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoW10pLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgX2RldGFpbHMgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXREZXRhaWxzID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VTZWxlY3RvcjIgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5iaWxsOwogIH0pLAogICAgICBpbml0aWFsU3RhdGUgPSBfdXNlU2VsZWN0b3IyLmluaXRpYWxTdGF0ZTsKCiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZSgxKSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICBhY3RpdmVQYWdlID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0QWN0aXZlUGFnZSA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBfdXNlU3RhdGU1ID0gdXNlU3RhdGUoNTApLAogICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksCiAgICAgIHNpemUgPSBfdXNlU3RhdGU2WzBdLAogICAgICBzZXRTaXplID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTcgPSB1c2VTdGF0ZShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU3LCAyKSwKICAgICAgbW9kYWwgPSBfdXNlU3RhdGU4WzBdLAogICAgICBzZXRNb2RhbCA9IF91c2VTdGF0ZThbMV07CgogIHZhciBwYXJhbVJlZiA9IHVzZVJlZihudWxsKTsKICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpOwogIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpOwoKICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gUmVhY3QudXNlU3RhdGUoewogICAgc3RhcnREYXRlOiBudWxsLAogICAgZW5kRGF0ZTogbnVsbAogIH0pLAogICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSwKICAgICAgZGF0ZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sCiAgICAgIHNldERhdGUgPSBfUmVhY3QkdXNlU3RhdGUyWzFdOwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGRhdGUuZW5kRGF0ZSAmJiBkYXRlLnN0YXJ0RGF0ZSkgewogICAgICB2YXIgcGFyYW1zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICBwYWdlOiBhY3RpdmVQYWdlIC0gMSwKICAgICAgICBzaXplOiBzaXplLAogICAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJwogICAgICB9LCBwYXJhbVJlZi5jdXJyZW50KSwgZGF0ZSk7CgogICAgICBkaXNwYXRjaChnZXRCaWxsKHBhcmFtcykpOwogICAgfQogIH0sIFtkYXRlXSk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoKHJlc2V0KCkpOwogIH0sIFtdKTsKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKG1vZGFsKSB7CiAgICAgIGRpc3BhdGNoKGdldFRyYW5wb3J0ZXIoewogICAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgICAgfSkpOwogICAgfQogIH0sIFttb2RhbF0pOwogIHZhciBiaWxscyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbCk7CiAgdmFyIHVzZXJzID0gdXNlU2VsZWN0b3Ioc2VsZWN0VXNlckFsbCk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoKGdldEJpbGwoX29iamVjdFNwcmVhZCh7CiAgICAgIHBhZ2U6IGFjdGl2ZVBhZ2UgLSAxLAogICAgICBzaXplOiBzaXplLAogICAgICBzb3J0OiAnY3JlYXRlZERhdGUsREVTQycKICAgIH0sIHBhcmFtUmVmLmN1cnJlbnQpKSk7CiAgfSwgW2FjdGl2ZVBhZ2UsIHNpemVdKTsKCiAgdmFyIGNvbXB1dGVkSXRlbXMgPSBmdW5jdGlvbiBjb21wdXRlZEl0ZW1zKGl0ZW1zKSB7CiAgICByZXR1cm4gaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHZhciBfaXRlbSRjdXN0b21lciwgX2l0ZW0kb3JkZXIsIF9pdGVtJG9yZGVyJG9yZGVyRGV0YSwgX2l0ZW0kb3JkZXIyLCBfaXRlbSRvcmRlcjIkb3JkZXJEZXQ7CgogICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICB0ZWw6IChfaXRlbSRjdXN0b21lciA9IGl0ZW0uY3VzdG9tZXIpID09PSBudWxsIHx8IF9pdGVtJGN1c3RvbWVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRjdXN0b21lci50ZWwsCiAgICAgICAgcXVhbnRpdHk6ICgoX2l0ZW0kb3JkZXIgPSBpdGVtLm9yZGVyKSA9PT0gbnVsbCB8fCBfaXRlbSRvcmRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJG9yZGVyJG9yZGVyRGV0YSA9IF9pdGVtJG9yZGVyLm9yZGVyRGV0YWlscykgPT09IG51bGwgfHwgX2l0ZW0kb3JkZXIkb3JkZXJEZXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRvcmRlciRvcmRlckRldGEucmVkdWNlKGZ1bmN0aW9uIChzdW0sIHByZXYpIHsKICAgICAgICAgIHJldHVybiBzdW0gKyBwcmV2LnF1YW50aXR5OwogICAgICAgIH0sIDApKSB8fCAwLAogICAgICAgIHRvdGFsOiAoKF9pdGVtJG9yZGVyMiA9IGl0ZW0ub3JkZXIpID09PSBudWxsIHx8IF9pdGVtJG9yZGVyMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJG9yZGVyMiRvcmRlckRldCA9IF9pdGVtJG9yZGVyMi5vcmRlckRldGFpbHMpID09PSBudWxsIHx8IF9pdGVtJG9yZGVyMiRvcmRlckRldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kb3JkZXIyJG9yZGVyRGV0LnJlZHVjZShmdW5jdGlvbiAoc3VtLCBjdXJyZW50KSB7CiAgICAgICAgICByZXR1cm4gc3VtICsgY3VycmVudC5wcmljZVRvdGFsOwogICAgICAgIH0sIDApLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgICAgY3VycmVuY3k6ICdWTkQnCiAgICAgICAgfSkpIHx8IDAsCiAgICAgICAgY3JlYXRlZERhdGU6IG1vbWVudChpdGVtLmNyZWF0ZWREYXRlKS5mb3JtYXQoJ0RELU1NLVlZWVknKQogICAgICB9KTsKICAgIH0pOwogIH07CgogIHZhciB0b2dnbGVEZXRhaWxzID0gZnVuY3Rpb24gdG9nZ2xlRGV0YWlscyhpbmRleCkgewogICAgdmFyIHBvc2l0aW9uID0gX2RldGFpbHMuaW5kZXhPZihpbmRleCk7CgogICAgdmFyIG5ld0RldGFpbHMgPSBfZGV0YWlscy5zbGljZSgpOwoKICAgIGlmIChwb3NpdGlvbiAhPT0gLTEpIHsKICAgICAgbmV3RGV0YWlscy5zcGxpY2UocG9zaXRpb24sIDEpOwogICAgfSBlbHNlIHsKICAgICAgbmV3RGV0YWlscyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoX2RldGFpbHMpLCBbaW5kZXhdKTsKICAgIH0KCiAgICBzZXREZXRhaWxzKG5ld0RldGFpbHMpOwogIH07CgogIHZhciBjc3ZDb250ZW50ID0gYmlsbHMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhpdGVtKS5qb2luKCcsJyk7CiAgfSkuam9pbignXG4nKTsKICB2YXIgY3N2Q29kZSA9ICdkYXRhOnRleHQvY3N2O2NoYXJzZXQ9dXRmLTgsU0VQPSwlMEEnICsgZW5jb2RlVVJJQ29tcG9uZW50KGNzdkNvbnRlbnQpOwoKICB2YXIgZGVib3VuY2VkU2VhcmNoQ29sdW1uID0gXy5kZWJvdW5jZShmdW5jdGlvbiAodmFsdWUpIHsKICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID4gMCkgewogICAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKCF2YWx1ZVtrZXldKSBkZWxldGUgdmFsdWVba2V5XTsKICAgICAgfSk7CiAgICAgIHBhcmFtUmVmLmN1cnJlbnQgPSB2YWx1ZTsKICAgICAgZGlzcGF0Y2goZ2V0QmlsbChfb2JqZWN0U3ByZWFkKHsKICAgICAgICBwYWdlOiAwLAogICAgICAgIHNpemU6IHNpemUsCiAgICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLERFU0MnCiAgICAgIH0sIHZhbHVlKSkpOwogICAgfQogIH0sIDMwMCk7CgogIHZhciBvbkZpbHRlckNvbHVtbiA9IGZ1bmN0aW9uIG9uRmlsdGVyQ29sdW1uKHZhbHVlKSB7CiAgICBkZWJvdW5jZWRTZWFyY2hDb2x1bW4odmFsdWUpOwogIH07CgogIHZhciB0b0VkaXRCaWxsID0gZnVuY3Rpb24gdG9FZGl0QmlsbCh0eXBlSWQpIHsKICAgIGhpc3RvcnkucHVzaCgiIi5jb25jYXQocHJvcHMubWF0Y2gudXJsLCAiLyIpLmNvbmNhdCh0eXBlSWQsICIvZWRpdCIpKTsKICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGluaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3MpIHsKICAgICAgZGlzcGF0Y2goZ2V0QmlsbChfb2JqZWN0U3ByZWFkKHsKICAgICAgICBwYWdlOiBhY3RpdmVQYWdlIC0gMSwKICAgICAgICBzaXplOiBzaXplLAogICAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJwogICAgICB9LCBwYXJhbVJlZi5jdXJyZW50KSkpOwogICAgICBzZXRNb2RhbChmYWxzZSk7CiAgICAgIGRpc3BhdGNoKHJlc2V0KCkpOwogICAgfQogIH0sIFtpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzXSk7CgogIHZhciBhcHByb3ZlQmlsbCA9IGZ1bmN0aW9uIGFwcHJvdmVCaWxsKGJpbGwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGlkOiBiaWxsLmlkLAogICAgICAgIHN0YXR1czogQmlsbFN0YXR1cy5BUFBST1ZFRCwKICAgICAgICBhY3Rpb246ICdhcHByb3ZlJywKICAgICAgICBvcmRlcjogYmlsbC5vcmRlcgogICAgICB9OwogICAgICBkaXNwYXRjaCh1cGRhdGVCaWxsKGRhdGEpKTsKICAgIH07CiAgfTsKCiAgdmFyIHJlamVjdEJpbGwgPSBmdW5jdGlvbiByZWplY3RCaWxsKGJpbGwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGlkOiBiaWxsLmlkLAogICAgICAgIHN0YXR1czogQmlsbFN0YXR1cy5SRUpFQ1RFRCwKICAgICAgICBhY3Rpb246ICdjYW5jZWwnLAogICAgICAgIG9yZGVyOiBiaWxsLm9yZGVyCiAgICAgIH07CiAgICAgIGRpc3BhdGNoKHVwZGF0ZUJpbGwoZGF0YSkpOwogICAgfTsKICB9OwoKICB2YXIgc2hpcHBpbmdCaWxsID0gZnVuY3Rpb24gc2hpcHBpbmdCaWxsKGJpbGwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGRpc3BhdGNoKHVwZGF0ZUJpbGwoewogICAgICAgIGlkOiBiaWxsLmlkLAogICAgICAgIHN0YXR1czogQmlsbFN0YXR1cy5TSElQUElORywKICAgICAgICBhY3Rpb246ICdzaGlwcGluZycsCiAgICAgICAgb3JkZXI6IGJpbGwub3JkZXIKICAgICAgfSkpOwogICAgfTsKICB9OwoKICB2YXIgc3VjY2Vzc0JpbGwgPSBmdW5jdGlvbiBzdWNjZXNzQmlsbChiaWxsKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBkaXNwYXRjaCh1cGRhdGVCaWxsKHsKICAgICAgICBpZDogYmlsbC5pZCwKICAgICAgICBzdGF0dXM6IEJpbGxTdGF0dXMuU1VDQ0VTUywKICAgICAgICBhY3Rpb246ICdjb21wbGV0ZScsCiAgICAgICAgb3JkZXI6IGJpbGwub3JkZXIKICAgICAgfSkpOwogICAgfTsKICB9OwoKICB2YXIgY2FuY2VsQmlsbCA9IGZ1bmN0aW9uIGNhbmNlbEJpbGwoYmlsbCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgYmlsbC5zdGF0dXMgPSBCaWxsU3RhdHVzLkNBTkNFTDsKICAgICAgZGlzcGF0Y2godXBkYXRlQmlsbChiaWxsKSk7CiAgICB9OwogIH07CgogIHZhciBkZWxldGVCaWxsID0gZnVuY3Rpb24gZGVsZXRlQmlsbChiaWxsKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBpZDogYmlsbC5pZCwKICAgICAgICBzdGF0dXM6IEJpbGxTdGF0dXMuREVMRVRFRCwKICAgICAgICBhY3Rpb246ICdkZWxldGUnLAogICAgICAgIG9yZGVyOiBiaWxsLm9yZGVyCiAgICAgIH07CiAgICAgIGRpc3BhdGNoKHVwZGF0ZUJpbGwoZGF0YSkpOwogICAgfTsKICB9OwoKICB2YXIgYWxlcnRBY3Rpb24gPSBmdW5jdGlvbiBhbGVydEFjdGlvbihpdGVtLCBvcGVyYXRpb24sIG1lc3NhZ2UpIHsKICAgIGNvbmZpcm1BbGVydCh7CiAgICAgIHRpdGxlOiAnWMOhYyBuaOG6rW4nLAogICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICBidXR0b25zOiBbewogICAgICAgIGxhYmVsOiAnxJDhu5NuZyDDvScsCiAgICAgICAgb25DbGljazogb3BlcmF0aW9uKGl0ZW0pCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ0jhu6d5JwogICAgICB9XQogICAgfSk7CiAgfTsKCiAgdmFyIGFwcHJvdmVBbGVydCA9IGZ1bmN0aW9uIGFwcHJvdmVBbGVydChpdGVtKSB7CiAgICBjb25maXJtQWxlcnQoewogICAgICB0aXRsZTogJ1jDoWMgbmjhuq1uJywKICAgICAgbWVzc2FnZTogJ0LhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiBkdXnhu4d0IHbhuq1uIMSRxqFuIG7DoHk/JywKICAgICAgYnV0dG9uczogW3sKICAgICAgICBsYWJlbDogJ8SQ4buTbmcgw70nLAogICAgICAgIG9uQ2xpY2s6IGFwcHJvdmVCaWxsKGl0ZW0pCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ0jhu6d5JwogICAgICB9XQogICAgfSk7CiAgfTsKCiAgdmFyIGRlbGV0ZUFsZXJ0ID0gZnVuY3Rpb24gZGVsZXRlQWxlcnQoaXRlbSkgewogICAgY29uZmlybUFsZXJ0KHsKICAgICAgdGl0bGU6ICdYw6FjIG5o4bqtbicsCiAgICAgIG1lc3NhZ2U6ICdC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4geMOzYSB24bqtbiDEkcahbiBuw6B5PycsCiAgICAgIGJ1dHRvbnM6IFt7CiAgICAgICAgbGFiZWw6ICfEkOG7k25nIMO9JywKICAgICAgICBvbkNsaWNrOiBkZWxldGVCaWxsKGl0ZW0pCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ0jhu6d5JwogICAgICB9XQogICAgfSk7CiAgfTsKCiAgdmFyIHJlbmRlckJ1dHRvblN0YXR1cyA9IGZ1bmN0aW9uIHJlbmRlckJ1dHRvblN0YXR1cyhpdGVtKSB7CiAgICBzd2l0Y2ggKGl0ZW0uc3RhdHVzKSB7CiAgICAgIGNhc2UgQmlsbFN0YXR1cy5DUkVBVEVEOgogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAoaXNBZG1pbiB8fCBhY2NvdW50LnJvbGUuZmlsdGVyKGZ1bmN0aW9uIChyb2wpIHsKICAgICAgICAgIHJldHVybiByb2wubWV0aG9kID09PSAnUFVUJyAmJiByb2wuZW50aXR5ID09PSAnL2FwaS9iaWxscy9hcHByb3ZlJzsKICAgICAgICB9KS5sZW5ndGggPiAwKSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBhcHByb3ZlQWxlcnQoaXRlbSk7CiAgICAgICAgICB9LAogICAgICAgICAgY29sb3I6ICJzdWNjZXNzIiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIsCiAgICAgICAgICBjbGFzc05hbWU6ICJtci0xIgogICAgICAgIH0sICJEVVlcdTFFQzZUIFZcdTFFQUNOIFx1MDExMFx1MDFBME4iKSwgKGlzQWRtaW4gfHwgYWNjb3VudC5yb2xlLmZpbHRlcihmdW5jdGlvbiAocm9sKSB7CiAgICAgICAgICByZXR1cm4gcm9sLm1ldGhvZCA9PT0gJ1BVVCcgJiYgcm9sLmVudGl0eSA9PT0gJy9hcGkvYmlsbHMvY2FuY2VsJzsKICAgICAgICB9KS5sZW5ndGggPiAwKSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBhbGVydEFjdGlvbihpdGVtLCByZWplY3RCaWxsLCAnQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHThu6sgY2jhu5FpIHbhuq1uIMSRxqFuIG7DoHk/Jyk7CiAgICAgICAgICB9LAogICAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICAgICAgc2hhcGU6ICJzcXVhcmUiLAogICAgICAgICAgc2l6ZTogInNtIgogICAgICAgIH0sICJIXHUxRUU2WSBWXHUxRUFDTiBcdTAxMTBcdTAxQTBOIikpOwoKICAgICAgY2FzZSBCaWxsU3RhdHVzLkFQUFJPVkVEOgogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAoaXNBZG1pbiB8fCBhY2NvdW50LnJvbGUuZmlsdGVyKGZ1bmN0aW9uIChyb2wpIHsKICAgICAgICAgIHJldHVybiByb2wubWV0aG9kID09PSAnUFVUJyAmJiByb2wuZW50aXR5ID09PSAnL2FwaS9iaWxscy90cmFuc3BvcnRlcic7CiAgICAgICAgfSkubGVuZ3RoID4gMCkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgc2V0TW9kYWwodHJ1ZSk7CiAgICAgICAgICAgIHNlbGVjdGVkQmlsbC5jdXJyZW50ID0gaXRlbTsgLy8gYWxlcnRBY3Rpb24oaXRlbSwgc3VwcGx5V2FpdGluZ0JpbGwsICdC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gZ8OhbiB24bqtbiDEkcahbiBuw6B5PycpOwogICAgICAgICAgfSwKICAgICAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgICAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICAgICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgICAgICBzaXplOiAic20iLAogICAgICAgICAgY2xhc3NOYW1lOiAibXItMSIKICAgICAgICB9LCAiR1x4QzFOIE5HXHUwMUFGXHUxRURDSSBWXHUxRUFDTiBDSFVZXHUxRUMyTiIpKTsKCiAgICAgIGNhc2UgQmlsbFN0YXR1cy5TVVBQTFlfV0FJVElORzoKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgKGlzQWRtaW4gfHwgYWNjb3VudC5yb2xlLmZpbHRlcihmdW5jdGlvbiAocm9sKSB7CiAgICAgICAgICByZXR1cm4gcm9sLm1ldGhvZCA9PT0gJ1BVVCcgJiYgcm9sLmVudGl0eSA9PT0gJy9hcGkvYmlsbHMvc2hpcHBpbmcnOwogICAgICAgIH0pLmxlbmd0aCA+IDApICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIGFsZXJ0QWN0aW9uKGl0ZW0sIHNoaXBwaW5nQmlsbCwgJ0LhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiB4deG6pXQga2hvPycpOwogICAgICAgICAgfSwKICAgICAgICAgIGNvbG9yOiAiaW5mbyIsCiAgICAgICAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICAgICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgICAgICBzaXplOiAic20iCiAgICAgICAgfSwgIlhVXHUxRUE0VCBLSE8iKSk7CgogICAgICBjYXNlIEJpbGxTdGF0dXMuU0hJUFBJTkc6CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIG51bGwsIChpc0FkbWluIHx8IGFjY291bnQucm9sZS5maWx0ZXIoZnVuY3Rpb24gKHJvbCkgewogICAgICAgICAgcmV0dXJuIHJvbC5tZXRob2QgPT09ICdQVVQnICYmIHJvbC5lbnRpdHkgPT09ICcvYXBpL2JpbGxzL2NvbXBsZXRlJzsKICAgICAgICB9KS5sZW5ndGggPiAwKSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBhbGVydEFjdGlvbihpdGVtLCBzdWNjZXNzQmlsbCwgJ0LhuqFuIGPDsyBjaOG6r2MgY2jhuq9uIG114buRbiBob8OgbiB0aMOgbmggduG6rW4gxJHGoW4gbsOgeT8nKTsKICAgICAgICAgIH0sCiAgICAgICAgICBjb2xvcjogImluZm8iLAogICAgICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICAgICAgc2hhcGU6ICJzcXVhcmUiLAogICAgICAgICAgc2l6ZTogInNtIgogICAgICAgIH0sICJIT1x4QzBOIFRIXHhDME5IIikpOwoKICAgICAgY2FzZSBCaWxsU3RhdHVzLkNBTkNFTDoKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgKGlzQWRtaW4gfHwgYWNjb3VudC5yb2xlLmZpbHRlcihmdW5jdGlvbiAocm9sKSB7CiAgICAgICAgICByZXR1cm4gcm9sLm1ldGhvZCA9PT0gJ1BVVCcgJiYgcm9sLmVudGl0eSA9PT0gJy9hcGkvYmlsbHMnOwogICAgICAgIH0pLmxlbmd0aCA+IDApICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIHRvRWRpdEJpbGwoaXRlbS5pZCk7CiAgICAgICAgICB9LAogICAgICAgICAgY29sb3I6ICJ3YXJuaW5nIiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIsCiAgICAgICAgICBjbGFzc05hbWU6ICJtci0xIgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgICAgICBuYW1lOiAiY2lsLXBlbmNpbCIKICAgICAgICB9KSwgIkNIXHUxRUM4TkggU1x1MUVFQ0EiKSwgKGlzQWRtaW4gfHwgYWNjb3VudC5yb2xlLmZpbHRlcihmdW5jdGlvbiAocm9sKSB7CiAgICAgICAgICByZXR1cm4gcm9sLm1ldGhvZCA9PT0gJ1BVVCcgJiYgcm9sLmVudGl0eSA9PT0gJy9hcGkvYmlsbHMvZGVsZXRlJzsKICAgICAgICB9KS5sZW5ndGggPiAwKSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBkZWxldGVBbGVydChpdGVtKTsKICAgICAgICAgIH0sCiAgICAgICAgICBjb2xvcjogInNlY29uZGFyeSIsCiAgICAgICAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICAgICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgICAgICBzaXplOiAic20iLAogICAgICAgICAgY2xhc3NOYW1lOiAibXItMSIKICAgICAgICB9LCAiWFx4RDNBIFx1MDExMFx1MDFBME4iKSk7CgogICAgICBkZWZhdWx0OgogICAgICAgIGJyZWFrOwogICAgfQogIH07CgogIHZhciBvblNhdmVUcmFuc3BvcnRlciA9IGZ1bmN0aW9uIG9uU2F2ZVRyYW5zcG9ydGVyKCkgewogICAgaWYgKHNlbGVjdGVkQmlsbC5jdXJyZW50ICYmIHNlbGVjdGVkVHJhbnNwb3J0ZXIuY3VycmVudCkgewogICAgICB2YXIgY29weU9iamVjdCA9IHsKICAgICAgICBpZDogc2VsZWN0ZWRCaWxsLmN1cnJlbnQuaWQsCiAgICAgICAgdHJhbnNwb3J0ZXI6IHNlbGVjdGVkVHJhbnNwb3J0ZXIuY3VycmVudCwKICAgICAgICBvcmRlcjogc2VsZWN0ZWRCaWxsLmN1cnJlbnQub3JkZXIsCiAgICAgICAgc3RhdHVzOiBCaWxsU3RhdHVzLlNVUFBMWV9XQUlUSU5HCiAgICAgIH07CiAgICAgIGRpc3BhdGNoKHVwZGF0ZVRyYW5zcG9ydGVyQmlsbChjb3B5T2JqZWN0KSk7CiAgICB9CiAgfTsKCiAgdmFyIG1lbW9Db21wdXRlZEl0ZW1zID0gUmVhY3QudXNlQ2FsbGJhY2soZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICByZXR1cm4gY29tcHV0ZWRJdGVtcyhpdGVtcyk7CiAgfSwgW10pOwogIHZhciBtZW1vTGlzdGVkID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gbWVtb0NvbXB1dGVkSXRlbXMoYmlsbHMpOwogIH0sIFtiaWxsc10pOwoKICB2YXIgZGVib3VuY2VkU2VhcmNoVXNlciA9IF8uZGVib3VuY2UoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICBkaXNwYXRjaChnZXRUcmFucG9ydGVyKHsKICAgICAgcGFnZTogMCwKICAgICAgc2l6ZTogNTAsCiAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJywKICAgICAgbG9naW46IHZhbHVlLAogICAgICBmaXJzdE5hbWU6IHZhbHVlLAogICAgICBsYXN0TmFtZTogdmFsdWUsCiAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgIH0pKTsKICB9LCAzMDApOwoKICB2YXIgb25TZWFyY2hVc2VyID0gZnVuY3Rpb24gb25TZWFyY2hVc2VyKHZhbHVlKSB7CiAgICBkZWJvdW5jZWRTZWFyY2hVc2VyKHZhbHVlKTsKICB9OwoKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkSGVhZGVyLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgbmFtZTogImNpbC1ncmlkIgogIH0pLCAiIERhbmggc1x4RTFjaCB2XHUxRUFEbiBcdTAxMTFcdTAxQTFuIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkQm9keSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgY29sb3I6ICJwcmltYXJ5IiwKICAgIGNsYXNzTmFtZTogIm1iLTIiLAogICAgaHJlZjogY3N2Q29kZSwKICAgIGRvd25sb2FkOiAiY3VzdG9tZXJ0eXBlcy5jc3YiLAogICAgdGFyZ2V0OiAiX2JsYW5rIgogIH0sICJUXHUxRUEzaSBleGNlbCAoLmNzdikiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgcm93OiB0cnVlLAogICAgeHM6ICIxMiIsCiAgICBtZDogIjEyIiwKICAgIGxnOiAiMTIiLAogICAgY2xhc3NOYW1lOiAibWwtMiBtdC0zIgogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIHsKICAgIHJvdzogdHJ1ZQogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgaHRtbEZvcjogImRhdGUtaW5wdXQiCiAgfSwgIlRcdTFFRUIgbmdceEUweSIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgeHM6ICIxMiIsCiAgICBtZDogIjkiLAogICAgbGc6ICIxMiIKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgIHR5cGU6ICJkYXRlIiwKICAgIGlkOiAiZGF0ZS1pbnB1dCIsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICByZXR1cm4gc2V0RGF0ZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGUpLCB7fSwgewogICAgICAgIHN0YXJ0RGF0ZTogZS50YXJnZXQudmFsdWUKICAgICAgfSkpOwogICAgfSwKICAgIG5hbWU6ICJkYXRlLWlucHV0IiwKICAgIHBsYWNlaG9sZGVyOiAiZGF0ZSIKICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCB7CiAgICByb3c6IHRydWUsCiAgICBjbGFzc05hbWU6ICJtbC0zIgogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgaHRtbEZvcjogImRhdGUtaW5wdXQiCiAgfSwgIlx1MDExMFx1MUVCRm4gbmdceEUweSIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgeHM6ICIxMiIsCiAgICBtZDogIjkiLAogICAgbGc6ICIxMiIKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgIHR5cGU6ICJkYXRlIiwKICAgIGlkOiAiZGF0ZS1pbnB1dCIsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICByZXR1cm4gc2V0RGF0ZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGUpLCB7fSwgewogICAgICAgIGVuZERhdGU6IGUudGFyZ2V0LnZhbHVlCiAgICAgIH0pKTsKICAgIH0sCiAgICBuYW1lOiAiZGF0ZS1pbnB1dCIsCiAgICBwbGFjZWhvbGRlcjogImRhdGUiCiAgfSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENEYXRhVGFibGUsIHsKICAgIGl0ZW1zOiBtZW1vTGlzdGVkLAogICAgZmllbGRzOiBmaWVsZHMsCiAgICBjb2x1bW5GaWx0ZXI6IHRydWUsCiAgICBpdGVtc1BlclBhZ2VTZWxlY3Q6IHsKICAgICAgbGFiZWw6ICdT4buRIGzGsOG7o25nIHRyw6puIG3hu5l0IHRyYW5nJywKICAgICAgdmFsdWVzOiBbNTAsIDEwMCwgMTUwLCAyMDBdCiAgICB9LAogICAgaXRlbXNQZXJQYWdlOiBzaXplLAogICAgaG92ZXI6IHRydWUsCiAgICBzb3J0ZXI6IHRydWUsCiAgICBub0l0ZW1zVmlldzogewogICAgICBub1Jlc3VsdHM6ICdLaMO0bmcgdMOsbSB0aOG6pXkga+G6v3QgcXXhuqMnLAogICAgICBub0l0ZW1zOiAnS2jDtG5nIGPDsyBk4buvIGxp4buHdScKICAgIH0gLy8gbG9hZGluZwogICAgLAogICAgb25QYWdpbmF0aW9uQ2hhbmdlOiBmdW5jdGlvbiBvblBhZ2luYXRpb25DaGFuZ2UodmFsKSB7CiAgICAgIHJldHVybiBzZXRTaXplKHZhbCk7CiAgICB9LAogICAgb25Db2x1bW5GaWx0ZXJDaGFuZ2U6IG9uRmlsdGVyQ29sdW1uLAogICAgY29sdW1uRmlsdGVyU2xvdDogewogICAgICBzdGF0dXM6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIG1pbldpZHRoOiAyMDAKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShpdGVtKSB7CiAgICAgICAgICBvbkZpbHRlckNvbHVtbihfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBhcmFtUmVmLmN1cnJlbnQpLCB7fSwgewogICAgICAgICAgICBzdGF0dXM6IChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0udmFsdWUpIHx8ICcnCiAgICAgICAgICB9KSk7CiAgICAgICAgfSwKICAgICAgICBtYXhNZW51SGVpZ2h0OiAiMjAwIiwKICAgICAgICBpc0NsZWFyYWJsZTogdHJ1ZSwKICAgICAgICBwbGFjZWhvbGRlcjogIkNoXHUxRUNEbiB0clx1MUVBMW5nIHRoXHhFMWkiLAogICAgICAgIG9wdGlvbnM6IHN0YXR1c0xpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSwKICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwKICAgICAgICAgIH07CiAgICAgICAgfSkKICAgICAgfSkpCiAgICB9LAogICAgc2NvcGVkU2xvdHM6IHsKICAgICAgYmlsbDogZnVuY3Rpb24gYmlsbChpdGVtLCBpbmRleCkgewogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBpbmRleCArIDEpOwogICAgICB9LAogICAgICBzdGF0dXM6IGZ1bmN0aW9uIHN0YXR1cyhpdGVtKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCYWRnZSwgewogICAgICAgICAgY29sb3I6IGdldEJhZGdlKGl0ZW0uc3RhdHVzKQogICAgICAgIH0sIG1hcHBpbmdTdGF0dXNbaXRlbS5zdGF0dXNdKSk7CiAgICAgIH0sCiAgICAgIGNyZWF0ZWREYXRlOiBmdW5jdGlvbiBjcmVhdGVkRGF0ZShpdGVtKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIGl0ZW0uY3JlYXRlZERhdGUuc3Vic3RyKDAsIDEwKSk7CiAgICAgIH0sCiAgICAgIHNob3dfZGV0YWlsczogZnVuY3Rpb24gc2hvd19kZXRhaWxzKGl0ZW0pIHsKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAicHktMiBkLWZsZXgiCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIsCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICB0b2dnbGVEZXRhaWxzKGl0ZW0uaWQpOwogICAgICAgICAgfQogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgICAgICBuYW1lOiAiY2lsWm9vbSIKICAgICAgICB9KSkpOwogICAgICB9LAogICAgICBhY3Rpb246IGZ1bmN0aW9uIGFjdGlvbihpdGVtKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInB5LTIgZC1mbGV4IgogICAgICAgIH0sIHJlbmRlckJ1dHRvblN0YXR1cyhpdGVtKSk7CiAgICAgIH0sCiAgICAgIGRldGFpbHM6IGZ1bmN0aW9uIGRldGFpbHMoaXRlbSkgewogICAgICAgIHZhciBfaXRlbSRjdXN0b21lcjIsIF9pdGVtJGN1c3RvbWVyMywgX2Rpc3RyaWN0JGZpbHRlciQsIF9jaXRpZXMkZmlsdGVyJCwgX2l0ZW0kY3VzdG9tZXI2LCBfaXRlbSRjdXN0b21lcjcsIF9pdGVtJG9yZGVyMywgX2l0ZW0kb3JkZXI0LCBfaXRlbSRvcmRlcjUsIF9pdGVtJG9yZGVyNjsKCiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2xsYXBzZSwgewogICAgICAgICAgc2hvdzogX2RldGFpbHMuaW5jbHVkZXMoaXRlbS5pZCkKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoNSIsIG51bGwsICJUaFx4RjRuZyB0aW4gdlx1MUVBRG4gXHUwMTExXHUwMUExbiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJtYi00IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICAgIHNtOiAiNCIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaDYiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJtYi0xIgogICAgICAgIH0sICJUXHUxRURCaToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW0kY3VzdG9tZXIyID0gaXRlbS5jdXN0b21lcikgPT09IG51bGwgfHwgX2l0ZW0kY3VzdG9tZXIyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRjdXN0b21lcjIubmFtZSkgfHwgJycpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRjdXN0b21lcjMgPSBpdGVtLmN1c3RvbWVyKSA9PT0gbnVsbCB8fCBfaXRlbSRjdXN0b21lcjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGN1c3RvbWVyMy5hZGRyZXNzKSB8fCAnJyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAiIi5jb25jYXQoKChfZGlzdHJpY3QkZmlsdGVyJCA9IGRpc3RyaWN0LmZpbHRlcihmdW5jdGlvbiAoZGlzdCkgewogICAgICAgICAgdmFyIF9pdGVtJGN1c3RvbWVyNDsKCiAgICAgICAgICByZXR1cm4gZGlzdC52YWx1ZSA9PT0gKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJGN1c3RvbWVyNCA9IGl0ZW0uY3VzdG9tZXIpID09PSBudWxsIHx8IF9pdGVtJGN1c3RvbWVyNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kY3VzdG9tZXI0LmRpc3RyaWN0KTsKICAgICAgICB9KVswXSkgPT09IG51bGwgfHwgX2Rpc3RyaWN0JGZpbHRlciQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kaXN0cmljdCRmaWx0ZXIkLmxhYmVsKSB8fCAnJywgIiwgIikuY29uY2F0KCgoX2NpdGllcyRmaWx0ZXIkID0gY2l0aWVzLmZpbHRlcihmdW5jdGlvbiAoY2l0eSkgewogICAgICAgICAgdmFyIF9pdGVtJGN1c3RvbWVyNTsKCiAgICAgICAgICByZXR1cm4gY2l0eS52YWx1ZSA9PT0gKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJGN1c3RvbWVyNSA9IGl0ZW0uY3VzdG9tZXIpID09PSBudWxsIHx8IF9pdGVtJGN1c3RvbWVyNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kY3VzdG9tZXI1LmNpdHkpOwogICAgICAgIH0pWzBdKSA9PT0gbnVsbCB8fCBfY2l0aWVzJGZpbHRlciQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaXRpZXMkZmlsdGVyJC5sYWJlbCkgfHwgJycpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsICJcdTAxMTBcdTFFQ0JhIGNoXHUxRUM5OiAiLCAoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW0kY3VzdG9tZXI2ID0gaXRlbS5jdXN0b21lcikgPT09IG51bGwgfHwgX2l0ZW0kY3VzdG9tZXI2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRjdXN0b21lcjYudGVsKSB8fCAnJyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAiUGhvbmU6ICIsIChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRjdXN0b21lcjcgPSBpdGVtLmN1c3RvbWVyKSA9PT0gbnVsbCB8fCBfaXRlbSRjdXN0b21lcjcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGN1c3RvbWVyNy50ZWwpIHx8ICcnKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWJsZSwgewogICAgICAgICAgc3RyaXBlZDogdHJ1ZSwKICAgICAgICAgIHJlc3BvbnNpdmU6IHRydWUKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGhlYWQiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJjZW50ZXIiCiAgICAgICAgfSwgIiMiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIlRceEVBbiBzXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIkR1bmcgdFx4RURjaCIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJjZW50ZXIiCiAgICAgICAgfSwgIlNcdTFFRDEgbFx1MDFCMFx1MUVFM25nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgICAgIH0sICJcdTAxMTBcdTAxQTFuIGdpXHhFMSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJyaWdodCIKICAgICAgICB9LCAiQ2hpXHUxRUJGdCBraFx1MUVBNXUoJSkiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAicmlnaHQiCiAgICAgICAgfSwgIlRcdTFFRDVuZyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJyaWdodCIKICAgICAgICB9LCAiVGhhbmggdG9ceEUxbiIpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIsIG51bGwsIGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJG9yZGVyMyA9IGl0ZW0ub3JkZXIpID09PSBudWxsIHx8IF9pdGVtJG9yZGVyMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kb3JkZXIzLm9yZGVyRGV0YWlscy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICB2YXIgX2l0ZW0kcHJvZHVjdCwgX2l0ZW0kcHJvZHVjdDIsIF9pdGVtJHByb2R1Y3QzLCBfaXRlbSRwcm9kdWN0NCwgX2l0ZW0kcHJvZHVjdDUsIF9pdGVtJHByb2R1Y3Q2OwoKICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCB7CiAgICAgICAgICAgIGtleTogaW5kZXgKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIGluZGV4ICsgMSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIChfaXRlbSRwcm9kdWN0ID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0Lm5hbWUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCAoX2l0ZW0kcHJvZHVjdDIgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3QyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0Mi52b2x1bWUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBpdGVtLnF1YW50aXR5KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgKF9pdGVtJHByb2R1Y3QzID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0MyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdDMucHJpY2UpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBpdGVtLnJlZHVjZVBlcmNlbnQsICIlIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsICgoKF9pdGVtJHByb2R1Y3Q0ID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0NCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdDQucHJpY2UpICogaXRlbS5xdWFudGl0eSkudG9Mb2NhbGVTdHJpbmcoJ2l0LUlUJywgewogICAgICAgICAgICBzdHlsZTogJ2N1cnJlbmN5JywKICAgICAgICAgICAgY3VycmVuY3k6ICdWTkQnCiAgICAgICAgICB9KSB8fCAnJyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsICgoKF9pdGVtJHByb2R1Y3Q1ID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0NSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdDUucHJpY2UpICogaXRlbS5xdWFudGl0eSAtICgoX2l0ZW0kcHJvZHVjdDYgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3Q2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0Ni5wcmljZSkgKiBpdGVtLnF1YW50aXR5ICogaXRlbS5yZWR1Y2VQZXJjZW50IC8gMTAwKS50b0xvY2FsZVN0cmluZygnaXQtSVQnLCB7CiAgICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgICAgICBjdXJyZW5jeTogJ1ZORCcKICAgICAgICAgIH0pIHx8ICcnKSk7CiAgICAgICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICAgICAgbGc6ICI0IiwKICAgICAgICAgIHNtOiAiNSIKICAgICAgICB9LCAiR2hpIGNoXHhGQTogIiwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsIGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5ub3RlKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICAgIGxnOiAiNCIsCiAgICAgICAgICBzbTogIjUiLAogICAgICAgICAgY2xhc3NOYW1lOiAibWwtYXV0byIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWJsZSwgewogICAgICAgICAgY2xhc3NOYW1lOiAidGFibGUtY2xlYXIiCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRib2R5IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAibGVmdCIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIlRcdTFFRDVuZyB0aVx1MUVDMW4iKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgICAgIH0sIChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRvcmRlcjQgPSBpdGVtLm9yZGVyKSA9PT0gbnVsbCB8fCBfaXRlbSRvcmRlcjQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJG9yZGVyNC5vcmRlckRldGFpbHMucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGN1cnJlbnQpIHsKICAgICAgICAgIHZhciBfY3VycmVudCRwcm9kdWN0OwoKICAgICAgICAgIHJldHVybiBzdW0gKyAoKF9jdXJyZW50JHByb2R1Y3QgPSBjdXJyZW50LnByb2R1Y3QpID09PSBudWxsIHx8IF9jdXJyZW50JHByb2R1Y3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jdXJyZW50JHByb2R1Y3QucHJpY2UpICogY3VycmVudC5xdWFudGl0eTsKICAgICAgICB9LCAwKS50b0xvY2FsZVN0cmluZygnaXQtSVQnLCB7CiAgICAgICAgICBzdHlsZTogJ2N1cnJlbmN5JywKICAgICAgICAgIGN1cnJlbmN5OiAnVk5EJwogICAgICAgIH0pKSB8fCAnJykpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJsZWZ0IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAiQ2hpXHUxRUJGdCBraFx1MUVBNXUiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgICAgIH0sIChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRvcmRlcjUgPSBpdGVtLm9yZGVyKSA9PT0gbnVsbCB8fCBfaXRlbSRvcmRlcjUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJG9yZGVyNS5vcmRlckRldGFpbHMucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGN1cnJlbnQpIHsKICAgICAgICAgIHZhciBfY3VycmVudCRwcm9kdWN0MjsKCiAgICAgICAgICByZXR1cm4gc3VtICsgKChfY3VycmVudCRwcm9kdWN0MiA9IGN1cnJlbnQucHJvZHVjdCkgPT09IG51bGwgfHwgX2N1cnJlbnQkcHJvZHVjdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jdXJyZW50JHByb2R1Y3QyLnByaWNlKSAqIGN1cnJlbnQucXVhbnRpdHkgKiBjdXJyZW50LnJlZHVjZVBlcmNlbnQgLyAxMDA7CiAgICAgICAgfSwgMCkudG9Mb2NhbGVTdHJpbmcoJ2l0LUlUJywgewogICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeScsCiAgICAgICAgICBjdXJyZW5jeTogJ1ZORCcKICAgICAgICB9KSkgfHwgJycpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAibGVmdCIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIlRpXHUxRUMxbiB0aGFuaCB0b1x4RTFuIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJyaWdodCIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJG9yZGVyNiA9IGl0ZW0ub3JkZXIpID09PSBudWxsIHx8IF9pdGVtJG9yZGVyNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kb3JkZXI2Lm9yZGVyRGV0YWlscy5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgY3VycmVudCkgewogICAgICAgICAgdmFyIF9jdXJyZW50JHByb2R1Y3QzLCBfY3VycmVudCRwcm9kdWN0NDsKCiAgICAgICAgICByZXR1cm4gc3VtICsgKCgoX2N1cnJlbnQkcHJvZHVjdDMgPSBjdXJyZW50LnByb2R1Y3QpID09PSBudWxsIHx8IF9jdXJyZW50JHByb2R1Y3QzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY3VycmVudCRwcm9kdWN0My5wcmljZSkgKiBjdXJyZW50LnF1YW50aXR5IC0gKChfY3VycmVudCRwcm9kdWN0NCA9IGN1cnJlbnQucHJvZHVjdCkgPT09IG51bGwgfHwgX2N1cnJlbnQkcHJvZHVjdDQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jdXJyZW50JHByb2R1Y3Q0LnByaWNlKSAqIGN1cnJlbnQucXVhbnRpdHkgKiBjdXJyZW50LnJlZHVjZVBlcmNlbnQgLyAxMDApOwogICAgICAgIH0sIDApLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgICAgY3VycmVuY3k6ICdWTkQnCiAgICAgICAgfSkpIHx8ICcnKSkpKSkpKSkpOwogICAgICB9CiAgICB9CiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENQYWdpbmF0aW9uLCB7CiAgICBhY3RpdmVQYWdlOiBhY3RpdmVQYWdlLAogICAgcGFnZXM6IE1hdGguZmxvb3IoaW5pdGlhbFN0YXRlLnRvdGFsSXRlbSAvIDIwKSArIDEsCiAgICBvbkFjdGl2ZVBhZ2VDaGFuZ2U6IGZ1bmN0aW9uIG9uQWN0aXZlUGFnZUNoYW5nZShpKSB7CiAgICAgIHJldHVybiBzZXRBY3RpdmVQYWdlKGkpOwogICAgfQogIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ01vZGFsLCB7CiAgICBzaG93OiBtb2RhbCwKICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoKSB7CiAgICAgIHJldHVybiBzZXRNb2RhbCghbW9kYWwpOwogICAgfSwKICAgIHNpemU6ICJsZyIKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTW9kYWxIZWFkZXIsIHsKICAgIGNsb3NlQnV0dG9uOiB0cnVlCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ01vZGFsVGl0bGUsIG51bGwsICJDaFx1MUVDRG4gbmdcdTAxQjBcdTFFRERpIHZcdTFFQURuIGNodXlcdTFFQzNuIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTW9kYWxCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgIGh0bWxGb3I6ICJ1c2VyTmFtZSIKICB9LCAiTmdcdTAxQjBcdTFFRERpIHZcdTFFQURuIGNodXlcdTFFQzNuIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgbmFtZTogImRlcGFydG1lbnQiLAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgc2VsZWN0ZWRUcmFuc3BvcnRlci5jdXJyZW50ID0gZS52YWx1ZTsKICAgIH0sCiAgICBvbklucHV0Q2hhbmdlOiBvblNlYXJjaFVzZXIsCiAgICBwbGFjZWhvbGRlcjogIkNoXHUxRUNEbiBuZ1x1MDFCMFx1MUVERGkgdlx1MUVBRG4gY2h1eVx1MUVDM24iLAogICAgb3B0aW9uczogdXNlcnMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmFsdWU6IGl0ZW0sCiAgICAgICAgbGFiZWw6ICIiLmNvbmNhdChpdGVtLmxvZ2luLCAiLSIpLmNvbmNhdChpdGVtLmZpcnN0TmFtZSwgIi0iKS5jb25jYXQoaXRlbS5sYXN0TmFtZSwgIi0iKS5jb25jYXQoaXRlbS5waG9uZSB8fCAnS2jDtG5nIGPDsyBzZHQnKQogICAgICB9OwogICAgfSkKICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENNb2RhbEZvb3RlciwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgY29sb3I6ICJwcmltYXJ5IiwKICAgIG9uQ2xpY2s6IG9uU2F2ZVRyYW5zcG9ydGVyCiAgfSwgIkxcdTAxQjB1IGxcdTFFQTFpIiksICcgJywgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgY29sb3I6ICJzZWNvbmRhcnkiLAogICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgcmV0dXJuIHNldE1vZGFsKCFtb2RhbCk7CiAgICB9CiAgfSwgIkhcdTFFRTd5IikpKSk7Cn07CgpleHBvcnQgZGVmYXVsdCBCaWxsOw=="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Bill/Bill.js"],"names":["React","useEffect","useRef","useState","useCallback","CCardBody","CBadge","CButton","CCollapse","CDataTable","CCard","CCardHeader","CRow","CCol","CPagination","CModal","CModalHeader","CModalBody","CModalFooter","CModalTitle","CLabel","CIcon","useDispatch","useSelector","getBill","updateBill","updateTransporterBill","globalizedBillsSelectors","reset","useHistory","Table","BillStatus","confirmAlert","Select","getTranporter","getUser","globalizedUserSelectors","moment","userSafeSelector","_","CFormGroup","CInput","cities","district","mappingStatus","CREATED","APPROVED","CANCEL","REJECTED","SUPPLY_WAITING","SHIPPING","SUCCESS","statusList","value","label","selectAll","selectUserAll","fields","key","_style","width","filter","getBadge","status","Bill","props","account","isAdmin","authorities","item","length","selectedBill","selectedTransporter","details","setDetails","state","bill","initialState","activePage","setActivePage","size","setSize","modal","setModal","paramRef","dispatch","history","startDate","endDate","date","setDate","params","page","sort","current","dependency","bills","users","computedItems","items","map","tel","customer","quantity","order","orderDetails","reduce","sum","prev","total","priceTotal","toLocaleString","style","currency","createdDate","format","toggleDetails","index","position","indexOf","newDetails","slice","splice","csvContent","Object","values","join","csvCode","encodeURIComponent","debouncedSearchColumn","debounce","keys","forEach","onFilterColumn","toEditBill","typeId","push","match","url","updatingSuccess","approveBill","data","id","action","rejectBill","shippingBill","successBill","cancelBill","deleteBill","DELETED","alertAction","operation","message","title","buttons","onClick","approveAlert","deleteAlert","renderButtonStatus","role","rol","method","entity","onSaveTransporter","copyObject","transporter","memoComputedItems","memoListed","useMemo","debouncedSearchUser","login","firstName","lastName","onSearchUser","e","target","noResults","noItems","val","minWidth","substr","show_details","includes","name","address","dist","city","product","volume","price","reducePercent","note","Math","floor","totalItem","i","phone"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport {\n  CCardBody,\n  CBadge,\n  CButton,\n  CCollapse,\n  CDataTable,\n  CCard,\n  CCardHeader,\n  CRow,\n  CCol,\n  CPagination,\n  CModal,\n  CModalHeader,\n  CModalBody,\n  CModalFooter,\n  CModalTitle,\n  CLabel\n} from '@coreui/react/lib';\nimport CIcon from '@coreui/icons-react/lib/CIcon';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getBill, updateBill, updateTransporterBill } from './bill.api';\nimport { globalizedBillsSelectors, reset } from './bill.reducer';\nimport { useHistory } from 'react-router-dom';\nimport { Table } from 'reactstrap';\nimport { BillStatus } from './bill-status';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\nimport Select from 'react-select';\nimport { getTranporter, getUser } from '../../user/UserList/user.api';\nimport { globalizedUserSelectors } from '../../user/UserList/user.reducer';\nimport moment from 'moment';\nimport { userSafeSelector } from '../../login/authenticate.reducer';\nimport _ from 'lodash';\nimport { CFormGroup, CInput } from '@coreui/react';\nimport cities from '../../../../shared/utils/city';\nimport district from '../../../../shared/utils/district.json';\nconst mappingStatus = {\n  CREATED: 'CHỜ DUYỆT',\n  APPROVED: 'ĐÃ DUYỆT',\n  CANCEL: 'KHÁCH HỦY',\n  REJECTED: 'KHÔNG DUYỆT',\n  SUPPLY_WAITING: 'ĐỢI XUẤT KHO',\n  SHIPPING: 'ĐANG VẬN CHUYỂN',\n  SUCCESS: 'GIAO THÀNH CÔNG'\n};\nconst statusList = [\n  {\n    value: 'CREATED',\n    label: 'CHỜ DUYỆT'\n  },\n  {\n    value: 'APPROVED',\n    label: 'ĐÃ DUYỆT'\n  },\n  {\n    value: 'CANCEL',\n    label: 'KHÁCH HỦY'\n  },\n  {\n    value: 'REJECTED',\n    label: 'KHÔNG DUYỆT'\n  },\n  {\n    value: 'SUPPLY_WAITING',\n    label: 'ĐỢI XUẤT KHO'\n  },\n  {\n    value: 'SHIPPING',\n    label: 'ĐANG VẬN CHUYỂN'\n  },\n  {\n    value: 'SUCCESS',\n    label: 'GIAO THÀNH CÔNG'\n  }\n];\nconst { selectAll } = globalizedBillsSelectors;\nconst { selectAll: selectUserAll } = globalizedUserSelectors;\n// Code\tTên cửa hàng/đại lý\tNgười liên lạc\tNăm Sinh\tĐiện thoại\tNhân viên quản lý\tvận đơng\tPhân loại\tSửa\tTạo đơn\nconst fields = [\n  {\n    key: 'bill',\n    label: 'STT',\n    _style: { width: '1%' },\n    filter: false\n  },\n  {\n    key: 'show_details',\n    label: 'Xem chi tiết',\n    _style: { width: '1%' },\n    filter: false\n  },\n  { key: 'code', label: 'Mã vận đơn', _style: { width: '10%' } },\n  { key: 'customerName', label: 'Tên khách hàng/đại lý', _style: { width: '15%' } },\n  { key: 'transporterName', label: 'Người vận chuyển', _style: { width: '10%' } },\n  { key: 'quantity', label: 'Tổng sản phẩm', _style: { width: '5%' }, filter: false },\n  { key: 'total', label: 'Tiền thanh toán', _style: { width: '10%' }, filter: false },\n  { key: 'createdBy', label: 'Nhân viên quản lý', _style: { width: '10%' } },\n  { key: 'createdDate', label: 'Ngày tạo', _style: { width: '10%' }, filter: false },\n  { key: 'status', label: 'Trạng thái', _style: { width: '10%' } },\n  {\n    key: 'action',\n    label: '',\n    _style: { width: '30%' },\n    filter: false\n  }\n];\n\nconst getBadge = status => {\n  switch (status) {\n    case BillStatus.APPROVED:\n      return 'primary';\n    case BillStatus.SUCCESS:\n      return 'success';\n    case BillStatus.SHIPPING:\n      return 'info';\n    case BillStatus.CREATED:\n    case BillStatus.SUPPLY_WAITING:\n      return 'warning';\n    case BillStatus.REJECTED:\n    case BillStatus.CANCEL:\n      return 'danger';\n    default:\n      return 'primary';\n  }\n};\nconst Bill = props => {\n  const { account } = useSelector(userSafeSelector);\n  const isAdmin = account.authorities.filter(item => item === 'ROLE_ADMIN').length > 0;\n  const selectedBill = useRef(null);\n  const selectedTransporter = useRef(null);\n  const [details, setDetails] = useState([]);\n  const { initialState } = useSelector(state => state.bill);\n  const [activePage, setActivePage] = useState(1);\n  const [size, setSize] = useState(50);\n  const [modal, setModal] = useState(false);\n  const paramRef = useRef(null);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [date, setDate] = React.useState({ startDate: null, endDate: null });\n\n  useEffect(() => {\n    if (date.endDate && date.startDate) {\n      const params = { page: activePage - 1, size, sort: 'createdDate,DESC', ...paramRef.current, ...date };\n      dispatch(getBill(params));\n    }\n  }, [date]);\n\n  useEffect(() => {\n    dispatch(reset());\n  }, []);\n\n  useEffect(() => {\n    if (modal) {\n      dispatch(getTranporter({ dependency: true }));\n    }\n  }, [modal]);\n\n  const bills = useSelector(selectAll);\n  const users = useSelector(selectUserAll);\n  useEffect(() => {\n    dispatch(getBill({ page: activePage - 1, size: size, sort: 'createdDate,DESC', ...paramRef.current }));\n  }, [activePage, size]);\n\n  const computedItems = items => {\n    return items.map(item => {\n      return {\n        ...item,\n        tel: item.customer?.tel,\n        quantity: item.order?.orderDetails?.reduce((sum, prev) => sum + prev.quantity, 0) || 0,\n        total:\n          item.order?.orderDetails\n            ?.reduce((sum, current) => sum + current.priceTotal, 0)\n            .toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || 0,\n        createdDate: moment(item.createdDate).format('DD-MM-YYYY')\n      };\n    });\n  };\n\n  const toggleDetails = index => {\n    const position = details.indexOf(index);\n    let newDetails = details.slice();\n    if (position !== -1) {\n      newDetails.splice(position, 1);\n    } else {\n      newDetails = [...details, index];\n    }\n    setDetails(newDetails);\n  };\n\n  const csvContent = bills.map(item => Object.values(item).join(',')).join('\\n');\n  const csvCode = 'data:text/csv;charset=utf-8,SEP=,%0A' + encodeURIComponent(csvContent);\n\n  const debouncedSearchColumn = _.debounce(value => {\n    if (Object.keys(value).length > 0) {\n      Object.keys(value).forEach(key => {\n        if (!value[key]) delete value[key];\n      });\n      paramRef.current = value;\n      dispatch(getBill({ page: 0, size: size, sort: 'createdDate,DESC', ...value }));\n    }\n  }, 300);\n\n  const onFilterColumn = value => {\n    debouncedSearchColumn(value);\n  };\n\n  const toEditBill = typeId => {\n    history.push(`${props.match.url}/${typeId}/edit`);\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      dispatch(getBill({ page: activePage - 1, size: size, sort: 'createdDate,DESC', ...paramRef.current }));\n      setModal(false);\n      dispatch(reset());\n    }\n  }, [initialState.updatingSuccess]);\n\n  const approveBill = bill => () => {\n    const data = { id: bill.id, status: BillStatus.APPROVED, action: 'approve', order: bill.order };\n    dispatch(updateBill(data));\n  };\n\n  const rejectBill = bill => () => {\n    const data = { id: bill.id, status: BillStatus.REJECTED, action: 'cancel', order: bill.order };\n    dispatch(updateBill(data));\n  };\n\n  const shippingBill = bill => () => {\n    dispatch(\n      updateBill({\n        id: bill.id,\n        status: BillStatus.SHIPPING,\n        action: 'shipping',\n        order: bill.order\n      })\n    );\n  };\n\n  const successBill = bill => () => {\n    dispatch(\n      updateBill({\n        id: bill.id,\n        status: BillStatus.SUCCESS,\n        action: 'complete',\n        order: bill.order\n      })\n    );\n  };\n\n  const cancelBill = bill => () => {\n    bill.status = BillStatus.CANCEL;\n    dispatch(updateBill(bill));\n  };\n\n  const deleteBill = bill => () => {\n    const data = { id: bill.id, status: BillStatus.DELETED, action: 'delete', order: bill.order };\n    dispatch(updateBill(data));\n  };\n\n  const alertAction = (item, operation, message) => {\n    confirmAlert({\n      title: 'Xác nhận',\n      message: message,\n      buttons: [\n        {\n          label: 'Đồng ý',\n          onClick: operation(item)\n        },\n        {\n          label: 'Hủy'\n        }\n      ]\n    });\n  };\n\n  const approveAlert = item => {\n    confirmAlert({\n      title: 'Xác nhận',\n      message: 'Bạn có chắc chắn muốn duyệt vận đơn này?',\n      buttons: [\n        {\n          label: 'Đồng ý',\n          onClick: approveBill(item)\n        },\n        {\n          label: 'Hủy'\n        }\n      ]\n    });\n  };\n\n  const deleteAlert = item => {\n    confirmAlert({\n      title: 'Xác nhận',\n      message: 'Bạn có chắc chắn muốn xóa vận đơn này?',\n      buttons: [\n        {\n          label: 'Đồng ý',\n          onClick: deleteBill(item)\n        },\n        {\n          label: 'Hủy'\n        }\n      ]\n    });\n  };\n\n  const renderButtonStatus = item => {\n    switch (item.status) {\n      case BillStatus.CREATED:\n        return (\n          <CRow>\n            {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/bills/approve').length > 0) && (\n              <CButton\n                onClick={() => {\n                  approveAlert(item);\n                }}\n                color=\"success\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n                className=\"mr-1\"\n              >\n                DUYỆT VẬN ĐƠN\n              </CButton>\n            )}\n            {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/bills/cancel').length > 0) && (\n              <CButton\n                onClick={() => {\n                  alertAction(item, rejectBill, 'Bạn có chắc chắn muốn từ chối vận đơn này?');\n                }}\n                color=\"danger\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n              >\n                HỦY VẬN ĐƠN\n              </CButton>\n            )}\n          </CRow>\n        );\n      case BillStatus.APPROVED:\n        return (\n          <CRow>\n            {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/bills/transporter').length > 0) && (\n              <CButton\n                onClick={() => {\n                  setModal(true);\n                  selectedBill.current = item;\n                  // alertAction(item, supplyWaitingBill, 'Bạn có chắc chắn muốn gán vận đơn này?');\n                }}\n                color=\"primary\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n                className=\"mr-1\"\n              >\n                GÁN NGƯỜI VẬN CHUYỂN\n              </CButton>\n            )}\n          </CRow>\n        );\n      case BillStatus.SUPPLY_WAITING:\n        return (\n          <CRow>\n            {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/bills/shipping').length > 0) && (\n              <CButton\n                onClick={() => {\n                  alertAction(item, shippingBill, 'Bạn có chắc chắn muốn xuất kho?');\n                }}\n                color=\"info\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n              >\n                XUẤT KHO\n              </CButton>\n            )}\n          </CRow>\n        );\n      case BillStatus.SHIPPING:\n        return (\n          <CRow>\n            {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/bills/complete').length > 0) && (\n              <CButton\n                onClick={() => {\n                  alertAction(item, successBill, 'Bạn có chắc chắn muốn hoàn thành vận đơn này?');\n                }}\n                color=\"info\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n              >\n                HOÀN THÀNH\n              </CButton>\n            )}\n          </CRow>\n        );\n      case BillStatus.CANCEL:\n        return (\n          <CRow>\n            {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/bills').length > 0) && (\n              <CButton\n                onClick={() => {\n                  toEditBill(item.id);\n                }}\n                color=\"warning\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n                className=\"mr-1\"\n              >\n                <CIcon name=\"cil-pencil\" />\n                CHỈNH SỬA\n              </CButton>\n            )}\n            {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/bills/delete').length > 0) && (\n              <CButton\n                onClick={() => {\n                  deleteAlert(item);\n                }}\n                color=\"secondary\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n                className=\"mr-1\"\n              >\n                XÓA ĐƠN\n              </CButton>\n            )}\n          </CRow>\n        );\n      default:\n        break;\n    }\n  };\n\n  const onSaveTransporter = () => {\n    if (selectedBill.current && selectedTransporter.current) {\n      const copyObject = {\n        id: selectedBill.current.id,\n        transporter: selectedTransporter.current,\n        order: selectedBill.current.order,\n        status: BillStatus.SUPPLY_WAITING\n      };\n      dispatch(updateTransporterBill(copyObject));\n    }\n  };\n\n  const memoComputedItems = React.useCallback(items => computedItems(items), []);\n  const memoListed = React.useMemo(() => memoComputedItems(bills), [bills]);\n\n  const debouncedSearchUser = _.debounce(value => {\n    dispatch(\n      getTranporter({\n        page: 0,\n        size: 50,\n        sort: 'createdDate,DESC',\n        login: value,\n        firstName: value,\n        lastName: value,\n        dependency: true\n      })\n    );\n  }, 300);\n\n  const onSearchUser = value => {\n    debouncedSearchUser(value);\n  };\n\n  return (\n    <CCard>\n      <CCardHeader>\n        <CIcon name=\"cil-grid\" /> Danh sách vận đơn\n        {/* <CButton color=\"primary\" className=\"mb-2\">\n         Thêm mới khách hàng\n        </CButton> */}\n        {/* <CButton color=\"success\" variant=\"outline\" className=\"ml-3\" onClick={toCreateBill}>\n          <CIcon name=\"cil-plus\" /> Thêm mới\n        </CButton> */}\n      </CCardHeader>\n      <CCardBody>\n        <CButton color=\"primary\" className=\"mb-2\" href={csvCode} download=\"customertypes.csv\" target=\"_blank\">\n          Tải excel (.csv)\n        </CButton>\n        <CFormGroup row xs=\"12\" md=\"12\" lg=\"12\" className=\"ml-2 mt-3\">\n          <CFormGroup row>\n            <CCol>\n              <CLabel htmlFor=\"date-input\">Từ ngày</CLabel>\n            </CCol>\n            <CCol xs=\"12\" md=\"9\" lg=\"12\">\n              <CInput\n                type=\"date\"\n                id=\"date-input\"\n                onChange={e =>\n                  setDate({\n                    ...date,\n                    startDate: e.target.value\n                  })\n                }\n                name=\"date-input\"\n                placeholder=\"date\"\n              />\n            </CCol>\n          </CFormGroup>\n          <CFormGroup row className=\"ml-3\">\n            <CCol>\n              <CLabel htmlFor=\"date-input\">Đến ngày</CLabel>\n            </CCol>\n            <CCol xs=\"12\" md=\"9\" lg=\"12\">\n              <CInput\n                type=\"date\"\n                id=\"date-input\"\n                onChange={e =>\n                  setDate({\n                    ...date,\n                    endDate: e.target.value\n                  })\n                }\n                name=\"date-input\"\n                placeholder=\"date\"\n              />\n            </CCol>\n          </CFormGroup>\n        </CFormGroup>\n        <CDataTable\n          items={memoListed}\n          fields={fields}\n          columnFilter\n          itemsPerPageSelect={{ label: 'Số lượng trên một trang', values: [50, 100, 150, 200] }}\n          itemsPerPage={size}\n          hover\n          sorter\n          noItemsView={{\n            noResults: 'Không tìm thấy kết quả',\n            noItems: 'Không có dữ liệu'\n          }}\n          // loading\n\n          onPaginationChange={val => setSize(val)}\n          onColumnFilterChange={onFilterColumn}\n          columnFilterSlot={{\n            status: (\n              <div style={{ minWidth: 200 }}>\n                <Select\n                  onChange={item => {\n                    onFilterColumn({ ...paramRef.current, status: item?.value || '' });\n                  }}\n                  maxMenuHeight=\"200\"\n                  isClearable\n                  placeholder=\"Chọn trạng thái\"\n                  options={statusList.map(item => ({\n                    value: item.value,\n                    label: item.label\n                  }))}\n                />\n              </div>\n            )\n          }}\n          scopedSlots={{\n            bill: (item, index) => <td>{index + 1}</td>,\n            status: item => (\n              <td>\n                <CBadge color={getBadge(item.status)}>{mappingStatus[item.status]}</CBadge>\n              </td>\n            ),\n            createdDate: item => <td>{item.createdDate.substr(0, 10)}</td>,\n\n            show_details: item => {\n              return (\n                <td className=\"py-2 d-flex\">\n                  <CButton\n                    color=\"primary\"\n                    variant=\"outline\"\n                    shape=\"square\"\n                    size=\"sm\"\n                    onClick={() => {\n                      toggleDetails(item.id);\n                    }}\n                  >\n                    <CIcon name=\"cilZoom\" />\n                  </CButton>\n                </td>\n              );\n            },\n            action: item => {\n              return <td className=\"py-2 d-flex\">{renderButtonStatus(item)}</td>;\n            },\n            details: item => {\n              return (\n                <CCollapse show={details.includes(item.id)}>\n                  <CCardBody>\n                    <h5>Thông tin vận đơn</h5>\n                    <CRow className=\"mb-4\">\n                      <CCol sm=\"4\">\n                      <h6 className=\"mb-1\">Tới:</h6>\n                        <div>\n                          <strong>{item?.customer?.name || ''}</strong>\n                        </div>\n                        <div>{item?.customer?.address || ''}</div>\n                        <div>{`${district.filter(dist => dist.value === item?.customer?.district)[0]?.label || ''}, ${cities.filter(\n                          city => city.value === item?.customer?.city\n                        )[0]?.label || ''}`}</div>\n                        <div>Địa chỉ: {item?.customer?.tel || ''}</div>\n                        <div>Phone: {item?.customer?.tel || ''}</div>\n                      </CCol>\n                    </CRow>\n                    <Table striped responsive>\n                      <thead>\n                        <tr>\n                          <th className=\"center\">#</th>\n                          <th>Tên sản phẩm</th>\n                          <th>Dung tích</th>\n                          <th className=\"center\">Số lượng</th>\n                          <th className=\"right\">Đơn giá</th>\n                          <th className=\"right\">Chiết khấu(%)</th>\n                          <th className=\"right\">Tổng</th>\n                          <th className=\"right\">Thanh toán</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {item?.order?.orderDetails.map((item, index) => {\n                          return (\n                            <tr key={index}>\n                              <td>{index + 1}</td>\n                              <td>{item.product?.name}</td>\n                              <td>{item.product?.volume}</td>\n                              <td>{item.quantity}</td>\n\n                              <td>{item.product?.price}</td>\n                              <td>{item.reducePercent}%</td>\n                              <td>\n                                {(item.product?.price * item.quantity).toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) ||\n                                  ''}\n                              </td>\n                              <td>\n                                {(\n                                  item.product?.price * item.quantity -\n                                  (item.product?.price * item.quantity * item.reducePercent) / 100\n                                ).toLocaleString('it-IT', {\n                                  style: 'currency',\n                                  currency: 'VND'\n                                }) || ''}\n                              </td>\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </Table>\n                    <CRow>\n                      <CCol lg=\"4\" sm=\"5\">\n                        Ghi chú: <strong>{item?.note}</strong>\n                      </CCol>\n                      <CCol lg=\"4\" sm=\"5\" className=\"ml-auto\">\n                        <Table className=\"table-clear\">\n                          <tbody>\n                            <tr>\n                              <td className=\"left\">\n                                <strong>Tổng tiền</strong>\n                              </td>\n                              <td className=\"right\">\n                                {item?.order?.orderDetails\n                                  .reduce((sum, current) => sum + current.product?.price * current.quantity, 0)\n                                  .toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                              </td>\n                            </tr>\n                            <tr>\n                              <td className=\"left\">\n                                <strong>Chiết khấu</strong>\n                              </td>\n                              <td className=\"right\">\n                                {item?.order?.orderDetails\n                                  .reduce(\n                                    (sum, current) => sum + (current.product?.price * current.quantity * current.reducePercent) / 100,\n                                    0\n                                  )\n                                  .toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                              </td>\n                            </tr>\n                            <tr>\n                              <td className=\"left\">\n                                <strong>Tiền thanh toán</strong>\n                              </td>\n                              <td className=\"right\">\n                                <strong>\n                                  {item?.order?.orderDetails\n                                    .reduce(\n                                      (sum, current) =>\n                                        sum +\n                                        (current.product?.price * current.quantity -\n                                          (current.product?.price * current.quantity * current.reducePercent) / 100),\n                                      0\n                                    )\n                                    .toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                                </strong>\n                              </td>\n                            </tr>\n                          </tbody>\n                        </Table>\n                      </CCol>\n                    </CRow>\n                  </CCardBody>\n                </CCollapse>\n              );\n            }\n          }}\n        />\n        <CPagination\n          activePage={activePage}\n          pages={Math.floor(initialState.totalItem / 20) + 1}\n          onActivePageChange={i => setActivePage(i)}\n        />\n      </CCardBody>\n      <CModal show={modal} onClose={() => setModal(!modal)} size=\"lg\">\n        <CModalHeader closeButton>\n          <CModalTitle>Chọn người vận chuyển</CModalTitle>\n        </CModalHeader>\n        <CModalBody>\n          <CLabel htmlFor=\"userName\">Người vận chuyển</CLabel>\n          <Select\n            name=\"department\"\n            onChange={e => {\n              selectedTransporter.current = e.value;\n            }}\n            onInputChange={onSearchUser}\n            placeholder=\"Chọn người vận chuyển\"\n            options={users.map(item => ({\n              value: item,\n              label: `${item.login}-${item.firstName}-${item.lastName}-${item.phone || 'Không có sdt'}`\n            }))}\n          />\n        </CModalBody>\n        <CModalFooter>\n          <CButton color=\"primary\" onClick={onSaveTransporter}>\n            Lưu lại\n          </CButton>{' '}\n          <CButton color=\"secondary\" onClick={() => setModal(!modal)}>\n            Hủy\n          </CButton>\n        </CModalFooter>\n      </CModal>\n    </CCard>\n  );\n};\n\nexport default Bill;\n"]}]}