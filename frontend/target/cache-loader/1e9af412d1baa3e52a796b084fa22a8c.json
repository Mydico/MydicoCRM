{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Export/create-warehouse-export.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Export/create-warehouse-export.js","mtime":1619203472248},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgQ0J1dHRvbiwgQ0NhcmQsIENDYXJkSGVhZGVyLCBDQ2FyZEJvZHksIENDb2wsIENGb3JtLCBDVGV4dGFyZWEsIENGb3JtR3JvdXAsIENMYWJlbCwgQ0lucHV0LCBDUm93LCBDU2VsZWN0LCBDQ2FyZFRpdGxlIH0gZnJvbSAnQGNvcmV1aS9yZWFjdCc7CmltcG9ydCBDSWNvbiBmcm9tICdAY29yZXVpL2ljb25zLXJlYWN0JzsKaW1wb3J0IHsgRm9ybWlrIH0gZnJvbSAnZm9ybWlrJzsKaW1wb3J0ICogYXMgWXVwIGZyb20gJ3l1cCc7CmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgY3JlYXRpbmdXYXJlaG91c2VJbXBvcnQgfSBmcm9tICcuLi9JbXBvcnQvd2FyZWhvdXNlLWltcG9ydC5hcGknOwppbXBvcnQgeyBjdXJyZW5jeU1hc2sgfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2N1cnJlbmN5LWlucHV0L2N1cnJlbmN5LWlucHV0JzsKaW1wb3J0IE1hc2tlZElucHV0IGZyb20gJ3JlYWN0LXRleHQtbWFzayc7CmltcG9ydCBUb2FzdGVyIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvbm90aWZpY2F0aW9ucy90b2FzdGVyL1RvYXN0ZXInOwppbXBvcnQgeyBjdXJyZW50IH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7CmltcG9ydCB7IHVzZUhpc3RvcnkgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJzsKaW1wb3J0IHsgZmV0Y2hpbmcgfSBmcm9tICcuLi9JbXBvcnQvd2FyZWhvdXNlLWltcG9ydC5yZWR1Y2VyJzsKaW1wb3J0IFNlbGVjdCBmcm9tICdyZWFjdC1zZWxlY3QnOwppbXBvcnQgeyBGb3JtRmVlZGJhY2ssIFRhYmxlIH0gZnJvbSAncmVhY3RzdHJhcCc7CmltcG9ydCB7IGdsb2JhbGl6ZWRXYXJlaG91c2VTZWxlY3RvcnMgfSBmcm9tICcuLi9XYXJlaG91c2Uvd2FyZWhvdXNlLnJlZHVjZXInOwppbXBvcnQgeyBnZXRXYXJlaG91c2UgfSBmcm9tICcuLi9XYXJlaG91c2Uvd2FyZWhvdXNlLmFwaSc7CmltcG9ydCB7IGdsb2JhbGl6ZWRQcm9kdWN0U2VsZWN0b3JzIH0gZnJvbSAnLi4vLi4vcHJvZHVjdC9Qcm9kdWN0TGlzdC9wcm9kdWN0LnJlZHVjZXInOwppbXBvcnQgeyBnZXRQcm9kdWN0IH0gZnJvbSAnLi4vLi4vcHJvZHVjdC9Qcm9kdWN0TGlzdC9wcm9kdWN0LmFwaSc7CmltcG9ydCB7IFdhcmVob3VzZUltcG9ydFR5cGUgfSBmcm9tICcuL2NvbnRhbnRzJzsKaW1wb3J0IHsgZ2V0UHJvZHVjdEluc3RvcmUgfSBmcm9tICcuLi9Qcm9kdWN0L3Byb2R1Y3Qtd2FyZWhvdXNlLmFwaSc7Cgp2YXIgdmFsaWRhdGlvblNjaGVtYSA9IGZ1bmN0aW9uIHZhbGlkYXRpb25TY2hlbWEodmFsdWVzKSB7CiAgcmV0dXJuIFl1cC5vYmplY3QoKS5zaGFwZSh7CiAgICBzdG9yZTogWXVwLm9iamVjdCgpLnJlcXVpcmVkKCdLaG8ga2jDtG5nIMSR4buDIHRy4buRbmcnKQogIH0pOwp9OwoKdmFyIHZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoZ2V0VmFsaWRhdGlvblNjaGVtYSkgewogIHJldHVybiBmdW5jdGlvbiAodmFsdWVzKSB7CiAgICB2YXIgdmFsaWRhdGlvblNjaGVtYSA9IGdldFZhbGlkYXRpb25TY2hlbWEodmFsdWVzKTsKCiAgICB0cnkgewogICAgICB2YWxpZGF0aW9uU2NoZW1hLnZhbGlkYXRlU3luYyh2YWx1ZXMsIHsKICAgICAgICBhYm9ydEVhcmx5OiBmYWxzZQogICAgICB9KTsKICAgICAgcmV0dXJuIHt9OwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgcmV0dXJuIGdldEVycm9yc0Zyb21WYWxpZGF0aW9uRXJyb3IoZXJyb3IpOwogICAgfQogIH07Cn07CgpleHBvcnQgdmFyIG1hcHBpbmdTdGF0dXMgPSB7CiAgQUNUSVZFOiAnxJBBTkcgSE/huqBUIMSQ4buYTkcnLAogIElOQUNUSVZFOiAnS0jDlE5HIEhP4bqgVCDEkOG7mE5HJywKICBERUxFVEVEOiAnxJDDgyBYw5NBJwp9OwoKdmFyIGdldEVycm9yc0Zyb21WYWxpZGF0aW9uRXJyb3IgPSBmdW5jdGlvbiBnZXRFcnJvcnNGcm9tVmFsaWRhdGlvbkVycm9yKHZhbGlkYXRpb25FcnJvcikgewogIHZhciBGSVJTVF9FUlJPUiA9IDA7CiAgcmV0dXJuIHZhbGlkYXRpb25FcnJvci5pbm5lci5yZWR1Y2UoZnVuY3Rpb24gKGVycm9ycywgZXJyb3IpIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGVycm9ycyksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIGVycm9yLnBhdGgsIGVycm9yLmVycm9yc1tGSVJTVF9FUlJPUl0pKTsKICB9LCB7fSk7Cn07Cgp2YXIgZmluZEZpcnN0RXJyb3IgPSBmdW5jdGlvbiBmaW5kRmlyc3RFcnJvcihmb3JtTmFtZSwgaGFzRXJyb3IpIHsKICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zW2Zvcm1OYW1lXTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3JtLmxlbmd0aDsgaSsrKSB7CiAgICBpZiAoaGFzRXJyb3IoZm9ybVtpXS5uYW1lKSkgewogICAgICBmb3JtW2ldLmZvY3VzKCk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KfTsKCnZhciB2YWxpZGF0ZUZvcm0gPSBmdW5jdGlvbiB2YWxpZGF0ZUZvcm0oZXJyb3JzKSB7CiAgZmluZEZpcnN0RXJyb3IoJ3NpbXBsZUZvcm0nLCBmdW5jdGlvbiAoZmllbGROYW1lKSB7CiAgICByZXR1cm4gQm9vbGVhbihlcnJvcnNbZmllbGROYW1lXSk7CiAgfSk7Cn07Cgp2YXIgQ3JlYXRlUmVjZWlwdCA9IGZ1bmN0aW9uIENyZWF0ZVJlY2VpcHQoKSB7CiAgdmFyIGZvcm1pa1JlZiA9IHVzZVJlZigpOwoKICB2YXIgX3VzZVNlbGVjdG9yID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUud2FyZWhvdXNlSW1wb3J0OwogIH0pLAogICAgICBpbml0aWFsU3RhdGUgPSBfdXNlU2VsZWN0b3IuaW5pdGlhbFN0YXRlOwoKICB2YXIgX3VzZVNlbGVjdG9yMiA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmN1c3RvbWVyOwogIH0pLAogICAgICBjdXN0b21lckluaXRpYWxTdGF0ZSA9IF91c2VTZWxlY3RvcjIuaW5pdGlhbFN0YXRlOwoKICB2YXIgX3VzZVNlbGVjdG9yMyA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmF1dGhlbnRpY2F0aW9uOwogIH0pLAogICAgICBhY2NvdW50ID0gX3VzZVNlbGVjdG9yMy5hY2NvdW50OwoKICB2YXIgc2VsZWN0QWxsV2FyZWhvdXNlID0gZ2xvYmFsaXplZFdhcmVob3VzZVNlbGVjdG9ycy5zZWxlY3RBbGw7CiAgdmFyIHNlbGVjdEFsbFByb2R1Y3QgPSBnbG9iYWxpemVkUHJvZHVjdFNlbGVjdG9ycy5zZWxlY3RBbGw7CiAgdmFyIGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTsKICB2YXIgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKTsKCiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKG51bGwpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgc2VsZWN0ZWRXYXJlaG91c2UgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRTZWxlY3RlZFdhcmVob3VzZSA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUobnVsbCksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgc2VsZWN0ZWRJbXBvcnRXYXJlaG91c2UgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRTZWxlY3RlZEltcG9ydFdhcmVob3VzZSA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBfdXNlU3RhdGU1ID0gdXNlU3RhdGUodHJ1ZSksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgaXNTZWxlY3RlZFdhcmVob3VzZSA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldElzU2VsZWN0ZWRXYXJlaG91c2UgPSBfdXNlU3RhdGU2WzFdOwoKICB2YXIgd2FyZWhvdXNlcyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbFdhcmVob3VzZSk7CiAgdmFyIHdhcmVob3VzZXNJbXBvcnQgPSB1c2VTZWxlY3RvcihzZWxlY3RBbGxXYXJlaG91c2UpOwogIHZhciBwcm9kdWN0cyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbFByb2R1Y3QpOwoKICB2YXIgX3VzZVN0YXRlNyA9IHVzZVN0YXRlKFtdKSwKICAgICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLAogICAgICBwcm9kdWN0TGlzdCA9IF91c2VTdGF0ZThbMF0sCiAgICAgIHNldFByb2R1Y3RMaXN0ID0gX3VzZVN0YXRlOFsxXTsKCiAgdmFyIGluaXRpYWxWYWx1ZXMgPSB7CiAgICBzdG9yZTogJycsCiAgICBub3RlOiAnJwogIH07CgogIHZhciBvblNlbGVjdFdhcmVob3VzZSA9IGZ1bmN0aW9uIG9uU2VsZWN0V2FyZWhvdXNlKHZhbHVlKSB7CiAgICBzZXRTZWxlY3RlZFdhcmVob3VzZSh2YWx1ZSk7CiAgICBzZXRJc1NlbGVjdGVkV2FyZWhvdXNlKHRydWUpOwogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2FjY291bnQkZGVwYXJ0bWVudDsKCiAgICBkaXNwYXRjaChnZXRXYXJlaG91c2UoewogICAgICBkZXBhcnRtZW50OiBKU09OLnN0cmluZ2lmeShbKChfYWNjb3VudCRkZXBhcnRtZW50ID0gYWNjb3VudC5kZXBhcnRtZW50KSA9PT0gbnVsbCB8fCBfYWNjb3VudCRkZXBhcnRtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYWNjb3VudCRkZXBhcnRtZW50LmlkKSB8fCAnJ10pCiAgICB9KSk7CiAgICBkaXNwYXRjaChnZXRQcm9kdWN0KCkpOwogIH0sIFtdKTsKCiAgdmFyIG9uU3VibWl0ID0gZnVuY3Rpb24gb25TdWJtaXQodmFsdWVzLCBfcmVmKSB7CiAgICB2YXIgc2V0U3VibWl0dGluZyA9IF9yZWYuc2V0U3VibWl0dGluZywKICAgICAgICBzZXRFcnJvcnMgPSBfcmVmLnNldEVycm9ycywKICAgICAgICBzZXRTdGF0dXMgPSBfcmVmLnNldFN0YXR1cywKICAgICAgICByZXNldEZvcm0gPSBfcmVmLnJlc2V0Rm9ybTsKICAgIHZhciBpc1ZhbGlkUHJvZHVjdCA9IHRydWU7CiAgICBwcm9kdWN0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgIGlmIChlbGVtZW50LnF1YW50aXR5ID4gZWxlbWVudC5xdWFudGl0eUluU3RvcmUpIHsKICAgICAgICBpc1ZhbGlkUHJvZHVjdCA9IGZhbHNlOwogICAgICB9CiAgICB9KTsKICAgIGlmICghaXNWYWxpZFByb2R1Y3QpIHJldHVybjsKICAgIHZhbHVlcy5zdG9yZUlucHV0RGV0YWlscyA9IHByb2R1Y3RMaXN0OwogICAgdmFsdWVzLnR5cGUgPSBXYXJlaG91c2VJbXBvcnRUeXBlLkVYUE9SVDsKICAgIGRpc3BhdGNoKGZldGNoaW5nKCkpOwogICAgZGlzcGF0Y2goY3JlYXRpbmdXYXJlaG91c2VJbXBvcnQodmFsdWVzKSk7CiAgICByZXNldEZvcm0oKTsKICB9OwoKICB2YXIgb25DaGFuZ2VRdWFudGl0eSA9IGZ1bmN0aW9uIG9uQ2hhbmdlUXVhbnRpdHkoX3JlZjIsIGluZGV4KSB7CiAgICB2YXIgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0OwogICAgdmFyIHF1YW50aXR5ID0gdGFyZ2V0LnZhbHVlOwoKICAgIHZhciBjb3B5QXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KTsKCiAgICBpZiAoc2VsZWN0ZWRXYXJlaG91c2UgJiYgY29weUFycltpbmRleF0ucHJvZHVjdCkgewogICAgICBkaXNwYXRjaChnZXRQcm9kdWN0SW5zdG9yZSh7CiAgICAgICAgc3RvcmVJZDogc2VsZWN0ZWRXYXJlaG91c2UuaWQsCiAgICAgICAgcHJvZHVjdElkOiBjb3B5QXJyW2luZGV4XS5wcm9kdWN0LmlkCiAgICAgIH0pKS50aGVuKGZ1bmN0aW9uIChudW1iZXJPZlF1YW50aXR5SW5TdG9yZSkgewogICAgICAgIGlmIChudW1iZXJPZlF1YW50aXR5SW5TdG9yZSAmJiBBcnJheS5pc0FycmF5KG51bWJlck9mUXVhbnRpdHlJblN0b3JlLnBheWxvYWQpICYmIG51bWJlck9mUXVhbnRpdHlJblN0b3JlLnBheWxvYWQubGVuZ3RoID4gMCkgewogICAgICAgICAgY29weUFycltpbmRleF0ucXVhbnRpdHkgPSBxdWFudGl0eTsKICAgICAgICAgIGNvcHlBcnJbaW5kZXhdLnF1YW50aXR5SW5TdG9yZSA9IG51bWJlck9mUXVhbnRpdHlJblN0b3JlLnBheWxvYWRbMF0ucXVhbnRpdHk7CiAgICAgICAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoZm9ybWlrUmVmLmN1cnJlbnQpIHsKICAgICAgZm9ybWlrUmVmLmN1cnJlbnQuc2V0RmllbGRWYWx1ZSgndG90YWxNb25leScsIHByb2R1Y3RMaXN0LnJlZHVjZShmdW5jdGlvbiAoc3VtLCBjdXJyZW50KSB7CiAgICAgICAgcmV0dXJuIHN1bSArIGN1cnJlbnQucHJpY2UgKiBjdXJyZW50LnF1YW50aXR5OwogICAgICB9LCAwKSk7CiAgICB9CiAgfSwgW3Byb2R1Y3RMaXN0XSk7CgogIHZhciBvblJlbW92ZVByb2R1Y3QgPSBmdW5jdGlvbiBvblJlbW92ZVByb2R1Y3QoaW5kZXgpIHsKICAgIHZhciBjb3B5QXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KTsKCiAgICBjb3B5QXJyLnNwbGljZShpbmRleCwgMSk7CiAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICB9OwoKICB2YXIgb25TZWxlY3RlZFByb2R1Y3QgPSBmdW5jdGlvbiBvblNlbGVjdGVkUHJvZHVjdChfcmVmMywgaW5kZXgpIHsKICAgIHZhciB2YWx1ZSA9IF9yZWYzLnZhbHVlOwogICAgdmFyIGFyciA9IHByb2R1Y3RMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5wcm9kdWN0LmlkID09PSB2YWx1ZS5pZDsKICAgIH0pOwoKICAgIGlmIChhcnIubGVuZ3RoID09PSAwKSB7CiAgICAgIHZhciBjb3B5QXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KTsKCiAgICAgIGNvcHlBcnJbaW5kZXhdLnByb2R1Y3QgPSB2YWx1ZTsKICAgICAgY29weUFycltpbmRleF0ucHJpY2UgPSBOdW1iZXIodmFsdWUucHJpY2UpOwogICAgICBjb3B5QXJyW2luZGV4XS5xdWFudGl0eSA9IDE7CiAgICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogICAgfQogIH07CgogIHZhciBvbkFkZFByb2R1Y3QgPSBmdW5jdGlvbiBvbkFkZFByb2R1Y3QoKSB7CiAgICB2YXIgZGF0YSA9IHsKICAgICAgcHJvZHVjdDoge30sCiAgICAgIHF1YW50aXR5OiAxLAogICAgICBxdWFudGl0eUluU3RvcmU6IDEKICAgIH07CiAgICBzZXRQcm9kdWN0TGlzdChbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KSwgW2RhdGFdKSk7CiAgfTsKCiAgdmFyIG9uQ2hhbmdlUHJpY2UgPSBmdW5jdGlvbiBvbkNoYW5nZVByaWNlKF9yZWY0LCBpbmRleCkgewogICAgdmFyIHRhcmdldCA9IF9yZWY0LnRhcmdldDsKICAgIHZhciBjb3B5QXJyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwcm9kdWN0TGlzdCkpOwogICAgY29weUFycltpbmRleF0ucHJpY2UgPSBOdW1iZXIodGFyZ2V0LnZhbHVlLnJlcGxhY2UoL1xEL2csICcnKSk7CiAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGluaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3MpIHsKICAgICAgaGlzdG9yeS5nb0JhY2soKTsKICAgIH0KICB9LCBbaW5pdGlhbFN0YXRlLnVwZGF0aW5nU3VjY2Vzc10pOwogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWlrLCB7CiAgICBpbml0aWFsVmFsdWVzOiBpbml0aWFsVmFsdWVzLAogICAgdmFsaWRhdGU6IHZhbGlkYXRlKHZhbGlkYXRpb25TY2hlbWEpLAogICAgb25TdWJtaXQ6IG9uU3VibWl0LAogICAgaW5uZXJSZWY6IGZvcm1pa1JlZgogIH0sIGZ1bmN0aW9uIChfcmVmNSkgewogICAgdmFyIF9zZWxlY3RlZFdhcmVob3VzZSRkZSwgX3NlbGVjdGVkSW1wb3J0V2FyZWhvOwoKICAgIHZhciB2YWx1ZXMgPSBfcmVmNS52YWx1ZXMsCiAgICAgICAgZXJyb3JzID0gX3JlZjUuZXJyb3JzLAogICAgICAgIHRvdWNoZWQgPSBfcmVmNS50b3VjaGVkLAogICAgICAgIHN0YXR1cyA9IF9yZWY1LnN0YXR1cywKICAgICAgICBkaXJ0eSA9IF9yZWY1LmRpcnR5LAogICAgICAgIGhhbmRsZUNoYW5nZSA9IF9yZWY1LmhhbmRsZUNoYW5nZSwKICAgICAgICBoYW5kbGVCbHVyID0gX3JlZjUuaGFuZGxlQmx1ciwKICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmNS5oYW5kbGVTdWJtaXQsCiAgICAgICAgc2V0RmllbGRWYWx1ZSA9IF9yZWY1LnNldEZpZWxkVmFsdWUsCiAgICAgICAgaXNTdWJtaXR0aW5nID0gX3JlZjUuaXNTdWJtaXR0aW5nLAogICAgICAgIGlzVmFsaWQgPSBfcmVmNS5pc1ZhbGlkLAogICAgICAgIGhhbmRsZVJlc2V0ID0gX3JlZjUuaGFuZGxlUmVzZXQsCiAgICAgICAgc2V0VG91Y2hlZCA9IF9yZWY1LnNldFRvdWNoZWQ7CiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm0sIHsKICAgICAgb25TdWJtaXQ6IGhhbmRsZVN1Ym1pdCwKICAgICAgbm9WYWxpZGF0ZTogdHJ1ZSwKICAgICAgbmFtZTogInNpbXBsZUZvcm0iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgewogICAgICBjbGFzc05hbWU6ICJjYXJkLWFjY2VudC1pbmZvIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkVGl0bGUsIG51bGwsICJDaFx1MUVDRG4ga2hvIHh1XHUxRUE1dCIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCB7CiAgICAgIGNsYXNzTmFtZTogIm1iLTMiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIHNtOiA0CiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogImxhc3ROYW1lIgogICAgfSwgIkNoXHUxRUNEbiBLaG8iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShpdGVtKSB7CiAgICAgICAgc2V0RmllbGRWYWx1ZSgnc3RvcmUnLCBpdGVtLnZhbHVlKTsKICAgICAgICBvblNlbGVjdFdhcmVob3VzZShpdGVtLnZhbHVlKTsKICAgICAgfSwKICAgICAgcGxhY2Vob2xkZXI6ICIiLAogICAgICBvcHRpb25zOiB3YXJlaG91c2VzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogaXRlbSwKICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQoaXRlbS5uYW1lKQogICAgICAgIH07CiAgICAgIH0pCiAgICB9KSwgIWlzU2VsZWN0ZWRXYXJlaG91c2UgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybUZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCAiQlx1MUVBMW4gcGhcdTFFQTNpIGNoXHUxRUNEbiBraG8gaFx4RTBuZyIpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI2IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlRceEVBbiBraG86IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gbnVsbCB8fCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRXYXJlaG91c2UubmFtZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiU1x1MUVEMSBcdTAxMTFpXHUxRUM3biB0aG9cdTFFQTFpOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IG51bGwgfHwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkV2FyZWhvdXNlLnRlbCkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjYiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiQ2hpIG5oXHhFMW5oOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IG51bGwgfHwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfc2VsZWN0ZWRXYXJlaG91c2UkZGUgPSBzZWxlY3RlZFdhcmVob3VzZS5kZXBhcnRtZW50KSA9PT0gbnVsbCB8fCBfc2VsZWN0ZWRXYXJlaG91c2UkZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zZWxlY3RlZFdhcmVob3VzZSRkZS5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJcdTAxMTBcdTFFQ0JhIGNoXHUxRUM5OiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IG51bGwgfHwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkV2FyZWhvdXNlLmFkZHJlc3MpKSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkLCB7CiAgICAgIGNsYXNzTmFtZTogImNhcmQtYWNjZW50LWluZm8iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEhlYWRlciwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRUaXRsZSwgbnVsbCwgIkNoXHUxRUNEbiBraG8gbmhcdTFFQURwIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIHsKICAgICAgY2xhc3NOYW1lOiAibWItMyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgc206IDQKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAibGFzdE5hbWUiCiAgICB9LCAiQ2hcdTFFQ0RuIEtobyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGl0ZW0pIHsKICAgICAgICBzZXRGaWVsZFZhbHVlKCdzdG9yZVRyYW5zZmVyJywgaXRlbS52YWx1ZSk7CiAgICAgICAgc2V0U2VsZWN0ZWRJbXBvcnRXYXJlaG91c2UoaXRlbS52YWx1ZSk7CiAgICAgIH0sCiAgICAgIHBsYWNlaG9sZGVyOiAiIiwKICAgICAgb3B0aW9uczogd2FyZWhvdXNlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IGl0ZW0sCiAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KGl0ZW0ubmFtZSkKICAgICAgICB9OwogICAgICB9KQogICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjYiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiVFx4RUFuIGtobzoiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZEltcG9ydFdhcmVob3VzZS5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJTXHUxRUQxIFx1MDExMWlcdTFFQzduIHRob1x1MUVBMWk6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZEltcG9ydFdhcmVob3VzZSA9PT0gbnVsbCB8fCBzZWxlY3RlZEltcG9ydFdhcmVob3VzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRJbXBvcnRXYXJlaG91c2UudGVsKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJDaGkgbmhceEUxbmg6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZEltcG9ydFdhcmVob3VzZSA9PT0gbnVsbCB8fCBzZWxlY3RlZEltcG9ydFdhcmVob3VzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9zZWxlY3RlZEltcG9ydFdhcmVobyA9IHNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlLmRlcGFydG1lbnQpID09PSBudWxsIHx8IF9zZWxlY3RlZEltcG9ydFdhcmVobyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NlbGVjdGVkSW1wb3J0V2FyZWhvLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlx1MDExMFx1MUVDQmEgY2hcdTFFQzk6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZEltcG9ydFdhcmVob3VzZSA9PT0gbnVsbCB8fCBzZWxlY3RlZEltcG9ydFdhcmVob3VzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRJbXBvcnRXYXJlaG91c2UuYWRkcmVzcykpKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICBjb2xvcjogInByaW1hcnkiLAogICAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgc2l6ZTogInNtIiwKICAgICAgY2xhc3NOYW1lOiAibWwtMyBtYi0zIiwKICAgICAgb25DbGljazogb25BZGRQcm9kdWN0CiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICBuYW1lOiAnY2lsQXJyb3dDaXJjbGVSaWdodCcsCiAgICAgIGNsYXNzTmFtZTogIm1yLTIiCiAgICB9KSwgIlRoXHhFQW0gc1x1MUVBM24gcGhcdTFFQTltIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhYmxlLCB7CiAgICAgIHJlc3BvbnNpdmU6IHRydWUsCiAgICAgIHN0cmlwZWQ6IHRydWUKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aGVhZCIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIG51bGwsICJTXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIlx1MDExMFx1MDFBMW4gdlx1MUVDQiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCBudWxsLCAiRHVuZyB0XHhFRGNoIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIG51bGwsICJTXHUxRUQxIGxcdTAxQjBcdTFFRTNuZyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCBudWxsLCAiR2lceEUxIikpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRib2R5IiwgbnVsbCwgcHJvZHVjdExpc3QubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICB2YXIgX2l0ZW0kcHJvZHVjdCwgX2l0ZW0kcHJvZHVjdDIsIF9pdGVtJHByb2R1Y3QzOwoKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIHsKICAgICAgICBrZXk6IGluZGV4LAogICAgICAgIHN0eWxlOiBpdGVtLnF1YW50aXR5ID4gaXRlbS5xdWFudGl0eUluU3RvcmUgPyB7CiAgICAgICAgICBib3hTaGFkb3c6ICcwcHggMHB4IDZweCA1cHggcmVkJwogICAgICAgIH0gOiB7fQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHdpZHRoOiA1MDAKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICB2YWx1ZTogaXRlbSwKICAgICAgICAgIGxhYmVsOiBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRwcm9kdWN0ID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0Lm5hbWUKICAgICAgICB9LAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uU2VsZWN0ZWRQcm9kdWN0KGV2ZW50LCBpbmRleCk7CiAgICAgICAgfSwKICAgICAgICBtZW51UG9ydGFsVGFyZ2V0OiBkb2N1bWVudC5ib2R5LAogICAgICAgIG9wdGlvbnM6IHByb2R1Y3RzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgdmFyIF9pdGVtJHByb2R1Y3RCcmFuZDsKCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogaXRlbSwKICAgICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRwcm9kdWN0QnJhbmQgPSBpdGVtLnByb2R1Y3RCcmFuZCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdEJyYW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0QnJhbmQubmFtZSwgIi0iKS5jb25jYXQoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLm5hbWUsICItIikuY29uY2F0KGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS52b2x1bWUpCiAgICAgICAgICB9OwogICAgICAgIH0pCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW0kcHJvZHVjdDIgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3QyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0Mi51bml0KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW0kcHJvZHVjdDMgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3QzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0My52b2x1bWUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHdpZHRoOiAyMDAKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgIG1pbjogMSwKICAgICAgICBuYW1lOiAiY29kZSIsCiAgICAgICAgaWQ6ICJjb2RlIiwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvbkNoYW5nZVF1YW50aXR5KGV2ZW50LCBpbmRleCk7CiAgICAgICAgfSwKICAgICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgICAgdmFsdWU6IGl0ZW0ucXVhbnRpdHkKICAgICAgfSksIGl0ZW0ucXVhbnRpdHkgPiBpdGVtLnF1YW50aXR5SW5TdG9yZSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtRmVlZGJhY2ssIHsKICAgICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgICB9LCAiU1x1MUVEMSBsXHUwMUIwXHUxRUUzbmcgY1x1MUVBN24gbFx1MUVBNXkgbFx1MUVEQm4gaFx1MDFBMW4gc1x1MUVEMSBsXHUwMUIwXHUxRUUzbmcgdHJvbmcga2hvIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHdpZHRoOiAxMDAKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1hc2tlZElucHV0LCB7CiAgICAgICAgbWFzazogY3VycmVuY3lNYXNrLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uQ2hhbmdlUHJpY2UoZXZlbnQsIGluZGV4KTsKICAgICAgICB9LAogICAgICAgIHZhbHVlOiB0eXBlb2YgcHJvZHVjdExpc3RbaW5kZXhdLnByaWNlICE9PSAnbnVtYmVyJyA/IG5ldyBJbnRsLk51bWJlckZvcm1hdCgndmktVk4nLCB7CiAgICAgICAgICBzdHlsZTogJ2N1cnJlbmN5JywKICAgICAgICAgIGN1cnJlbmN5OiAnVk5EJwogICAgICAgIH0pLmZvcm1hdChwcm9kdWN0TGlzdFtpbmRleF0ucHJpY2UpIDogcHJvZHVjdExpc3RbaW5kZXhdLnByaWNlLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHJlZiwgcHJvcHMpIHsKICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIF9leHRlbmRzKHsKICAgICAgICAgICAgaW5uZXJSZWY6IHJlZgogICAgICAgICAgfSwgcHJvcHMpKTsKICAgICAgICB9CiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICB3aWR0aDogMTAwCiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgICAgc2l6ZTogInNtIiwKICAgICAgICBjbGFzc05hbWU6ICJtci0zIiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgcmV0dXJuIG9uUmVtb3ZlUHJvZHVjdChpbmRleCk7CiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICAgIG5hbWU6ICJjaWxYQ2lyY2xlIgogICAgICB9KSkpKTsKICAgIH0pKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkSGVhZGVyLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZFRpdGxlLCBudWxsLCAiVGhceEY0bmcgdGluIGtoXHhFMWMiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkQm9keSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjQiLAogICAgICBzbTogIjUiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInVzZXJOYW1lIgogICAgfSwgIkdoaSBjaFx4RkEiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1RleHRhcmVhLCB7CiAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgbmFtZTogIm5vdGUiLAogICAgICBpZDogIm5vdGUiLAogICAgICBwbGFjZWhvbGRlcjogIiIsCiAgICAgIGF1dG9Db21wbGV0ZTogImFkZHJlc3MiLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgIHZhbHVlOiB2YWx1ZXMubm90ZQogICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjQiLAogICAgICBzbTogIjUiLAogICAgICBjbGFzc05hbWU6ICJtbC1hdXRvIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGFibGUsIHsKICAgICAgY2xhc3NOYW1lOiAidGFibGUtY2xlYXIiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGJvZHkiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImxlZnQiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIlRcdTFFRDVuZyBzXHUxRUQxIGxcdTAxQjBcdTFFRTNuZyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICBjbGFzc05hbWU6ICJyaWdodCIKICAgIH0sIHByb2R1Y3RMaXN0LnJlZHVjZShmdW5jdGlvbiAoc3VtLCBjdXJyZW50KSB7CiAgICAgIHJldHVybiBzdW0gKyBOdW1iZXIoY3VycmVudC5xdWFudGl0eSk7CiAgICB9LCAwKSB8fCAnJykpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImxlZnQiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIlRcdTFFRDVuZyB0aVx1MUVDMW4iKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgY2xhc3NOYW1lOiAicmlnaHQiCiAgICB9LCBwcm9kdWN0TGlzdC5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgY3VycmVudCkgewogICAgICByZXR1cm4gc3VtICsgY3VycmVudC5wcmljZSAqIGN1cnJlbnQucXVhbnRpdHk7CiAgICB9LCAwKS50b0xvY2FsZVN0cmluZygnaXQtSVQnLCB7CiAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICBjdXJyZW5jeTogJ1ZORCcKICAgIH0pKSkpKSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIHsKICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXIiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIHR5cGU6ICJzdWJtaXQiLAogICAgICBzaXplOiAibGciLAogICAgICBjb2xvcjogInByaW1hcnkiLAogICAgICBkaXNhYmxlZDogaW5pdGlhbFN0YXRlLmxvYWRpbmcKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICJjaWwtc2F2ZSIKICAgIH0pLCAiICIsIGluaXRpYWxTdGF0ZS5sb2FkaW5nID8gJ8SQYW5nIHjhu60gbMO9JyA6ICdU4bqhbyBt4bubaScpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIHR5cGU6ICJyZXNldCIsCiAgICAgIHNpemU6ICJsZyIsCiAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgb25DbGljazogaGFuZGxlUmVzZXQsCiAgICAgIGNsYXNzTmFtZTogIm1sLTUiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICBuYW1lOiAiY2lsLWJhbiIKICAgIH0pLCAiIFhceEYzYSBuaFx1MUVBRHAgbGlcdTFFQzd1IikpKTsKICB9KSk7Cn07CgpleHBvcnQgZGVmYXVsdCBDcmVhdGVSZWNlaXB0Ow=="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Export/create-warehouse-export.js"],"names":["React","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CTextarea","CFormGroup","CLabel","CInput","CRow","CSelect","CCardTitle","CIcon","Formik","Yup","useDispatch","useSelector","creatingWarehouseImport","currencyMask","MaskedInput","Toaster","current","useHistory","fetching","Select","FormFeedback","Table","globalizedWarehouseSelectors","getWarehouse","globalizedProductSelectors","getProduct","WarehouseImportType","getProductInstore","validationSchema","values","object","shape","store","required","validate","getValidationSchema","validateSync","abortEarly","error","getErrorsFromValidationError","mappingStatus","ACTIVE","INACTIVE","DELETED","validationError","FIRST_ERROR","inner","reduce","errors","path","findFirstError","formName","hasError","form","document","forms","i","length","name","focus","validateForm","fieldName","Boolean","CreateReceipt","formikRef","state","warehouseImport","initialState","customer","customerInitialState","authentication","account","selectAllWarehouse","selectAll","selectAllProduct","dispatch","history","selectedWarehouse","setSelectedWarehouse","selectedImportWarehouse","setSelectedImportWarehouse","isSelectedWarehouse","setIsSelectedWarehouse","warehouses","warehousesImport","products","productList","setProductList","initialValues","note","onSelectWarehouse","value","department","JSON","stringify","id","onSubmit","setSubmitting","setErrors","setStatus","resetForm","isValidProduct","forEach","element","quantity","quantityInStore","storeInputDetails","type","EXPORT","onChangeQuantity","index","target","copyArr","product","storeId","productId","then","numberOfQuantityInStore","Array","isArray","payload","setFieldValue","sum","price","onRemoveProduct","splice","onSelectedProduct","arr","filter","item","Number","onAddProduct","data","onChangePrice","parse","replace","updatingSuccess","goBack","touched","status","dirty","handleChange","handleBlur","handleSubmit","isSubmitting","isValid","handleReset","setTouched","map","label","tel","address","boxShadow","width","event","body","productBrand","volume","unit","Intl","NumberFormat","style","currency","format","ref","props","toLocaleString","loading"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,SACEC,OADF,EAEEC,KAFF,EAGEC,WAHF,EAIEC,SAJF,EAKEC,IALF,EAMEC,KANF,EAOEC,SAPF,EAQEC,UARF,EASEC,MATF,EAUEC,MAVF,EAWEC,IAXF,EAYEC,OAZF,EAaEC,UAbF,QAcO,eAdP;AAeA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,uBAAT,QAAwC,gCAAxC;AACA,SAASC,YAAT,QAA6B,mDAA7B;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,OAAOC,OAAP,MAAoB,mDAApB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,QAAT,QAAyB,oCAAzB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,SAASC,YAAT,EAAuBC,KAAvB,QAAoC,YAApC;AACA,SAASC,4BAAT,QAA6C,gCAA7C;AACA,SAASC,YAAT,QAA6B,4BAA7B;AACA,SAASC,0BAAT,QAA2C,2CAA3C;AACA,SAASC,UAAT,QAA2B,uCAA3B;AACA,SAASC,mBAAT,QAAoC,YAApC;AACA,SAASC,iBAAT,QAAkC,kCAAlC;;AACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAASC,MAAT,EAAiB;AACxC,SAAOpB,GAAG,CAACqB,MAAJ,GAAaC,KAAb,CAAmB;AACxBC,IAAAA,KAAK,EAAEvB,GAAG,CAACqB,MAAJ,GAAaG,QAAb,CAAsB,oBAAtB;AADiB,GAAnB,CAAP;AAGD,CAJD;;AAMA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAC,mBAAmB,EAAI;AACtC,SAAO,UAAAN,MAAM,EAAI;AACf,QAAMD,gBAAgB,GAAGO,mBAAmB,CAACN,MAAD,CAA5C;;AACA,QAAI;AACFD,MAAAA,gBAAgB,CAACQ,YAAjB,CAA8BP,MAA9B,EAAsC;AAAEQ,QAAAA,UAAU,EAAE;AAAd,OAAtC;AACA,aAAO,EAAP;AACD,KAHD,CAGE,OAAOC,KAAP,EAAc;AACd,aAAOC,4BAA4B,CAACD,KAAD,CAAnC;AACD;AACF,GARD;AASD,CAVD;;AAYA,OAAO,IAAME,aAAa,GAAG;AAC3BC,EAAAA,MAAM,EAAE,gBADmB;AAE3BC,EAAAA,QAAQ,EAAE,iBAFiB;AAG3BC,EAAAA,OAAO,EAAE;AAHkB,CAAtB;;AAMP,IAAMJ,4BAA4B,GAAG,SAA/BA,4BAA+B,CAAAK,eAAe,EAAI;AACtD,MAAMC,WAAW,GAAG,CAApB;AACA,SAAOD,eAAe,CAACE,KAAhB,CAAsBC,MAAtB,CAA6B,UAACC,MAAD,EAASV,KAAT,EAAmB;AACrD,2CACKU,MADL,2BAEGV,KAAK,CAACW,IAFT,EAEgBX,KAAK,CAACU,MAAN,CAAaH,WAAb,CAFhB;AAID,GALM,EAKJ,EALI,CAAP;AAMD,CARD;;AAUA,IAAMK,cAAc,GAAG,SAAjBA,cAAiB,CAACC,QAAD,EAAWC,QAAX,EAAwB;AAC7C,MAAMC,IAAI,GAAGC,QAAQ,CAACC,KAAT,CAAeJ,QAAf,CAAb;;AACA,OAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACI,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC,QAAIJ,QAAQ,CAACC,IAAI,CAACG,CAAD,CAAJ,CAAQE,IAAT,CAAZ,EAA4B;AAC1BL,MAAAA,IAAI,CAACG,CAAD,CAAJ,CAAQG,KAAR;AACA;AACD;AACF;AACF,CARD;;AAUA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAZ,MAAM,EAAI;AAC7BE,EAAAA,cAAc,CAAC,YAAD,EAAe,UAAAW,SAAS,EAAI;AACxC,WAAOC,OAAO,CAACd,MAAM,CAACa,SAAD,CAAP,CAAd;AACD,GAFa,CAAd;AAGD,CAJD;;AAMA,IAAME,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,MAAMC,SAAS,GAAGxE,MAAM,EAAxB;;AAD0B,qBAEDmB,WAAW,CAAC,UAAAsD,KAAK;AAAA,WAAIA,KAAK,CAACC,eAAV;AAAA,GAAN,CAFV;AAAA,MAElBC,YAFkB,gBAElBA,YAFkB;;AAAA,sBAGqBxD,WAAW,CAAC,UAAAsD,KAAK;AAAA,WAAIA,KAAK,CAACG,QAAV;AAAA,GAAN,CAHhC;AAAA,MAGJC,oBAHI,iBAGlBF,YAHkB;;AAAA,sBAINxD,WAAW,CAAC,UAAAsD,KAAK;AAAA,WAAIA,KAAK,CAACK,cAAV;AAAA,GAAN,CAJL;AAAA,MAIlBC,OAJkB,iBAIlBA,OAJkB;;AAAA,MAMPC,kBANO,GAMgBlD,4BANhB,CAMlBmD,SANkB;AAAA,MAOPC,gBAPO,GAOclD,0BAPd,CAOlBiD,SAPkB;AAS1B,MAAME,QAAQ,GAAGjE,WAAW,EAA5B;AACA,MAAMkE,OAAO,GAAG3D,UAAU,EAA1B;;AAV0B,kBAWwBxB,QAAQ,CAAC,IAAD,CAXhC;AAAA;AAAA,MAWnBoF,iBAXmB;AAAA,MAWAC,oBAXA;;AAAA,mBAYoCrF,QAAQ,CAAC,IAAD,CAZ5C;AAAA;AAAA,MAYnBsF,uBAZmB;AAAA,MAYMC,0BAZN;;AAAA,mBAa4BvF,QAAQ,CAAC,IAAD,CAbpC;AAAA;AAAA,MAanBwF,mBAbmB;AAAA,MAaEC,sBAbF;;AAe1B,MAAMC,UAAU,GAAGxE,WAAW,CAAC6D,kBAAD,CAA9B;AACA,MAAMY,gBAAgB,GAAGzE,WAAW,CAAC6D,kBAAD,CAApC;AACA,MAAMa,QAAQ,GAAG1E,WAAW,CAAC+D,gBAAD,CAA5B;;AAjB0B,mBAmBYjF,QAAQ,CAAC,EAAD,CAnBpB;AAAA;AAAA,MAmBnB6F,WAnBmB;AAAA,MAmBNC,cAnBM;;AAqB1B,MAAMC,aAAa,GAAG;AACpBxD,IAAAA,KAAK,EAAE,EADa;AAEpByD,IAAAA,IAAI,EAAE;AAFc,GAAtB;;AAIA,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,KAAK,EAAI;AACjCb,IAAAA,oBAAoB,CAACa,KAAD,CAApB;AACAT,IAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACD,GAHD;;AAKA3F,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACdoF,IAAAA,QAAQ,CAACpD,YAAY,CAAC;AAAEqE,MAAAA,UAAU,EAAEC,IAAI,CAACC,SAAL,CAAe,CAAC,wBAAAvB,OAAO,CAACqB,UAAR,4EAAoBG,EAApB,KAA0B,EAA3B,CAAf;AAAd,KAAD,CAAb,CAAR;AACApB,IAAAA,QAAQ,CAAClD,UAAU,EAAX,CAAR;AACD,GAHQ,EAGN,EAHM,CAAT;;AAKA,MAAMuE,QAAQ,GAAG,SAAXA,QAAW,CAACnE,MAAD,QAAgE;AAAA,QAArDoE,aAAqD,QAArDA,aAAqD;AAAA,QAAtCC,SAAsC,QAAtCA,SAAsC;AAAA,QAA3BC,SAA2B,QAA3BA,SAA2B;AAAA,QAAhBC,SAAgB,QAAhBA,SAAgB;AAC/E,QAAIC,cAAc,GAAG,IAArB;AACAf,IAAAA,WAAW,CAACgB,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC7B,UAAIA,OAAO,CAACC,QAAR,GAAmBD,OAAO,CAACE,eAA/B,EAAgD;AAC9CJ,QAAAA,cAAc,GAAG,KAAjB;AACD;AACF,KAJD;AAKA,QAAI,CAACA,cAAL,EAAqB;AACrBxE,IAAAA,MAAM,CAAC6E,iBAAP,GAA2BpB,WAA3B;AACAzD,IAAAA,MAAM,CAAC8E,IAAP,GAAcjF,mBAAmB,CAACkF,MAAlC;AACAjC,IAAAA,QAAQ,CAACzD,QAAQ,EAAT,CAAR;AACAyD,IAAAA,QAAQ,CAAC/D,uBAAuB,CAACiB,MAAD,CAAxB,CAAR;AACAuE,IAAAA,SAAS;AACV,GAbD;;AAeA,MAAMS,gBAAgB,GAAG,SAAnBA,gBAAmB,QAAaC,KAAb,EAAuB;AAAA,QAApBC,MAAoB,SAApBA,MAAoB;AAC9C,QAAMP,QAAQ,GAAGO,MAAM,CAACpB,KAAxB;;AACA,QAAMqB,OAAO,sBAAO1B,WAAP,CAAb;;AACA,QAAIT,iBAAiB,IAAImC,OAAO,CAACF,KAAD,CAAP,CAAeG,OAAxC,EAAiD;AAC/CtC,MAAAA,QAAQ,CACNhD,iBAAiB,CAAC;AAChBuF,QAAAA,OAAO,EAAErC,iBAAiB,CAACkB,EADX;AAEhBoB,QAAAA,SAAS,EAAEH,OAAO,CAACF,KAAD,CAAP,CAAeG,OAAf,CAAuBlB;AAFlB,OAAD,CADX,CAAR,CAKEqB,IALF,CAKO,UAAAC,uBAAuB,EAAI;AAChC,YAAIA,uBAAuB,IAAIC,KAAK,CAACC,OAAN,CAAcF,uBAAuB,CAACG,OAAtC,CAA3B,IAA6EH,uBAAuB,CAACG,OAAxB,CAAgC/D,MAAhC,GAAyC,CAA1H,EAA6H;AAC3HuD,UAAAA,OAAO,CAACF,KAAD,CAAP,CAAeN,QAAf,GAA0BA,QAA1B;AACAQ,UAAAA,OAAO,CAACF,KAAD,CAAP,CAAeL,eAAf,GAAiCY,uBAAuB,CAACG,OAAxB,CAAgC,CAAhC,EAAmChB,QAApE;AACAjB,UAAAA,cAAc,CAACyB,OAAD,CAAd;AACD;AACF,OAXD;AAYD;AACF,GAjBD;;AAkBAzH,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIyE,SAAS,CAAChD,OAAd,EAAuB;AACrBgD,MAAAA,SAAS,CAAChD,OAAV,CAAkByG,aAAlB,CACE,YADF,EAEEnC,WAAW,CAACvC,MAAZ,CAAmB,UAAC2E,GAAD,EAAM1G,OAAN;AAAA,eAAkB0G,GAAG,GAAG1G,OAAO,CAAC2G,KAAR,GAAgB3G,OAAO,CAACwF,QAAhD;AAAA,OAAnB,EAA6E,CAA7E,CAFF;AAID;AACF,GAPQ,EAON,CAAClB,WAAD,CAPM,CAAT;;AAQA,MAAMsC,eAAe,GAAG,SAAlBA,eAAkB,CAAAd,KAAK,EAAI;AAC/B,QAAME,OAAO,sBAAO1B,WAAP,CAAb;;AACA0B,IAAAA,OAAO,CAACa,MAAR,CAAef,KAAf,EAAsB,CAAtB;AACAvB,IAAAA,cAAc,CAACyB,OAAD,CAAd;AACD,GAJD;;AAMA,MAAMc,iBAAiB,GAAG,SAApBA,iBAAoB,QAAYhB,KAAZ,EAAsB;AAAA,QAAnBnB,KAAmB,SAAnBA,KAAmB;AAC9C,QAAMoC,GAAG,GAAGzC,WAAW,CAAC0C,MAAZ,CAAmB,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAAChB,OAAL,CAAalB,EAAb,KAAoBJ,KAAK,CAACI,EAA9B;AAAA,KAAvB,CAAZ;;AACA,QAAIgC,GAAG,CAACtE,MAAJ,KAAe,CAAnB,EAAsB;AACpB,UAAMuD,OAAO,sBAAO1B,WAAP,CAAb;;AACA0B,MAAAA,OAAO,CAACF,KAAD,CAAP,CAAeG,OAAf,GAAyBtB,KAAzB;AACAqB,MAAAA,OAAO,CAACF,KAAD,CAAP,CAAea,KAAf,GAAuBO,MAAM,CAACvC,KAAK,CAACgC,KAAP,CAA7B;AACAX,MAAAA,OAAO,CAACF,KAAD,CAAP,CAAeN,QAAf,GAA0B,CAA1B;AACAjB,MAAAA,cAAc,CAACyB,OAAD,CAAd;AACD;AACF,GATD;;AAWA,MAAMmB,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAMC,IAAI,GAAG;AAAEnB,MAAAA,OAAO,EAAE,EAAX;AAAeT,MAAAA,QAAQ,EAAE,CAAzB;AAA4BC,MAAAA,eAAe,EAAE;AAA7C,KAAb;AACAlB,IAAAA,cAAc,8BAAKD,WAAL,IAAkB8C,IAAlB,GAAd;AACD,GAHD;;AAKA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,QAAavB,KAAb,EAAuB;AAAA,QAApBC,MAAoB,SAApBA,MAAoB;AAC3C,QAAMC,OAAO,GAAGnB,IAAI,CAACyC,KAAL,CAAWzC,IAAI,CAACC,SAAL,CAAeR,WAAf,CAAX,CAAhB;AACA0B,IAAAA,OAAO,CAACF,KAAD,CAAP,CAAea,KAAf,GAAuBO,MAAM,CAACnB,MAAM,CAACpB,KAAP,CAAa4C,OAAb,CAAqB,KAArB,EAA4B,EAA5B,CAAD,CAA7B;AACAhD,IAAAA,cAAc,CAACyB,OAAD,CAAd;AACD,GAJD;;AAMAzH,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI4E,YAAY,CAACqE,eAAjB,EAAkC;AAChC5D,MAAAA,OAAO,CAAC6D,MAAR;AACD;AACF,GAJQ,EAIN,CAACtE,YAAY,CAACqE,eAAd,CAJM,CAAT;AAMA,sBACE,oBAAC,KAAD,qBACE,oBAAC,MAAD;AAAQ,IAAA,aAAa,EAAEhD,aAAvB;AAAsC,IAAA,QAAQ,EAAEtD,QAAQ,CAACN,gBAAD,CAAxD;AAA4E,IAAA,QAAQ,EAAEoE,QAAtF;AAAgG,IAAA,QAAQ,EAAEhC;AAA1G,KACG;AAAA;;AAAA,QACCnC,MADD,SACCA,MADD;AAAA,QAECmB,MAFD,SAECA,MAFD;AAAA,QAGC0F,OAHD,SAGCA,OAHD;AAAA,QAICC,MAJD,SAICA,MAJD;AAAA,QAKCC,KALD,SAKCA,KALD;AAAA,QAMCC,YAND,SAMCA,YAND;AAAA,QAOCC,UAPD,SAOCA,UAPD;AAAA,QAQCC,YARD,SAQCA,YARD;AAAA,QASCtB,aATD,SASCA,aATD;AAAA,QAUCuB,YAVD,SAUCA,YAVD;AAAA,QAWCC,OAXD,SAWCA,OAXD;AAAA,QAYCC,WAZD,SAYCA,WAZD;AAAA,QAaCC,UAbD,SAaCA,UAbD;AAAA,wBAeC,oBAAC,KAAD;AAAO,MAAA,QAAQ,EAAEJ,YAAjB;AAA+B,MAAA,UAAU,MAAzC;AAA0C,MAAA,IAAI,EAAC;AAA/C,oBACE,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAC;AAAjB,oBACE,oBAAC,WAAD,qBACE,oBAAC,UAAD,kCADF,CADF,eAIE,oBAAC,SAAD,qBACE,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAC;AAAhB,oBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAE;AAAV,oBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,uBADF,eAEE,oBAAC,MAAD;AACE,MAAA,QAAQ,EAAE,kBAAAd,IAAI,EAAI;AAChBR,QAAAA,aAAa,CAAC,OAAD,EAAUQ,IAAI,CAACtC,KAAf,CAAb;AACAD,QAAAA,iBAAiB,CAACuC,IAAI,CAACtC,KAAN,CAAjB;AACD,OAJH;AAKE,MAAA,WAAW,EAAC,EALd;AAME,MAAA,OAAO,EAAER,UAAU,CAACiE,GAAX,CAAe,UAAAnB,IAAI;AAAA,eAAK;AAC/BtC,UAAAA,KAAK,EAAEsC,IADwB;AAE/BoB,UAAAA,KAAK,YAAKpB,IAAI,CAACvE,IAAV;AAF0B,SAAL;AAAA,OAAnB;AANX,MAFF,EAaG,CAACuB,mBAAD,iBAAwB,oBAAC,YAAD;AAAc,MAAA,SAAS,EAAC;AAAxB,kDAb3B,CADF,CADF,eAkBE,oBAAC,IAAD,qBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC;AAAT,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,qBADF,eAEE;AAAI,MAAA,SAAS,EAAC;AAAd,OAA0BJ,iBAA1B,aAA0BA,iBAA1B,uBAA0BA,iBAAiB,CAAEnB,IAA7C,CAFF,CADF,eAKE;AAAI,MAAA,SAAS,EAAC;AAAd,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,4CADF,eAEE;AAAI,MAAA,SAAS,EAAC;AAAd,OAA0BmB,iBAA1B,aAA0BA,iBAA1B,uBAA0BA,iBAAiB,CAAEyE,GAA7C,CAFF,CALF,CADF,eAWE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC;AAAT,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,uBADF,eAEE;AAAI,MAAA,SAAS,EAAC;AAAd,OAA0BzE,iBAA1B,aAA0BA,iBAA1B,gDAA0BA,iBAAiB,CAAEe,UAA7C,0DAA0B,sBAA+BlC,IAAzD,CAFF,CADF,eAKE;AAAI,MAAA,SAAS,EAAC;AAAd,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,iCADF,eAEE;AAAI,MAAA,SAAS,EAAC;AAAd,OAA0BmB,iBAA1B,aAA0BA,iBAA1B,uBAA0BA,iBAAiB,CAAE0E,OAA7C,CAFF,CALF,CAXF,CAlBF,CAJF,CADF,eAgDE,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAC;AAAjB,oBACE,oBAAC,WAAD,qBACE,oBAAC,UAAD,kCADF,CADF,eAIE,oBAAC,SAAD,qBACE,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAC;AAAhB,oBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAE;AAAV,oBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,uBADF,eAEE,oBAAC,MAAD;AACE,MAAA,QAAQ,EAAE,kBAAAtB,IAAI,EAAI;AAChBR,QAAAA,aAAa,CAAC,eAAD,EAAkBQ,IAAI,CAACtC,KAAvB,CAAb;AACAX,QAAAA,0BAA0B,CAACiD,IAAI,CAACtC,KAAN,CAA1B;AACD,OAJH;AAKE,MAAA,WAAW,EAAC,EALd;AAME,MAAA,OAAO,EAAER,UAAU,CAACiE,GAAX,CAAe,UAAAnB,IAAI;AAAA,eAAK;AAC/BtC,UAAAA,KAAK,EAAEsC,IADwB;AAE/BoB,UAAAA,KAAK,YAAKpB,IAAI,CAACvE,IAAV;AAF0B,SAAL;AAAA,OAAnB;AANX,MAFF,CADF,CADF,eAiBE,oBAAC,IAAD,qBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC;AAAT,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,qBADF,eAEE;AAAI,MAAA,SAAS,EAAC;AAAd,OAA0BqB,uBAA1B,aAA0BA,uBAA1B,uBAA0BA,uBAAuB,CAAErB,IAAnD,CAFF,CADF,eAKE;AAAI,MAAA,SAAS,EAAC;AAAd,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,4CADF,eAEE;AAAI,MAAA,SAAS,EAAC;AAAd,OAA0BqB,uBAA1B,aAA0BA,uBAA1B,uBAA0BA,uBAAuB,CAAEuE,GAAnD,CAFF,CALF,CADF,eAWE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC;AAAT,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,uBADF,eAEE;AAAI,MAAA,SAAS,EAAC;AAAd,OAA0BvE,uBAA1B,aAA0BA,uBAA1B,gDAA0BA,uBAAuB,CAAEa,UAAnD,0DAA0B,sBAAqClC,IAA/D,CAFF,CADF,eAKE;AAAI,MAAA,SAAS,EAAC;AAAd,oBACE;AAAI,MAAA,SAAS,EAAC;AAAd,iCADF,eAEE;AAAI,MAAA,SAAS,EAAC;AAAd,OAA0BqB,uBAA1B,aAA0BA,uBAA1B,uBAA0BA,uBAAuB,CAAEwE,OAAnD,CAFF,CALF,CAXF,CAjBF,CAJF,CAhDF,eA8FE,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAC,SAAf;AAAyB,MAAA,OAAO,EAAC,SAAjC;AAA2C,MAAA,KAAK,EAAC,QAAjD;AAA0D,MAAA,IAAI,EAAC,IAA/D;AAAoE,MAAA,SAAS,EAAC,WAA9E;AAA0F,MAAA,OAAO,EAAEpB;AAAnG,oBACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,qBAAb;AAAoC,MAAA,SAAS,EAAC;AAA9C,MADF,+BA9FF,eAkGE,oBAAC,KAAD,qBACE,oBAAC,SAAD,qBACE,oBAAC,KAAD;AAAO,MAAA,UAAU,MAAjB;AAAkB,MAAA,OAAO;AAAzB,oBACE,gDACE,6CACE,qDADF,eAEE,wDAFF,eAGE,+CAHF,eAIE,0DAJF,eAKE,yCALF,CADF,CADF,eAUE,mCACG7C,WAAW,CAAC8D,GAAZ,CAAgB,UAACnB,IAAD,EAAOnB,KAAP,EAAiB;AAAA;;AAChC,0BACE;AACE,QAAA,GAAG,EAAEA,KADP;AAEE,QAAA,KAAK,EACHmB,IAAI,CAACzB,QAAL,GAAgByB,IAAI,CAACxB,eAArB,GACI;AACE+C,UAAAA,SAAS,EAAE;AADb,SADJ,GAII;AAPR,sBAUE;AAAI,QAAA,KAAK,EAAE;AAAEC,UAAAA,KAAK,EAAE;AAAT;AAAX,sBACE,oBAAC,MAAD;AACE,QAAA,KAAK,EAAE;AACL9D,UAAAA,KAAK,EAAEsC,IADF;AAELoB,UAAAA,KAAK,EAAEpB,IAAF,aAAEA,IAAF,wCAAEA,IAAI,CAAEhB,OAAR,kDAAE,cAAevD;AAFjB,SADT;AAKE,QAAA,QAAQ,EAAE,kBAAAgG,KAAK;AAAA,iBAAI5B,iBAAiB,CAAC4B,KAAD,EAAQ5C,KAAR,CAArB;AAAA,SALjB;AAME,QAAA,gBAAgB,EAAExD,QAAQ,CAACqG,IAN7B;AAOE,QAAA,OAAO,EAAEtE,QAAQ,CAAC+D,GAAT,CAAa,UAAAnB,IAAI;AAAA;;AAAA,iBAAK;AAC7BtC,YAAAA,KAAK,EAAEsC,IADsB;AAE7BoB,YAAAA,KAAK,YAAKpB,IAAL,aAAKA,IAAL,6CAAKA,IAAI,CAAE2B,YAAX,uDAAK,mBAAoBlG,IAAzB,cAAiCuE,IAAjC,aAAiCA,IAAjC,uBAAiCA,IAAI,CAAEvE,IAAvC,cAA+CuE,IAA/C,aAA+CA,IAA/C,uBAA+CA,IAAI,CAAE4B,MAArD;AAFwB,WAAL;AAAA,SAAjB;AAPX,QADF,CAVF,eAwBE,gCAAK5B,IAAL,aAAKA,IAAL,yCAAKA,IAAI,CAAEhB,OAAX,mDAAK,eAAe6C,IAApB,CAxBF,eAyBE,gCAAK7B,IAAL,aAAKA,IAAL,yCAAKA,IAAI,CAAEhB,OAAX,mDAAK,eAAe4C,MAApB,CAzBF,eA0BE;AAAI,QAAA,KAAK,EAAE;AAAEJ,UAAAA,KAAK,EAAE;AAAT;AAAX,sBACE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,GAAG,EAAE,CAFP;AAGE,QAAA,IAAI,EAAC,MAHP;AAIE,QAAA,EAAE,EAAC,MAJL;AAKE,QAAA,QAAQ,EAAE,kBAAAC,KAAK;AAAA,iBAAI7C,gBAAgB,CAAC6C,KAAD,EAAQ5C,KAAR,CAApB;AAAA,SALjB;AAME,QAAA,MAAM,EAAEgC,UANV;AAOE,QAAA,KAAK,EAAEb,IAAI,CAACzB;AAPd,QADF,EAUGyB,IAAI,CAACzB,QAAL,GAAgByB,IAAI,CAACxB,eAArB,iBACC,oBAAC,YAAD;AAAc,QAAA,SAAS,EAAC;AAAxB,yGAXJ,CA1BF,eAwCE;AAAI,QAAA,KAAK,EAAE;AAAEgD,UAAAA,KAAK,EAAE;AAAT;AAAX,sBAEI,oBAAC,WAAD;AACE,QAAA,IAAI,EAAE5I,YADR;AAEE,QAAA,QAAQ,EAAE,kBAAA6I,KAAK;AAAA,iBAAIrB,aAAa,CAACqB,KAAD,EAAQ5C,KAAR,CAAjB;AAAA,SAFjB;AAGE,QAAA,KAAK,EACH,OAAOxB,WAAW,CAACwB,KAAD,CAAX,CAAmBa,KAA1B,KAAoC,QAApC,GACI,IAAIoC,IAAI,CAACC,YAAT,CAAsB,OAAtB,EAA+B;AAAEC,UAAAA,KAAK,EAAE,UAAT;AAAqBC,UAAAA,QAAQ,EAAE;AAA/B,SAA/B,EAAuEC,MAAvE,CACE7E,WAAW,CAACwB,KAAD,CAAX,CAAmBa,KADrB,CADJ,GAIIrC,WAAW,CAACwB,KAAD,CAAX,CAAmBa,KAR3B;AAUE,QAAA,MAAM,EAAE,gBAACyC,GAAD,EAAMC,KAAN;AAAA,8BAAgB,oBAAC,MAAD;AAAQ,YAAA,QAAQ,EAAED;AAAlB,aAA2BC,KAA3B,EAAhB;AAAA;AAVV,QAFJ,CAxCF,eAyDE;AAAI,QAAA,KAAK,EAAE;AAAEZ,UAAAA,KAAK,EAAE;AAAT;AAAX,sBACE,oBAAC,OAAD;AACE,QAAA,KAAK,EAAC,QADR;AAEE,QAAA,OAAO,EAAC,SAFV;AAGE,QAAA,KAAK,EAAC,QAHR;AAIE,QAAA,IAAI,EAAC,IAJP;AAKE,QAAA,SAAS,EAAC,MALZ;AAME,QAAA,OAAO,EAAE;AAAA,iBAAM7B,eAAe,CAACd,KAAD,CAArB;AAAA;AANX,sBAQE,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC;AAAZ,QARF,CADF,CAzDF,CADF;AAwED,KAzEA,CADH,CAVF,CADF,CADF,CAlGF,eA6LE,oBAAC,KAAD,qBACE,oBAAC,WAAD,qBACE,oBAAC,UAAD,+BADF,CADF,eAIE,oBAAC,SAAD,qBACE,oBAAC,IAAD,qBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,GAAT;AAAa,MAAA,EAAE,EAAC;AAAhB,oBACE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,oBADF,eAEE,oBAAC,SAAD;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,EAAE,EAAC,MAHL;AAIE,MAAA,WAAW,EAAC,EAJd;AAKE,MAAA,YAAY,EAAC,SALf;AAME,MAAA,QAAQ,EAAE+B,YANZ;AAOE,MAAA,MAAM,EAAEC,UAPV;AAQE,MAAA,KAAK,EAAEjH,MAAM,CAAC4D;AARhB,MAFF,CADF,CADF,eAgBE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,GAAT;AAAa,MAAA,EAAE,EAAC,GAAhB;AAAoB,MAAA,SAAS,EAAC;AAA9B,oBACE,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAC;AAAjB,oBACE,gDACE,6CACE;AAAI,MAAA,SAAS,EAAC;AAAd,oBACE,wEADF,CADF,eAIE;AAAI,MAAA,SAAS,EAAC;AAAd,OAAuBH,WAAW,CAACvC,MAAZ,CAAmB,UAAC2E,GAAD,EAAM1G,OAAN;AAAA,aAAkB0G,GAAG,GAAGQ,MAAM,CAAClH,OAAO,CAACwF,QAAT,CAA9B;AAAA,KAAnB,EAAqE,CAArE,KAA2E,EAAlG,CAJF,CADF,eAOE,6CACE;AAAI,MAAA,SAAS,EAAC;AAAd,oBACE,0DADF,CADF,eAIE;AAAI,MAAA,SAAS,EAAC;AAAd,OACGlB,WAAW,CACTvC,MADF,CACS,UAAC2E,GAAD,EAAM1G,OAAN;AAAA,aAAkB0G,GAAG,GAAG1G,OAAO,CAAC2G,KAAR,GAAgB3G,OAAO,CAACwF,QAAhD;AAAA,KADT,EACmE,CADnE,EAEE8D,cAFF,CAEiB,OAFjB,EAE0B;AACvBL,MAAAA,KAAK,EAAE,UADgB;AAEvBC,MAAAA,QAAQ,EAAE;AAFa,KAF1B,CADH,CAJF,CAPF,CADF,CADF,CAhBF,CADF,CAJF,CA7LF,eA8OE,oBAAC,UAAD;AAAY,MAAA,SAAS,EAAC;AAAtB,oBACE,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC,QAAd;AAAuB,MAAA,IAAI,EAAC,IAA5B;AAAiC,MAAA,KAAK,EAAC,SAAvC;AAAiD,MAAA,QAAQ,EAAE/F,YAAY,CAACoG;AAAxE,oBACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC;AAAZ,MADF,OAC6BpG,YAAY,CAACoG,OAAb,GAAuB,YAAvB,GAAsC,SADnE,CADF,eAIE,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC,OAAd;AAAsB,MAAA,IAAI,EAAC,IAA3B;AAAgC,MAAA,KAAK,EAAC,QAAtC;AAA+C,MAAA,OAAO,EAAErB,WAAxD;AAAqE,MAAA,SAAS,EAAC;AAA/E,oBACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC;AAAZ,MADF,gCAJF,CA9OF,CAfD;AAAA,GADH,CADF,CADF;AA6QD,CA3XD;;AA6XA,eAAenF,aAAf","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CTextarea,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CSelect,\n  CCardTitle\n} from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { creatingWarehouseImport } from '../Import/warehouse-import.api';\nimport { currencyMask } from '../../../components/currency-input/currency-input';\nimport MaskedInput from 'react-text-mask';\nimport Toaster from '../../../components/notifications/toaster/Toaster';\nimport { current } from '@reduxjs/toolkit';\nimport { useHistory } from 'react-router-dom';\nimport { fetching } from '../Import/warehouse-import.reducer';\nimport Select from 'react-select';\nimport { FormFeedback, Table } from 'reactstrap';\nimport { globalizedWarehouseSelectors } from '../Warehouse/warehouse.reducer';\nimport { getWarehouse } from '../Warehouse/warehouse.api';\nimport { globalizedProductSelectors } from '../../product/ProductList/product.reducer';\nimport { getProduct } from '../../product/ProductList/product.api';\nimport { WarehouseImportType } from './contants';\nimport { getProductInstore } from '../Product/product-warehouse.api';\nconst validationSchema = function(values) {\n  return Yup.object().shape({\n    store: Yup.object().required('Kho không để trống')\n  });\n};\n\nconst validate = getValidationSchema => {\n  return values => {\n    const validationSchema = getValidationSchema(values);\n    try {\n      validationSchema.validateSync(values, { abortEarly: false });\n      return {};\n    } catch (error) {\n      return getErrorsFromValidationError(error);\n    }\n  };\n};\n\nexport const mappingStatus = {\n  ACTIVE: 'ĐANG HOẠT ĐỘNG',\n  INACTIVE: 'KHÔNG HOẠT ĐỘNG',\n  DELETED: 'ĐÃ XÓA'\n};\n\nconst getErrorsFromValidationError = validationError => {\n  const FIRST_ERROR = 0;\n  return validationError.inner.reduce((errors, error) => {\n    return {\n      ...errors,\n      [error.path]: error.errors[FIRST_ERROR]\n    };\n  }, {});\n};\n\nconst findFirstError = (formName, hasError) => {\n  const form = document.forms[formName];\n  for (let i = 0; i < form.length; i++) {\n    if (hasError(form[i].name)) {\n      form[i].focus();\n      break;\n    }\n  }\n};\n\nconst validateForm = errors => {\n  findFirstError('simpleForm', fieldName => {\n    return Boolean(errors[fieldName]);\n  });\n};\n\nconst CreateReceipt = () => {\n  const formikRef = useRef();\n  const { initialState } = useSelector(state => state.warehouseImport);\n  const { initialState: customerInitialState } = useSelector(state => state.customer);\n  const { account } = useSelector(state => state.authentication);\n\n  const { selectAll: selectAllWarehouse } = globalizedWarehouseSelectors;\n  const { selectAll: selectAllProduct } = globalizedProductSelectors;\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [selectedWarehouse, setSelectedWarehouse] = useState(null);\n  const [selectedImportWarehouse, setSelectedImportWarehouse] = useState(null);\n  const [isSelectedWarehouse, setIsSelectedWarehouse] = useState(true);\n\n  const warehouses = useSelector(selectAllWarehouse);\n  const warehousesImport = useSelector(selectAllWarehouse);\n  const products = useSelector(selectAllProduct);\n\n  const [productList, setProductList] = useState([]);\n\n  const initialValues = {\n    store: '',\n    note: ''\n  };\n  const onSelectWarehouse = value => {\n    setSelectedWarehouse(value);\n    setIsSelectedWarehouse(true);\n  };\n\n  useEffect(() => {\n    dispatch(getWarehouse({ department: JSON.stringify([account.department?.id || '']) }));\n    dispatch(getProduct());\n  }, []);\n\n  const onSubmit = (values, { setSubmitting, setErrors, setStatus, resetForm }) => {\n    let isValidProduct = true;\n    productList.forEach(element => {\n      if (element.quantity > element.quantityInStore) {\n        isValidProduct = false;\n      }\n    });\n    if (!isValidProduct) return;\n    values.storeInputDetails = productList;\n    values.type = WarehouseImportType.EXPORT;\n    dispatch(fetching());\n    dispatch(creatingWarehouseImport(values));\n    resetForm();\n  };\n\n  const onChangeQuantity = ({ target }, index) => {\n    const quantity = target.value;\n    const copyArr = [...productList];\n    if (selectedWarehouse && copyArr[index].product) {\n      dispatch(\n        getProductInstore({\n          storeId: selectedWarehouse.id,\n          productId: copyArr[index].product.id\n        })\n      ).then(numberOfQuantityInStore => {\n        if (numberOfQuantityInStore && Array.isArray(numberOfQuantityInStore.payload) && numberOfQuantityInStore.payload.length > 0) {\n          copyArr[index].quantity = quantity;\n          copyArr[index].quantityInStore = numberOfQuantityInStore.payload[0].quantity;\n          setProductList(copyArr);\n        }\n      });\n    }\n  };\n  useEffect(() => {\n    if (formikRef.current) {\n      formikRef.current.setFieldValue(\n        'totalMoney',\n        productList.reduce((sum, current) => sum + current.price * current.quantity, 0)\n      );\n    }\n  }, [productList]);\n  const onRemoveProduct = index => {\n    const copyArr = [...productList];\n    copyArr.splice(index, 1);\n    setProductList(copyArr);\n  };\n\n  const onSelectedProduct = ({ value }, index) => {\n    const arr = productList.filter(item => item.product.id === value.id);\n    if (arr.length === 0) {\n      const copyArr = [...productList];\n      copyArr[index].product = value;\n      copyArr[index].price = Number(value.price);\n      copyArr[index].quantity = 1;\n      setProductList(copyArr);\n    }\n  };\n\n  const onAddProduct = () => {\n    const data = { product: {}, quantity: 1, quantityInStore: 1 };\n    setProductList([...productList, data]);\n  };\n\n  const onChangePrice = ({ target }, index) => {\n    const copyArr = JSON.parse(JSON.stringify(productList));\n    copyArr[index].price = Number(target.value.replace(/\\D/g, ''));\n    setProductList(copyArr);\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  return (\n    <CCard>\n      <Formik initialValues={initialValues} validate={validate(validationSchema)} onSubmit={onSubmit} innerRef={formikRef}>\n        {({\n          values,\n          errors,\n          touched,\n          status,\n          dirty,\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          setFieldValue,\n          isSubmitting,\n          isValid,\n          handleReset,\n          setTouched\n        }) => (\n          <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n            <CCard className=\"card-accent-info\">\n              <CCardHeader>\n                <CCardTitle>Chọn kho xuất</CCardTitle>\n              </CCardHeader>\n              <CCardBody>\n                <CRow className=\"mb-3\">\n                  <CCol sm={4}>\n                    <CLabel htmlFor=\"lastName\">Chọn Kho</CLabel>\n                    <Select\n                      onChange={item => {\n                        setFieldValue('store', item.value);\n                        onSelectWarehouse(item.value);\n                      }}\n                      placeholder=\"\"\n                      options={warehouses.map(item => ({\n                        value: item,\n                        label: `${item.name}`\n                      }))}\n                    />\n                    {!isSelectedWarehouse && <FormFeedback className=\"d-block\">Bạn phải chọn kho hàng</FormFeedback>}\n                  </CCol>\n                </CRow>\n                <CRow>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Tên kho:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Số điện thoại:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.tel}</dd>\n                    </dl>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Chi nhánh:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.department?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Địa chỉ:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.address}</dd>\n                    </dl>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n\n            <CCard className=\"card-accent-info\">\n              <CCardHeader>\n                <CCardTitle>Chọn kho nhập</CCardTitle>\n              </CCardHeader>\n              <CCardBody>\n                <CRow className=\"mb-3\">\n                  <CCol sm={4}>\n                    <CLabel htmlFor=\"lastName\">Chọn Kho</CLabel>\n                    <Select\n                      onChange={item => {\n                        setFieldValue('storeTransfer', item.value);\n                        setSelectedImportWarehouse(item.value);\n                      }}\n                      placeholder=\"\"\n                      options={warehouses.map(item => ({\n                        value: item,\n                        label: `${item.name}`\n                      }))}\n                    />\n                  </CCol>\n                </CRow>\n                <CRow>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Tên kho:</dt>\n                      <dd className=\"col-sm-9\">{selectedImportWarehouse?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Số điện thoại:</dt>\n                      <dd className=\"col-sm-9\">{selectedImportWarehouse?.tel}</dd>\n                    </dl>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Chi nhánh:</dt>\n                      <dd className=\"col-sm-9\">{selectedImportWarehouse?.department?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Địa chỉ:</dt>\n                      <dd className=\"col-sm-9\">{selectedImportWarehouse?.address}</dd>\n                    </dl>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n\n            <CButton color=\"primary\" variant=\"outline\" shape=\"square\" size=\"sm\" className=\"ml-3 mb-3\" onClick={onAddProduct}>\n              <CIcon name={'cilArrowCircleRight'} className=\"mr-2\" />\n              Thêm sản phẩm\n            </CButton>\n            <CCard>\n              <CCardBody>\n                <Table responsive striped>\n                  <thead>\n                    <tr>\n                      <th>Sản phẩm</th>\n                      <th>Đơn vị</th>\n                      <th>Dung tích</th>\n                      <th>Số lượng</th>\n                      <th>Giá</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {productList.map((item, index) => {\n                      return (\n                        <tr\n                          key={index}\n                          style={\n                            item.quantity > item.quantityInStore\n                              ? {\n                                  boxShadow: '0px 0px 6px 5px red'\n                                }\n                              : {}\n                          }\n                        >\n                          <td style={{ width: 500 }}>\n                            <Select\n                              value={{\n                                value: item,\n                                label: item?.product?.name\n                              }}\n                              onChange={event => onSelectedProduct(event, index)}\n                              menuPortalTarget={document.body}\n                              options={products.map(item => ({\n                                value: item,\n                                label: `${item?.productBrand?.name}-${item?.name}-${item?.volume}`\n                              }))}\n                            />\n                          </td>\n                          <td>{item?.product?.unit}</td>\n                          <td>{item?.product?.volume}</td>\n                          <td style={{ width: 200 }}>\n                            <CInput\n                              type=\"number\"\n                              min={1}\n                              name=\"code\"\n                              id=\"code\"\n                              onChange={event => onChangeQuantity(event, index)}\n                              onBlur={handleBlur}\n                              value={item.quantity}\n                            />\n                            {item.quantity > item.quantityInStore && (\n                              <FormFeedback className=\"d-block\">Số lượng cần lấy lớn hơn số lượng trong kho</FormFeedback>\n                            )}\n                          </td>\n                          <td style={{ width: 100 }}>\n                            {\n                              <MaskedInput\n                                mask={currencyMask}\n                                onChange={event => onChangePrice(event, index)}\n                                value={\n                                  typeof productList[index].price !== 'number'\n                                    ? new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(\n                                        productList[index].price\n                                      )\n                                    : productList[index].price\n                                }\n                                render={(ref, props) => <CInput innerRef={ref} {...props} />}\n                              />\n                            }\n                          </td>\n\n                          <td style={{ width: 100 }}>\n                            <CButton\n                              color=\"danger\"\n                              variant=\"outline\"\n                              shape=\"square\"\n                              size=\"sm\"\n                              className=\"mr-3\"\n                              onClick={() => onRemoveProduct(index)}\n                            >\n                              <CIcon name=\"cilXCircle\" />\n                            </CButton>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </Table>\n              </CCardBody>\n            </CCard>\n            <CCard>\n              <CCardHeader>\n                <CCardTitle>Thông tin khác</CCardTitle>\n              </CCardHeader>\n              <CCardBody>\n                <CRow>\n                  <CCol lg=\"4\" sm=\"5\">\n                    <CFormGroup>\n                      <CLabel htmlFor=\"userName\">Ghi chú</CLabel>\n                      <CTextarea\n                        type=\"text\"\n                        name=\"note\"\n                        id=\"note\"\n                        placeholder=\"\"\n                        autoComplete=\"address\"\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.note}\n                      />\n                    </CFormGroup>\n                  </CCol>\n                  <CCol lg=\"4\" sm=\"5\" className=\"ml-auto\">\n                    <Table className=\"table-clear\">\n                      <tbody>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Tổng số lượng</strong>\n                          </td>\n                          <td className=\"right\">{productList.reduce((sum, current) => sum + Number(current.quantity), 0) || ''}</td>\n                        </tr>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Tổng tiền</strong>\n                          </td>\n                          <td className=\"right\">\n                            {productList\n                              .reduce((sum, current) => sum + current.price * current.quantity, 0)\n                              .toLocaleString('it-IT', {\n                                style: 'currency',\n                                currency: 'VND'\n                              })}\n                          </td>\n                        </tr>\n                      </tbody>\n                    </Table>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n            <CFormGroup className=\"d-flex justify-content-center\">\n              <CButton type=\"submit\" size=\"lg\" color=\"primary\" disabled={initialState.loading}>\n                <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Tạo mới'}\n              </CButton>\n              <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={handleReset} className=\"ml-5\">\n                <CIcon name=\"cil-ban\" /> Xóa nhập liệu\n              </CButton>\n            </CFormGroup>\n          </CForm>\n        )}\n      </Formik>\n    </CCard>\n  );\n};\n\nexport default CreateReceipt;\n"]}]}