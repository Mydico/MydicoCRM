{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Export/create-warehouse-export.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Export/create-warehouse-export.js","mtime":1624683805614},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5KG9iaikgeyBpZiAob2JqID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBkZXN0cnVjdHVyZSB1bmRlZmluZWQiKTsgfQoKaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IENCdXR0b24sIENDYXJkLCBDQ2FyZEhlYWRlciwgQ0NhcmRCb2R5LCBDQ29sLCBDRm9ybSwgQ1RleHRhcmVhLCBDRm9ybUdyb3VwLCBDTGFiZWwsIENJbnB1dCwgQ1JvdywgQ0NhcmRUaXRsZSB9IGZyb20gJ0Bjb3JldWkvcmVhY3QvbGliJzsKaW1wb3J0IENJY29uIGZyb20gJ0Bjb3JldWkvaWNvbnMtcmVhY3QvbGliL0NJY29uJzsKaW1wb3J0IHsgRm9ybWlrIH0gZnJvbSAnZm9ybWlrJzsKaW1wb3J0ICogYXMgWXVwIGZyb20gJ3l1cCc7CmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgY3JlYXRpbmdXYXJlaG91c2VFeHBvcnQsIGNyZWF0aW5nV2FyZWhvdXNlSW1wb3J0IH0gZnJvbSAnLi4vSW1wb3J0L3dhcmVob3VzZS1pbXBvcnQuYXBpJzsKaW1wb3J0IHsgY3VycmVuY3lNYXNrIH0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9jdXJyZW5jeS1pbnB1dC9jdXJyZW5jeS1pbnB1dCc7CmltcG9ydCBNYXNrZWRJbnB1dCBmcm9tICdyZWFjdC10ZXh0LW1hc2snOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyB1c2VIaXN0b3J5IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IGZldGNoaW5nIH0gZnJvbSAnLi4vSW1wb3J0L3dhcmVob3VzZS1pbXBvcnQucmVkdWNlcic7CmltcG9ydCBTZWxlY3QgZnJvbSAncmVhY3Qtc2VsZWN0JzsKaW1wb3J0IHsgRm9ybUZlZWRiYWNrLCBUYWJsZSB9IGZyb20gJ3JlYWN0c3RyYXAnOwppbXBvcnQgeyBnbG9iYWxpemVkV2FyZWhvdXNlU2VsZWN0b3JzIH0gZnJvbSAnLi4vV2FyZWhvdXNlL3dhcmVob3VzZS5yZWR1Y2VyJzsKaW1wb3J0IHsgZ2V0QWxsV2FyZWhvdXNlLCBnZXRXYXJlaG91c2UgfSBmcm9tICcuLi9XYXJlaG91c2Uvd2FyZWhvdXNlLmFwaSc7CmltcG9ydCB7IHVzZXJTYWZlU2VsZWN0b3IgfSBmcm9tICcuLi8uLi9sb2dpbi9hdXRoZW50aWNhdGUucmVkdWNlci5qcyc7CmltcG9ydCB7IGZpbHRlclByb2R1Y3QsIGdldFByb2R1Y3QgfSBmcm9tICcuLi8uLi9wcm9kdWN0L1Byb2R1Y3RMaXN0L3Byb2R1Y3QuYXBpJzsKaW1wb3J0IHsgV2FyZWhvdXNlSW1wb3J0VHlwZSB9IGZyb20gJy4vY29udGFudHMnOwppbXBvcnQgeyBnZXRQcm9kdWN0SW5zdG9yZSwgZ2V0UHJvZHVjdFdhcmVob3VzZSB9IGZyb20gJy4uL1Byb2R1Y3QvcHJvZHVjdC13YXJlaG91c2UuYXBpJzsKaW1wb3J0IHsgY29uZmlybUFsZXJ0IH0gZnJvbSAncmVhY3QtY29uZmlybS1hbGVydCc7IC8vIEltcG9ydAoKaW1wb3J0ICdyZWFjdC1jb25maXJtLWFsZXJ0L3NyYy9yZWFjdC1jb25maXJtLWFsZXJ0LmNzcyc7IC8vIEltcG9ydCBjc3MKCnZhciB2YWxpZGF0aW9uU2NoZW1hID0gZnVuY3Rpb24gdmFsaWRhdGlvblNjaGVtYSgpIHsKICByZXR1cm4gWXVwLm9iamVjdCgpLnNoYXBlKHsKICAgIHN0b3JlOiBZdXAub2JqZWN0KCkucmVxdWlyZWQoJ0tobyBraMO0bmcgxJHhu4MgdHLhu5FuZycpCiAgfSk7Cn07CgppbXBvcnQgeyB2YWxpZGF0ZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC91dGlscy9ub3JtYWxpemUnOwppbXBvcnQgeyBibG9ja0ludmFsaWRDaGFyIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL3V0aWxzL2hlbHBlcic7CmV4cG9ydCB2YXIgbWFwcGluZ1N0YXR1cyA9IHsKICBBQ1RJVkU6ICfEkEFORyBIT+G6oFQgxJDhu5hORycsCiAgRElTQUJMRUQ6ICdLSMOUTkcgSE/huqBUIMSQ4buYTkcnLAogIERFTEVURUQ6ICfEkMODIFjDk0EnCn07CnZhciBzZWxlY3RBbGxXYXJlaG91c2UgPSBnbG9iYWxpemVkV2FyZWhvdXNlU2VsZWN0b3JzLnNlbGVjdEFsbDsKCnZhciBDcmVhdGVSZWNlaXB0ID0gZnVuY3Rpb24gQ3JlYXRlUmVjZWlwdCgpIHsKICB2YXIgZm9ybWlrUmVmID0gdXNlUmVmKCk7CgogIHZhciBfdXNlU2VsZWN0b3IgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS53YXJlaG91c2VJbXBvcnQ7CiAgfSksCiAgICAgIGluaXRpYWxTdGF0ZSA9IF91c2VTZWxlY3Rvci5pbml0aWFsU3RhdGU7CgogIHZhciBfdXNlU2VsZWN0b3IyID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUud2FyZWhvdXNlOwogIH0pLAogICAgICBpbml0aWFsU3RhdGVXYXJlaG91c2UgPSBfdXNlU2VsZWN0b3IyLmluaXRpYWxTdGF0ZTsKCiAgdmFyIF91c2VTZWxlY3RvcjMgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5jdXN0b21lcjsKICB9KTsKCiAgX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShfdXNlU2VsZWN0b3IzKTsKCiAgdmFyIF91c2VTZWxlY3RvcjQgPSB1c2VTZWxlY3Rvcih1c2VyU2FmZVNlbGVjdG9yKSwKICAgICAgYWNjb3VudCA9IF91c2VTZWxlY3RvcjQuYWNjb3VudDsKCiAgdmFyIGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTsKICB2YXIgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKTsKCiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKG51bGwpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgc2VsZWN0ZWRXYXJlaG91c2UgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRTZWxlY3RlZFdhcmVob3VzZSA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoW10pLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGltcG9ydFdhcmVob3VzZXMgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRJbXBvcnRXYXJlaG91c2VzID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTUgPSB1c2VTdGF0ZShudWxsKSwKICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLAogICAgICBzZWxlY3RlZEltcG9ydFdhcmVob3VzZSA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTcgPSB1c2VTdGF0ZSh0cnVlKSwKICAgICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLAogICAgICBpc1NlbGVjdGVkV2FyZWhvdXNlID0gX3VzZVN0YXRlOFswXSwKICAgICAgc2V0SXNTZWxlY3RlZFdhcmVob3VzZSA9IF91c2VTdGF0ZThbMV07CgogIHZhciBfdXNlU3RhdGU5ID0gdXNlU3RhdGUoW10pLAogICAgICBfdXNlU3RhdGUxMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTksIDIpLAogICAgICBwcm9kdWN0cyA9IF91c2VTdGF0ZTEwWzBdLAogICAgICBzZXRQcm9kdWN0cyA9IF91c2VTdGF0ZTEwWzFdOwoKICB2YXIgd2FyZWhvdXNlcyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbFdhcmVob3VzZSk7CgogIHZhciBfdXNlU3RhdGUxMSA9IHVzZVN0YXRlKFtdKSwKICAgICAgX3VzZVN0YXRlMTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxMSwgMiksCiAgICAgIHByb2R1Y3RMaXN0ID0gX3VzZVN0YXRlMTJbMF0sCiAgICAgIHNldFByb2R1Y3RMaXN0ID0gX3VzZVN0YXRlMTJbMV07CgogIHZhciBpbml0aWFsVmFsdWVzID0gewogICAgc3RvcmU6ICcnLAogICAgbm90ZTogJycKICB9OwoKICB2YXIgb25TZWxlY3RXYXJlaG91c2UgPSBmdW5jdGlvbiBvblNlbGVjdFdhcmVob3VzZSh2YWx1ZSkgewogICAgc2V0U2VsZWN0ZWRXYXJlaG91c2UodmFsdWUpOwogICAgc2V0SXNTZWxlY3RlZFdhcmVob3VzZSh0cnVlKTsKICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgdmFyIF9hY2NvdW50JGRlcGFydG1lbnQ7CgogICAgZGlzcGF0Y2goZ2V0V2FyZWhvdXNlKHsKICAgICAgZGVwYXJ0bWVudDogSlNPTi5zdHJpbmdpZnkoWygoX2FjY291bnQkZGVwYXJ0bWVudCA9IGFjY291bnQuZGVwYXJ0bWVudCkgPT09IG51bGwgfHwgX2FjY291bnQkZGVwYXJ0bWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FjY291bnQkZGVwYXJ0bWVudC5pZCkgfHwgJyddKSwKICAgICAgZGVwZW5kZW5jeTogdHJ1ZQogICAgfSkpOwogICAgZGlzcGF0Y2goZ2V0QWxsV2FyZWhvdXNlKHsKICAgICAgcGFnZTogMCwKICAgICAgc2l6ZTogMjAsCiAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJywKICAgICAgZGVwZW5kZW5jeTogdHJ1ZQogICAgfSkpOwogIH0sIFtdKTsKCiAgdmFyIG9uU3VibWl0ID0gZnVuY3Rpb24gb25TdWJtaXQodmFsdWVzLCBfcmVmKSB7CiAgICB2YXIgcmVzZXRGb3JtID0gX3JlZi5yZXNldEZvcm07CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2FjY291bnQkZGVwYXJ0bWVudDI7CgogICAgICB2YXIgaXNWYWxpZFByb2R1Y3QgPSB0cnVlOwogICAgICBwcm9kdWN0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgaWYgKGVsZW1lbnQucXVhbnRpdHkgPiBlbGVtZW50LnF1YW50aXR5SW5TdG9yZSkgewogICAgICAgICAgaXNWYWxpZFByb2R1Y3QgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoIWlzVmFsaWRQcm9kdWN0KSByZXR1cm47CiAgICAgIHZhbHVlcy5zdG9yZUlucHV0RGV0YWlscyA9IHByb2R1Y3RMaXN0OwogICAgICB2YWx1ZXMudHlwZSA9IFdhcmVob3VzZUltcG9ydFR5cGUuRVhQT1JUOwogICAgICB2YWx1ZXMuZGVwYXJ0bWVudCA9IHsKICAgICAgICBpZDogKChfYWNjb3VudCRkZXBhcnRtZW50MiA9IGFjY291bnQuZGVwYXJ0bWVudCkgPT09IG51bGwgfHwgX2FjY291bnQkZGVwYXJ0bWVudDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2NvdW50JGRlcGFydG1lbnQyLmlkKSB8fCBudWxsCiAgICAgIH07CiAgICAgIGRpc3BhdGNoKGZldGNoaW5nKCkpOwogICAgICBkaXNwYXRjaChjcmVhdGluZ1dhcmVob3VzZUV4cG9ydCh2YWx1ZXMpKTsKICAgIH07CiAgfTsKCiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChzZWxlY3RlZFdhcmVob3VzZSkgewogICAgICB2YXIgZm91bmVkSW5kZXggPSBpbml0aWFsU3RhdGVXYXJlaG91c2Uud2FyZWhvdXNlcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gc2VsZWN0ZWRXYXJlaG91c2UuaWQ7CiAgICAgIH0pOwoKICAgICAgdmFyIGNvcHlBcnIgPSBfdG9Db25zdW1hYmxlQXJyYXkoaW5pdGlhbFN0YXRlV2FyZWhvdXNlLndhcmVob3VzZXMpOwoKICAgICAgY29weUFyci5zcGxpY2UoZm91bmVkSW5kZXgsIDEpOwogICAgICBzZXRJbXBvcnRXYXJlaG91c2VzKGNvcHlBcnIpOwogICAgICBkaXNwYXRjaChnZXRQcm9kdWN0V2FyZWhvdXNlKHsKICAgICAgICBzdG9yZTogc2VsZWN0ZWRXYXJlaG91c2UuaWQKICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcCAmJiByZXNwLnBheWxvYWQgJiYgQXJyYXkuaXNBcnJheShyZXNwLnBheWxvYWQuZGF0YSkgJiYgcmVzcC5wYXlsb2FkLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgc2V0UHJvZHVjdHMocmVzcC5wYXlsb2FkLmRhdGEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgW3NlbGVjdGVkV2FyZWhvdXNlXSk7IC8vIGRpc3BhdGNoKAogIC8vICAgZ2V0UHJvZHVjdEluc3RvcmUoewogIC8vICAgICBzdG9yZUlkOiBzZWxlY3RlZFdhcmVob3VzZS5pZCwKICAvLyAgICAgcHJvZHVjdElkOiBjb3B5QXJyW2luZGV4XS5wcm9kdWN0LmlkCiAgLy8gICB9KQogIC8vICkudGhlbihudW1iZXJPZlF1YW50aXR5SW5TdG9yZSA9PiB7CiAgLy8gICBpZiAobnVtYmVyT2ZRdWFudGl0eUluU3RvcmUgJiYgQXJyYXkuaXNBcnJheShudW1iZXJPZlF1YW50aXR5SW5TdG9yZS5wYXlsb2FkKSAmJiBudW1iZXJPZlF1YW50aXR5SW5TdG9yZS5wYXlsb2FkLmxlbmd0aCA+IDApIHsKICAvLyAgICAgY29weUFycltpbmRleF0ucXVhbnRpdHkgPSBOdW1iZXIocXVhbnRpdHkpOwogIC8vICAgICBjb3B5QXJyW2luZGV4XS5xdWFudGl0eUluU3RvcmUgPSBudW1iZXJPZlF1YW50aXR5SW5TdG9yZS5wYXlsb2FkWzBdLnF1YW50aXR5OwogIC8vICAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICAvLyAgIH0KICAvLyB9KTsKCiAgdmFyIGRlYm91bmNlZFNlYXJjaFByb2R1Y3RJblN0b3JlID0gXy5kZWJvdW5jZShmdW5jdGlvbiAoY29weUFyciwgaW5kZXgpIHsKICAgIGRpc3BhdGNoKGdldFByb2R1Y3RJbnN0b3JlKHsKICAgICAgc3RvcmVJZDogc2VsZWN0ZWRXYXJlaG91c2UuaWQsCiAgICAgIHByb2R1Y3RJZDogY29weUFycltpbmRleF0ucHJvZHVjdC5pZAogICAgfSkpLnRoZW4oZnVuY3Rpb24gKG51bWJlck9mUXVhbnRpdHlJblN0b3JlKSB7CiAgICAgIGlmIChudW1iZXJPZlF1YW50aXR5SW5TdG9yZSAmJiBBcnJheS5pc0FycmF5KG51bWJlck9mUXVhbnRpdHlJblN0b3JlLnBheWxvYWQpICYmIG51bWJlck9mUXVhbnRpdHlJblN0b3JlLnBheWxvYWQubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBfbnVtYmVyT2ZRdWFudGl0eUluU3Q7CgogICAgICAgIGNvcHlBcnJbaW5kZXhdLnF1YW50aXR5SW5TdG9yZSA9IChudW1iZXJPZlF1YW50aXR5SW5TdG9yZSA9PT0gbnVsbCB8fCBudW1iZXJPZlF1YW50aXR5SW5TdG9yZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9udW1iZXJPZlF1YW50aXR5SW5TdCA9IG51bWJlck9mUXVhbnRpdHlJblN0b3JlLnBheWxvYWRbMF0pID09PSBudWxsIHx8IF9udW1iZXJPZlF1YW50aXR5SW5TdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX251bWJlck9mUXVhbnRpdHlJblN0LnF1YW50aXR5KSB8fCAwOwogICAgICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogICAgICB9CiAgICB9KTsKICB9LCAzMDApOwoKICB2YXIgb25TZWFyY2hQcm9kdWN0SW5zdG9yZSA9IGZ1bmN0aW9uIG9uU2VhcmNoUHJvZHVjdEluc3RvcmUoY29weUFyciwgaW5kZXgpIHsKICAgIGRlYm91bmNlZFNlYXJjaFByb2R1Y3RJblN0b3JlKGNvcHlBcnIsIGluZGV4KTsKICB9OwoKICB2YXIgb25DaGFuZ2VRdWFudGl0eSA9IGZ1bmN0aW9uIG9uQ2hhbmdlUXVhbnRpdHkoX3JlZjIsIGluZGV4KSB7CiAgICB2YXIgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0OwogICAgdmFyIHF1YW50aXR5ID0gdGFyZ2V0LnZhbHVlOwoKICAgIHZhciBjb3B5QXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KTsKCiAgICBjb3B5QXJyW2luZGV4XS5xdWFudGl0eSA9IE51bWJlcihxdWFudGl0eSk7CgogICAgaWYgKHNlbGVjdGVkV2FyZWhvdXNlICYmIGNvcHlBcnJbaW5kZXhdLnByb2R1Y3QpIHsKICAgICAgc2V0UHJvZHVjdExpc3QoY29weUFycik7CiAgICAgIG9uU2VhcmNoUHJvZHVjdEluc3RvcmUoY29weUFyciwgaW5kZXgpOwogICAgfQogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoZm9ybWlrUmVmLmN1cnJlbnQpIHsKICAgICAgZm9ybWlrUmVmLmN1cnJlbnQuc2V0RmllbGRWYWx1ZSgndG90YWxNb25leScsIHByb2R1Y3RMaXN0LnJlZHVjZShmdW5jdGlvbiAoc3VtLCBjdXJyZW50KSB7CiAgICAgICAgcmV0dXJuIHN1bSArIGN1cnJlbnQucHJpY2UgKiBjdXJyZW50LnF1YW50aXR5OwogICAgICB9LCAwKSk7CiAgICB9CiAgfSwgW3Byb2R1Y3RMaXN0XSk7CgogIHZhciBvblJlbW92ZVByb2R1Y3QgPSBmdW5jdGlvbiBvblJlbW92ZVByb2R1Y3QoaW5kZXgpIHsKICAgIHZhciBjb3B5QXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KTsKCiAgICBjb3B5QXJyLnNwbGljZShpbmRleCwgMSk7CiAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICB9OwoKICB2YXIgb25TZWxlY3RlZFByb2R1Y3QgPSBmdW5jdGlvbiBvblNlbGVjdGVkUHJvZHVjdChfcmVmMywgaW5kZXgpIHsKICAgIHZhciB2YWx1ZSA9IF9yZWYzLnZhbHVlOwoKICAgIHZhciBjb3B5QXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KTsKCiAgICBjb3B5QXJyW2luZGV4XS5wcm9kdWN0ID0gdmFsdWU7CiAgICBjb3B5QXJyW2luZGV4XS5wcmljZSA9IE51bWJlcih2YWx1ZS5wcmljZSk7CiAgICBjb3B5QXJyW2luZGV4XS5xdWFudGl0eSA9IDE7CiAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICB9OwoKICB2YXIgb25BZGRQcm9kdWN0ID0gZnVuY3Rpb24gb25BZGRQcm9kdWN0KCkgewogICAgdmFyIGRhdGEgPSB7CiAgICAgIHByb2R1Y3Q6IHt9LAogICAgICBxdWFudGl0eTogMSwKICAgICAgcXVhbnRpdHlJblN0b3JlOiAxCiAgICB9OwogICAgc2V0UHJvZHVjdExpc3QoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCksIFtkYXRhXSkpOwogIH07CgogIHZhciBkZWJvdW5jZWRTZWFyY2hQcm9kdWN0ID0gXy5kZWJvdW5jZShmdW5jdGlvbiAodmFsdWUpIHsKICAgIGRpc3BhdGNoKGZpbHRlclByb2R1Y3QoewogICAgICBwYWdlOiAwLAogICAgICBzaXplOiAyMCwKICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLERFU0MnLAogICAgICBjb2RlOiB2YWx1ZSwKICAgICAgbmFtZTogdmFsdWUsCiAgICAgIHN0YXR1czogJ0FDVElWRScsCiAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgIH0pKTsKICB9LCAzMDApOwoKICB2YXIgb25TZWFyY2hQcm9kdWN0ID0gZnVuY3Rpb24gb25TZWFyY2hQcm9kdWN0KHZhbHVlKSB7CiAgICBkZWJvdW5jZWRTZWFyY2hQcm9kdWN0KHZhbHVlKTsKICB9OwoKICB2YXIgb25DaGFuZ2VQcmljZSA9IGZ1bmN0aW9uIG9uQ2hhbmdlUHJpY2UoX3JlZjQsIGluZGV4KSB7CiAgICB2YXIgdGFyZ2V0ID0gX3JlZjQudGFyZ2V0OwogICAgdmFyIGNvcHlBcnIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHByb2R1Y3RMaXN0KSk7CiAgICBjb3B5QXJyW2luZGV4XS5wcmljZSA9IE51bWJlcih0YXJnZXQudmFsdWUucmVwbGFjZSgvXEQvZywgJycpKTsKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoaW5pdGlhbFN0YXRlLnVwZGF0aW5nU3VjY2VzcykgewogICAgICBoaXN0b3J5LmdvQmFjaygpOwogICAgfQogIH0sIFtpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzXSk7CgogIHZhciBlZGl0QWxlcnQgPSBmdW5jdGlvbiBlZGl0QWxlcnQodmFsdWVzLCBfcmVmNSkgewogICAgdmFyIHNldFN1Ym1pdHRpbmcgPSBfcmVmNS5zZXRTdWJtaXR0aW5nLAogICAgICAgIHNldEVycm9ycyA9IF9yZWY1LnNldEVycm9yczsKICAgIGNvbmZpcm1BbGVydCh7CiAgICAgIHRpdGxlOiAnWMOhYyBuaOG6rW4nLAogICAgICBtZXNzYWdlOiAnQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHThuqFvIHBoaeG6v3UgbsOgeT8nLAogICAgICBidXR0b25zOiBbewogICAgICAgIGxhYmVsOiAnxJDhu5NuZyDDvScsCiAgICAgICAgb25DbGljazogb25TdWJtaXQodmFsdWVzLCB7CiAgICAgICAgICBzZXRTdWJtaXR0aW5nOiBzZXRTdWJtaXR0aW5nLAogICAgICAgICAgc2V0RXJyb3JzOiBzZXRFcnJvcnMKICAgICAgICB9KQogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICdI4buneScKICAgICAgfV0KICAgIH0pOwogIH07CgogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWlrLCB7CiAgICBpbml0aWFsVmFsdWVzOiBpbml0aWFsVmFsdWVzLAogICAgdmFsaWRhdGU6IHZhbGlkYXRlKHZhbGlkYXRpb25TY2hlbWEpLAogICAgb25TdWJtaXQ6IGVkaXRBbGVydCwKICAgIGlubmVyUmVmOiBmb3JtaWtSZWYKICB9LCBmdW5jdGlvbiAoX3JlZjYpIHsKICAgIHZhciBfc2VsZWN0ZWRXYXJlaG91c2UkZGUsIF9zZWxlY3RlZEltcG9ydFdhcmVobzsKCiAgICB2YXIgdmFsdWVzID0gX3JlZjYudmFsdWVzLAogICAgICAgIGhhbmRsZUNoYW5nZSA9IF9yZWY2LmhhbmRsZUNoYW5nZSwKICAgICAgICBoYW5kbGVCbHVyID0gX3JlZjYuaGFuZGxlQmx1ciwKICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmNi5oYW5kbGVTdWJtaXQsCiAgICAgICAgc2V0RmllbGRWYWx1ZSA9IF9yZWY2LnNldEZpZWxkVmFsdWUsCiAgICAgICAgaGFuZGxlUmVzZXQgPSBfcmVmNi5oYW5kbGVSZXNldDsKICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybSwgewogICAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0LAogICAgICBub1ZhbGlkYXRlOiB0cnVlLAogICAgICBuYW1lOiAic2ltcGxlRm9ybSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkLCB7CiAgICAgIGNsYXNzTmFtZTogImNhcmQtYWNjZW50LWluZm8iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEhlYWRlciwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRUaXRsZSwgbnVsbCwgIkNoXHUxRUNEbiBraG8geHVcdTFFQTV0IikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIHsKICAgICAgY2xhc3NOYW1lOiAibWItMyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgc206IDQKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAibGFzdE5hbWUiCiAgICB9LCAiQ2hcdTFFQ0RuIEtobyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGl0ZW0pIHsKICAgICAgICBzZXRGaWVsZFZhbHVlKCdzdG9yZScsIGl0ZW0udmFsdWUpOwogICAgICAgIG9uU2VsZWN0V2FyZWhvdXNlKGl0ZW0udmFsdWUpOwogICAgICB9LAogICAgICBwbGFjZWhvbGRlcjogIiIsCiAgICAgIG9wdGlvbnM6IHdhcmVob3VzZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBpdGVtLAogICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdChpdGVtLm5hbWUpCiAgICAgICAgfTsKICAgICAgfSkKICAgIH0pLCAhaXNTZWxlY3RlZFdhcmVob3VzZSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtRmVlZGJhY2ssIHsKICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgIH0sICJCXHUxRUExbiBwaFx1MUVBM2kgY2hcdTFFQ0RuIGtobyBoXHhFMG5nIikpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjYiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiVFx4RUFuIGtobzoiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkV2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkV2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZFdhcmVob3VzZS5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJTXHUxRUQxIFx1MDExMWlcdTFFQzduIHRob1x1MUVBMWk6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gbnVsbCB8fCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRXYXJlaG91c2UudGVsKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJDaGkgbmhceEUxbmg6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gbnVsbCB8fCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9zZWxlY3RlZFdhcmVob3VzZSRkZSA9IHNlbGVjdGVkV2FyZWhvdXNlLmRlcGFydG1lbnQpID09PSBudWxsIHx8IF9zZWxlY3RlZFdhcmVob3VzZSRkZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NlbGVjdGVkV2FyZWhvdXNlJGRlLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlx1MDExMFx1MUVDQmEgY2hcdTFFQzk6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gbnVsbCB8fCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRXYXJlaG91c2UuYWRkcmVzcykpKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmQsIHsKICAgICAgY2xhc3NOYW1lOiAiY2FyZC1hY2NlbnQtaW5mbyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkSGVhZGVyLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZFRpdGxlLCBudWxsLCAiQ2hcdTFFQ0RuIGtobyBuaFx1MUVBRHAiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkQm9keSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgewogICAgICBjbGFzc05hbWU6ICJtYi0zIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBzbTogNAogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJsYXN0TmFtZSIKICAgIH0sICJDaFx1MUVDRG4gS2hvIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoaXRlbSkgewogICAgICAgIHNldEZpZWxkVmFsdWUoJ3N0b3JlVHJhbnNmZXInLCBpdGVtLnZhbHVlKTsKICAgICAgICBzZXRTZWxlY3RlZEltcG9ydFdhcmVob3VzZShpdGVtLnZhbHVlKTsKICAgICAgfSwKICAgICAgcGxhY2Vob2xkZXI6ICIiLAogICAgICBvcHRpb25zOiBpbXBvcnRXYXJlaG91c2VzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogaXRlbSwKICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQoaXRlbS5uYW1lKQogICAgICAgIH07CiAgICAgIH0pCiAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJUXHhFQW4ga2hvOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRJbXBvcnRXYXJlaG91c2UgPT09IG51bGwgfHwgc2VsZWN0ZWRJbXBvcnRXYXJlaG91c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlNcdTFFRDEgXHUwMTExaVx1MUVDN24gdGhvXHUxRUExaToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZEltcG9ydFdhcmVob3VzZS50ZWwpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI2IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIkNoaSBuaFx4RTFuaDoiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3NlbGVjdGVkSW1wb3J0V2FyZWhvID0gc2VsZWN0ZWRJbXBvcnRXYXJlaG91c2UuZGVwYXJ0bWVudCkgPT09IG51bGwgfHwgX3NlbGVjdGVkSW1wb3J0V2FyZWhvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2VsZWN0ZWRJbXBvcnRXYXJlaG8ubmFtZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiXHUwMTEwXHUxRUNCYSBjaFx1MUVDOToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkSW1wb3J0V2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZEltcG9ydFdhcmVob3VzZS5hZGRyZXNzKSkpKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgc2hhcGU6ICJzcXVhcmUiLAogICAgICBzaXplOiAic20iLAogICAgICBjbGFzc05hbWU6ICJtbC0zIG1iLTMiLAogICAgICBvbkNsaWNrOiBvbkFkZFByb2R1Y3QKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICdjaWxBcnJvd0NpcmNsZVJpZ2h0JywKICAgICAgY2xhc3NOYW1lOiAibXItMiIKICAgIH0pLCAiVGhceEVBbSBzXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkQm9keSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGFibGUsIHsKICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSwKICAgICAgc3RyaXBlZDogdHJ1ZQogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoZWFkIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIlNcdTFFQTNuIHBoXHUxRUE5bSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCBudWxsLCAiXHUwMTEwXHUwMUExbiB2XHUxRUNCIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIG51bGwsICJEdW5nIHRceEVEY2giKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIlNcdTFFRDEgbFx1MDFCMFx1MUVFM25nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIG51bGwsICJHaVx4RTEiKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGJvZHkiLCBudWxsLCBwcm9kdWN0TGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgIHZhciBfaXRlbSRwcm9kdWN0LCBfaXRlbSRwcm9kdWN0NSwgX2l0ZW0kcHJvZHVjdDY7CgogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgewogICAgICAgIGtleTogaW5kZXgsCiAgICAgICAgc3R5bGU6IGl0ZW0ucXVhbnRpdHkgPiBpdGVtLnF1YW50aXR5SW5TdG9yZSA/IHsKICAgICAgICAgIGJveFNoYWRvdzogJzBweCAwcHggNnB4IDVweCByZWQnCiAgICAgICAgfSA6IHt9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWluV2lkdGg6IDMwMAogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgIHZhbHVlOiBpdGVtLnByb2R1Y3QsCiAgICAgICAgICBsYWJlbDogaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW0kcHJvZHVjdCA9IGl0ZW0ucHJvZHVjdCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdC5uYW1lCiAgICAgICAgfSwKICAgICAgICBvbklucHV0Q2hhbmdlOiBvblNlYXJjaFByb2R1Y3QsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gb25TZWxlY3RlZFByb2R1Y3QoZXZlbnQsIGluZGV4KTsKICAgICAgICB9LAogICAgICAgIG1lbnVQb3J0YWxUYXJnZXQ6IGRvY3VtZW50LmJvZHksCiAgICAgICAgb3B0aW9uczogcHJvZHVjdHMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICB2YXIgX2l0ZW0kcHJvZHVjdDIsIF9pdGVtJHByb2R1Y3QyJHByb2R1YywgX2l0ZW0kcHJvZHVjdDMsIF9pdGVtJHByb2R1Y3Q0OwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbHVlOiBpdGVtLnByb2R1Y3QsCiAgICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW0kcHJvZHVjdDIgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3QyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW0kcHJvZHVjdDIkcHJvZHVjID0gX2l0ZW0kcHJvZHVjdDIucHJvZHVjdEJyYW5kKSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0MiRwcm9kdWMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3QyJHByb2R1Yy5uYW1lLCAiLSIpLmNvbmNhdChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRwcm9kdWN0MyA9IGl0ZW0ucHJvZHVjdCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3QzLm5hbWUsICItIikuY29uY2F0KGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJHByb2R1Y3Q0ID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0NCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdDQudm9sdW1lKQogICAgICAgICAgfTsKICAgICAgICB9KQogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJHByb2R1Y3Q1ID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0NSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdDUudW5pdCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJHByb2R1Y3Q2ID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0NiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdDYudm9sdW1lKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBtaW5XaWR0aDogMzAwCiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICBtaW46IDEsCiAgICAgICAgbmFtZTogImNvZGUiLAogICAgICAgIGlkOiAiY29kZSIsCiAgICAgICAgb25LZXlEb3duOiBibG9ja0ludmFsaWRDaGFyLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uQ2hhbmdlUXVhbnRpdHkoZXZlbnQsIGluZGV4KTsKICAgICAgICB9LAogICAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgICB2YWx1ZTogaXRlbS5xdWFudGl0eQogICAgICB9KSwgaXRlbS5xdWFudGl0eSA+IGl0ZW0ucXVhbnRpdHlJblN0b3JlICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1GZWVkYmFjaywgewogICAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICAgIH0sICJTXHUxRUQxIGxcdTAxQjBcdTFFRTNuZyBjXHUxRUE3biBsXHUxRUE1eSBsXHUxRURCbiBoXHUwMUExbiBzXHUxRUQxIGxcdTAxQjBcdTFFRTNuZyB0cm9uZyBraG8iKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWluV2lkdGg6IDMwMAogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTWFza2VkSW5wdXQsIHsKICAgICAgICBtYXNrOiBjdXJyZW5jeU1hc2ssCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gb25DaGFuZ2VQcmljZShldmVudCwgaW5kZXgpOwogICAgICAgIH0sCiAgICAgICAgdmFsdWU6IHR5cGVvZiBwcm9kdWN0TGlzdFtpbmRleF0ucHJpY2UgIT09ICdudW1iZXInID8gbmV3IEludGwuTnVtYmVyRm9ybWF0KCd2aS1WTicsIHsKICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgICAgY3VycmVuY3k6ICdWTkQnCiAgICAgICAgfSkuZm9ybWF0KHByb2R1Y3RMaXN0W2luZGV4XS5wcmljZSkgOiBwcm9kdWN0TGlzdFtpbmRleF0ucHJpY2UsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIocmVmLCBwcm9wcykgewogICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgX2V4dGVuZHMoewogICAgICAgICAgICBpbm5lclJlZjogcmVmCiAgICAgICAgICB9LCBwcm9wcykpOwogICAgICAgIH0KICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHdpZHRoOiAxMDAKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICBzaXplOiAic20iLAogICAgICAgIGNsYXNzTmFtZTogIm1yLTMiLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICByZXR1cm4gb25SZW1vdmVQcm9kdWN0KGluZGV4KTsKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgICAgbmFtZTogImNpbFhDaXJjbGUiCiAgICAgIH0pKSkpOwogICAgfSkpKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkVGl0bGUsIG51bGwsICJUaFx4RjRuZyB0aW4ga2hceEUxYyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNCIsCiAgICAgIHNtOiAiNSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAidXNlck5hbWUiCiAgICB9LCAiR2hpIGNoXHhGQSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDVGV4dGFyZWEsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAibm90ZSIsCiAgICAgIGlkOiAibm90ZSIsCiAgICAgIHBsYWNlaG9sZGVyOiAiIiwKICAgICAgYXV0b0NvbXBsZXRlOiAiYWRkcmVzcyIsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5ub3RlCiAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNCIsCiAgICAgIHNtOiAiNSIsCiAgICAgIGNsYXNzTmFtZTogIm1sLWF1dG8iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWJsZSwgewogICAgICBjbGFzc05hbWU6ICJ0YWJsZS1jbGVhciIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgY2xhc3NOYW1lOiAibGVmdCIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAiVFx1MUVENW5nIHNcdTFFRDEgbFx1MDFCMFx1MUVFM25nIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgfSwgcHJvZHVjdExpc3QucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGN1cnJlbnQpIHsKICAgICAgcmV0dXJuIHN1bSArIE51bWJlcihjdXJyZW50LnF1YW50aXR5KTsKICAgIH0sIDApIHx8ICcnKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgY2xhc3NOYW1lOiAibGVmdCIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAiVFx1MUVENW5nIHRpXHUxRUMxbiIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICBjbGFzc05hbWU6ICJyaWdodCIKICAgIH0sIHByb2R1Y3RMaXN0LnJlZHVjZShmdW5jdGlvbiAoc3VtLCBjdXJyZW50KSB7CiAgICAgIHJldHVybiBzdW0gKyBjdXJyZW50LnByaWNlICogY3VycmVudC5xdWFudGl0eTsKICAgIH0sIDApLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgc3R5bGU6ICdjdXJyZW5jeScsCiAgICAgIGN1cnJlbmN5OiAnVk5EJwogICAgfSkpKSkpKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICBjbGFzc05hbWU6ICJkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgIHNpemU6ICJsZyIsCiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIGRpc2FibGVkOiBpbml0aWFsU3RhdGUubG9hZGluZwogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogImNpbC1zYXZlIgogICAgfSksICIgIiwgaW5pdGlhbFN0YXRlLmxvYWRpbmcgPyAnxJBhbmcgeOG7rSBsw70nIDogJ1ThuqFvIG3hu5tpJyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInJlc2V0IiwKICAgICAgc2l6ZTogImxnIiwKICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICBvbkNsaWNrOiBoYW5kbGVSZXNldCwKICAgICAgY2xhc3NOYW1lOiAibWwtNSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICJjaWwtYmFuIgogICAgfSksICIgWFx4RjNhIG5oXHUxRUFEcCBsaVx1MUVDN3UiKSkpOwogIH0pKTsKfTsKCmV4cG9ydCBkZWZhdWx0IENyZWF0ZVJlY2VpcHQ7"},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/warehouse/Export/create-warehouse-export.js"],"names":["React","useCallback","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CTextarea","CFormGroup","CLabel","CInput","CRow","CCardTitle","CIcon","Formik","Yup","useDispatch","useSelector","creatingWarehouseExport","creatingWarehouseImport","currencyMask","MaskedInput","_","useHistory","fetching","Select","FormFeedback","Table","globalizedWarehouseSelectors","getAllWarehouse","getWarehouse","userSafeSelector","filterProduct","getProduct","WarehouseImportType","getProductInstore","getProductWarehouse","confirmAlert","validationSchema","object","shape","store","required","validate","blockInvalidChar","mappingStatus","ACTIVE","DISABLED","DELETED","selectAllWarehouse","selectAll","CreateReceipt","formikRef","state","warehouseImport","initialState","warehouse","initialStateWarehouse","customer","account","dispatch","history","selectedWarehouse","setSelectedWarehouse","importWarehouses","setImportWarehouses","selectedImportWarehouse","setSelectedImportWarehouse","isSelectedWarehouse","setIsSelectedWarehouse","products","setProducts","warehouses","productList","setProductList","initialValues","note","onSelectWarehouse","value","department","JSON","stringify","id","dependency","page","size","sort","onSubmit","values","resetForm","isValidProduct","forEach","element","quantity","quantityInStore","storeInputDetails","type","EXPORT","founedIndex","findIndex","item","copyArr","splice","then","resp","payload","Array","isArray","data","length","debouncedSearchProductInStore","debounce","index","storeId","productId","product","numberOfQuantityInStore","onSearchProductInstore","onChangeQuantity","target","Number","current","setFieldValue","reduce","sum","price","onRemoveProduct","onSelectedProduct","onAddProduct","debouncedSearchProduct","code","name","status","onSearchProduct","onChangePrice","parse","replace","updatingSuccess","goBack","editAlert","setSubmitting","setErrors","title","message","buttons","label","onClick","handleChange","handleBlur","handleSubmit","handleReset","map","tel","address","boxShadow","minWidth","event","document","body","productBrand","volume","unit","Intl","NumberFormat","style","currency","format","ref","props","width","toLocaleString","loading"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CTextarea,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CCardTitle\n} from '@coreui/react/lib';\nimport CIcon from '@coreui/icons-react/lib/CIcon';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { creatingWarehouseExport, creatingWarehouseImport } from '../Import/warehouse-import.api';\nimport { currencyMask } from '../../../components/currency-input/currency-input';\nimport MaskedInput from 'react-text-mask';\nimport _ from 'lodash';\nimport { useHistory } from 'react-router-dom';\nimport { fetching } from '../Import/warehouse-import.reducer';\nimport Select from 'react-select';\nimport { FormFeedback, Table } from 'reactstrap';\nimport { globalizedWarehouseSelectors } from '../Warehouse/warehouse.reducer';\nimport { getAllWarehouse, getWarehouse } from '../Warehouse/warehouse.api';\nimport { userSafeSelector } from '../../login/authenticate.reducer.js';\nimport { filterProduct, getProduct } from '../../product/ProductList/product.api';\nimport { WarehouseImportType } from './contants';\nimport { getProductInstore, getProductWarehouse } from '../Product/product-warehouse.api';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\nconst validationSchema = function() {\n  return Yup.object().shape({\n    store: Yup.object().required('Kho khng  trng')\n  });\n};\n\nimport { validate } from '../../../../shared/utils/normalize';\nimport { blockInvalidChar } from '../../../../shared/utils/helper';\n\nexport const mappingStatus = {\n  ACTIVE: 'ANG HOT NG',\n  DISABLED: 'KHNG HOT NG',\n  DELETED: ' XA'\n};\nconst { selectAll: selectAllWarehouse } = globalizedWarehouseSelectors;\n\nconst CreateReceipt = () => {\n  const formikRef = useRef();\n  const { initialState } = useSelector(state => state.warehouseImport);\n  const { initialState: initialStateWarehouse } = useSelector(state => state.warehouse);\n\n  const {} = useSelector(state => state.customer);\n  const { account } = useSelector(userSafeSelector);\n\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [selectedWarehouse, setSelectedWarehouse] = useState(null);\n  const [importWarehouses, setImportWarehouses] = useState([]);\n  const [selectedImportWarehouse, setSelectedImportWarehouse] = useState(null);\n  const [isSelectedWarehouse, setIsSelectedWarehouse] = useState(true);\n  const [products, setProducts] = useState([]);\n  const warehouses = useSelector(selectAllWarehouse);\n\n  const [productList, setProductList] = useState([]);\n\n  const initialValues = {\n    store: '',\n    note: ''\n  };\n  const onSelectWarehouse = value => {\n    setSelectedWarehouse(value);\n    setIsSelectedWarehouse(true);\n  };\n\n  useEffect(() => {\n    dispatch(getWarehouse({ department: JSON.stringify([account.department?.id || '']), dependency: true }));\n    dispatch(getAllWarehouse({ page: 0, size: 20, sort: 'createdDate,DESC', dependency: true }));\n  }, []);\n\n  const onSubmit = (values, { resetForm }) => () => {\n    let isValidProduct = true;\n    productList.forEach(element => {\n      if (element.quantity > element.quantityInStore) {\n        isValidProduct = false;\n        return;\n      }\n    });\n    if (!isValidProduct) return;\n    values.storeInputDetails = productList;\n    values.type = WarehouseImportType.EXPORT;\n    values.department = { id: account.department?.id || null};\n    dispatch(fetching());\n    dispatch(creatingWarehouseExport(values));\n  };\n\n  useEffect(() => {\n    if (selectedWarehouse) {\n      const founedIndex = initialStateWarehouse.warehouses.findIndex(item => item.id === selectedWarehouse.id);\n      const copyArr = [...initialStateWarehouse.warehouses];\n      copyArr.splice(founedIndex, 1);\n      setImportWarehouses(copyArr);\n      dispatch(\n        getProductWarehouse({\n          store: selectedWarehouse.id\n        })\n      ).then(resp => {\n        if (resp && resp.payload && Array.isArray(resp.payload.data) && resp.payload.data.length > 0) {\n          setProducts(resp.payload.data);\n        }\n      });\n    }\n  }, [selectedWarehouse]);\n\n  // dispatch(\n  //   getProductInstore({\n  //     storeId: selectedWarehouse.id,\n  //     productId: copyArr[index].product.id\n  //   })\n  // ).then(numberOfQuantityInStore => {\n  //   if (numberOfQuantityInStore && Array.isArray(numberOfQuantityInStore.payload) && numberOfQuantityInStore.payload.length > 0) {\n  //     copyArr[index].quantity = Number(quantity);\n  //     copyArr[index].quantityInStore = numberOfQuantityInStore.payload[0].quantity;\n  //     setProductList(copyArr);\n  //   }\n  // });\n\n  const debouncedSearchProductInStore = _.debounce((copyArr, index) => {\n    dispatch(\n      getProductInstore({\n        storeId: selectedWarehouse.id,\n        productId: copyArr[index].product.id\n      })\n    ).then(numberOfQuantityInStore => {\n      if (numberOfQuantityInStore && Array.isArray(numberOfQuantityInStore.payload) && numberOfQuantityInStore.payload.length > 0) {\n        copyArr[index].quantityInStore = numberOfQuantityInStore?.payload[0]?.quantity || 0;\n        setProductList(copyArr);\n      }\n    });\n  }, 300);\n\n  const onSearchProductInstore = (copyArr, index) => {\n    debouncedSearchProductInStore(copyArr, index);\n  };\n\n  const onChangeQuantity = ({ target }, index) => {\n    const quantity = target.value;\n    const copyArr = [...productList];\n    copyArr[index].quantity = Number(quantity);\n    if (selectedWarehouse && copyArr[index].product) {\n      setProductList(copyArr);\n      onSearchProductInstore(copyArr, index);\n    }\n  };\n  useEffect(() => {\n    if (formikRef.current) {\n      formikRef.current.setFieldValue(\n        'totalMoney',\n        productList.reduce((sum, current) => sum + current.price * current.quantity, 0)\n      );\n    }\n  }, [productList]);\n  const onRemoveProduct = index => {\n    const copyArr = [...productList];\n    copyArr.splice(index, 1);\n    setProductList(copyArr);\n  };\n\n  const onSelectedProduct = ({ value }, index) => {\n    const copyArr = [...productList];\n    copyArr[index].product = value;\n    copyArr[index].price = Number(value.price);\n    copyArr[index].quantity = 1;\n    setProductList(copyArr);\n  };\n\n  const onAddProduct = () => {\n    const data = { product: {}, quantity: 1, quantityInStore: 1 };\n    setProductList([...productList, data]);\n  };\n\n  const debouncedSearchProduct =  _.debounce(value => {\n      dispatch(filterProduct\n        ({ page: 0, size: 20, sort: 'createdDate,DESC', code: value, name: value, status: 'ACTIVE', dependency: true }));\n    }, 300)\n\n  const onSearchProduct = value => {\n    debouncedSearchProduct(value);\n  };\n\n  const onChangePrice = ({ target }, index) => {\n    const copyArr = JSON.parse(JSON.stringify(productList));\n    copyArr[index].price = Number(target.value.replace(/\\D/g, ''));\n    setProductList(copyArr);\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  const editAlert = (values, { setSubmitting, setErrors }) => {\n    confirmAlert({\n      title: 'Xc nhn',\n      message: 'Bn c chc chn mun to phiu ny?',\n      buttons: [\n        {\n          label: 'ng ',\n          onClick: onSubmit(values, { setSubmitting, setErrors })\n        },\n        {\n          label: 'Hy'\n        }\n      ]\n    });\n  };\n\n  return (\n    <CCard>\n      <Formik initialValues={initialValues} validate={validate(validationSchema)} onSubmit={editAlert} innerRef={formikRef}>\n        {({\n          values,\n\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          setFieldValue,\n\n          handleReset\n        }) => (\n          <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n            <CCard className=\"card-accent-info\">\n              <CCardHeader>\n                <CCardTitle>Chn kho xut</CCardTitle>\n              </CCardHeader>\n              <CCardBody>\n                <CRow className=\"mb-3\">\n                  <CCol sm={4}>\n                    <CLabel htmlFor=\"lastName\">Chn Kho</CLabel>\n                    <Select\n                      onChange={item => {\n                        setFieldValue('store', item.value);\n                        onSelectWarehouse(item.value);\n                      }}\n                      placeholder=\"\"\n                      options={warehouses.map(item => ({\n                        value: item,\n                        label: `${item.name}`\n                      }))}\n                    />\n                    {!isSelectedWarehouse && <FormFeedback className=\"d-block\">Bn phi chn kho hng</FormFeedback>}\n                  </CCol>\n                </CRow>\n                <CRow>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Tn kho:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">S in thoi:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.tel}</dd>\n                    </dl>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Chi nhnh:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.department?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">a ch:</dt>\n                      <dd className=\"col-sm-9\">{selectedWarehouse?.address}</dd>\n                    </dl>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n\n            <CCard className=\"card-accent-info\">\n              <CCardHeader>\n                <CCardTitle>Chn kho nhp</CCardTitle>\n              </CCardHeader>\n              <CCardBody>\n                <CRow className=\"mb-3\">\n                  <CCol sm={4}>\n                    <CLabel htmlFor=\"lastName\">Chn Kho</CLabel>\n                    <Select\n                      onChange={item => {\n                        setFieldValue('storeTransfer', item.value);\n                        setSelectedImportWarehouse(item.value);\n                      }}\n                      placeholder=\"\"\n                      options={importWarehouses.map(item => ({\n                        value: item,\n                        label: `${item.name}`\n                      }))}\n                    />\n                  </CCol>\n                </CRow>\n                <CRow>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Tn kho:</dt>\n                      <dd className=\"col-sm-9\">{selectedImportWarehouse?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">S in thoi:</dt>\n                      <dd className=\"col-sm-9\">{selectedImportWarehouse?.tel}</dd>\n                    </dl>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Chi nhnh:</dt>\n                      <dd className=\"col-sm-9\">{selectedImportWarehouse?.department?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">a ch:</dt>\n                      <dd className=\"col-sm-9\">{selectedImportWarehouse?.address}</dd>\n                    </dl>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n\n            <CButton color=\"primary\" variant=\"outline\" shape=\"square\" size=\"sm\" className=\"ml-3 mb-3\" onClick={onAddProduct}>\n              <CIcon name={'cilArrowCircleRight'} className=\"mr-2\" />\n              Thm sn phm\n            </CButton>\n            <CCard>\n              <CCardBody>\n                <Table responsive striped>\n                  <thead>\n                    <tr>\n                      <th>Sn phm</th>\n                      <th>n v</th>\n                      <th>Dung tch</th>\n                      <th>S lng</th>\n                      <th>Gi</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {productList.map((item, index) => {\n                      return (\n                        <tr\n                          key={index}\n                          style={\n                            item.quantity > item.quantityInStore\n                              ? {\n                                  boxShadow: '0px 0px 6px 5px red'\n                                }\n                              : {}\n                          }\n                        >\n                          <td style={{ minWidth: 300 }}>\n                            <Select\n                              value={{\n                                value: item.product,\n                                label: item?.product?.name\n                              }}\n                              onInputChange={onSearchProduct}\n                              onChange={event => onSelectedProduct(event, index)}\n                              menuPortalTarget={document.body}\n                              options={products.map(item => ({\n                                value: item.product,\n                                label: `${item?.product?.productBrand?.name}-${item?.product?.name}-${item?.product?.volume}`\n                              }))}\n                            />\n                          </td>\n                          <td>{item?.product?.unit}</td>\n                          <td>{item?.product?.volume}</td>\n                          <td style={{ minWidth: 300 }}>\n                            <CInput\n                              type=\"number\"\n                              min={1}\n                              name=\"code\"\n                              id=\"code\"\n                              onKeyDown={blockInvalidChar}\n                              onChange={event => onChangeQuantity(event, index)}\n                              onBlur={handleBlur}\n                              value={item.quantity}\n                            />\n                            {item.quantity > item.quantityInStore && (\n                              <FormFeedback className=\"d-block\">S lng cn ly ln hn s lng trong kho</FormFeedback>\n                            )}\n                          </td>\n                          <td style={{ minWidth: 300 }}>\n                            {\n                              <MaskedInput\n                                mask={currencyMask}\n                                onChange={event => onChangePrice(event, index)}\n                                value={\n                                  typeof productList[index].price !== 'number'\n                                    ? new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(\n                                        productList[index].price\n                                      )\n                                    : productList[index].price\n                                }\n                                render={(ref, props) => <CInput innerRef={ref} {...props} />}\n                              />\n                            }\n                          </td>\n\n                          <td style={{ width: 100 }}>\n                            <CButton\n                              color=\"danger\"\n                              variant=\"outline\"\n                              shape=\"square\"\n                              size=\"sm\"\n                              className=\"mr-3\"\n                              onClick={() => onRemoveProduct(index)}\n                            >\n                              <CIcon name=\"cilXCircle\" />\n                            </CButton>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </Table>\n              </CCardBody>\n            </CCard>\n            <CCard>\n              <CCardHeader>\n                <CCardTitle>Thng tin khc</CCardTitle>\n              </CCardHeader>\n              <CCardBody>\n                <CRow>\n                  <CCol lg=\"4\" sm=\"5\">\n                    <CFormGroup>\n                      <CLabel htmlFor=\"userName\">Ghi ch</CLabel>\n                      <CTextarea\n                        type=\"text\"\n                        name=\"note\"\n                        id=\"note\"\n                        placeholder=\"\"\n                        autoComplete=\"address\"\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.note}\n                      />\n                    </CFormGroup>\n                  </CCol>\n                  <CCol lg=\"4\" sm=\"5\" className=\"ml-auto\">\n                    <Table className=\"table-clear\">\n                      <tbody>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Tng s lng</strong>\n                          </td>\n                          <td className=\"right\">{productList.reduce((sum, current) => sum + Number(current.quantity), 0) || ''}</td>\n                        </tr>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Tng tin</strong>\n                          </td>\n                          <td className=\"right\">\n                            {productList\n                              .reduce((sum, current) => sum + current.price * current.quantity, 0)\n                              .toLocaleString('it-IT', {\n                                style: 'currency',\n                                currency: 'VND'\n                              })}\n                          </td>\n                        </tr>\n                      </tbody>\n                    </Table>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n            <CFormGroup className=\"d-flex justify-content-center\">\n              <CButton type=\"submit\" size=\"lg\" color=\"primary\" disabled={initialState.loading}>\n                <CIcon name=\"cil-save\" /> {initialState.loading ? 'ang x l' : 'To mi'}\n              </CButton>\n              <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={handleReset} className=\"ml-5\">\n                <CIcon name=\"cil-ban\" /> Xa nhp liu\n              </CButton>\n            </CFormGroup>\n          </CForm>\n        )}\n      </Formik>\n    </CCard>\n  );\n};\n\nexport default CreateReceipt;\n"]}]}