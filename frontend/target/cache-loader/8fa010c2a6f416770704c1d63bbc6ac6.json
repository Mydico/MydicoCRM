{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/EditPromotion.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/EditPromotion.js","mtime":1623497901722},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBDQnV0dG9uLCBDQ2FyZCwgQ0NhcmRIZWFkZXIsIENDYXJkQm9keSwgQ0NvbCwgQ0Zvcm0sIENJbnZhbGlkRmVlZGJhY2ssIENGb3JtR3JvdXAsIENMYWJlbCwgQ0lucHV0LCBDUm93LCBDU2VsZWN0LCBDQ2FyZFRpdGxlLCBDVGV4dGFyZWEsIENJbnB1dENoZWNrYm94IH0gZnJvbSAnQGNvcmV1aS9yZWFjdC9saWInOwppbXBvcnQgQ0ljb24gZnJvbSAnQGNvcmV1aS9pY29ucy1yZWFjdC9saWIvQ0ljb24nOwo7CmltcG9ydCB7IEZvcm1payB9IGZyb20gJ2Zvcm1payc7CmltcG9ydCAqIGFzIFl1cCBmcm9tICd5dXAnOwppbXBvcnQgeyB1c2VEaXNwYXRjaCwgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCB7IGdldERldGFpbFByb21vdGlvbiwgdXBkYXRlUHJvbW90aW9uIH0gZnJvbSAnLi9wcm9tb3Rpb24uYXBpJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgeyBmZXRjaGluZywgZ2xvYmFsaXplZFByb21vdGlvblNlbGVjdG9ycyB9IGZyb20gJy4vcHJvbW90aW9uLnJlZHVjZXInOwppbXBvcnQgeyBnZXRDdXN0b21lclR5cGUgfSBmcm9tICcuLi8uLi9jdXN0b21lci9DdXN0b21lclR5cGUvY3VzdG9tZXItdHlwZS5hcGknOwppbXBvcnQgeyBnbG9iYWxpemVkY3VzdG9tZXJUeXBlU2VsZWN0b3JzIH0gZnJvbSAnLi4vLi4vY3VzdG9tZXIvQ3VzdG9tZXJUeXBlL2N1c3RvbWVyLXR5cGUucmVkdWNlcic7CmltcG9ydCBTZWxlY3QgZnJvbSAncmVhY3Qtc2VsZWN0JzsKaW1wb3J0IHsgZ2V0UHJvZHVjdCB9IGZyb20gJy4uLy4uL3Byb2R1Y3QvUHJvZHVjdExpc3QvcHJvZHVjdC5hcGknOwppbXBvcnQgeyBnbG9iYWxpemVkUHJvZHVjdFNlbGVjdG9ycyB9IGZyb20gJy4uLy4uL3Byb2R1Y3QvUHJvZHVjdExpc3QvcHJvZHVjdC5yZWR1Y2VyJzsKCnZhciB2YWxpZGF0aW9uU2NoZW1hID0gZnVuY3Rpb24gdmFsaWRhdGlvblNjaGVtYSgpIHsKICByZXR1cm4gWXVwLm9iamVjdCgpLnNoYXBlKHsKICAgIG5hbWU6IFl1cC5zdHJpbmcoKS5taW4oNSwgIlRceEVBbiBwaFx1MUVBM2kgbFx1MUVEQm4gaFx1MDFBMW4gNSBrXHhFRCB0XHUxRUYxIikucmVxdWlyZWQoJ1TDqm4ga2jDtG5nIMSR4buDIHRy4buRbmcnKSwKICAgIHN0YXJ0VGltZTogWXVwLnN0cmluZygpLnJlcXVpcmVkKCdOZ8OgeSBi4bqvdCDEkeG6p3Uga2jDtG5nIMSR4buDIHRy4buRbmcnKSwKICAgIGVuZFRpbWU6IFl1cC5zdHJpbmcoKS5yZXF1aXJlZCgnTmfDoHkga+G6v3QgdGjDumMga2jDtG5nIMSR4buDIHRy4buRbmcnKQogIH0pOwp9OwoKaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvdXRpbHMvbm9ybWFsaXplJzsKdmFyIHNlbGVjdEFsbFByb2R1Y3QgPSBnbG9iYWxpemVkUHJvZHVjdFNlbGVjdG9ycy5zZWxlY3RBbGw7CnZhciBzZWxlY3RCeUlkID0gZ2xvYmFsaXplZFByb21vdGlvblNlbGVjdG9ycy5zZWxlY3RCeUlkOwp2YXIgc2VsZWN0QWxsID0gZ2xvYmFsaXplZGN1c3RvbWVyVHlwZVNlbGVjdG9ycy5zZWxlY3RBbGw7Cgp2YXIgRWRpdFByb21vdGlvbiA9IGZ1bmN0aW9uIEVkaXRQcm9tb3Rpb24ocHJvcHMpIHsKICB2YXIgX3VzZVNlbGVjdG9yID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucHJvbW90aW9uOwogIH0pLAogICAgICBpbml0aWFsU3RhdGUgPSBfdXNlU2VsZWN0b3IuaW5pdGlhbFN0YXRlLAogICAgICBlbnRpdGllcyA9IF91c2VTZWxlY3Rvci5lbnRpdGllczsKCiAgdmFyIGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTsKICB2YXIgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKTsKICB2YXIgcHJvbW90aW9uR3JvdXAgPSBbXTsKICB2YXIgaW5pdGlhbFZhbHVlcyA9IHVzZVJlZih7CiAgICBuYW1lOiAnJywKICAgIGRlc2NyaXB0aW9uOiAnJywKICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgZW5kVGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgaXNMb2NrOiBmYWxzZSwKICAgIGN1c3RvbWVyVHlwZTogbnVsbAogIH0pOwogIHZhciBjdXN0b21lclR5cGUgPSB1c2VTZWxlY3RvcihzZWxlY3RBbGwpOwogIHZhciBwcm9kdWN0cyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbFByb2R1Y3QpOwogIHZhciBwcm9tb3Rpb24gPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzZWxlY3RCeUlkKHN0YXRlLCBwcm9wcy5tYXRjaC5wYXJhbXMuaWQpOwogIH0pOwoKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUobnVsbCksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBpbml0VmFsdWVzID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0SW5pdFZhbHVlcyA9IF91c2VTdGF0ZTJbMV07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBkaXNwYXRjaChnZXRDdXN0b21lclR5cGUoewogICAgICBwYWdlOiAwLAogICAgICBzaXplOiAyMCwKICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLERFU0MnLAogICAgICBkZXBlbmRlbmN5OiB0cnVlCiAgICB9KSk7CiAgICBkaXNwYXRjaChnZXRQcm9kdWN0KHsKICAgICAgcGFnZTogMCwKICAgICAgc2l6ZTogMjAsCiAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJywKICAgICAgc3RhdHVzOiAnQUNUSVZFJywKICAgICAgZGVwZW5kZW5jeTogdHJ1ZQogICAgfSkpOwogICAgZGlzcGF0Y2goZ2V0RGV0YWlsUHJvbW90aW9uKHsKICAgICAgaWQ6IHByb3BzLm1hdGNoLnBhcmFtcy5pZCwKICAgICAgZGVwZW5kZW5jeTogdHJ1ZQogICAgfSkpOwogIH0sIFtdKTsKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKHByb21vdGlvbikgewogICAgICBzZXRJbml0VmFsdWVzKHByb21vdGlvbik7CiAgICAgIHNldFByb2R1Y3RMaXN0KEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocHJvbW90aW9uLnByb21vdGlvblByb2R1Y3QpKSk7CiAgICB9CiAgfSwgW2VudGl0aWVzXSk7CgogIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoW10pLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIHByb2R1Y3RMaXN0ID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0UHJvZHVjdExpc3QgPSBfdXNlU3RhdGU0WzFdOwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGN1c3RvbWVyVHlwZS5sZW5ndGggPiAwKSB7CiAgICAgIGluaXRpYWxWYWx1ZXMuY3VycmVudC5jdXN0b21lclR5cGUgPSBjdXN0b21lclR5cGVbMF0uaWQ7CiAgICB9CiAgfSwgW2N1c3RvbWVyVHlwZV0pOwoKICB2YXIgb25BZGRQcm9kdWN0ID0gZnVuY3Rpb24gb25BZGRQcm9kdWN0KCkgewogICAgdmFyIGRhdGEgPSB7CiAgICAgIHByb2R1Y3Q6IHt9LAogICAgICBidXk6IDAsCiAgICAgIGdpZnQ6IDAKICAgIH07CiAgICBzZXRQcm9kdWN0TGlzdChbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KSwgW2RhdGFdKSk7CiAgfTsKCiAgdmFyIG9uU2VsZWN0ZWRQcm9kdWN0ID0gZnVuY3Rpb24gb25TZWxlY3RlZFByb2R1Y3QoaXRlbSwgaW5kZXgpIHsKICAgIHZhciBjb3B5QXJyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwcm9kdWN0TGlzdCkpOwogICAgY29weUFycltpbmRleF0ucHJvZHVjdCA9IGl0ZW0udmFsdWU7CiAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICB9OwoKICB2YXIgZGVib3VuY2VkU2VhcmNoUHJvZHVjdCA9IHVzZUNhbGxiYWNrKF8uZGVib3VuY2UoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICBkaXNwYXRjaChnZXRQcm9kdWN0KHsKICAgICAgcGFnZTogMCwKICAgICAgc2l6ZTogMjAsCiAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJywKICAgICAgY29kZTogdmFsdWUsCiAgICAgIG5hbWU6IHZhbHVlLAogICAgICBzdGF0dXM6ICdBQ1RJVkUnLAogICAgICBkZXBlbmRlbmN5OiB0cnVlCiAgICB9KSk7CiAgfSwgMzAwKSwgW10pOwoKICB2YXIgb25TZWFyY2hQcm9kdWN0ID0gZnVuY3Rpb24gb25TZWFyY2hQcm9kdWN0KHZhbHVlKSB7CiAgICBkZWJvdW5jZWRTZWFyY2hQcm9kdWN0KHZhbHVlKTsKICB9OwoKICB2YXIgb25DaGFuZ2VQcm9kdWN0UHJvbW90aW9uID0gZnVuY3Rpb24gb25DaGFuZ2VQcm9kdWN0UHJvbW90aW9uKHZhbHVlLCBpbmRleCwgdHlwZSkgewogICAgdmFyIGNvcHlBcnIgPSBfdG9Db25zdW1hYmxlQXJyYXkocHJvZHVjdExpc3QpOwoKICAgIGNvcHlBcnJbaW5kZXhdW3R5cGVdID0gdmFsdWU7CiAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICB9OwoKICB2YXIgb25TdWJtaXQgPSBmdW5jdGlvbiBvblN1Ym1pdCh2YWx1ZXMsIF9yZWYpIHsKICAgIHZhciByZXNldEZvcm0gPSBfcmVmLnJlc2V0Rm9ybTsKICAgIGRpc3BhdGNoKGZldGNoaW5nKCkpOwogICAgdmFsdWVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZXMpKTsKICAgIGlmICghdmFsdWVzLmN1c3RvbWVyVHlwZSkgdmFsdWVzLmN1c3RvbWVyVHlwZSA9IGluaXRpYWxWYWx1ZXMuY3VycmVudC5jdXN0b21lclR5cGU7CiAgICB2YWx1ZXMucHJvbW90aW9uUHJvZHVjdCA9IHByb2R1Y3RMaXN0OwogICAgZGlzcGF0Y2godXBkYXRlUHJvbW90aW9uKHZhbHVlcykpOwogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoaW5pdGlhbFN0YXRlLnVwZGF0aW5nU3VjY2VzcykgewogICAgICBoaXN0b3J5LmdvQmFjaygpOwogICAgfQogIH0sIFtpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzXSk7CgogIHZhciBvblJlbW92ZVByb2R1Y3QgPSBmdW5jdGlvbiBvblJlbW92ZVByb2R1Y3QoaW5kZXgpIHsKICAgIHZhciBjb3B5QXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KTsKCiAgICBjb3B5QXJyLnNwbGljZShpbmRleCwgMSk7CiAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICB9OwoKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkSGVhZGVyLCB7CiAgICBjbGFzczogImNhcmQtaGVhZGVyIgogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkVGl0bGUsIG51bGwsICJDaFx1MUVDOW5oIHNcdTFFRURhIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmggYlx4RTFuIGhceEUwbmciKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkQm9keSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWlrLCB7CiAgICBpbml0aWFsVmFsdWVzOiBpbml0VmFsdWVzIHx8IGluaXRpYWxWYWx1ZXMuY3VycmVudCwKICAgIGVuYWJsZVJlaW5pdGlhbGl6ZTogdHJ1ZSwKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSh2YWxpZGF0aW9uU2NoZW1hKSwKICAgIG9uU3VibWl0OiBvblN1Ym1pdAogIH0sIGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIF9lcnJvcnMkbmFtZSwgX3ZhbHVlcyRjdXN0b21lclR5cGU7CgogICAgdmFyIHZhbHVlcyA9IF9yZWYyLnZhbHVlcywKICAgICAgICBlcnJvcnMgPSBfcmVmMi5lcnJvcnMsCiAgICAgICAgdG91Y2hlZCA9IF9yZWYyLnRvdWNoZWQsCiAgICAgICAgaGFuZGxlQ2hhbmdlID0gX3JlZjIuaGFuZGxlQ2hhbmdlLAogICAgICAgIGhhbmRsZUJsdXIgPSBfcmVmMi5oYW5kbGVCbHVyLAogICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYyLmhhbmRsZVN1Ym1pdCwKICAgICAgICBzZXRGaWVsZFZhbHVlID0gX3JlZjIuc2V0RmllbGRWYWx1ZSwKICAgICAgICBoYW5kbGVSZXNldCA9IF9yZWYyLmhhbmRsZVJlc2V0OwogICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtLCB7CiAgICAgIG9uU3VibWl0OiBoYW5kbGVTdWJtaXQsCiAgICAgIG5vVmFsaWRhdGU6IHRydWUsCiAgICAgIG5hbWU6ICJzaW1wbGVGb3JtIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjYiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogImxhc3ROYW1lIgogICAgfSwgIlRceEVBbiBjaFx1MDFCMFx1MDFBMW5nIHRyXHhFQ25oIGJceEUxbiBoXHhFMG5nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICB0eXBlOiAidGV4dCIsCiAgICAgIG5hbWU6ICJuYW1lIiwKICAgICAgaWQ6ICJuYW1lIiwKICAgICAgcGxhY2Vob2xkZXI6ICJUXHhFQW4gY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCBiXHhFMW4gaFx4RTBuZyIsCiAgICAgIGF1dG9Db21wbGV0ZTogIm5hbWUiLAogICAgICB2YWxpZDogKGVycm9ycyA9PT0gbnVsbCB8fCBlcnJvcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZXJyb3JzJG5hbWUgPSBlcnJvcnMubmFtZSkgPT09IG51bGwgfHwgX2Vycm9ycyRuYW1lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3JzJG5hbWUubGVuZ3RoKSA+IDUgfHwgbnVsbCwKICAgICAgaW52YWxpZDogZXJyb3JzLm5hbWUsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgIHZhbHVlOiB2YWx1ZXMubmFtZQogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIG51bGwsIGVycm9ycy5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAidXNlck5hbWUiCiAgICB9LCAiTVx4RjQgdFx1MUVBMyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDVGV4dGFyZWEsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAiZGVzY3JpcHRpb24iLAogICAgICBpZDogImRlc2NyaXB0aW9uIiwKICAgICAgcGxhY2Vob2xkZXI6ICJNXHhGNCB0XHUxRUEzIiwKICAgICAgYXV0b0NvbXBsZXRlOiAiZGVzY3JpcHRpb24iLAogICAgICB2YWxpZDogZXJyb3JzLmRlc2NyaXB0aW9uIHx8IG51bGwsCiAgICAgIGludmFsaWQ6IHRvdWNoZWQuZGVzY3JpcHRpb24gJiYgISFlcnJvcnMuZGVzY3JpcHRpb24sCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5kZXNjcmlwdGlvbgogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIG51bGwsIGVycm9ycy5kZXNjcmlwdGlvbikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogImN1c3RvbWVyVHlwZSIKICAgIH0sICJcdTAxMTBcdTFFRDFpIHRcdTAxQjBcdTFFRTNuZyBraFx4RTFjaCBoXHhFMG5nIFx4RTFwIGRcdTFFRTVuZyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDU2VsZWN0LCB7CiAgICAgIGN1c3RvbTogdHJ1ZSwKICAgICAgbmFtZTogImN1c3RvbWVyVHlwZSIsCiAgICAgIGlkOiAiY3VzdG9tZXJUeXBlIiwKICAgICAgdmFsdWU6IChfdmFsdWVzJGN1c3RvbWVyVHlwZSA9IHZhbHVlcy5jdXN0b21lclR5cGUpID09PSBudWxsIHx8IF92YWx1ZXMkY3VzdG9tZXJUeXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWVzJGN1c3RvbWVyVHlwZS5pZCwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICBzZXRGaWVsZFZhbHVlKCdjdXN0b21lclR5cGUnLCBlLnRhcmdldC52YWx1ZSk7CiAgICAgIH0KICAgIH0sIGN1c3RvbWVyVHlwZSAmJiBjdXN0b21lclR5cGUubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgib3B0aW9uIiwgewogICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICB2YWx1ZTogaXRlbS5pZAogICAgICB9LCBpdGVtLm5hbWUpOwogICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCBudWxsLCBlcnJvcnMuY3VzdG9tZXJUeXBlKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgbnVsbCwgIlRoXHUxRUREaSBnaWFuIGJcdTFFQUZ0IFx1MDExMVx1MUVBN3UiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgIHR5cGU6ICJkYXRlIiwKICAgICAgaWQ6ICJzdGFydFRpbWUiLAogICAgICBuYW1lOiAic3RhcnRUaW1lIiwKICAgICAgZGVmYXVsdFZhbHVlOiB2YWx1ZXMuc3RhcnRUaW1lLnNwbGl0KCdUJylbMF0sCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIHBsYWNlaG9sZGVyOiAiVGhcdTFFRERpIGdpYW4gYlx1MUVBRnQgXHUwMTExXHUxRUE3dSIKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCBlcnJvcnMuc3RhcnRUaW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgbnVsbCwgIlRoXHUxRUREaSBnaWFuIGtcdTFFQkZ0IHRoXHhGQWMiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgIHR5cGU6ICJkYXRlIiwKICAgICAgaWQ6ICJlbmRUaW1lIiwKICAgICAgbmFtZTogImVuZFRpbWUiLAogICAgICBkZWZhdWx0VmFsdWU6IHZhbHVlcy5lbmRUaW1lLnNwbGl0KCdUJylbMF0sCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIHBsYWNlaG9sZGVyOiAiVGhcdTFFRERpIGdpYW4ga1x1MUVCRnQgdGhceEZBYyIKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCBlcnJvcnMuZW5kVGltZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCB7CiAgICAgIHZhcmlhbnQ6ICJjdXN0b20tY2hlY2tib3giLAogICAgICBjbGFzc05hbWU6ICJwYi0zIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0Q2hlY2tib3gsIHsKICAgICAgY3VzdG9tOiB0cnVlLAogICAgICBpZDogImlzTG9jayIsCiAgICAgIG5hbWU6ICJpc0xvY2siLAogICAgICB2YWxpZDogIWVycm9ycy5pc0xvY2ssCiAgICAgIGludmFsaWQ6IHRvdWNoZWQuaXNMb2NrICYmICEhZXJyb3JzLmlzTG9jaywKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIHZhcmlhbnQ6ICJjdXN0b20tY2hlY2tib3giLAogICAgICBodG1sRm9yOiAiaXNMb2NrIgogICAgfSwgIktoXHhGM2EgY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCIpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgIHNpemU6ICJzbSIsCiAgICAgIGNsYXNzTmFtZTogIm1sLTMiLAogICAgICBvbkNsaWNrOiBvbkFkZFByb2R1Y3QKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICdjaWxBcnJvd0NpcmNsZVJpZ2h0JywKICAgICAgY2xhc3NOYW1lOiAibXItMiIKICAgIH0pLCAiVGhceEVBbSBzXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjEyIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgewogICAgICBjbGFzc05hbWU6ICJtdC0zIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjUiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIG51bGwsICJTXHUxRUEzbiBwaFx1MUVBOW0iKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICIzIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCBudWxsLCAiTXVhIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiMyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgbnVsbCwgIlRcdTFFQjduZyIpKSksIHByb2R1Y3RMaXN0ICYmIHByb2R1Y3RMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgdmFyIF9pdGVtJHByb2R1Y3QsIF9pdGVtJHByb2R1Y3QyOwoKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIHsKICAgICAgICBjbGFzc05hbWU6ICIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICBsZzogIjUiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICB2YWx1ZTogaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLnByb2R1Y3QsCiAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRwcm9kdWN0ID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0LmNvZGUpIHx8ICcnLCAiLSIpLmNvbmNhdCgoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW0kcHJvZHVjdDIgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3QyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0Mi5uYW1lKSB8fCAnJykKICAgICAgICB9LAogICAgICAgIG9uSW5wdXRDaGFuZ2U6IG9uU2VhcmNoUHJvZHVjdCwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvblNlbGVjdGVkUHJvZHVjdChldmVudCwgaW5kZXgpOwogICAgICAgIH0sCiAgICAgICAgb3B0aW9uczogcHJvZHVjdHMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogaXRlbSwKICAgICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdChpdGVtLmNvZGUsICItIikuY29uY2F0KGl0ZW0ubmFtZSkKICAgICAgICAgIH07CiAgICAgICAgfSkKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgICAgbGc6ICIzIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICBuYW1lOiAiYnV5IiwKICAgICAgICBpZDogImJ1eSIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJEdW5nIHRceEVEY2giLAogICAgICAgIGF1dG9Db21wbGV0ZTogImJ1eSIsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gb25DaGFuZ2VQcm9kdWN0UHJvbW90aW9uKGV2ZW50LnRhcmdldC52YWx1ZSwgaW5kZXgsICdidXknKTsKICAgICAgICB9LAogICAgICAgIGludmFsaWQ6ICFwcm9kdWN0TGlzdFtpbmRleF0uYnV5LAogICAgICAgIHZhbGlkOiBwcm9kdWN0TGlzdFtpbmRleF0uYnV5LAogICAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgICB2YWx1ZTogcHJvZHVjdExpc3RbaW5kZXhdLmJ1eQogICAgICB9KSwgIXByb2R1Y3RMaXN0W2luZGV4XS5idXkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICAgIH0sICJHaVx4RTEgdHJcdTFFQ0IgcGhcdTFFQTNpIGxcdTFFREJuIGhcdTAxQTFuIDAiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICBsZzogIjMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgIG5hbWU6ICJnaWZ0IiwKICAgICAgICBpZDogImdpZnQiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiRHVuZyB0XHhFRGNoIiwKICAgICAgICBhdXRvQ29tcGxldGU6ICJnaWZ0IiwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24oZXZlbnQudGFyZ2V0LnZhbHVlLCBpbmRleCwgJ2dpZnQnKTsKICAgICAgICB9LAogICAgICAgIGludmFsaWQ6ICFwcm9kdWN0TGlzdFtpbmRleF0uZ2lmdCwKICAgICAgICB2YWxpZDogcHJvZHVjdExpc3RbaW5kZXhdLmdpZnQsCiAgICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICAgIHZhbHVlOiBwcm9kdWN0TGlzdFtpbmRleF0uZ2lmdAogICAgICB9KSwgIXByb2R1Y3RMaXN0W2luZGV4XS5naWZ0ICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgICB9LCAiR2lceEUxIHRyXHUxRUNCIHBoXHUxRUEzaSBsXHUxRURCbiBoXHUwMUExbiAwIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgICAgbGc6ICIxIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgICAgc2l6ZTogInNtIiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgcmV0dXJuIG9uUmVtb3ZlUHJvZHVjdChpbmRleCk7CiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICAgIG5hbWU6ICJjaWxYQ2lyY2xlIgogICAgICB9KSkpKTsKICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIHsKICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXIgbXQtMyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgIHNpemU6ICJsZyIsCiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIGRpc2FibGVkOiBpbml0aWFsU3RhdGUubG9hZGluZwogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogImNpbC1zYXZlIgogICAgfSksICIgIiwgaW5pdGlhbFN0YXRlLmxvYWRpbmcgPyAnxJBhbmcgeOG7rSBsw70nIDogJ0zGsHUgbOG6oWknKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICB0eXBlOiAicmVzZXQiLAogICAgICBzaXplOiAibGciLAogICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgIG9uQ2xpY2s6IGhhbmRsZVJlc2V0LAogICAgICBjbGFzc05hbWU6ICJtbC01IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogImNpbC1iYW4iCiAgICB9KSwgIiBYXHhGM2EgbmhcdTFFQURwIGxpXHUxRUM3dSIpKSk7CiAgfSkpKTsKfTsKCmV4cG9ydCBkZWZhdWx0IEVkaXRQcm9tb3Rpb247"},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/EditPromotion.js"],"names":["React","useEffect","useRef","useState","useCallback","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CInvalidFeedback","CFormGroup","CLabel","CInput","CRow","CSelect","CCardTitle","CTextarea","CInputCheckbox","CIcon","Formik","Yup","useDispatch","useSelector","getDetailPromotion","updatePromotion","_","useHistory","fetching","globalizedPromotionSelectors","getCustomerType","globalizedcustomerTypeSelectors","Select","getProduct","globalizedProductSelectors","validationSchema","object","shape","name","string","min","required","startTime","endTime","validate","selectAllProduct","selectAll","selectById","EditPromotion","props","state","promotion","initialState","entities","dispatch","history","promotionGroup","initialValues","description","Date","toISOString","isLock","customerType","products","match","params","id","initValues","setInitValues","page","size","sort","dependency","status","setProductList","JSON","parse","stringify","promotionProduct","productList","length","current","onAddProduct","data","product","buy","gift","onSelectedProduct","item","index","copyArr","value","debouncedSearchProduct","debounce","code","onSearchProduct","onChangeProductPromotion","type","onSubmit","values","resetForm","updatingSuccess","goBack","onRemoveProduct","splice","errors","touched","handleChange","handleBlur","handleSubmit","setFieldValue","handleReset","e","target","map","split","label","event","loading"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CInvalidFeedback,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CSelect,\n  CCardTitle,\n  CTextarea,\n  CInputCheckbox\n} from '@coreui/react/lib';\nimport CIcon from '@coreui/icons-react/lib/CIcon';;\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getDetailPromotion, updatePromotion } from './promotion.api';\nimport _ from 'lodash';\n\nimport { useHistory } from 'react-router-dom';\nimport { fetching, globalizedPromotionSelectors } from './promotion.reducer';\n\nimport { getCustomerType } from '../../customer/CustomerType/customer-type.api';\nimport { globalizedcustomerTypeSelectors } from '../../customer/CustomerType/customer-type.reducer';\nimport Select from 'react-select';\nimport { getProduct } from '../../product/ProductList/product.api';\nimport { globalizedProductSelectors } from '../../product/ProductList/product.reducer';\n\nconst validationSchema = function() {\n  return Yup.object().shape({\n    name: Yup.string()\n      .min(5, `Tên phải lớn hơn 5 kí tự`)\n      .required('Tên không để trống'),\n    startTime: Yup.string().required('Ngày bắt đầu không để trống'),\n    endTime: Yup.string().required('Ngày kết thúc không để trống')\n  });\n};\n\nimport { validate } from '../../../../shared/utils/normalize';\nconst { selectAll: selectAllProduct } = globalizedProductSelectors;\nconst { selectById } = globalizedPromotionSelectors;\nconst { selectAll } = globalizedcustomerTypeSelectors;\nconst EditPromotion = props => {\n  const { initialState, entities } = useSelector(state => state.promotion);\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const promotionGroup = [];\n  const initialValues = useRef({\n    name: '',\n    description: '',\n    startTime: new Date().toISOString(),\n    endTime: new Date().toISOString(),\n    isLock: false,\n    customerType: null\n  });\n  const customerType = useSelector(selectAll);\n  const products = useSelector(selectAllProduct);\n  const promotion = useSelector(state => selectById(state, props.match.params.id));\n  const [initValues, setInitValues] = useState(null);\n\n  useEffect(() => {\n    dispatch(getCustomerType({ page: 0, size: 20, sort: 'createdDate,DESC', dependency: true }));\n    dispatch(getProduct({ page: 0, size: 20, sort: 'createdDate,DESC', status: 'ACTIVE', dependency: true }));\n    dispatch(getDetailPromotion({ id: props.match.params.id, dependency: true }));\n  }, []);\n\n  useEffect(() => {\n    if (promotion) {\n      setInitValues(promotion);\n      setProductList(JSON.parse(JSON.stringify(promotion.promotionProduct)));\n    }\n  }, [entities]);\n\n  const [productList, setProductList] = useState([]);\n\n  useEffect(() => {\n    if (customerType.length > 0) {\n      initialValues.current.customerType = customerType[0].id;\n    }\n  }, [customerType]);\n\n  const onAddProduct = () => {\n    const data = { product: {}, buy: 0, gift: 0 };\n    setProductList([...productList, data]);\n  };\n\n  const onSelectedProduct = (item, index) => {\n    const copyArr = JSON.parse(JSON.stringify(productList));\n    copyArr[index].product = item.value;\n    setProductList(copyArr);\n  };\n\n  const debouncedSearchProduct = useCallback(\n    _.debounce(value => {\n      dispatch(getProduct({ page: 0, size: 20, sort: 'createdDate,DESC', code: value, name: value, status: 'ACTIVE', dependency: true }));\n    }, 300),\n    []\n  );\n\n  const onSearchProduct = value => {\n    debouncedSearchProduct(value);\n  };\n\n  const onChangeProductPromotion = (value, index, type) => {\n    const copyArr = [...productList];\n    copyArr[index][type] = value;\n    setProductList(copyArr);\n  };\n\n  const onSubmit = (values, { resetForm }) => {\n    dispatch(fetching());\n    values = JSON.parse(JSON.stringify(values));\n    if (!values.customerType) values.customerType = initialValues.current.customerType;\n    values.promotionProduct = productList;\n    dispatch(updatePromotion(values));\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  const onRemoveProduct = index => {\n    const copyArr = [...productList];\n    copyArr.splice(index, 1);\n    setProductList(copyArr);\n  };\n\n  return (\n    <CCard>\n      <CCardHeader class=\"card-header\">\n        <CCardTitle>Chỉnh sửa chương trình bán hàng</CCardTitle>\n      </CCardHeader>\n      <CCardBody>\n        <Formik\n          initialValues={initValues || initialValues.current}\n          enableReinitialize\n          validate={validate(validationSchema)}\n          onSubmit={onSubmit}\n        >\n          {({\n            values,\n            errors,\n            touched,\n\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue,\n\n            handleReset\n          }) => {\n            return (\n              <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n                <CRow>\n                  <CCol lg=\"6\">\n                    <CFormGroup>\n                      <CLabel htmlFor=\"lastName\">Tên chương trình bán hàng</CLabel>\n                      <CInput\n                        type=\"text\"\n                        name=\"name\"\n                        id=\"name\"\n                        placeholder=\"Tên chương trình bán hàng\"\n                        autoComplete=\"name\"\n                        valid={errors?.name?.length > 5 || null}\n                        invalid={errors.name}\n                        required\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.name}\n                      />\n                      <CInvalidFeedback>{errors.name}</CInvalidFeedback>\n                    </CFormGroup>\n                    <CFormGroup>\n                      <CLabel htmlFor=\"userName\">Mô tả</CLabel>\n                      <CTextarea\n                        type=\"text\"\n                        name=\"description\"\n                        id=\"description\"\n                        placeholder=\"Mô tả\"\n                        autoComplete=\"description\"\n                        valid={errors.description || null}\n                        invalid={touched.description && !!errors.description}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.description}\n                      />\n                      <CInvalidFeedback>{errors.description}</CInvalidFeedback>\n                    </CFormGroup>\n                    <CFormGroup>\n                      <CLabel htmlFor=\"customerType\">Đối tượng khách hàng áp dụng</CLabel>\n                      <CSelect\n                        custom\n                        name=\"customerType\"\n                        id=\"customerType\"\n                        value={values.customerType?.id}\n                        onChange={e => {\n                          setFieldValue('customerType', e.target.value);\n                        }}\n                      >\n                        {customerType &&\n                          customerType.map(item => (\n                            <option key={item.id} value={item.id}>\n                              {item.name}\n                            </option>\n                          ))}\n                      </CSelect>\n                      <CInvalidFeedback>{errors.customerType}</CInvalidFeedback>\n                    </CFormGroup>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <CFormGroup>\n                      <CLabel>Thời gian bắt đầu</CLabel>\n                      <CInput\n                        type=\"date\"\n                        id=\"startTime\"\n                        name=\"startTime\"\n                        defaultValue={values.startTime.split('T')[0]}\n                        onChange={handleChange}\n                        placeholder=\"Thời gian bắt đầu\"\n                      />\n                      <CInvalidFeedback className=\"d-block\">{errors.startTime}</CInvalidFeedback>\n                    </CFormGroup>\n\n                    <CFormGroup>\n                      <CLabel>Thời gian kết thúc</CLabel>\n                      <CInput\n                        type=\"date\"\n                        id=\"endTime\"\n                        name=\"endTime\"\n                        defaultValue={values.endTime.split('T')[0]}\n                        onChange={handleChange}\n                        placeholder=\"Thời gian kết thúc\"\n                      />\n                      <CInvalidFeedback className=\"d-block\">{errors.endTime}</CInvalidFeedback>\n                    </CFormGroup>\n                    <CFormGroup variant=\"custom-checkbox\" className=\"pb-3\">\n                      <CInputCheckbox\n                        custom\n                        id=\"isLock\"\n                        name=\"isLock\"\n                        valid={!errors.isLock}\n                        invalid={touched.isLock && !!errors.isLock}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                      />\n                      <CLabel variant=\"custom-checkbox\" htmlFor=\"isLock\">\n                        Khóa chương trình\n                      </CLabel>\n                    </CFormGroup>\n                  </CCol>\n                  <CButton color=\"primary\" variant=\"outline\" shape=\"square\" size=\"sm\" className=\"ml-3\" onClick={onAddProduct}>\n                    <CIcon name={'cilArrowCircleRight'} className=\"mr-2\" />\n                    Thêm sản phẩm\n                  </CButton>\n                  <CCol lg=\"12\">\n                    <CRow className=\"mt-3\">\n                      <CCol lg=\"5\">\n                        <CLabel>Sản phẩm</CLabel>\n                      </CCol>\n                      <CCol lg=\"3\">\n                        <CLabel>Mua</CLabel>\n                      </CCol>\n                      <CCol lg=\"3\">\n                        <CLabel>Tặng</CLabel>\n                      </CCol>\n                    </CRow>\n\n                    {productList &&\n                      productList.map((item, index) => {\n                        return (\n                          <CRow className=\"\">\n                            <CCol lg=\"5\">\n                              <Select\n                                value={{\n                                  value: item?.product,\n                                  label: `${item?.product?.code || ''}-${item?.product?.name || ''}`\n                                }}\n                                onInputChange={onSearchProduct}\n                                onChange={event => onSelectedProduct(event, index)}\n                                options={products.map(item => ({\n                                  value: item,\n                                  label: `${item.code}-${item.name}`\n                                }))}\n                              />\n                            </CCol>\n                            <CCol lg=\"3\">\n                              <CInput\n                                type=\"number\"\n                                name=\"buy\"\n                                id=\"buy\"\n                                placeholder=\"Dung tích\"\n                                autoComplete=\"buy\"\n                                onChange={event => onChangeProductPromotion(event.target.value, index, 'buy')}\n                                invalid={!productList[index].buy}\n                                valid={productList[index].buy}\n                                onBlur={handleBlur}\n                                value={productList[index].buy}\n                              />\n                              {!productList[index].buy && <CInvalidFeedback className=\"d-block\">Giá trị phải lớn hơn 0</CInvalidFeedback>}\n                            </CCol>\n                            <CCol lg=\"3\">\n                              <CInput\n                                type=\"number\"\n                                name=\"gift\"\n                                id=\"gift\"\n                                placeholder=\"Dung tích\"\n                                autoComplete=\"gift\"\n                                onChange={event => onChangeProductPromotion(event.target.value, index, 'gift')}\n                                invalid={!productList[index].gift}\n                                valid={productList[index].gift}\n                                onBlur={handleBlur}\n                                value={productList[index].gift}\n                              />\n                              {!productList[index].gift && <CInvalidFeedback className=\"d-block\">Giá trị phải lớn hơn 0</CInvalidFeedback>}\n                            </CCol>\n                            <CCol lg=\"1\">\n                              <CButton color=\"danger\" variant=\"outline\" shape=\"square\" size=\"sm\" onClick={() => onRemoveProduct(index)}>\n                                <CIcon name=\"cilXCircle\" />\n                              </CButton>\n                            </CCol>\n                          </CRow>\n                        );\n                      })}\n                  </CCol>\n                </CRow>\n                <CFormGroup className=\"d-flex justify-content-center mt-3\">\n                  <CButton type=\"submit\" size=\"lg\" color=\"primary\" disabled={initialState.loading}>\n                    <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Lưu lại'}\n                  </CButton>\n                  <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={handleReset} className=\"ml-5\">\n                    <CIcon name=\"cil-ban\" /> Xóa nhập liệu\n                  </CButton>\n                </CFormGroup>\n              </CForm>\n            );\n          }}\n        </Formik>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default EditPromotion;\n"]}]}