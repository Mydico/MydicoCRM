{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/EditPromotion.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/EditPromotion.js","mtime":1619210640209},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90ZW1wbGF0ZU9iamVjdDsKCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKHN0cmluZ3MsIHJhdykgeyBpZiAoIXJhdykgeyByYXcgPSBzdHJpbmdzLnNsaWNlKDApOyB9IHJldHVybiBPYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHN0cmluZ3MsIHsgcmF3OiB7IHZhbHVlOiBPYmplY3QuZnJlZXplKHJhdykgfSB9KSk7IH0KCmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IENCdXR0b24sIENDYXJkLCBDQ2FyZEhlYWRlciwgQ0NhcmRCb2R5LCBDQ29sLCBDRm9ybSwgQ0ludmFsaWRGZWVkYmFjaywgQ0Zvcm1Hcm91cCwgQ0xhYmVsLCBDSW5wdXQsIENSb3csIENTZWxlY3QsIENDYXJkVGl0bGUsIENUZXh0YXJlYSwgQ0lucHV0Q2hlY2tib3ggfSBmcm9tICdAY29yZXVpL3JlYWN0JzsKaW1wb3J0IENJY29uIGZyb20gJ0Bjb3JldWkvaWNvbnMtcmVhY3QnOwppbXBvcnQgeyBGb3JtaWsgfSBmcm9tICdmb3JtaWsnOwppbXBvcnQgKiBhcyBZdXAgZnJvbSAneXVwJzsKaW1wb3J0IHsgdXNlRGlzcGF0Y2gsIHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnOwppbXBvcnQgeyBnZXREZXRhaWxQcm9tb3Rpb24sIHVwZGF0ZVByb21vdGlvbiB9IGZyb20gJy4vcHJvbW90aW9uLmFwaSc7CmltcG9ydCB7IHVzZUhpc3RvcnkgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJzsKaW1wb3J0IHsgZmV0Y2hpbmcsIGdsb2JhbGl6ZWRQcm9tb3Rpb25TZWxlY3RvcnMgfSBmcm9tICcuL3Byb21vdGlvbi5yZWR1Y2VyJzsKaW1wb3J0IHsgZ2V0Q3VzdG9tZXJUeXBlIH0gZnJvbSAnLi4vLi4vY3VzdG9tZXIvQ3VzdG9tZXJUeXBlL2N1c3RvbWVyLXR5cGUuYXBpJzsKaW1wb3J0IHsgZ2xvYmFsaXplZGN1c3RvbWVyVHlwZVNlbGVjdG9ycyB9IGZyb20gJy4uLy4uL2N1c3RvbWVyL0N1c3RvbWVyVHlwZS9jdXN0b21lci10eXBlLnJlZHVjZXInOwppbXBvcnQgU2VsZWN0IGZyb20gJ3JlYWN0LXNlbGVjdCc7CmltcG9ydCB7IGdldFByb2R1Y3QgfSBmcm9tICcuLi8uLi9wcm9kdWN0L1Byb2R1Y3RMaXN0L3Byb2R1Y3QuYXBpJzsKaW1wb3J0IHsgZ2xvYmFsaXplZFByb2R1Y3RTZWxlY3RvcnMgfSBmcm9tICcuLi8uLi9wcm9kdWN0L1Byb2R1Y3RMaXN0L3Byb2R1Y3QucmVkdWNlcic7Cgp2YXIgdmFsaWRhdGlvblNjaGVtYSA9IGZ1bmN0aW9uIHZhbGlkYXRpb25TY2hlbWEoKSB7CiAgcmV0dXJuIFl1cC5vYmplY3QoKS5zaGFwZSh7CiAgICBuYW1lOiBZdXAuc3RyaW5nKCkubWluKDUoX3RlbXBsYXRlT2JqZWN0IHx8IChfdGVtcGxhdGVPYmplY3QgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiVFx4RUFuIHBoXHUxRUEzaSBsXHUxRURCbiBoXHUwMUExbiA1IGtceEVEIHRcdTFFRjEiXSkpKSkucmVxdWlyZWQoJ1TDqm4ga2jDtG5nIMSR4buDIHRy4buRbmcnKSwKICAgIHN0YXJ0VGltZTogWXVwLnN0cmluZygpLnJlcXVpcmVkKCdOZ8OgeSBi4bqvdCDEkeG6p3Uga2jDtG5nIMSR4buDIHRy4buRbmcnKSwKICAgIGVuZFRpbWU6IFl1cC5zdHJpbmcoKS5yZXF1aXJlZCgnTmfDoHkga+G6v3QgdGjDumMga2jDtG5nIMSR4buDIHRy4buRbmcnKQogIH0pOwp9OwoKaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvdXRpbHMvbm9ybWFsaXplJzsKCnZhciBFZGl0UHJvbW90aW9uID0gZnVuY3Rpb24gRWRpdFByb21vdGlvbihwcm9wcykgewogIHZhciBfdXNlU2VsZWN0b3IgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5wcm9tb3Rpb247CiAgfSksCiAgICAgIGluaXRpYWxTdGF0ZSA9IF91c2VTZWxlY3Rvci5pbml0aWFsU3RhdGUsCiAgICAgIGVudGl0aWVzID0gX3VzZVNlbGVjdG9yLmVudGl0aWVzOwoKICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpOwogIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpOwogIHZhciBwcm9tb3Rpb25Hcm91cCA9IFtdOwogIHZhciBpbml0aWFsVmFsdWVzID0gdXNlUmVmKHsKICAgIG5hbWU6ICcnLAogICAgZGVzY3JpcHRpb246ICcnLAogICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICBlbmRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICBpc0xvY2s6IGZhbHNlLAogICAgY3VzdG9tZXJUeXBlOiBudWxsCiAgfSk7CiAgdmFyIHNlbGVjdEFsbCA9IGdsb2JhbGl6ZWRjdXN0b21lclR5cGVTZWxlY3RvcnMuc2VsZWN0QWxsOwogIHZhciBjdXN0b21lclR5cGUgPSB1c2VTZWxlY3RvcihzZWxlY3RBbGwpOwogIHZhciBzZWxlY3RBbGxQcm9kdWN0ID0gZ2xvYmFsaXplZFByb2R1Y3RTZWxlY3RvcnMuc2VsZWN0QWxsOwogIHZhciBwcm9kdWN0cyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbFByb2R1Y3QpOwogIHZhciBzZWxlY3RCeUlkID0gZ2xvYmFsaXplZFByb21vdGlvblNlbGVjdG9ycy5zZWxlY3RCeUlkOwogIHZhciBwcm9tb3Rpb24gPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzZWxlY3RCeUlkKHN0YXRlLCBwcm9wcy5tYXRjaC5wYXJhbXMuaWQpOwogIH0pOwoKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUobnVsbCksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBpbml0VmFsdWVzID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0SW5pdFZhbHVlcyA9IF91c2VTdGF0ZTJbMV07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBkaXNwYXRjaChnZXRDdXN0b21lclR5cGUoKSk7CiAgICBkaXNwYXRjaChnZXRQcm9kdWN0KCkpOwogICAgZGlzcGF0Y2goZ2V0RGV0YWlsUHJvbW90aW9uKHByb3BzLm1hdGNoLnBhcmFtcy5pZCkpOwogIH0sIFtdKTsKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgY29uc29sZS5sb2cocHJvbW90aW9uKTsKCiAgICBpZiAocHJvbW90aW9uKSB7CiAgICAgIHNldEluaXRWYWx1ZXMocHJvbW90aW9uKTsKICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwcm9tb3Rpb24ucHJvbW90aW9uUHJvZHVjdCkpKTsKICAgICAgc2V0UHJvZHVjdExpc3QoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwcm9tb3Rpb24ucHJvbW90aW9uUHJvZHVjdCkpKTsKICAgIH0KICB9LCBbZW50aXRpZXNdKTsKCiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShbXSksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgcHJvZHVjdExpc3QgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRQcm9kdWN0TGlzdCA9IF91c2VTdGF0ZTRbMV07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoY3VzdG9tZXJUeXBlLmxlbmd0aCA+IDApIHsKICAgICAgaW5pdGlhbFZhbHVlcy5jdXJyZW50LmN1c3RvbWVyVHlwZSA9IGN1c3RvbWVyVHlwZVswXS5pZDsKICAgIH0KICB9LCBbY3VzdG9tZXJUeXBlXSk7CgogIHZhciBvbkFkZFByb2R1Y3QgPSBmdW5jdGlvbiBvbkFkZFByb2R1Y3QoKSB7CiAgICB2YXIgZGF0YSA9IHsKICAgICAgcHJvZHVjdDogewogICAgICAgIGlkOiAnJwogICAgICB9LAogICAgICBidXk6IDAsCiAgICAgIGdpZnQ6IDAKICAgIH07CiAgICBzZXRQcm9kdWN0TGlzdChbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KSwgW2RhdGFdKSk7CiAgfTsKCiAgdmFyIG9uU2VsZWN0ZWRQcm9kdWN0ID0gZnVuY3Rpb24gb25TZWxlY3RlZFByb2R1Y3QoaXRlbSwgaW5kZXgpIHsKICAgIHZhciBjb3B5QXJyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwcm9kdWN0TGlzdCkpOwogICAgdmFyIGZvdW5kZWRJbmRleCA9IGNvcHlBcnIuZmluZEluZGV4KGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgIHJldHVybiBwcm9kdWN0LnByb2R1Y3QuaWQgPT09IGl0ZW0udmFsdWU7CiAgICB9KTsKCiAgICBpZiAoZm91bmRlZEluZGV4ID49IDApIHsKICAgICAgY29weUFyci5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSBlbHNlIHsKICAgICAgY29weUFycltpbmRleF0ucHJvZHVjdCA9IHsKICAgICAgICBpZDogaXRlbS52YWx1ZQogICAgICB9OwogICAgfQoKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24gPSBmdW5jdGlvbiBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24odmFsdWUsIGluZGV4LCB0eXBlKSB7CiAgICB2YXIgY29weUFyciA9IF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCk7CgogICAgY29weUFycltpbmRleF1bdHlwZV0gPSB2YWx1ZTsKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvblN1Ym1pdCA9IGZ1bmN0aW9uIG9uU3VibWl0KHZhbHVlcywgX3JlZikgewogICAgdmFyIHJlc2V0Rm9ybSA9IF9yZWYucmVzZXRGb3JtOwogICAgZGlzcGF0Y2goZmV0Y2hpbmcoKSk7CiAgICB2YWx1ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbHVlcykpOwogICAgaWYgKCF2YWx1ZXMuY3VzdG9tZXJUeXBlKSB2YWx1ZXMuY3VzdG9tZXJUeXBlID0gaW5pdGlhbFZhbHVlcy5jdXJyZW50LmN1c3RvbWVyVHlwZTsKICAgIHZhbHVlcy5wcm9tb3Rpb25Qcm9kdWN0ID0gcHJvZHVjdExpc3Q7CiAgICBkaXNwYXRjaCh1cGRhdGVQcm9tb3Rpb24odmFsdWVzKSk7CiAgICByZXNldEZvcm0oKTsKICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGluaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3MpIHsKICAgICAgaGlzdG9yeS5nb0JhY2soKTsKICAgIH0KICB9LCBbaW5pdGlhbFN0YXRlLnVwZGF0aW5nU3VjY2Vzc10pOwogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIHsKICAgIGNsYXNzOiAiY2FyZC1oZWFkZXIiCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRUaXRsZSwgbnVsbCwgIkNoXHUxRUM5bmggc1x1MUVFRGEgY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCBiXHhFMW4gaFx4RTBuZyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtaWssIHsKICAgIGluaXRpYWxWYWx1ZXM6IGluaXRWYWx1ZXMgfHwgaW5pdGlhbFZhbHVlcy5jdXJyZW50LAogICAgZW5hYmxlUmVpbml0aWFsaXplOiB0cnVlLAogICAgdmFsaWRhdGU6IHZhbGlkYXRlKHZhbGlkYXRpb25TY2hlbWEpLAogICAgb25TdWJtaXQ6IG9uU3VibWl0CiAgfSwgZnVuY3Rpb24gKF9yZWYyKSB7CiAgICB2YXIgX2Vycm9ycyRuYW1lLCBfdmFsdWVzJGN1c3RvbWVyVHlwZTsKCiAgICB2YXIgdmFsdWVzID0gX3JlZjIudmFsdWVzLAogICAgICAgIGVycm9ycyA9IF9yZWYyLmVycm9ycywKICAgICAgICB0b3VjaGVkID0gX3JlZjIudG91Y2hlZCwKICAgICAgICBoYW5kbGVDaGFuZ2UgPSBfcmVmMi5oYW5kbGVDaGFuZ2UsCiAgICAgICAgaGFuZGxlQmx1ciA9IF9yZWYyLmhhbmRsZUJsdXIsCiAgICAgICAgaGFuZGxlU3VibWl0ID0gX3JlZjIuaGFuZGxlU3VibWl0LAogICAgICAgIHNldEZpZWxkVmFsdWUgPSBfcmVmMi5zZXRGaWVsZFZhbHVlLAogICAgICAgIGhhbmRsZVJlc2V0ID0gX3JlZjIuaGFuZGxlUmVzZXQ7CiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm0sIHsKICAgICAgb25TdWJtaXQ6IGhhbmRsZVN1Ym1pdCwKICAgICAgbm9WYWxpZGF0ZTogdHJ1ZSwKICAgICAgbmFtZTogInNpbXBsZUZvcm0iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAibGFzdE5hbWUiCiAgICB9LCAiVFx4RUFuIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmggYlx4RTFuIGhceEUwbmciKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgbmFtZTogIm5hbWUiLAogICAgICBpZDogIm5hbWUiLAogICAgICBwbGFjZWhvbGRlcjogIlRceEVBbiBjaFx1MDFCMFx1MDFBMW5nIHRyXHhFQ25oIGJceEUxbiBoXHhFMG5nIiwKICAgICAgYXV0b0NvbXBsZXRlOiAibmFtZSIsCiAgICAgIHZhbGlkOiAoZXJyb3JzID09PSBudWxsIHx8IGVycm9ycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvcnMkbmFtZSA9IGVycm9ycy5uYW1lKSA9PT0gbnVsbCB8fCBfZXJyb3JzJG5hbWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvcnMkbmFtZS5sZW5ndGgpID4gNSB8fCBudWxsLAogICAgICBpbnZhbGlkOiBlcnJvcnMubmFtZSwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5uYW1lCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgbnVsbCwgZXJyb3JzLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJ1c2VyTmFtZSIKICAgIH0sICJNXHhGNCB0XHUxRUEzIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENUZXh0YXJlYSwgewogICAgICB0eXBlOiAidGV4dCIsCiAgICAgIG5hbWU6ICJkZXNjcmlwdGlvbiIsCiAgICAgIGlkOiAiZGVzY3JpcHRpb24iLAogICAgICBwbGFjZWhvbGRlcjogIk1ceEY0IHRcdTFFQTMiLAogICAgICBhdXRvQ29tcGxldGU6ICJkZXNjcmlwdGlvbiIsCiAgICAgIHZhbGlkOiBlcnJvcnMuZGVzY3JpcHRpb24gfHwgbnVsbCwKICAgICAgaW52YWxpZDogdG91Y2hlZC5kZXNjcmlwdGlvbiAmJiAhIWVycm9ycy5kZXNjcmlwdGlvbiwKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICB2YWx1ZTogdmFsdWVzLmRlc2NyaXB0aW9uCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgbnVsbCwgZXJyb3JzLmRlc2NyaXB0aW9uKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAiY3VzdG9tZXJUeXBlIgogICAgfSwgIlx1MDExMFx1MUVEMWkgdFx1MDFCMFx1MUVFM25nIGtoXHhFMWNoIGhceEUwbmcgXHhFMXAgZFx1MUVFNW5nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENTZWxlY3QsIHsKICAgICAgY3VzdG9tOiB0cnVlLAogICAgICBuYW1lOiAiY3VzdG9tZXJUeXBlIiwKICAgICAgaWQ6ICJjdXN0b21lclR5cGUiLAogICAgICB2YWx1ZTogKF92YWx1ZXMkY3VzdG9tZXJUeXBlID0gdmFsdWVzLmN1c3RvbWVyVHlwZSkgPT09IG51bGwgfHwgX3ZhbHVlcyRjdXN0b21lclR5cGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZXMkY3VzdG9tZXJUeXBlLmlkLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIHNldEZpZWxkVmFsdWUoJ2N1c3RvbWVyVHlwZScsIGUudGFyZ2V0LnZhbHVlKTsKICAgICAgfQogICAgfSwgY3VzdG9tZXJUeXBlICYmIGN1c3RvbWVyVHlwZS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJvcHRpb24iLCB7CiAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgIHZhbHVlOiBpdGVtLmlkCiAgICAgIH0sIGl0ZW0ubmFtZSk7CiAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIG51bGwsIGVycm9ycy5jdXN0b21lclR5cGUpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI2IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgIH0sICJUaFx1MUVERGkgZ2lhbiBiXHUxRUFGdCBcdTAxMTFcdTFFQTd1IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICB0eXBlOiAiZGF0ZSIsCiAgICAgIGlkOiAic3RhcnRUaW1lIiwKICAgICAgbmFtZTogInN0YXJ0VGltZSIsCiAgICAgIGRlZmF1bHRWYWx1ZTogdmFsdWVzLnN0YXJ0VGltZS5zcGxpdCgnVCcpWzBdLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBwbGFjZWhvbGRlcjogIlRoXHUxRUREaSBnaWFuIGJcdTFFQUZ0IFx1MDExMVx1MUVBN3UiCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLnN0YXJ0VGltZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInBhc3N3b3JkIgogICAgfSwgIlRoXHUxRUREaSBnaWFuIGtcdTFFQkZ0IHRoXHhGQWMiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgIHR5cGU6ICJkYXRlIiwKICAgICAgaWQ6ICJlbmRUaW1lIiwKICAgICAgbmFtZTogImVuZFRpbWUiLAogICAgICBkZWZhdWx0VmFsdWU6IHZhbHVlcy5lbmRUaW1lLnNwbGl0KCdUJylbMF0sCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIHBsYWNlaG9sZGVyOiAiVGhcdTFFRERpIGdpYW4ga1x1MUVCRnQgdGhceEZBYyIKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCBlcnJvcnMuZW5kVGltZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCB7CiAgICAgIHZhcmlhbnQ6ICJjdXN0b20tY2hlY2tib3giLAogICAgICBjbGFzc05hbWU6ICJwYi0zIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0Q2hlY2tib3gsIHsKICAgICAgY3VzdG9tOiB0cnVlLAogICAgICBpZDogImlzTG9jayIsCiAgICAgIG5hbWU6ICJpc0xvY2siLAogICAgICB2YWxpZDogIWVycm9ycy5pc0xvY2ssCiAgICAgIGludmFsaWQ6IHRvdWNoZWQuaXNMb2NrICYmICEhZXJyb3JzLmlzTG9jaywKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIHZhcmlhbnQ6ICJjdXN0b20tY2hlY2tib3giLAogICAgICBodG1sRm9yOiAiaXNMb2NrIgogICAgfSwgIktoXHhGM2EgY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCIpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgIHNpemU6ICJzbSIsCiAgICAgIGNsYXNzTmFtZTogIm1sLTMiLAogICAgICBvbkNsaWNrOiBvbkFkZFByb2R1Y3QKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICdjaWxBcnJvd0NpcmNsZVJpZ2h0JywKICAgICAgY2xhc3NOYW1lOiAibXItMiIKICAgIH0pLCAiVGhceEVBbSBzXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjEyIgogICAgfSwgcHJvZHVjdExpc3QgJiYgcHJvZHVjdExpc3QubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICB2YXIgX2l0ZW0kcHJvZHVjdCwgX2l0ZW0kcHJvZHVjdDIsIF9pdGVtJHByb2R1Y3QzOwoKICAgICAgY29uc29sZS5sb2coaXRlbSk7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCB7CiAgICAgICAga2V5OiBpbmRleCwKICAgICAgICBjbGFzc05hbWU6ICJtdC0zIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgICAgbGc6ICI0IgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICAgIH0sICJTXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgIHZhbHVlOiAoX2l0ZW0kcHJvZHVjdCA9IGl0ZW0ucHJvZHVjdCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdC5pZCwKICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQoKF9pdGVtJHByb2R1Y3QyID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdDIuY29kZSwgIi0iKS5jb25jYXQoKF9pdGVtJHByb2R1Y3QzID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0MyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdDMubmFtZSkKICAgICAgICB9LAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uU2VsZWN0ZWRQcm9kdWN0KGV2ZW50LCBpbmRleCk7CiAgICAgICAgfSwKICAgICAgICBvcHRpb25zOiBwcm9kdWN0cy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbHVlOiBpdGVtLmlkLAogICAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KGl0ZW0uY29kZSwgIi0iKS5jb25jYXQoaXRlbS5uYW1lKQogICAgICAgICAgfTsKICAgICAgICB9KQogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICBsZzogIjQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgICAgfSwgIk11YSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICBuYW1lOiAiYnV5IiwKICAgICAgICBpZDogImJ1eSIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJEdW5nIHRceEVEY2giLAogICAgICAgIGF1dG9Db21wbGV0ZTogImJ1eSIsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gb25DaGFuZ2VQcm9kdWN0UHJvbW90aW9uKGV2ZW50LnRhcmdldC52YWx1ZSwgaW5kZXgsICdidXknKTsKICAgICAgICB9LAogICAgICAgIGludmFsaWQ6ICFwcm9kdWN0TGlzdFtpbmRleF0uYnV5LAogICAgICAgIHZhbGlkOiBwcm9kdWN0TGlzdFtpbmRleF0uYnV5LAogICAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgICB2YWx1ZTogcHJvZHVjdExpc3RbaW5kZXhdLmJ1eQogICAgICB9KSwgIXByb2R1Y3RMaXN0W2luZGV4XS5idXkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICAgIH0sICJHaVx4RTEgdHJcdTFFQ0IgcGhcdTFFQTNpIGxcdTFFREJuIGhcdTAxQTFuIDAiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICBsZzogIjQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgICAgfSwgIlRcdTFFQjduZyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICBuYW1lOiAiZ2lmdCIsCiAgICAgICAgaWQ6ICJnaWZ0IiwKICAgICAgICBwbGFjZWhvbGRlcjogIkR1bmcgdFx4RURjaCIsCiAgICAgICAgYXV0b0NvbXBsZXRlOiAiZ2lmdCIsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gb25DaGFuZ2VQcm9kdWN0UHJvbW90aW9uKGV2ZW50LnRhcmdldC52YWx1ZSwgaW5kZXgsICdnaWZ0Jyk7CiAgICAgICAgfSwKICAgICAgICBpbnZhbGlkOiAhcHJvZHVjdExpc3RbaW5kZXhdLmdpZnQsCiAgICAgICAgdmFsaWQ6IHByb2R1Y3RMaXN0W2luZGV4XS5naWZ0LAogICAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgICB2YWx1ZTogcHJvZHVjdExpc3RbaW5kZXhdLmdpZnQKICAgICAgfSksICFwcm9kdWN0TGlzdFtpbmRleF0uZ2lmdCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgICAgfSwgIkdpXHhFMSB0clx1MUVDQiBwaFx1MUVBM2kgbFx1MUVEQm4gaFx1MDFBMW4gMCIpKSkpOwogICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICBjbGFzc05hbWU6ICJkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgIHNpemU6ICJsZyIsCiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIGRpc2FibGVkOiBpbml0aWFsU3RhdGUubG9hZGluZwogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogImNpbC1zYXZlIgogICAgfSksICIgIiwgaW5pdGlhbFN0YXRlLmxvYWRpbmcgPyAnxJBhbmcgeOG7rSBsw70nIDogJ0zGsHUgbOG6oWknKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICB0eXBlOiAicmVzZXQiLAogICAgICBzaXplOiAibGciLAogICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgIG9uQ2xpY2s6IGhhbmRsZVJlc2V0LAogICAgICBjbGFzc05hbWU6ICJtbC01IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogImNpbC1iYW4iCiAgICB9KSwgIiBYXHhGM2EgbmhcdTFFQURwIGxpXHUxRUM3dSIpKSk7CiAgfSkpKTsKfTsKCmV4cG9ydCBkZWZhdWx0IEVkaXRQcm9tb3Rpb247"},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/EditPromotion.js"],"names":["React","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CInvalidFeedback","CFormGroup","CLabel","CInput","CRow","CSelect","CCardTitle","CTextarea","CInputCheckbox","CIcon","Formik","Yup","useDispatch","useSelector","getDetailPromotion","updatePromotion","useHistory","fetching","globalizedPromotionSelectors","getCustomerType","globalizedcustomerTypeSelectors","Select","getProduct","globalizedProductSelectors","validationSchema","object","shape","name","string","min","required","startTime","endTime","validate","EditPromotion","props","state","promotion","initialState","entities","dispatch","history","promotionGroup","initialValues","description","Date","toISOString","isLock","customerType","selectAll","selectAllProduct","products","selectById","match","params","id","initValues","setInitValues","console","log","JSON","parse","stringify","promotionProduct","setProductList","productList","length","current","onAddProduct","data","product","buy","gift","onSelectedProduct","item","index","copyArr","foundedIndex","findIndex","value","splice","onChangeProductPromotion","type","onSubmit","values","resetForm","updatingSuccess","goBack","errors","touched","handleChange","handleBlur","handleSubmit","setFieldValue","handleReset","e","target","map","split","label","code","event","loading"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CInvalidFeedback,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CSelect,\n  CCardTitle,\n  CTextarea,\n  CInputCheckbox,\n} from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport {Formik} from 'formik';\nimport * as Yup from 'yup';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {getDetailPromotion, updatePromotion} from './promotion.api';\n\n\nimport {useHistory} from 'react-router-dom';\nimport {fetching, globalizedPromotionSelectors} from './promotion.reducer';\n\n\nimport {getCustomerType} from '../../customer/CustomerType/customer-type.api';\nimport {globalizedcustomerTypeSelectors} from '../../customer/CustomerType/customer-type.reducer';\nimport Select from 'react-select';\nimport {getProduct} from '../../product/ProductList/product.api';\nimport {globalizedProductSelectors} from '../../product/ProductList/product.reducer';\n\nconst validationSchema = function() {\n  return Yup.object().shape({\n    name: Yup.string()\n        .min(5 `Tên phải lớn hơn 5 kí tự`)\n        .required('Tên không để trống'),\n    startTime: Yup.string().required('Ngày bắt đầu không để trống'),\n    endTime: Yup.string().required('Ngày kết thúc không để trống'),\n  });\n};\n\nimport {validate} from '../../../../shared/utils/normalize';\n\n\nconst EditPromotion = (props) => {\n  const {initialState, entities} = useSelector((state) => state.promotion);\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const promotionGroup = [];\n  const initialValues = useRef({\n    name: '',\n    description: '',\n    startTime: new Date().toISOString(),\n    endTime: new Date().toISOString(),\n    isLock: false,\n    customerType: null,\n  });\n  const {selectAll} = globalizedcustomerTypeSelectors;\n  const customerType = useSelector(selectAll);\n  const {selectAll: selectAllProduct} = globalizedProductSelectors;\n  const products = useSelector(selectAllProduct);\n  const {selectById} = globalizedPromotionSelectors;\n  const promotion = useSelector((state) => selectById(state, props.match.params.id));\n  const [initValues, setInitValues] = useState(null);\n\n  useEffect(() => {\n    dispatch(getCustomerType());\n    dispatch(getProduct());\n    dispatch(getDetailPromotion(props.match.params.id));\n  }, []);\n\n  useEffect(() => {\n    console.log(promotion);\n    if (promotion) {\n      setInitValues(promotion);\n      console.log(JSON.parse(JSON.stringify(promotion.promotionProduct)));\n      setProductList(JSON.parse(JSON.stringify(promotion.promotionProduct)));\n    }\n  }, [entities]);\n\n  const [productList, setProductList] = useState([]);\n\n  useEffect(() => {\n    if (customerType.length > 0) {\n      initialValues.current.customerType = customerType[0].id;\n    }\n  }, [customerType]);\n\n  const onAddProduct = () => {\n    const data = {product: {id: ''}, buy: 0, gift: 0};\n    setProductList([...productList, data]);\n  };\n\n  const onSelectedProduct = (item, index) => {\n    const copyArr = JSON.parse(JSON.stringify(productList));\n    const foundedIndex = copyArr.findIndex((product) => product.product.id === item.value);\n    if (foundedIndex >= 0) {\n      copyArr.splice(index, 1);\n    } else {\n      copyArr[index].product = {id: item.value};\n    }\n    setProductList(copyArr);\n  };\n\n  const onChangeProductPromotion = (value, index, type) => {\n    const copyArr = [...productList];\n    copyArr[index][type] = value;\n    setProductList(copyArr);\n  };\n\n  const onSubmit = (values, {resetForm}) => {\n    dispatch(fetching());\n    values = JSON.parse(JSON.stringify(values));\n    if (!values.customerType) values.customerType = initialValues.current.customerType;\n    values.promotionProduct = productList;\n    dispatch(updatePromotion(values));\n    resetForm();\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  return (\n    <CCard>\n      <CCardHeader class=\"card-header\">\n        <CCardTitle>Chỉnh sửa chương trình bán hàng</CCardTitle>\n      </CCardHeader>\n      <CCardBody>\n        <Formik\n          initialValues={initValues || initialValues.current}\n          enableReinitialize\n          validate={validate(validationSchema)}\n          onSubmit={onSubmit}\n        >\n          {({\n            values,\n            errors,\n            touched,\n\n\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue,\n\n\n            handleReset\n            ,\n          }) => {\n            return (\n              <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n                <CRow>\n                  <CCol lg=\"6\">\n                    <CFormGroup>\n                      <CLabel htmlFor=\"lastName\">Tên chương trình bán hàng</CLabel>\n                      <CInput\n                        type=\"text\"\n                        name=\"name\"\n                        id=\"name\"\n                        placeholder=\"Tên chương trình bán hàng\"\n                        autoComplete=\"name\"\n                        valid={errors?.name?.length > 5 || null}\n                        invalid={errors.name}\n                        required\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.name}\n                      />\n                      <CInvalidFeedback>{errors.name}</CInvalidFeedback>\n                    </CFormGroup>\n                    <CFormGroup>\n                      <CLabel htmlFor=\"userName\">Mô tả</CLabel>\n                      <CTextarea\n                        type=\"text\"\n                        name=\"description\"\n                        id=\"description\"\n                        placeholder=\"Mô tả\"\n                        autoComplete=\"description\"\n                        valid={errors.description || null}\n                        invalid={touched.description && !!errors.description}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.description}\n                      />\n                      <CInvalidFeedback>{errors.description}</CInvalidFeedback>\n                    </CFormGroup>\n                    <CFormGroup>\n                      <CLabel htmlFor=\"customerType\">Đối tượng khách hàng áp dụng</CLabel>\n                      <CSelect\n                        custom\n                        name=\"customerType\"\n                        id=\"customerType\"\n                        value={values.customerType?.id}\n                        onChange={(e) => {\n                          setFieldValue('customerType', e.target.value);\n                        }}\n                      >\n                        {customerType &&\n                          customerType.map((item) => (\n                            <option key={item.id} value={item.id}>\n                              {item.name}\n                            </option>\n                          ))}\n                      </CSelect>\n                      <CInvalidFeedback>{errors.customerType}</CInvalidFeedback>\n                    </CFormGroup>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <CFormGroup>\n                      <CLabel htmlFor=\"password\">Thời gian bắt đầu</CLabel>\n                      <CInput\n                        type=\"date\"\n                        id=\"startTime\"\n                        name=\"startTime\"\n                        defaultValue={values.startTime.split('T')[0]}\n                        onChange={handleChange}\n                        placeholder=\"Thời gian bắt đầu\"\n                      />\n                      <CInvalidFeedback className=\"d-block\">{errors.startTime}</CInvalidFeedback>\n                    </CFormGroup>\n\n                    <CFormGroup>\n                      <CLabel htmlFor=\"password\">Thời gian kết thúc</CLabel>\n                      <CInput\n                        type=\"date\"\n                        id=\"endTime\"\n                        name=\"endTime\"\n                        defaultValue={values.endTime.split('T')[0]}\n                        onChange={handleChange}\n                        placeholder=\"Thời gian kết thúc\"\n                      />\n                      <CInvalidFeedback className=\"d-block\">{errors.endTime}</CInvalidFeedback>\n                    </CFormGroup>\n                    <CFormGroup variant=\"custom-checkbox\" className=\"pb-3\">\n                      <CInputCheckbox\n                        custom\n                        id=\"isLock\"\n                        name=\"isLock\"\n                        valid={!errors.isLock}\n                        invalid={touched.isLock && !!errors.isLock}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                      />\n                      <CLabel variant=\"custom-checkbox\" htmlFor=\"isLock\">\n                        Khóa chương trình\n                      </CLabel>\n                    </CFormGroup>\n                  </CCol>\n                  <CButton color=\"primary\" variant=\"outline\" shape=\"square\" size=\"sm\" className=\"ml-3\" onClick={onAddProduct}>\n                    <CIcon name={'cilArrowCircleRight'} className=\"mr-2\" />\n                    Thêm sản phẩm\n                  </CButton>\n                  <CCol lg=\"12\">\n                    {productList &&\n                      productList.map((item, index) => {\n                        console.log(item);\n                        return (\n                          <CFormGroup key={index} className=\"mt-3\">\n                            <CRow>\n                              <CCol lg=\"4\">\n                                <CLabel htmlFor=\"password\">Sản phẩm</CLabel>\n                                <Select\n                                  value={{\n                                    value: item.product?.id,\n                                    label: `${item.product?.code}-${item.product?.name}`,\n                                  }}\n                                  onChange={(event) => onSelectedProduct(event, index)}\n                                  options={products.map((item) => ({\n                                    value: item.id,\n                                    label: `${item.code}-${item.name}`,\n                                  }))}\n                                />\n                              </CCol>\n                              <CCol lg=\"4\">\n                                <CLabel htmlFor=\"password\">Mua</CLabel>\n                                <CInput\n                                  type=\"number\"\n                                  name=\"buy\"\n                                  id=\"buy\"\n                                  placeholder=\"Dung tích\"\n                                  autoComplete=\"buy\"\n                                  onChange={(event) => onChangeProductPromotion(event.target.value, index, 'buy')}\n                                  invalid={!productList[index].buy}\n                                  valid={productList[index].buy}\n                                  onBlur={handleBlur}\n                                  value={productList[index].buy}\n                                />\n                                {!productList[index].buy && <CInvalidFeedback className=\"d-block\">Giá trị phải lớn hơn 0</CInvalidFeedback>}\n                              </CCol>\n                              <CCol lg=\"4\">\n                                <CLabel htmlFor=\"password\">Tặng</CLabel>\n                                <CInput\n                                  type=\"number\"\n                                  name=\"gift\"\n                                  id=\"gift\"\n                                  placeholder=\"Dung tích\"\n                                  autoComplete=\"gift\"\n                                  onChange={(event) => onChangeProductPromotion(event.target.value, index, 'gift')}\n                                  invalid={!productList[index].gift}\n                                  valid={productList[index].gift}\n                                  onBlur={handleBlur}\n                                  value={productList[index].gift}\n                                />\n                                {!productList[index].gift && (\n                                  <CInvalidFeedback className=\"d-block\">Giá trị phải lớn hơn 0</CInvalidFeedback>\n                                )}\n                              </CCol>\n                            </CRow>\n                          </CFormGroup>\n                        );\n                      })}\n                  </CCol>\n                </CRow>\n                <CFormGroup className=\"d-flex justify-content-center\">\n                  <CButton type=\"submit\" size=\"lg\" color=\"primary\" disabled={initialState.loading}>\n                    <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Lưu lại'}\n                  </CButton>\n                  <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={handleReset} className=\"ml-5\">\n                    <CIcon name=\"cil-ban\" /> Xóa nhập liệu\n                  </CButton>\n                </CFormGroup>\n              </CForm>\n            );\n          }}\n        </Formik>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default EditPromotion;\n"]}]}