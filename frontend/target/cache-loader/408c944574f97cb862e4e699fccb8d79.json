{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/config/axios-interceptor.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/config/axios-interceptor.js","mtime":1620834655486},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgU3RvcmFnZSB9IGZyb20gJ3JlYWN0LWpoaXBzdGVyJzsKaW1wb3J0IHsgU0VSVkVSX0FQSV9VUkwgfSBmcm9tICcuL2NvbnN0YW50cyc7CnZhciBUSU1FT1VUID0gMSAqIDYwICogMTAwMDsKYXhpb3MuZGVmYXVsdHMudGltZW91dCA9IFRJTUVPVVQ7CmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSBTRVJWRVJfQVBJX1VSTDsKCnZhciBzZXR1cEF4aW9zSW50ZXJjZXB0b3JzID0gZnVuY3Rpb24gc2V0dXBBeGlvc0ludGVyY2VwdG9ycyhvblVuYXV0aGVudGljYXRlZCkgewogIHZhciBvblJlcXVlc3RTdWNjZXNzID0gZnVuY3Rpb24gb25SZXF1ZXN0U3VjY2Vzcyhjb25maWcpIHsKICAgIHZhciB0b2tlbiA9IFN0b3JhZ2UubG9jYWwuZ2V0KCdhdXRoZW50aWNhdGlvblRva2VuJykgfHwgU3RvcmFnZS5zZXNzaW9uLmdldCgnYXV0aGVudGljYXRpb25Ub2tlbicpOwoKICAgIGlmICh0b2tlbikgewogICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gIkJlYXJlciAiLmNvbmNhdCh0b2tlbik7CiAgICB9CgogICAgcmV0dXJuIGNvbmZpZzsKICB9OwoKICB2YXIgb25SZXNwb25zZVN1Y2Nlc3MgPSBmdW5jdGlvbiBvblJlc3BvbnNlU3VjY2VzcyhyZXNwb25zZSkgewogICAgcmV0dXJuIHJlc3BvbnNlOwogIH07CgogIHZhciBvblJlc3BvbnNlRXJyb3IgPSBmdW5jdGlvbiBvblJlc3BvbnNlRXJyb3IoZXJyKSB7CiAgICB2YXIgc3RhdHVzID0gZXJyLnN0YXR1cyB8fCAoZXJyLnJlc3BvbnNlID8gZXJyLnJlc3BvbnNlLnN0YXR1cyA6IDApOwoKICAgIGlmIChzdGF0dXMgPT09IDQwMyB8fCBzdGF0dXMgPT09IDQwMSkgewogICAgICBvblVuYXV0aGVudGljYXRlZCAmJiBvblVuYXV0aGVudGljYXRlZCgpOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwogIH07CgogIGF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShvblJlcXVlc3RTdWNjZXNzKTsKICBheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKG9uUmVzcG9uc2VTdWNjZXNzLCBvblJlc3BvbnNlRXJyb3IpOwp9OwoKZXhwb3J0IGRlZmF1bHQgc2V0dXBBeGlvc0ludGVyY2VwdG9yczs="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/config/axios-interceptor.js"],"names":["axios","Storage","SERVER_API_URL","TIMEOUT","defaults","timeout","baseURL","setupAxiosInterceptors","onUnauthenticated","onRequestSuccess","config","token","local","get","session","headers","Authorization","onResponseSuccess","response","onResponseError","err","status","Promise","reject","interceptors","request","use"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,QAAsB,gBAAtB;AAEA,SAAQC,cAAR,QAA6B,aAA7B;AAEA,IAAMC,OAAO,GAAG,IAAI,EAAJ,GAAS,IAAzB;AACAH,KAAK,CAACI,QAAN,CAAeC,OAAf,GAAyBF,OAAzB;AACAH,KAAK,CAACI,QAAN,CAAeE,OAAf,GAAyBJ,cAAzB;;AAEA,IAAMK,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,iBAAD,EAAuB;AACpD,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,MAAD,EAAY;AACnC,QAAMC,KAAK,GAAGV,OAAO,CAACW,KAAR,CAAcC,GAAd,CAAkB,qBAAlB,KAA4CZ,OAAO,CAACa,OAAR,CAAgBD,GAAhB,CAAoB,qBAApB,CAA1D;;AACA,QAAIF,KAAJ,EAAW;AACTD,MAAAA,MAAM,CAACK,OAAP,CAAeC,aAAf,oBAAyCL,KAAzC;AACD;;AACD,WAAOD,MAAP;AACD,GAND;;AAOA,MAAMO,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,QAAD;AAAA,WAAcA,QAAd;AAAA,GAA1B;;AACA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,GAAD,EAAS;AAC/B,QAAMC,MAAM,GAAGD,GAAG,CAACC,MAAJ,KAAeD,GAAG,CAACF,QAAJ,GAAeE,GAAG,CAACF,QAAJ,CAAaG,MAA5B,GAAqC,CAApD,CAAf;;AACA,QAAIA,MAAM,KAAK,GAAX,IAAkBA,MAAM,KAAK,GAAjC,EAAsC;AACpCb,MAAAA,iBAAiB,IAAIA,iBAAiB,EAAtC;AACD;;AACD,WAAOc,OAAO,CAACC,MAAR,CAAeH,GAAf,CAAP;AACD,GAND;;AAOApB,EAAAA,KAAK,CAACwB,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+BjB,gBAA/B;AACAT,EAAAA,KAAK,CAACwB,YAAN,CAAmBN,QAAnB,CAA4BQ,GAA5B,CAAgCT,iBAAhC,EAAmDE,eAAnD;AACD,CAlBD;;AAoBA,eAAeZ,sBAAf","sourcesContent":["import axios from 'axios';\nimport {Storage} from 'react-jhipster';\n\nimport {SERVER_API_URL} from './constants';\n\nconst TIMEOUT = 1 * 60 * 1000;\naxios.defaults.timeout = TIMEOUT;\naxios.defaults.baseURL = SERVER_API_URL;\n\nconst setupAxiosInterceptors = (onUnauthenticated) => {\n  const onRequestSuccess = (config) => {\n    const token = Storage.local.get('authenticationToken') || Storage.session.get('authenticationToken');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  };\n  const onResponseSuccess = (response) => response;\n  const onResponseError = (err) => {\n    const status = err.status || (err.response ? err.response.status : 0);\n    if (status === 403 || status === 401) {\n      onUnauthenticated && onUnauthenticated();\n    }\n    return Promise.reject(err);\n  };\n  axios.interceptors.request.use(onRequestSuccess);\n  axios.interceptors.response.use(onResponseSuccess, onResponseError);\n};\n\nexport default setupAxiosInterceptors;\n"]}]}