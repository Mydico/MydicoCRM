{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/CreatePromotion.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/CreatePromotion.js","mtime":1623515626685},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgppbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgQ0J1dHRvbiwgQ0NhcmQsIENDYXJkSGVhZGVyLCBDQ2FyZEJvZHksIENDb2wsIENGb3JtLCBDSW52YWxpZEZlZWRiYWNrLCBDRm9ybUdyb3VwLCBDTGFiZWwsIENJbnB1dCwgQ1JvdywgQ1NlbGVjdCwgQ0NhcmRUaXRsZSwgQ1RleHRhcmVhLCBDSW5wdXRDaGVja2JveCB9IGZyb20gJ0Bjb3JldWkvcmVhY3QvbGliJzsKaW1wb3J0IENJY29uIGZyb20gJ0Bjb3JldWkvaWNvbnMtcmVhY3QvbGliL0NJY29uJzsKOwppbXBvcnQgeyBGb3JtaWsgfSBmcm9tICdmb3JtaWsnOwppbXBvcnQgKiBhcyBZdXAgZnJvbSAneXVwJzsKaW1wb3J0IHsgdXNlRGlzcGF0Y2gsIHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnOwppbXBvcnQgeyBjcmVhdGluZ1Byb21vdGlvbiB9IGZyb20gJy4vcHJvbW90aW9uLmFwaSc7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IHVzZUhpc3RvcnkgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJzsKaW1wb3J0IHsgZmV0Y2hpbmcgfSBmcm9tICcuL3Byb21vdGlvbi5yZWR1Y2VyJzsKaW1wb3J0IHsgUHJvbW90aW9uU3RhdHVzIH0gZnJvbSAnLi9jb250YW50cyc7CmltcG9ydCB7IGdldEN1c3RvbWVyVHlwZSB9IGZyb20gJy4uLy4uL2N1c3RvbWVyL0N1c3RvbWVyVHlwZS9jdXN0b21lci10eXBlLmFwaSc7CmltcG9ydCB7IGdsb2JhbGl6ZWRjdXN0b21lclR5cGVTZWxlY3RvcnMgfSBmcm9tICcuLi8uLi9jdXN0b21lci9DdXN0b21lclR5cGUvY3VzdG9tZXItdHlwZS5yZWR1Y2VyJzsKaW1wb3J0IFNlbGVjdCBmcm9tICdyZWFjdC1zZWxlY3QnOwppbXBvcnQgeyBnZXRQcm9kdWN0IH0gZnJvbSAnLi4vLi4vcHJvZHVjdC9Qcm9kdWN0TGlzdC9wcm9kdWN0LmFwaSc7CmltcG9ydCB7IGdsb2JhbGl6ZWRQcm9kdWN0U2VsZWN0b3JzIH0gZnJvbSAnLi4vLi4vcHJvZHVjdC9Qcm9kdWN0TGlzdC9wcm9kdWN0LnJlZHVjZXInOwoKdmFyIHZhbGlkYXRpb25TY2hlbWEgPSBmdW5jdGlvbiB2YWxpZGF0aW9uU2NoZW1hKCkgewogIHJldHVybiBZdXAub2JqZWN0KCkuc2hhcGUoewogICAgbmFtZTogWXVwLnN0cmluZygpLm1pbig1LCAiVFx4RUFuIHBoXHUxRUEzaSBsXHUxRURCbiBoXHUwMUExbiA1IGtceEVEIHRcdTFFRjEiKS5yZXF1aXJlZCgnVMOqbiBraMO0bmcgxJHhu4MgdHLhu5FuZycpLAogICAgc3RhcnRUaW1lOiBZdXAuc3RyaW5nKCkucmVxdWlyZWQoJ05nw6B5IGLhuq90IMSR4bqndSBraMO0bmcgxJHhu4MgdHLhu5FuZycpLAogICAgZW5kVGltZTogWXVwLnN0cmluZygpLnJlcXVpcmVkKCdOZ8OgeSBr4bq/dCB0aMO6YyBraMO0bmcgxJHhu4MgdHLhu5FuZycpCiAgfSk7Cn07CgppbXBvcnQgeyB2YWxpZGF0ZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC91dGlscy9ub3JtYWxpemUnOwp2YXIgc2VsZWN0QWxsID0gZ2xvYmFsaXplZGN1c3RvbWVyVHlwZVNlbGVjdG9ycy5zZWxlY3RBbGw7CnZhciBzZWxlY3RBbGxQcm9kdWN0ID0gZ2xvYmFsaXplZFByb2R1Y3RTZWxlY3RvcnMuc2VsZWN0QWxsOwoKdmFyIENyZWF0ZVByb21vdGlvbiA9IGZ1bmN0aW9uIENyZWF0ZVByb21vdGlvbigpIHsKICB2YXIgX3VzZVJlZjsKCiAgdmFyIF91c2VTZWxlY3RvciA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnByb21vdGlvbjsKICB9KSwKICAgICAgaW5pdGlhbFN0YXRlID0gX3VzZVNlbGVjdG9yLmluaXRpYWxTdGF0ZTsKCiAgdmFyIGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTsKICB2YXIgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKTsKICB2YXIgaW5pdGlhbFZhbHVlcyA9IHVzZVJlZigoX3VzZVJlZiA9IHsKICAgIG5hbWU6ICcnLAogICAgZGVzY3JpcHRpb246ICcnLAogICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpCiAgfSwgX2RlZmluZVByb3BlcnR5KF91c2VSZWYsICJzdGFydFRpbWUiLCBuZXcgRGF0ZSgpKSwgX2RlZmluZVByb3BlcnR5KF91c2VSZWYsICJpc0xvY2siLCBmYWxzZSksIF9kZWZpbmVQcm9wZXJ0eShfdXNlUmVmLCAic3RhdHVzIiwgUHJvbW90aW9uU3RhdHVzWzBdLnZhbHVlKSwgX3VzZVJlZikpOwogIHZhciBjdXN0b21lclR5cGUgPSB1c2VTZWxlY3RvcihzZWxlY3RBbGwpOwogIHZhciBwcm9kdWN0cyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbFByb2R1Y3QpOwogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBkaXNwYXRjaChnZXRDdXN0b21lclR5cGUoewogICAgICBwYWdlOiAwLAogICAgICBzaXplOiAyMCwKICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLERFU0MnLAogICAgICBkZXBlbmRlbmN5OiB0cnVlCiAgICB9KSk7CiAgICBkaXNwYXRjaChnZXRQcm9kdWN0KHsKICAgICAgcGFnZTogMCwKICAgICAgc2l6ZTogMjAsCiAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJywKICAgICAgc3RhdHVzOiAiQUNUSVZFIiwKICAgICAgZGVwZW5kZW5jeTogdHJ1ZQogICAgfSkpOwogIH0sIFtdKTsKCiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKFtdKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIHByb2R1Y3RMaXN0ID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0UHJvZHVjdExpc3QgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgZGVib3VuY2VkU2VhcmNoUHJvZHVjdCA9IHVzZUNhbGxiYWNrKF8uZGVib3VuY2UoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICBkaXNwYXRjaChnZXRQcm9kdWN0KHsKICAgICAgcGFnZTogMCwKICAgICAgc2l6ZTogMjAsCiAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJywKICAgICAgY29kZTogdmFsdWUsCiAgICAgIG5hbWU6IHZhbHVlLAogICAgICBzdGF0dXM6ICdBQ1RJVkUnLAogICAgICBkZXBlbmRlbmN5OiB0cnVlCiAgICB9KSk7CiAgfSwgMzAwKSwgW10pOwoKICB2YXIgb25TZWFyY2hQcm9kdWN0ID0gZnVuY3Rpb24gb25TZWFyY2hQcm9kdWN0KHZhbHVlKSB7CiAgICBkZWJvdW5jZWRTZWFyY2hQcm9kdWN0KHZhbHVlKTsKICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGN1c3RvbWVyVHlwZS5sZW5ndGggPiAwKSB7CiAgICAgIGluaXRpYWxWYWx1ZXMuY3VycmVudC5jdXN0b21lclR5cGUgPSBjdXN0b21lclR5cGVbMF0uaWQ7CiAgICB9CiAgfSwgW2N1c3RvbWVyVHlwZV0pOwoKICB2YXIgb25BZGRQcm9kdWN0ID0gZnVuY3Rpb24gb25BZGRQcm9kdWN0KCkgewogICAgdmFyIGRhdGEgPSB7CiAgICAgIHByb2R1Y3Q6IHsKICAgICAgICBpZDogJycKICAgICAgfSwKICAgICAgYnV5OiAwLAogICAgICBnaWZ0OiAwCiAgICB9OwogICAgc2V0UHJvZHVjdExpc3QoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCksIFtkYXRhXSkpOwogIH07CgogIHZhciBvblNlbGVjdGVkUHJvZHVjdCA9IGZ1bmN0aW9uIG9uU2VsZWN0ZWRQcm9kdWN0KGl0ZW0sIGluZGV4KSB7CiAgICB2YXIgY29weUFyciA9IF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCk7CgogICAgdmFyIGZvdW5kZWRJbmRleCA9IGNvcHlBcnIuZmluZEluZGV4KGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgIHJldHVybiBwcm9kdWN0LnByb2R1Y3QuaWQgPT09IGl0ZW0udmFsdWU7CiAgICB9KTsKCiAgICBpZiAoZm91bmRlZEluZGV4ID49IDApIHsKICAgICAgY29weUFyci5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSBlbHNlIHsKICAgICAgY29weUFycltpbmRleF0ucHJvZHVjdCA9IHsKICAgICAgICBpZDogaXRlbS52YWx1ZQogICAgICB9OwogICAgfQoKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24gPSBmdW5jdGlvbiBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24odmFsdWUsIGluZGV4LCB0eXBlKSB7CiAgICB2YXIgY29weUFyciA9IF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCk7CgogICAgY29weUFycltpbmRleF1bdHlwZV0gPSB2YWx1ZTsKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvblN1Ym1pdCA9IGZ1bmN0aW9uIG9uU3VibWl0KHZhbHVlcywgX3JlZikgewogICAgdmFyIF92YWx1ZXMkY3VycmVudDsKCiAgICB2YXIgcmVzZXRGb3JtID0gX3JlZi5yZXNldEZvcm07CiAgICBkaXNwYXRjaChmZXRjaGluZygpKTsKICAgIHZhbHVlcy5jdXN0b21lclR5cGUgPSAoX3ZhbHVlcyRjdXJyZW50ID0gdmFsdWVzLmN1cnJlbnQpID09PSBudWxsIHx8IF92YWx1ZXMkY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlcyRjdXJyZW50LmN1c3RvbWVyVHlwZTsKICAgIHZhbHVlcy5wcm9tb3Rpb25Qcm9kdWN0ID0gcHJvZHVjdExpc3Q7CiAgICB2YWx1ZXMudHlwZSA9ICdTSE9SVFRFUk0nOwogICAgZGlzcGF0Y2goY3JlYXRpbmdQcm9tb3Rpb24odmFsdWVzKSk7CiAgfTsKCiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzKSB7CiAgICAgIGhpc3RvcnkuZ29CYWNrKCk7CiAgICB9CiAgfSwgW2luaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3NdKTsKCiAgdmFyIG9uUmVtb3ZlUHJvZHVjdCA9IGZ1bmN0aW9uIG9uUmVtb3ZlUHJvZHVjdChpbmRleCkgewogICAgdmFyIGNvcHlBcnIgPSBfdG9Db25zdW1hYmxlQXJyYXkocHJvZHVjdExpc3QpOwoKICAgIGNvcHlBcnIuc3BsaWNlKGluZGV4LCAxKTsKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIHsKICAgIGNsYXNzOiAiY2FyZC1oZWFkZXIiCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRUaXRsZSwgbnVsbCwgIlRoXHhFQW0gbVx1MUVEQmkgY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCBiXHhFMW4gaFx4RTBuZyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtaWssIHsKICAgIGluaXRpYWxWYWx1ZXM6IGluaXRpYWxWYWx1ZXMuY3VycmVudCwKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSh2YWxpZGF0aW9uU2NoZW1hKSwKICAgIG9uU3VibWl0OiBvblN1Ym1pdAogIH0sIGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIF9lcnJvcnMkbmFtZTsKCiAgICB2YXIgdmFsdWVzID0gX3JlZjIudmFsdWVzLAogICAgICAgIGVycm9ycyA9IF9yZWYyLmVycm9ycywKICAgICAgICB0b3VjaGVkID0gX3JlZjIudG91Y2hlZCwKICAgICAgICBoYW5kbGVDaGFuZ2UgPSBfcmVmMi5oYW5kbGVDaGFuZ2UsCiAgICAgICAgaGFuZGxlQmx1ciA9IF9yZWYyLmhhbmRsZUJsdXIsCiAgICAgICAgaGFuZGxlU3VibWl0ID0gX3JlZjIuaGFuZGxlU3VibWl0LAogICAgICAgIHNldEZpZWxkVmFsdWUgPSBfcmVmMi5zZXRGaWVsZFZhbHVlLAogICAgICAgIGhhbmRsZVJlc2V0ID0gX3JlZjIuaGFuZGxlUmVzZXQ7CiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm0sIHsKICAgICAgb25TdWJtaXQ6IGhhbmRsZVN1Ym1pdCwKICAgICAgbm9WYWxpZGF0ZTogdHJ1ZSwKICAgICAgbmFtZTogInNpbXBsZUZvcm0iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAibGFzdE5hbWUiCiAgICB9LCAiVFx4RUFuIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmggYlx4RTFuIGhceEUwbmciKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgbmFtZTogIm5hbWUiLAogICAgICBpZDogIm5hbWUiLAogICAgICBwbGFjZWhvbGRlcjogIlRceEVBbiBjaFx1MDFCMFx1MDFBMW5nIHRyXHhFQ25oIGJceEUxbiBoXHhFMG5nIiwKICAgICAgYXV0b0NvbXBsZXRlOiAibmFtZSIsCiAgICAgIHZhbGlkOiAoZXJyb3JzID09PSBudWxsIHx8IGVycm9ycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvcnMkbmFtZSA9IGVycm9ycy5uYW1lKSA9PT0gbnVsbCB8fCBfZXJyb3JzJG5hbWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvcnMkbmFtZS5sZW5ndGgpID4gNSB8fCBudWxsLAogICAgICBpbnZhbGlkOiBlcnJvcnMubmFtZSwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5uYW1lCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgbnVsbCwgZXJyb3JzLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJ1c2VyTmFtZSIKICAgIH0sICJNXHhGNCB0XHUxRUEzIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENUZXh0YXJlYSwgewogICAgICB0eXBlOiAidGV4dCIsCiAgICAgIG5hbWU6ICJkZXNjcmlwdGlvbiIsCiAgICAgIGlkOiAiZGVzY3JpcHRpb24iLAogICAgICBwbGFjZWhvbGRlcjogIk1ceEY0IHRcdTFFQTMiLAogICAgICBhdXRvQ29tcGxldGU6ICJkZXNjcmlwdGlvbiIsCiAgICAgIHZhbGlkOiBlcnJvcnMuZGVzY3JpcHRpb24gfHwgbnVsbCwKICAgICAgaW52YWxpZDogdG91Y2hlZC5kZXNjcmlwdGlvbiAmJiAhIWVycm9ycy5kZXNjcmlwdGlvbiwKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICB2YWx1ZTogdmFsdWVzLmRlc2NyaXB0aW9uCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgbnVsbCwgZXJyb3JzLmRlc2NyaXB0aW9uKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAiY3VzdG9tZXJUeXBlIgogICAgfSwgIlx1MDExMFx1MUVEMWkgdFx1MDFCMFx1MUVFM25nIGtoXHhFMWNoIGhceEUwbmcgXHhFMXAgZFx1MUVFNW5nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENTZWxlY3QsIHsKICAgICAgY3VzdG9tOiB0cnVlLAogICAgICBuYW1lOiAiY3VzdG9tZXJUeXBlIiwKICAgICAgaWQ6ICJjdXN0b21lclR5cGUiLAogICAgICB2YWx1ZTogdmFsdWVzLmN1c3RvbWVyVHlwZSwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICBzZXRGaWVsZFZhbHVlKCdjdXN0b21lclR5cGUnLCBlLnRhcmdldC52YWx1ZSk7CiAgICAgIH0KICAgIH0sIGN1c3RvbWVyVHlwZSAmJiBjdXN0b21lclR5cGUubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgib3B0aW9uIiwgewogICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICB2YWx1ZTogaXRlbS5pZAogICAgICB9LCBpdGVtLm5hbWUpOwogICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCBudWxsLCBlcnJvcnMuY3VzdG9tZXJUeXBlKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICB9LCAiVGhcdTFFRERpIGdpYW4gYlx1MUVBRnQgXHUwMTExXHUxRUE3dSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogImRhdGUiLAogICAgICBpZDogInN0YXJ0VGltZSIsCiAgICAgIG5hbWU6ICJzdGFydFRpbWUiLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBwbGFjZWhvbGRlcjogIlRoXHUxRUREaSBnaWFuIGJcdTFFQUZ0IFx1MDExMVx1MUVBN3UiCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLnN0YXJ0VGltZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInBhc3N3b3JkIgogICAgfSwgIlRoXHUxRUREaSBnaWFuIGtcdTFFQkZ0IHRoXHhGQWMiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgIHR5cGU6ICJkYXRlIiwKICAgICAgaWQ6ICJlbmRUaW1lIiwKICAgICAgbmFtZTogImVuZFRpbWUiLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBwbGFjZWhvbGRlcjogIlRoXHUxRUREaSBnaWFuIGtcdTFFQkZ0IHRoXHhGQWMiCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLmVuZFRpbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICB2YXJpYW50OiAiY3VzdG9tLWNoZWNrYm94IiwKICAgICAgY2xhc3NOYW1lOiAicGItMyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dENoZWNrYm94LCB7CiAgICAgIGN1c3RvbTogdHJ1ZSwKICAgICAgaWQ6ICJpc0xvY2siLAogICAgICBuYW1lOiAiaXNMb2NrIiwKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIHZhcmlhbnQ6ICJjdXN0b20tY2hlY2tib3giLAogICAgICBodG1sRm9yOiAiaXNMb2NrIgogICAgfSwgIktoXHhGM2EgY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgIH0sICJUclx1MUVBMW5nIHRoXHhFMWkiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1NlbGVjdCwgewogICAgICBjdXN0b206IHRydWUsCiAgICAgIG5hbWU6ICJzdGF0dXMiLAogICAgICBpZDogInN0YXR1cyIsCiAgICAgIHZhbHVlOiB2YWx1ZXMuc3RhdHVzLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIHNldEZpZWxkVmFsdWUoJ3N0YXR1cycsIGUudGFyZ2V0LnZhbHVlKTsKICAgICAgfQogICAgfSwgUHJvbW90aW9uU3RhdHVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIsIHsKICAgICAgICBrZXk6IGl0ZW0udmFsdWUsCiAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUKICAgICAgfSwgaXRlbS50aXRsZSk7CiAgICB9KSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICBjb2xvcjogInByaW1hcnkiLAogICAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgc2l6ZTogInNtIiwKICAgICAgY2xhc3NOYW1lOiAibWwtMyIsCiAgICAgIG9uQ2xpY2s6IG9uQWRkUHJvZHVjdAogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogJ2NpbEFycm93Q2lyY2xlUmlnaHQnLAogICAgICBjbGFzc05hbWU6ICJtci0yIgogICAgfSksICJUaFx4RUFtIHNcdTFFQTNuIHBoXHUxRUE5bSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiMTIiCiAgICB9LCBwcm9kdWN0TGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgIHZhciBfcHJvZHVjdExpc3QkaW5kZXg7CgogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICAgIGtleTogaW5kZXgsCiAgICAgICAgY2xhc3NOYW1lOiAibXQtMyIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgewogICAgICAgIGNsYXNzTmFtZTogImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICBsZzogIjQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgICAgfSwgIlNcdTFFQTNuIHBoXHUxRUE5bSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsKICAgICAgICBkZWZhdWx0VmFsdWU6IChfcHJvZHVjdExpc3QkaW5kZXggPSBwcm9kdWN0TGlzdFtpbmRleF0pID09PSBudWxsIHx8IF9wcm9kdWN0TGlzdCRpbmRleCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb2R1Y3RMaXN0JGluZGV4LmlkLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uU2VsZWN0ZWRQcm9kdWN0KGV2ZW50LCBpbmRleCk7CiAgICAgICAgfSwKICAgICAgICBvbklucHV0Q2hhbmdlOiBvblNlYXJjaFByb2R1Y3QsCiAgICAgICAgb3B0aW9uczogcHJvZHVjdHMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogaXRlbS5pZCwKICAgICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdChpdGVtLmNvZGUsICItIikuY29uY2F0KGl0ZW0ubmFtZSkKICAgICAgICAgIH07CiAgICAgICAgfSkKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgICAgbGc6ICI0IgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICAgIH0sICJNdWEiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgICAgbmFtZTogImJ1eSIsCiAgICAgICAgaWQ6ICJidXkiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiRHVuZyB0XHhFRGNoIiwKICAgICAgICBhdXRvQ29tcGxldGU6ICJidXkiLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uQ2hhbmdlUHJvZHVjdFByb21vdGlvbihldmVudC50YXJnZXQudmFsdWUsIGluZGV4LCAnYnV5Jyk7CiAgICAgICAgfSwKICAgICAgICBpbnZhbGlkOiAhcHJvZHVjdExpc3RbaW5kZXhdLmJ1eSwKICAgICAgICB2YWxpZDogcHJvZHVjdExpc3RbaW5kZXhdLmJ1eSwKICAgICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgICAgdmFsdWU6IHByb2R1Y3RMaXN0W2luZGV4XS5idXkKICAgICAgfSksICFwcm9kdWN0TGlzdFtpbmRleF0uYnV5ICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgICB9LCAiR2lceEUxIHRyXHUxRUNCIHBoXHUxRUEzaSBsXHUxRURCbiBoXHUwMUExbiAwIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgICAgbGc6ICIzIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICAgIH0sICJUXHUxRUI3bmciKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgICAgbmFtZTogImdpZnQiLAogICAgICAgIGlkOiAiZ2lmdCIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJEdW5nIHRceEVEY2giLAogICAgICAgIGF1dG9Db21wbGV0ZTogImdpZnQiLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uQ2hhbmdlUHJvZHVjdFByb21vdGlvbihldmVudC50YXJnZXQudmFsdWUsIGluZGV4LCAnZ2lmdCcpOwogICAgICAgIH0sCiAgICAgICAgaW52YWxpZDogIXByb2R1Y3RMaXN0W2luZGV4XS5naWZ0LAogICAgICAgIHZhbGlkOiBwcm9kdWN0TGlzdFtpbmRleF0uZ2lmdCwKICAgICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgICAgdmFsdWU6IHByb2R1Y3RMaXN0W2luZGV4XS5naWZ0CiAgICAgIH0pLCAhcHJvZHVjdExpc3RbaW5kZXhdLmdpZnQgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICAgIH0sICJHaVx4RTEgdHJcdTFFQ0IgcGhcdTFFQTNpIGxcdTFFREJuIGhcdTAxQTFuIDAiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICBsZzogIjEiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICBzaXplOiAic20iLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICByZXR1cm4gb25SZW1vdmVQcm9kdWN0KGluZGV4KTsKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgICAgbmFtZTogImNpbFhDaXJjbGUiCiAgICAgIH0pKSkpKTsKICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIHsKICAgICAgY2xhc3NOYW1lOiAiZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXIiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIHR5cGU6ICJzdWJtaXQiLAogICAgICBzaXplOiAibGciLAogICAgICBjb2xvcjogInByaW1hcnkiLAogICAgICBkaXNhYmxlZDogaW5pdGlhbFN0YXRlLmxvYWRpbmcKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICJjaWwtc2F2ZSIKICAgIH0pLCAiICIsIGluaXRpYWxTdGF0ZS5sb2FkaW5nID8gJ8SQYW5nIHjhu60gbMO9JyA6ICdU4bqhbyBt4bubaScpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIHR5cGU6ICJyZXNldCIsCiAgICAgIHNpemU6ICJsZyIsCiAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgb25DbGljazogaGFuZGxlUmVzZXQsCiAgICAgIGNsYXNzTmFtZTogIm1sLTUiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICBuYW1lOiAiY2lsLWJhbiIKICAgIH0pLCAiIFhceEYzYSBuaFx1MUVBRHAgbGlcdTFFQzd1IikpKTsKICB9KSkpOwp9OwoKZXhwb3J0IGRlZmF1bHQgQ3JlYXRlUHJvbW90aW9uOw=="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/CreatePromotion.js"],"names":["React","useCallback","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CInvalidFeedback","CFormGroup","CLabel","CInput","CRow","CSelect","CCardTitle","CTextarea","CInputCheckbox","CIcon","Formik","Yup","useDispatch","useSelector","creatingPromotion","_","useHistory","fetching","PromotionStatus","getCustomerType","globalizedcustomerTypeSelectors","Select","getProduct","globalizedProductSelectors","validationSchema","object","shape","name","string","min","required","startTime","endTime","validate","selectAll","selectAllProduct","CreatePromotion","state","promotion","initialState","dispatch","history","initialValues","description","Date","value","customerType","products","page","size","sort","dependency","status","productList","setProductList","debouncedSearchProduct","debounce","code","onSearchProduct","length","current","id","onAddProduct","data","product","buy","gift","onSelectedProduct","item","index","copyArr","foundedIndex","findIndex","splice","onChangeProductPromotion","type","onSubmit","values","resetForm","promotionProduct","updatingSuccess","goBack","onRemoveProduct","errors","touched","handleChange","handleBlur","handleSubmit","setFieldValue","handleReset","e","target","map","title","event","label","loading"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect, useRef, useState} from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CInvalidFeedback,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CSelect,\n  CCardTitle,\n  CTextarea,\n  CInputCheckbox,\n} from '@coreui/react/lib';\nimport CIcon from '@coreui/icons-react/lib/CIcon';;\nimport {Formik} from 'formik';\nimport * as Yup from 'yup';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {creatingPromotion} from './promotion.api';\nimport _ from 'lodash';\n\n\nimport {useHistory} from 'react-router-dom';\nimport {fetching} from './promotion.reducer';\nimport {PromotionStatus} from './contants';\n\nimport {getCustomerType} from '../../customer/CustomerType/customer-type.api';\nimport {globalizedcustomerTypeSelectors} from '../../customer/CustomerType/customer-type.reducer';\nimport Select from 'react-select';\nimport {getProduct} from '../../product/ProductList/product.api';\nimport {globalizedProductSelectors} from '../../product/ProductList/product.reducer';\n\nconst validationSchema = function() {\n  return Yup.object().shape({\n    name: Yup.string()\n        .min(5, `Tên phải lớn hơn 5 kí tự`)\n        .required('Tên không để trống'),\n    startTime: Yup.string().required('Ngày bắt đầu không để trống'),\n    endTime: Yup.string().required('Ngày kết thúc không để trống'),\n  });\n};\n\nimport {validate} from '../../../../shared/utils/normalize';\nconst {selectAll} = globalizedcustomerTypeSelectors;\nconst {selectAll: selectAllProduct} = globalizedProductSelectors;\n\nconst CreatePromotion = () => {\n  const {initialState} = useSelector((state) => state.promotion);\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const initialValues = useRef({\n    name: '',\n    description: '',\n    startTime: new Date(),\n    startTime: new Date(),\n    isLock: false,\n    status: PromotionStatus[0].value,\n  });\n\n\n  const customerType = useSelector(selectAll);\n  const products = useSelector(selectAllProduct);\n  useEffect(() => {\n    dispatch(getCustomerType({ page: 0, size: 20, sort: 'createdDate,DESC', dependency: true }));\n    dispatch(getProduct({ page: 0, size: 20, sort: 'createdDate,DESC', status: \"ACTIVE\", dependency: true }));\n  }, []);\n\n  const [productList, setProductList] = useState([]);\n  const debouncedSearchProduct = useCallback(\n    _.debounce(value => {\n      dispatch(getProduct({ page: 0, size: 20, sort: 'createdDate,DESC', code: value, name: value, status: 'ACTIVE', dependency: true }));\n    }, 300),\n    []\n  );\n\n  const onSearchProduct = value => {\n    debouncedSearchProduct(value);\n  };\n  useEffect(() => {\n    if (customerType.length > 0) {\n      initialValues.current.customerType = customerType[0].id;\n    }\n  }, [customerType]);\n\n  const onAddProduct = () => {\n    const data = {product: {id: ''}, buy: 0, gift: 0};\n    setProductList([...productList, data]);\n  };\n\n  const onSelectedProduct = (item, index) => {\n    const copyArr = [...productList];\n    const foundedIndex = copyArr.findIndex((product) => product.product.id === item.value);\n    if (foundedIndex >= 0) {\n      copyArr.splice(index, 1);\n    } else {\n      copyArr[index].product = {id: item.value};\n    }\n    setProductList(copyArr);\n  };\n\n  const onChangeProductPromotion = (value, index, type) => {\n    const copyArr = [...productList];\n    copyArr[index][type] = value;\n    setProductList(copyArr);\n  };\n\n  const onSubmit = (values, {resetForm}) => {\n    dispatch(fetching());\n    values.customerType = values.current?.customerType;\n    values.promotionProduct = productList;\n    values.type = 'SHORTTERM';\n    dispatch(creatingPromotion(values));\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  const onRemoveProduct = (index) => {\n    const copyArr = [...productList];\n    copyArr.splice(index, 1);\n    setProductList(copyArr);\n  };\n\n  return (\n    <CCard>\n      <CCardHeader class=\"card-header\">\n        <CCardTitle>Thêm mới chương trình bán hàng</CCardTitle>\n      </CCardHeader>\n      <CCardBody>\n        <Formik initialValues={initialValues.current} validate={validate(validationSchema)} onSubmit={onSubmit}>\n          {({\n            values,\n            errors,\n            touched,\n\n\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue,\n\n\n            handleReset\n            ,\n          }) => (\n            <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n              <CRow>\n                <CCol lg=\"6\">\n                  <CFormGroup>\n                    <CLabel htmlFor=\"lastName\">Tên chương trình bán hàng</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"name\"\n                      id=\"name\"\n                      placeholder=\"Tên chương trình bán hàng\"\n                      autoComplete=\"name\"\n                      valid={errors?.name?.length > 5 || null}\n                      invalid={errors.name}\n                      required\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.name}\n                    />\n                    <CInvalidFeedback>{errors.name}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"userName\">Mô tả</CLabel>\n                    <CTextarea\n                      type=\"text\"\n                      name=\"description\"\n                      id=\"description\"\n                      placeholder=\"Mô tả\"\n                      autoComplete=\"description\"\n                      valid={errors.description || null}\n                      invalid={touched.description && !!errors.description}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.description}\n                    />\n                    <CInvalidFeedback>{errors.description}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"customerType\">Đối tượng khách hàng áp dụng</CLabel>\n                    <CSelect\n                      custom\n                      name=\"customerType\"\n                      id=\"customerType\"\n                      value={values.customerType}\n                      onChange={(e) => {\n                        setFieldValue('customerType', e.target.value);\n                      }}\n                    >\n                      {customerType &&\n                        customerType.map((item) => (\n                          <option key={item.id} value={item.id}>\n                            {item.name}\n                          </option>\n                        ))}\n                    </CSelect>\n                    <CInvalidFeedback>{errors.customerType}</CInvalidFeedback>\n                  </CFormGroup>\n                </CCol>\n                <CCol lg=\"6\">\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Thời gian bắt đầu</CLabel>\n                    <CInput type=\"date\" id=\"startTime\" name=\"startTime\" onChange={handleChange} placeholder=\"Thời gian bắt đầu\" />\n                    <CInvalidFeedback className=\"d-block\">{errors.startTime}</CInvalidFeedback>\n                  </CFormGroup>\n\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Thời gian kết thúc</CLabel>\n                    <CInput type=\"date\" id=\"endTime\" name=\"endTime\" onChange={handleChange} placeholder=\"Thời gian kết thúc\" />\n                    <CInvalidFeedback className=\"d-block\">{errors.endTime}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup variant=\"custom-checkbox\" className=\"pb-3\">\n                    <CInputCheckbox\n                      custom\n                      id=\"isLock\"\n                      name=\"isLock\"\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                    />\n                    <CLabel variant=\"custom-checkbox\" htmlFor=\"isLock\">\n                      Khóa chương trình\n                    </CLabel>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Trạng thái</CLabel>\n                    <CSelect\n                      custom\n                      name=\"status\"\n                      id=\"status\"\n                      value={values.status}\n                      onChange={(e) => {\n                        setFieldValue('status', e.target.value);\n                      }}\n                    >\n                      {PromotionStatus.map((item) => (\n                        <option key={item.value} value={item.value}>\n                          {item.title}\n                        </option>\n                      ))}\n                    </CSelect>\n                  </CFormGroup>\n                </CCol>\n                <CButton color=\"primary\" variant=\"outline\" shape=\"square\" size=\"sm\" className=\"ml-3\" onClick={onAddProduct}>\n                  <CIcon name={'cilArrowCircleRight'} className=\"mr-2\" />\n                  Thêm sản phẩm\n                </CButton>\n                <CCol lg=\"12\">\n                  {productList.map((item, index) => (\n                    <CFormGroup key={index} className=\"mt-3\">\n                      <CRow className=\"d-flex align-items-center\">\n                        <CCol lg=\"4\">\n                          <CLabel htmlFor=\"password\">Sản phẩm</CLabel>\n                          <Select\n                            defaultValue={productList[index]?.id}\n                            onChange={(event) => onSelectedProduct(event, index)}\n                            onInputChange={onSearchProduct}\n                            options={products.map((item) => ({\n                              value: item.id,\n                              label: `${item.code}-${item.name}`,\n                            }))}\n                          />\n                        </CCol>\n                        <CCol lg=\"4\">\n                          <CLabel htmlFor=\"password\">Mua</CLabel>\n                          <CInput\n                            type=\"number\"\n                            name=\"buy\"\n                            id=\"buy\"\n                            placeholder=\"Dung tích\"\n                            autoComplete=\"buy\"\n                            onChange={(event) => onChangeProductPromotion(event.target.value, index, 'buy')}\n                            invalid={!productList[index].buy}\n                            valid={productList[index].buy}\n                            onBlur={handleBlur}\n                            value={productList[index].buy}\n                          />\n                          {!productList[index].buy && <CInvalidFeedback className=\"d-block\">Giá trị phải lớn hơn 0</CInvalidFeedback>}\n                        </CCol>\n                        <CCol lg=\"3\">\n                          <CLabel htmlFor=\"password\">Tặng</CLabel>\n                          <CInput\n                            type=\"number\"\n                            name=\"gift\"\n                            id=\"gift\"\n                            placeholder=\"Dung tích\"\n                            autoComplete=\"gift\"\n                            onChange={(event) => onChangeProductPromotion(event.target.value, index, 'gift')}\n                            invalid={!productList[index].gift}\n                            valid={productList[index].gift}\n                            onBlur={handleBlur}\n                            value={productList[index].gift}\n                          />\n                          {!productList[index].gift && <CInvalidFeedback className=\"d-block\">Giá trị phải lớn hơn 0</CInvalidFeedback>}\n                        </CCol>\n                        <CCol lg=\"1\">\n                          <CButton color=\"danger\" variant=\"outline\" shape=\"square\" size=\"sm\" onClick={() => onRemoveProduct(index)}>\n                            <CIcon name=\"cilXCircle\" />\n                          </CButton>\n                        </CCol>\n                      </CRow>\n                    </CFormGroup>\n                  ))}\n                </CCol>\n              </CRow>\n              <CFormGroup className=\"d-flex justify-content-center\">\n                <CButton type=\"submit\" size=\"lg\" color=\"primary\" disabled={initialState.loading}>\n                  <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Tạo mới'}\n                </CButton>\n                <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={handleReset} className=\"ml-5\">\n                  <CIcon name=\"cil-ban\" /> Xóa nhập liệu\n                </CButton>\n              </CFormGroup>\n            </CForm>\n          )}\n        </Formik>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default CreatePromotion;\n"]}]}