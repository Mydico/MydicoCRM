{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/CreatePromotion.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/CreatePromotion.js","mtime":1621950736476},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgppbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBDQnV0dG9uLCBDQ2FyZCwgQ0NhcmRIZWFkZXIsIENDYXJkQm9keSwgQ0NvbCwgQ0Zvcm0sIENJbnZhbGlkRmVlZGJhY2ssIENGb3JtR3JvdXAsIENMYWJlbCwgQ0lucHV0LCBDUm93LCBDU2VsZWN0LCBDQ2FyZFRpdGxlLCBDVGV4dGFyZWEsIENJbnB1dENoZWNrYm94IH0gZnJvbSAnQGNvcmV1aS9yZWFjdC9saWInOwppbXBvcnQgQ0ljb24gZnJvbSAnQGNvcmV1aS9pY29ucy1yZWFjdC9saWIvQ0ljb24nOwo7CmltcG9ydCB7IEZvcm1payB9IGZyb20gJ2Zvcm1payc7CmltcG9ydCAqIGFzIFl1cCBmcm9tICd5dXAnOwppbXBvcnQgeyB1c2VEaXNwYXRjaCwgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCB7IGNyZWF0aW5nUHJvbW90aW9uIH0gZnJvbSAnLi9wcm9tb3Rpb24uYXBpJzsKaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgeyBmZXRjaGluZyB9IGZyb20gJy4vcHJvbW90aW9uLnJlZHVjZXInOwppbXBvcnQgeyBQcm9tb3Rpb25TdGF0dXMgfSBmcm9tICcuL2NvbnRhbnRzJzsKaW1wb3J0IHsgZ2V0Q3VzdG9tZXJUeXBlIH0gZnJvbSAnLi4vLi4vY3VzdG9tZXIvQ3VzdG9tZXJUeXBlL2N1c3RvbWVyLXR5cGUuYXBpJzsKaW1wb3J0IHsgZ2xvYmFsaXplZGN1c3RvbWVyVHlwZVNlbGVjdG9ycyB9IGZyb20gJy4uLy4uL2N1c3RvbWVyL0N1c3RvbWVyVHlwZS9jdXN0b21lci10eXBlLnJlZHVjZXInOwppbXBvcnQgU2VsZWN0IGZyb20gJ3JlYWN0LXNlbGVjdCc7CmltcG9ydCB7IGdldFByb2R1Y3QgfSBmcm9tICcuLi8uLi9wcm9kdWN0L1Byb2R1Y3RMaXN0L3Byb2R1Y3QuYXBpJzsKaW1wb3J0IHsgZ2xvYmFsaXplZFByb2R1Y3RTZWxlY3RvcnMgfSBmcm9tICcuLi8uLi9wcm9kdWN0L1Byb2R1Y3RMaXN0L3Byb2R1Y3QucmVkdWNlcic7Cgp2YXIgdmFsaWRhdGlvblNjaGVtYSA9IGZ1bmN0aW9uIHZhbGlkYXRpb25TY2hlbWEoKSB7CiAgcmV0dXJuIFl1cC5vYmplY3QoKS5zaGFwZSh7CiAgICBuYW1lOiBZdXAuc3RyaW5nKCkubWluKDUsICJUXHhFQW4gcGhcdTFFQTNpIGxcdTFFREJuIGhcdTAxQTFuIDUga1x4RUQgdFx1MUVGMSIpLnJlcXVpcmVkKCdUw6puIGtow7RuZyDEkeG7gyB0cuG7kW5nJyksCiAgICBzdGFydFRpbWU6IFl1cC5zdHJpbmcoKS5yZXF1aXJlZCgnTmfDoHkgYuG6r3QgxJHhuqd1IGtow7RuZyDEkeG7gyB0cuG7kW5nJyksCiAgICBlbmRUaW1lOiBZdXAuc3RyaW5nKCkucmVxdWlyZWQoJ05nw6B5IGvhur90IHRow7pjIGtow7RuZyDEkeG7gyB0cuG7kW5nJykKICB9KTsKfTsKCmltcG9ydCB7IHZhbGlkYXRlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL3V0aWxzL25vcm1hbGl6ZSc7CnZhciBzZWxlY3RBbGwgPSBnbG9iYWxpemVkY3VzdG9tZXJUeXBlU2VsZWN0b3JzLnNlbGVjdEFsbDsKdmFyIHNlbGVjdEFsbFByb2R1Y3QgPSBnbG9iYWxpemVkUHJvZHVjdFNlbGVjdG9ycy5zZWxlY3RBbGw7Cgp2YXIgQ3JlYXRlUHJvbW90aW9uID0gZnVuY3Rpb24gQ3JlYXRlUHJvbW90aW9uKCkgewogIHZhciBfdXNlUmVmOwoKICB2YXIgX3VzZVNlbGVjdG9yID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucHJvbW90aW9uOwogIH0pLAogICAgICBpbml0aWFsU3RhdGUgPSBfdXNlU2VsZWN0b3IuaW5pdGlhbFN0YXRlOwoKICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpOwogIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpOwogIHZhciBpbml0aWFsVmFsdWVzID0gdXNlUmVmKChfdXNlUmVmID0gewogICAgbmFtZTogJycsCiAgICBkZXNjcmlwdGlvbjogJycsCiAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCkKICB9LCBfZGVmaW5lUHJvcGVydHkoX3VzZVJlZiwgInN0YXJ0VGltZSIsIG5ldyBEYXRlKCkpLCBfZGVmaW5lUHJvcGVydHkoX3VzZVJlZiwgImlzTG9jayIsIGZhbHNlKSwgX2RlZmluZVByb3BlcnR5KF91c2VSZWYsICJzdGF0dXMiLCBQcm9tb3Rpb25TdGF0dXNbMF0udmFsdWUpLCBfdXNlUmVmKSk7CiAgdmFyIGN1c3RvbWVyVHlwZSA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbCk7CiAgdmFyIHByb2R1Y3RzID0gdXNlU2VsZWN0b3Ioc2VsZWN0QWxsUHJvZHVjdCk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoKGdldEN1c3RvbWVyVHlwZSh7CiAgICAgIHBhZ2U6IDAsCiAgICAgIHNpemU6IDIwLAogICAgICBzb3J0OiAnY3JlYXRlZERhdGUsREVTQycsCiAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgIH0pKTsKICAgIGRpc3BhdGNoKGdldFByb2R1Y3QoewogICAgICBwYWdlOiAwLAogICAgICBzaXplOiAyMCwKICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLERFU0MnLAogICAgICBzdGF0dXM6ICJBQ1RJVkUiCiAgICB9KSk7CiAgfSwgW10pOwoKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoW10pLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgcHJvZHVjdExpc3QgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRQcm9kdWN0TGlzdCA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBkZWJvdW5jZWRTZWFyY2hQcm9kdWN0ID0gdXNlQ2FsbGJhY2soXy5kZWJvdW5jZShmdW5jdGlvbiAodmFsdWUpIHsKICAgIGRpc3BhdGNoKGdldFByb2R1Y3QoewogICAgICBwYWdlOiAwLAogICAgICBzaXplOiAyMCwKICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLERFU0MnLAogICAgICBjb2RlOiB2YWx1ZSwKICAgICAgbmFtZTogdmFsdWUsCiAgICAgIHN0YXR1czogJ0FDVElWRScKICAgIH0pKTsKICB9LCAxMDAwKSwgW10pOwoKICB2YXIgb25TZWFyY2hQcm9kdWN0ID0gZnVuY3Rpb24gb25TZWFyY2hQcm9kdWN0KHZhbHVlKSB7CiAgICBkZWJvdW5jZWRTZWFyY2hQcm9kdWN0KHZhbHVlKTsKICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGN1c3RvbWVyVHlwZS5sZW5ndGggPiAwKSB7CiAgICAgIGluaXRpYWxWYWx1ZXMuY3VycmVudC5jdXN0b21lclR5cGUgPSBjdXN0b21lclR5cGVbMF0uaWQ7CiAgICB9CiAgfSwgW2N1c3RvbWVyVHlwZV0pOwoKICB2YXIgb25BZGRQcm9kdWN0ID0gZnVuY3Rpb24gb25BZGRQcm9kdWN0KCkgewogICAgdmFyIGRhdGEgPSB7CiAgICAgIHByb2R1Y3Q6IHsKICAgICAgICBpZDogJycKICAgICAgfSwKICAgICAgYnV5OiAwLAogICAgICBnaWZ0OiAwCiAgICB9OwogICAgc2V0UHJvZHVjdExpc3QoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCksIFtkYXRhXSkpOwogIH07CgogIHZhciBvblNlbGVjdGVkUHJvZHVjdCA9IGZ1bmN0aW9uIG9uU2VsZWN0ZWRQcm9kdWN0KGl0ZW0sIGluZGV4KSB7CiAgICB2YXIgY29weUFyciA9IF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCk7CgogICAgdmFyIGZvdW5kZWRJbmRleCA9IGNvcHlBcnIuZmluZEluZGV4KGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgIHJldHVybiBwcm9kdWN0LnByb2R1Y3QuaWQgPT09IGl0ZW0udmFsdWU7CiAgICB9KTsKCiAgICBpZiAoZm91bmRlZEluZGV4ID49IDApIHsKICAgICAgY29weUFyci5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSBlbHNlIHsKICAgICAgY29weUFycltpbmRleF0ucHJvZHVjdCA9IHsKICAgICAgICBpZDogaXRlbS52YWx1ZQogICAgICB9OwogICAgfQoKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24gPSBmdW5jdGlvbiBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24odmFsdWUsIGluZGV4LCB0eXBlKSB7CiAgICB2YXIgY29weUFyciA9IF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCk7CgogICAgY29weUFycltpbmRleF1bdHlwZV0gPSB2YWx1ZTsKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvblN1Ym1pdCA9IGZ1bmN0aW9uIG9uU3VibWl0KHZhbHVlcywgX3JlZikgewogICAgdmFyIF92YWx1ZXMkY3VycmVudDsKCiAgICB2YXIgcmVzZXRGb3JtID0gX3JlZi5yZXNldEZvcm07CiAgICBkaXNwYXRjaChmZXRjaGluZygpKTsKICAgIHZhbHVlcy5jdXN0b21lclR5cGUgPSAoX3ZhbHVlcyRjdXJyZW50ID0gdmFsdWVzLmN1cnJlbnQpID09PSBudWxsIHx8IF92YWx1ZXMkY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlcyRjdXJyZW50LmN1c3RvbWVyVHlwZTsKICAgIHZhbHVlcy5wcm9tb3Rpb25Qcm9kdWN0ID0gcHJvZHVjdExpc3Q7CiAgICB2YWx1ZXMudHlwZSA9ICdTSE9SVFRFUk0nOwogICAgZGlzcGF0Y2goY3JlYXRpbmdQcm9tb3Rpb24odmFsdWVzKSk7CiAgfTsKCiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzKSB7CiAgICAgIGhpc3RvcnkuZ29CYWNrKCk7CiAgICB9CiAgfSwgW2luaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3NdKTsKCiAgdmFyIG9uUmVtb3ZlUHJvZHVjdCA9IGZ1bmN0aW9uIG9uUmVtb3ZlUHJvZHVjdChpbmRleCkgewogICAgdmFyIGNvcHlBcnIgPSBfdG9Db25zdW1hYmxlQXJyYXkocHJvZHVjdExpc3QpOwoKICAgIGNvcHlBcnIuc3BsaWNlKGluZGV4LCAxKTsKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIHsKICAgIGNsYXNzOiAiY2FyZC1oZWFkZXIiCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRUaXRsZSwgbnVsbCwgIlRoXHhFQW0gbVx1MUVEQmkgY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCBiXHhFMW4gaFx4RTBuZyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtaWssIHsKICAgIGluaXRpYWxWYWx1ZXM6IGluaXRpYWxWYWx1ZXMuY3VycmVudCwKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSh2YWxpZGF0aW9uU2NoZW1hKSwKICAgIG9uU3VibWl0OiBvblN1Ym1pdAogIH0sIGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIF9lcnJvcnMkbmFtZTsKCiAgICB2YXIgdmFsdWVzID0gX3JlZjIudmFsdWVzLAogICAgICAgIGVycm9ycyA9IF9yZWYyLmVycm9ycywKICAgICAgICB0b3VjaGVkID0gX3JlZjIudG91Y2hlZCwKICAgICAgICBoYW5kbGVDaGFuZ2UgPSBfcmVmMi5oYW5kbGVDaGFuZ2UsCiAgICAgICAgaGFuZGxlQmx1ciA9IF9yZWYyLmhhbmRsZUJsdXIsCiAgICAgICAgaGFuZGxlU3VibWl0ID0gX3JlZjIuaGFuZGxlU3VibWl0LAogICAgICAgIHNldEZpZWxkVmFsdWUgPSBfcmVmMi5zZXRGaWVsZFZhbHVlLAogICAgICAgIGhhbmRsZVJlc2V0ID0gX3JlZjIuaGFuZGxlUmVzZXQ7CiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm0sIHsKICAgICAgb25TdWJtaXQ6IGhhbmRsZVN1Ym1pdCwKICAgICAgbm9WYWxpZGF0ZTogdHJ1ZSwKICAgICAgbmFtZTogInNpbXBsZUZvcm0iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAibGFzdE5hbWUiCiAgICB9LCAiVFx4RUFuIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmggYlx4RTFuIGhceEUwbmciKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgbmFtZTogIm5hbWUiLAogICAgICBpZDogIm5hbWUiLAogICAgICBwbGFjZWhvbGRlcjogIlRceEVBbiBjaFx1MDFCMFx1MDFBMW5nIHRyXHhFQ25oIGJceEUxbiBoXHhFMG5nIiwKICAgICAgYXV0b0NvbXBsZXRlOiAibmFtZSIsCiAgICAgIHZhbGlkOiAoZXJyb3JzID09PSBudWxsIHx8IGVycm9ycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvcnMkbmFtZSA9IGVycm9ycy5uYW1lKSA9PT0gbnVsbCB8fCBfZXJyb3JzJG5hbWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvcnMkbmFtZS5sZW5ndGgpID4gNSB8fCBudWxsLAogICAgICBpbnZhbGlkOiBlcnJvcnMubmFtZSwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5uYW1lCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgbnVsbCwgZXJyb3JzLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJ1c2VyTmFtZSIKICAgIH0sICJNXHhGNCB0XHUxRUEzIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENUZXh0YXJlYSwgewogICAgICB0eXBlOiAidGV4dCIsCiAgICAgIG5hbWU6ICJkZXNjcmlwdGlvbiIsCiAgICAgIGlkOiAiZGVzY3JpcHRpb24iLAogICAgICBwbGFjZWhvbGRlcjogIk1ceEY0IHRcdTFFQTMiLAogICAgICBhdXRvQ29tcGxldGU6ICJkZXNjcmlwdGlvbiIsCiAgICAgIHZhbGlkOiBlcnJvcnMuZGVzY3JpcHRpb24gfHwgbnVsbCwKICAgICAgaW52YWxpZDogdG91Y2hlZC5kZXNjcmlwdGlvbiAmJiAhIWVycm9ycy5kZXNjcmlwdGlvbiwKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICB2YWx1ZTogdmFsdWVzLmRlc2NyaXB0aW9uCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgbnVsbCwgZXJyb3JzLmRlc2NyaXB0aW9uKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAiY3VzdG9tZXJUeXBlIgogICAgfSwgIlx1MDExMFx1MUVEMWkgdFx1MDFCMFx1MUVFM25nIGtoXHhFMWNoIGhceEUwbmcgXHhFMXAgZFx1MUVFNW5nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENTZWxlY3QsIHsKICAgICAgY3VzdG9tOiB0cnVlLAogICAgICBuYW1lOiAiY3VzdG9tZXJUeXBlIiwKICAgICAgaWQ6ICJjdXN0b21lclR5cGUiLAogICAgICB2YWx1ZTogdmFsdWVzLmN1c3RvbWVyVHlwZSwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICBzZXRGaWVsZFZhbHVlKCdjdXN0b21lclR5cGUnLCBlLnRhcmdldC52YWx1ZSk7CiAgICAgIH0KICAgIH0sIGN1c3RvbWVyVHlwZSAmJiBjdXN0b21lclR5cGUubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgib3B0aW9uIiwgewogICAgICAgIGtleTogaXRlbS5pZCwKICAgICAgICB2YWx1ZTogaXRlbS5pZAogICAgICB9LCBpdGVtLm5hbWUpOwogICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCBudWxsLCBlcnJvcnMuY3VzdG9tZXJUeXBlKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICB9LCAiVGhcdTFFRERpIGdpYW4gYlx1MUVBRnQgXHUwMTExXHUxRUE3dSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogImRhdGUiLAogICAgICBpZDogInN0YXJ0VGltZSIsCiAgICAgIG5hbWU6ICJzdGFydFRpbWUiLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBwbGFjZWhvbGRlcjogIlRoXHUxRUREaSBnaWFuIGJcdTFFQUZ0IFx1MDExMVx1MUVBN3UiCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLnN0YXJ0VGltZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInBhc3N3b3JkIgogICAgfSwgIlRoXHUxRUREaSBnaWFuIGtcdTFFQkZ0IHRoXHhGQWMiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgIHR5cGU6ICJkYXRlIiwKICAgICAgaWQ6ICJlbmRUaW1lIiwKICAgICAgbmFtZTogImVuZFRpbWUiLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBwbGFjZWhvbGRlcjogIlRoXHUxRUREaSBnaWFuIGtcdTFFQkZ0IHRoXHhGQWMiCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLmVuZFRpbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICB2YXJpYW50OiAiY3VzdG9tLWNoZWNrYm94IiwKICAgICAgY2xhc3NOYW1lOiAicGItMyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dENoZWNrYm94LCB7CiAgICAgIGN1c3RvbTogdHJ1ZSwKICAgICAgaWQ6ICJpc0xvY2siLAogICAgICBuYW1lOiAiaXNMb2NrIiwKICAgICAgdmFsaWQ6ICFlcnJvcnMuaXNMb2NrLAogICAgICBpbnZhbGlkOiB0b3VjaGVkLmlzTG9jayAmJiAhIWVycm9ycy5pc0xvY2ssCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1cgogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICB2YXJpYW50OiAiY3VzdG9tLWNoZWNrYm94IiwKICAgICAgaHRtbEZvcjogImlzTG9jayIKICAgIH0sICJLaFx4RjNhIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmgiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICB9LCAiVHJcdTFFQTFuZyB0aFx4RTFpIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENTZWxlY3QsIHsKICAgICAgY3VzdG9tOiB0cnVlLAogICAgICBuYW1lOiAic3RhdHVzIiwKICAgICAgaWQ6ICJzdGF0dXMiLAogICAgICB2YWx1ZTogdmFsdWVzLnN0YXR1cywKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICBzZXRGaWVsZFZhbHVlKCdzdGF0dXMnLCBlLnRhcmdldC52YWx1ZSk7CiAgICAgIH0KICAgIH0sIFByb21vdGlvblN0YXR1cy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJvcHRpb24iLCB7CiAgICAgICAga2V5OiBpdGVtLnZhbHVlLAogICAgICAgIHZhbHVlOiBpdGVtLnZhbHVlCiAgICAgIH0sIGl0ZW0udGl0bGUpOwogICAgfSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgIHNpemU6ICJzbSIsCiAgICAgIGNsYXNzTmFtZTogIm1sLTMiLAogICAgICBvbkNsaWNrOiBvbkFkZFByb2R1Y3QKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICdjaWxBcnJvd0NpcmNsZVJpZ2h0JywKICAgICAgY2xhc3NOYW1lOiAibXItMiIKICAgIH0pLCAiVGhceEVBbSBzXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjEyIgogICAgfSwgcHJvZHVjdExpc3QubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICB2YXIgX3Byb2R1Y3RMaXN0JGluZGV4OwoKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIHsKICAgICAgICBrZXk6IGluZGV4LAogICAgICAgIGNsYXNzTmFtZTogIm10LTMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIHsKICAgICAgICBjbGFzc05hbWU6ICJkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgICAgbGc6ICI0IgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICAgIH0sICJTXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgICAgZGVmYXVsdFZhbHVlOiAoX3Byb2R1Y3RMaXN0JGluZGV4ID0gcHJvZHVjdExpc3RbaW5kZXhdKSA9PT0gbnVsbCB8fCBfcHJvZHVjdExpc3QkaW5kZXggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9kdWN0TGlzdCRpbmRleC5pZCwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvblNlbGVjdGVkUHJvZHVjdChldmVudCwgaW5kZXgpOwogICAgICAgIH0sCiAgICAgICAgb25JbnB1dENoYW5nZTogb25TZWFyY2hQcm9kdWN0LAogICAgICAgIG9wdGlvbnM6IHByb2R1Y3RzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWQsCiAgICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQoaXRlbS5jb2RlLCAiLSIpLmNvbmNhdChpdGVtLm5hbWUpCiAgICAgICAgICB9OwogICAgICAgIH0pCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICAgIGxnOiAiNCIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgICAgaHRtbEZvcjogInBhc3N3b3JkIgogICAgICB9LCAiTXVhIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgIG5hbWU6ICJidXkiLAogICAgICAgIGlkOiAiYnV5IiwKICAgICAgICBwbGFjZWhvbGRlcjogIkR1bmcgdFx4RURjaCIsCiAgICAgICAgYXV0b0NvbXBsZXRlOiAiYnV5IiwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24oZXZlbnQudGFyZ2V0LnZhbHVlLCBpbmRleCwgJ2J1eScpOwogICAgICAgIH0sCiAgICAgICAgaW52YWxpZDogIXByb2R1Y3RMaXN0W2luZGV4XS5idXksCiAgICAgICAgdmFsaWQ6IHByb2R1Y3RMaXN0W2luZGV4XS5idXksCiAgICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICAgIHZhbHVlOiBwcm9kdWN0TGlzdFtpbmRleF0uYnV5CiAgICAgIH0pLCAhcHJvZHVjdExpc3RbaW5kZXhdLmJ1eSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgICAgfSwgIkdpXHhFMSB0clx1MUVDQiBwaFx1MUVBM2kgbFx1MUVEQm4gaFx1MDFBMW4gMCIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICAgIGxnOiAiMyIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgICAgaHRtbEZvcjogInBhc3N3b3JkIgogICAgICB9LCAiVFx1MUVCN25nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgIG5hbWU6ICJnaWZ0IiwKICAgICAgICBpZDogImdpZnQiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiRHVuZyB0XHhFRGNoIiwKICAgICAgICBhdXRvQ29tcGxldGU6ICJnaWZ0IiwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvbkNoYW5nZVByb2R1Y3RQcm9tb3Rpb24oZXZlbnQudGFyZ2V0LnZhbHVlLCBpbmRleCwgJ2dpZnQnKTsKICAgICAgICB9LAogICAgICAgIGludmFsaWQ6ICFwcm9kdWN0TGlzdFtpbmRleF0uZ2lmdCwKICAgICAgICB2YWxpZDogcHJvZHVjdExpc3RbaW5kZXhdLmdpZnQsCiAgICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICAgIHZhbHVlOiBwcm9kdWN0TGlzdFtpbmRleF0uZ2lmdAogICAgICB9KSwgIXByb2R1Y3RMaXN0W2luZGV4XS5naWZ0ICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgICB9LCAiR2lceEUxIHRyXHUxRUNCIHBoXHUxRUEzaSBsXHUxRURCbiBoXHUwMUExbiAwIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgICAgbGc6ICIxIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgICAgc2l6ZTogInNtIiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgcmV0dXJuIG9uUmVtb3ZlUHJvZHVjdChpbmRleCk7CiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICAgIG5hbWU6ICJjaWxYQ2lyY2xlIgogICAgICB9KSkpKSk7CiAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCB7CiAgICAgIGNsYXNzTmFtZTogImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgc2l6ZTogImxnIiwKICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgZGlzYWJsZWQ6IGluaXRpYWxTdGF0ZS5sb2FkaW5nCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICBuYW1lOiAiY2lsLXNhdmUiCiAgICB9KSwgIiAiLCBpbml0aWFsU3RhdGUubG9hZGluZyA/ICfEkGFuZyB44butIGzDvScgOiAnVOG6oW8gbeG7m2knKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICB0eXBlOiAicmVzZXQiLAogICAgICBzaXplOiAibGciLAogICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgIG9uQ2xpY2s6IGhhbmRsZVJlc2V0LAogICAgICBjbGFzc05hbWU6ICJtbC01IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogImNpbC1iYW4iCiAgICB9KSwgIiBYXHhGM2EgbmhcdTFFQURwIGxpXHUxRUM3dSIpKSk7CiAgfSkpKTsKfTsKCmV4cG9ydCBkZWZhdWx0IENyZWF0ZVByb21vdGlvbjs="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/CreatePromotion.js"],"names":["React","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CInvalidFeedback","CFormGroup","CLabel","CInput","CRow","CSelect","CCardTitle","CTextarea","CInputCheckbox","CIcon","Formik","Yup","useDispatch","useSelector","creatingPromotion","useHistory","fetching","PromotionStatus","getCustomerType","globalizedcustomerTypeSelectors","Select","getProduct","globalizedProductSelectors","validationSchema","object","shape","name","string","min","required","startTime","endTime","validate","selectAll","selectAllProduct","CreatePromotion","state","promotion","initialState","dispatch","history","initialValues","description","Date","value","customerType","products","page","size","sort","dependency","status","productList","setProductList","debouncedSearchProduct","useCallback","_","debounce","code","onSearchProduct","length","current","id","onAddProduct","data","product","buy","gift","onSelectedProduct","item","index","copyArr","foundedIndex","findIndex","splice","onChangeProductPromotion","type","onSubmit","values","resetForm","promotionProduct","updatingSuccess","goBack","onRemoveProduct","errors","touched","handleChange","handleBlur","handleSubmit","setFieldValue","handleReset","e","target","map","isLock","title","event","label","loading"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,MAA1B,EAAkCC,QAAlC,QAAiD,OAAjD;AACA,SACEC,OADF,EAEEC,KAFF,EAGEC,WAHF,EAIEC,SAJF,EAKEC,IALF,EAMEC,KANF,EAOEC,gBAPF,EAQEC,UARF,EASEC,MATF,EAUEC,MAVF,EAWEC,IAXF,EAYEC,OAZF,EAaEC,UAbF,EAcEC,SAdF,EAeEC,cAfF,QAgBO,mBAhBP;AAiBA,OAAOC,KAAP,MAAkB,+BAAlB;AAAkD;AAClD,SAAQC,MAAR,QAAqB,QAArB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,iBAAR,QAAgC,iBAAhC;AAGA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,QAAR,QAAuB,qBAAvB;AACA,SAAQC,eAAR,QAA8B,YAA9B;AAEA,SAAQC,eAAR,QAA8B,+CAA9B;AACA,SAAQC,+BAAR,QAA8C,mDAA9C;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,SAAQC,UAAR,QAAyB,uCAAzB;AACA,SAAQC,0BAAR,QAAyC,2CAAzC;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAW;AAClC,SAAOZ,GAAG,CAACa,MAAJ,GAAaC,KAAb,CAAmB;AACxBC,IAAAA,IAAI,EAAEf,GAAG,CAACgB,MAAJ,GACDC,GADC,CACG,CADH,wDAEDC,QAFC,CAEQ,oBAFR,CADkB;AAIxBC,IAAAA,SAAS,EAAEnB,GAAG,CAACgB,MAAJ,GAAaE,QAAb,CAAsB,6BAAtB,CAJa;AAKxBE,IAAAA,OAAO,EAAEpB,GAAG,CAACgB,MAAJ,GAAaE,QAAb,CAAsB,8BAAtB;AALe,GAAnB,CAAP;AAOD,CARD;;AAUA,SAAQG,QAAR,QAAuB,oCAAvB;IACOC,S,GAAad,+B,CAAbc,S;IACWC,gB,GAAoBZ,0B,CAA/BW,S;;AAEP,IAAME,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAAA;;AAAA,qBACLtB,WAAW,CAAC,UAACuB,KAAD;AAAA,WAAWA,KAAK,CAACC,SAAjB;AAAA,GAAD,CADN;AAAA,MACrBC,YADqB,gBACrBA,YADqB;;AAG5B,MAAMC,QAAQ,GAAG3B,WAAW,EAA5B;AACA,MAAM4B,OAAO,GAAGzB,UAAU,EAA1B;AACA,MAAM0B,aAAa,GAAGjD,MAAM;AAC1BkC,IAAAA,IAAI,EAAE,EADoB;AAE1BgB,IAAAA,WAAW,EAAE,EAFa;AAG1BZ,IAAAA,SAAS,EAAE,IAAIa,IAAJ;AAHe,2CAIf,IAAIA,IAAJ,EAJe,sCAKlB,KALkB,sCAMlB1B,eAAe,CAAC,CAAD,CAAf,CAAmB2B,KAND,YAA5B;AAUA,MAAMC,YAAY,GAAGhC,WAAW,CAACoB,SAAD,CAAhC;AACA,MAAMa,QAAQ,GAAGjC,WAAW,CAACqB,gBAAD,CAA5B;AACA3C,EAAAA,SAAS,CAAC,YAAM;AACdgD,IAAAA,QAAQ,CAACrB,eAAe,CAAC;AAAE6B,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,IAAI,EAAE,EAAjB;AAAqBC,MAAAA,IAAI,EAAE,kBAA3B;AAA+CC,MAAAA,UAAU,EAAE;AAA3D,KAAD,CAAhB,CAAR;AACAX,IAAAA,QAAQ,CAAClB,UAAU,CAAC;AAAE0B,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,IAAI,EAAE,EAAjB;AAAqBC,MAAAA,IAAI,EAAE,kBAA3B;AAA+CE,MAAAA,MAAM,EAAE;AAAvD,KAAD,CAAX,CAAR;AACD,GAHQ,EAGN,EAHM,CAAT;;AAjB4B,kBAsBU1D,QAAQ,CAAC,EAAD,CAtBlB;AAAA;AAAA,MAsBrB2D,WAtBqB;AAAA,MAsBRC,cAtBQ;;AAuB5B,MAAMC,sBAAsB,GAAGC,WAAW,CACxCC,CAAC,CAACC,QAAF,CAAW,UAAAb,KAAK,EAAI;AAClBL,IAAAA,QAAQ,CAAClB,UAAU,CAAC;AAAE0B,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,IAAI,EAAE,EAAjB;AAAqBC,MAAAA,IAAI,EAAE,kBAA3B;AAA+CS,MAAAA,IAAI,EAAEd,KAArD;AAA4DlB,MAAAA,IAAI,EAAEkB,KAAlE;AAAyEO,MAAAA,MAAM,EAAE;AAAjF,KAAD,CAAX,CAAR;AACD,GAFD,EAEG,IAFH,CADwC,EAIxC,EAJwC,CAA1C;;AAOA,MAAMQ,eAAe,GAAG,SAAlBA,eAAkB,CAAAf,KAAK,EAAI;AAC/BU,IAAAA,sBAAsB,CAACV,KAAD,CAAtB;AACD,GAFD;;AAGArD,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIsD,YAAY,CAACe,MAAb,GAAsB,CAA1B,EAA6B;AAC3BnB,MAAAA,aAAa,CAACoB,OAAd,CAAsBhB,YAAtB,GAAqCA,YAAY,CAAC,CAAD,CAAZ,CAAgBiB,EAArD;AACD;AACF,GAJQ,EAIN,CAACjB,YAAD,CAJM,CAAT;;AAMA,MAAMkB,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAMC,IAAI,GAAG;AAACC,MAAAA,OAAO,EAAE;AAACH,QAAAA,EAAE,EAAE;AAAL,OAAV;AAAoBI,MAAAA,GAAG,EAAE,CAAzB;AAA4BC,MAAAA,IAAI,EAAE;AAAlC,KAAb;AACAd,IAAAA,cAAc,8BAAKD,WAAL,IAAkBY,IAAlB,GAAd;AACD,GAHD;;AAKA,MAAMI,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,IAAD,EAAOC,KAAP,EAAiB;AACzC,QAAMC,OAAO,sBAAOnB,WAAP,CAAb;;AACA,QAAMoB,YAAY,GAAGD,OAAO,CAACE,SAAR,CAAkB,UAACR,OAAD;AAAA,aAAaA,OAAO,CAACA,OAAR,CAAgBH,EAAhB,KAAuBO,IAAI,CAACzB,KAAzC;AAAA,KAAlB,CAArB;;AACA,QAAI4B,YAAY,IAAI,CAApB,EAAuB;AACrBD,MAAAA,OAAO,CAACG,MAAR,CAAeJ,KAAf,EAAsB,CAAtB;AACD,KAFD,MAEO;AACLC,MAAAA,OAAO,CAACD,KAAD,CAAP,CAAeL,OAAf,GAAyB;AAACH,QAAAA,EAAE,EAAEO,IAAI,CAACzB;AAAV,OAAzB;AACD;;AACDS,IAAAA,cAAc,CAACkB,OAAD,CAAd;AACD,GATD;;AAWA,MAAMI,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAC/B,KAAD,EAAQ0B,KAAR,EAAeM,IAAf,EAAwB;AACvD,QAAML,OAAO,sBAAOnB,WAAP,CAAb;;AACAmB,IAAAA,OAAO,CAACD,KAAD,CAAP,CAAeM,IAAf,IAAuBhC,KAAvB;AACAS,IAAAA,cAAc,CAACkB,OAAD,CAAd;AACD,GAJD;;AAMA,MAAMM,QAAQ,GAAG,SAAXA,QAAW,CAACC,MAAD,QAAyB;AAAA;;AAAA,QAAfC,SAAe,QAAfA,SAAe;AACxCxC,IAAAA,QAAQ,CAACvB,QAAQ,EAAT,CAAR;AACA8D,IAAAA,MAAM,CAACjC,YAAP,sBAAsBiC,MAAM,CAACjB,OAA7B,oDAAsB,gBAAgBhB,YAAtC;AACAiC,IAAAA,MAAM,CAACE,gBAAP,GAA0B5B,WAA1B;AACA0B,IAAAA,MAAM,CAACF,IAAP,GAAc,WAAd;AACArC,IAAAA,QAAQ,CAACzB,iBAAiB,CAACgE,MAAD,CAAlB,CAAR;AACD,GAND;;AAQAvF,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI+C,YAAY,CAAC2C,eAAjB,EAAkC;AAChCzC,MAAAA,OAAO,CAAC0C,MAAR;AACD;AACF,GAJQ,EAIN,CAAC5C,YAAY,CAAC2C,eAAd,CAJM,CAAT;;AAMA,MAAME,eAAe,GAAG,SAAlBA,eAAkB,CAACb,KAAD,EAAW;AACjC,QAAMC,OAAO,sBAAOnB,WAAP,CAAb;;AACAmB,IAAAA,OAAO,CAACG,MAAR,CAAeJ,KAAf,EAAsB,CAAtB;AACAjB,IAAAA,cAAc,CAACkB,OAAD,CAAd;AACD,GAJD;;AAMA,sBACE,oBAAC,KAAD,qBACE,oBAAC,WAAD;AAAa,IAAA,KAAK,EAAC;AAAnB,kBACE,oBAAC,UAAD,oEADF,CADF,eAIE,oBAAC,SAAD,qBACE,oBAAC,MAAD;AAAQ,IAAA,aAAa,EAAE9B,aAAa,CAACoB,OAArC;AAA8C,IAAA,QAAQ,EAAE7B,QAAQ,CAACT,gBAAD,CAAhE;AAAoF,IAAA,QAAQ,EAAEsD;AAA9F,KACG;AAAA;;AAAA,QACCC,MADD,SACCA,MADD;AAAA,QAECM,MAFD,SAECA,MAFD;AAAA,QAGCC,OAHD,SAGCA,OAHD;AAAA,QAMCC,YAND,SAMCA,YAND;AAAA,QAOCC,UAPD,SAOCA,UAPD;AAAA,QAQCC,YARD,SAQCA,YARD;AAAA,QASCC,aATD,SASCA,aATD;AAAA,QAYCC,WAZD,SAYCA,WAZD;AAAA,wBAeC,oBAAC,KAAD;AAAO,MAAA,QAAQ,EAAEF,YAAjB;AAA+B,MAAA,UAAU,MAAzC;AAA0C,MAAA,IAAI,EAAC;AAA/C,oBACE,oBAAC,IAAD,qBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC;AAAT,oBACE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,yDADF,eAEE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,EAAE,EAAC,MAHL;AAIE,MAAA,WAAW,EAAC,iDAJd;AAKE,MAAA,YAAY,EAAC,MALf;AAME,MAAA,KAAK,EAAE,CAAAJ,MAAM,SAAN,IAAAA,MAAM,WAAN,4BAAAA,MAAM,CAAE1D,IAAR,8DAAckC,MAAd,IAAuB,CAAvB,IAA4B,IANrC;AAOE,MAAA,OAAO,EAAEwB,MAAM,CAAC1D,IAPlB;AAQE,MAAA,QAAQ,MARV;AASE,MAAA,QAAQ,EAAE4D,YATZ;AAUE,MAAA,MAAM,EAAEC,UAVV;AAWE,MAAA,KAAK,EAAET,MAAM,CAACpD;AAXhB,MAFF,eAeE,oBAAC,gBAAD,QAAmB0D,MAAM,CAAC1D,IAA1B,CAfF,CADF,eAkBE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,uBADF,eAEE,oBAAC,SAAD;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,aAFP;AAGE,MAAA,EAAE,EAAC,aAHL;AAIE,MAAA,WAAW,EAAC,eAJd;AAKE,MAAA,YAAY,EAAC,aALf;AAME,MAAA,KAAK,EAAE0D,MAAM,CAAC1C,WAAP,IAAsB,IAN/B;AAOE,MAAA,OAAO,EAAE2C,OAAO,CAAC3C,WAAR,IAAuB,CAAC,CAAC0C,MAAM,CAAC1C,WAP3C;AAQE,MAAA,QAAQ,EAAE4C,YARZ;AASE,MAAA,MAAM,EAAEC,UATV;AAUE,MAAA,KAAK,EAAET,MAAM,CAACpC;AAVhB,MAFF,eAcE,oBAAC,gBAAD,QAAmB0C,MAAM,CAAC1C,WAA1B,CAdF,CAlBF,eAkCE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,wEADF,eAEE,oBAAC,OAAD;AACE,MAAA,MAAM,MADR;AAEE,MAAA,IAAI,EAAC,cAFP;AAGE,MAAA,EAAE,EAAC,cAHL;AAIE,MAAA,KAAK,EAAEoC,MAAM,CAACjC,YAJhB;AAKE,MAAA,QAAQ,EAAE,kBAAC8C,CAAD,EAAO;AACfF,QAAAA,aAAa,CAAC,cAAD,EAAiBE,CAAC,CAACC,MAAF,CAAShD,KAA1B,CAAb;AACD;AAPH,OASGC,YAAY,IACXA,YAAY,CAACgD,GAAb,CAAiB,UAACxB,IAAD;AAAA,0BACf;AAAQ,QAAA,GAAG,EAAEA,IAAI,CAACP,EAAlB;AAAsB,QAAA,KAAK,EAAEO,IAAI,CAACP;AAAlC,SACGO,IAAI,CAAC3C,IADR,CADe;AAAA,KAAjB,CAVJ,CAFF,eAkBE,oBAAC,gBAAD,QAAmB0D,MAAM,CAACvC,YAA1B,CAlBF,CAlCF,CADF,eAwDE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC;AAAT,oBACE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,+CADF,eAEE,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,MAAb;AAAoB,MAAA,EAAE,EAAC,WAAvB;AAAmC,MAAA,IAAI,EAAC,WAAxC;AAAoD,MAAA,QAAQ,EAAEyC,YAA9D;AAA4E,MAAA,WAAW,EAAC;AAAxF,MAFF,eAGE,oBAAC,gBAAD;AAAkB,MAAA,SAAS,EAAC;AAA5B,OAAuCF,MAAM,CAACtD,SAA9C,CAHF,CADF,eAOE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,yCADF,eAEE,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,MAAb;AAAoB,MAAA,EAAE,EAAC,SAAvB;AAAiC,MAAA,IAAI,EAAC,SAAtC;AAAgD,MAAA,QAAQ,EAAEwD,YAA1D;AAAwE,MAAA,WAAW,EAAC;AAApF,MAFF,eAGE,oBAAC,gBAAD;AAAkB,MAAA,SAAS,EAAC;AAA5B,OAAuCF,MAAM,CAACrD,OAA9C,CAHF,CAPF,eAYE,oBAAC,UAAD;AAAY,MAAA,OAAO,EAAC,iBAApB;AAAsC,MAAA,SAAS,EAAC;AAAhD,oBACE,oBAAC,cAAD;AACE,MAAA,MAAM,MADR;AAEE,MAAA,EAAE,EAAC,QAFL;AAGE,MAAA,IAAI,EAAC,QAHP;AAIE,MAAA,KAAK,EAAE,CAACqD,MAAM,CAACU,MAJjB;AAKE,MAAA,OAAO,EAAET,OAAO,CAACS,MAAR,IAAkB,CAAC,CAACV,MAAM,CAACU,MALtC;AAME,MAAA,QAAQ,EAAER,YANZ;AAOE,MAAA,MAAM,EAAEC;AAPV,MADF,eAUE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,iBAAhB;AAAkC,MAAA,OAAO,EAAC;AAA1C,2CAVF,CAZF,eA0BE,oBAAC,UAAD,qBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC;AAAhB,4BADF,eAEE,oBAAC,OAAD;AACE,MAAA,MAAM,MADR;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,EAAE,EAAC,QAHL;AAIE,MAAA,KAAK,EAAET,MAAM,CAAC3B,MAJhB;AAKE,MAAA,QAAQ,EAAE,kBAACwC,CAAD,EAAO;AACfF,QAAAA,aAAa,CAAC,QAAD,EAAWE,CAAC,CAACC,MAAF,CAAShD,KAApB,CAAb;AACD;AAPH,OASG3B,eAAe,CAAC4E,GAAhB,CAAoB,UAACxB,IAAD;AAAA,0BACnB;AAAQ,QAAA,GAAG,EAAEA,IAAI,CAACzB,KAAlB;AAAyB,QAAA,KAAK,EAAEyB,IAAI,CAACzB;AAArC,SACGyB,IAAI,CAAC0B,KADR,CADmB;AAAA,KAApB,CATH,CAFF,CA1BF,CAxDF,eAqGE,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAC,SAAf;AAAyB,MAAA,OAAO,EAAC,SAAjC;AAA2C,MAAA,KAAK,EAAC,QAAjD;AAA0D,MAAA,IAAI,EAAC,IAA/D;AAAoE,MAAA,SAAS,EAAC,MAA9E;AAAqF,MAAA,OAAO,EAAEhC;AAA9F,oBACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,qBAAb;AAAoC,MAAA,SAAS,EAAC;AAA9C,MADF,+BArGF,eAyGE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC;AAAT,OACGX,WAAW,CAACyC,GAAZ,CAAgB,UAACxB,IAAD,EAAOC,KAAP;AAAA;;AAAA,0BACf,oBAAC,UAAD;AAAY,QAAA,GAAG,EAAEA,KAAjB;AAAwB,QAAA,SAAS,EAAC;AAAlC,sBACE,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAC;AAAhB,sBACE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC;AAAT,sBACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC;AAAhB,8BADF,eAEE,oBAAC,MAAD;AACE,QAAA,YAAY,wBAAElB,WAAW,CAACkB,KAAD,CAAb,uDAAE,mBAAoBR,EADpC;AAEE,QAAA,QAAQ,EAAE,kBAACkC,KAAD;AAAA,iBAAW5B,iBAAiB,CAAC4B,KAAD,EAAQ1B,KAAR,CAA5B;AAAA,SAFZ;AAGE,QAAA,aAAa,EAAEX,eAHjB;AAIE,QAAA,OAAO,EAAEb,QAAQ,CAAC+C,GAAT,CAAa,UAACxB,IAAD;AAAA,iBAAW;AAC/BzB,YAAAA,KAAK,EAAEyB,IAAI,CAACP,EADmB;AAE/BmC,YAAAA,KAAK,YAAK5B,IAAI,CAACX,IAAV,cAAkBW,IAAI,CAAC3C,IAAvB;AAF0B,WAAX;AAAA,SAAb;AAJX,QAFF,CADF,eAaE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC;AAAT,sBACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC;AAAhB,eADF,eAEE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,IAAI,EAAC,KAFP;AAGE,QAAA,EAAE,EAAC,KAHL;AAIE,QAAA,WAAW,EAAC,cAJd;AAKE,QAAA,YAAY,EAAC,KALf;AAME,QAAA,QAAQ,EAAE,kBAACsE,KAAD;AAAA,iBAAWrB,wBAAwB,CAACqB,KAAK,CAACJ,MAAN,CAAahD,KAAd,EAAqB0B,KAArB,EAA4B,KAA5B,CAAnC;AAAA,SANZ;AAOE,QAAA,OAAO,EAAE,CAAClB,WAAW,CAACkB,KAAD,CAAX,CAAmBJ,GAP/B;AAQE,QAAA,KAAK,EAAEd,WAAW,CAACkB,KAAD,CAAX,CAAmBJ,GAR5B;AASE,QAAA,MAAM,EAAEqB,UATV;AAUE,QAAA,KAAK,EAAEnC,WAAW,CAACkB,KAAD,CAAX,CAAmBJ;AAV5B,QAFF,EAcG,CAACd,WAAW,CAACkB,KAAD,CAAX,CAAmBJ,GAApB,iBAA2B,oBAAC,gBAAD;AAAkB,QAAA,SAAS,EAAC;AAA5B,yDAd9B,CAbF,eA6BE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC;AAAT,sBACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC;AAAhB,qBADF,eAEE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,EAAE,EAAC,MAHL;AAIE,QAAA,WAAW,EAAC,cAJd;AAKE,QAAA,YAAY,EAAC,MALf;AAME,QAAA,QAAQ,EAAE,kBAAC8B,KAAD;AAAA,iBAAWrB,wBAAwB,CAACqB,KAAK,CAACJ,MAAN,CAAahD,KAAd,EAAqB0B,KAArB,EAA4B,MAA5B,CAAnC;AAAA,SANZ;AAOE,QAAA,OAAO,EAAE,CAAClB,WAAW,CAACkB,KAAD,CAAX,CAAmBH,IAP/B;AAQE,QAAA,KAAK,EAAEf,WAAW,CAACkB,KAAD,CAAX,CAAmBH,IAR5B;AASE,QAAA,MAAM,EAAEoB,UATV;AAUE,QAAA,KAAK,EAAEnC,WAAW,CAACkB,KAAD,CAAX,CAAmBH;AAV5B,QAFF,EAcG,CAACf,WAAW,CAACkB,KAAD,CAAX,CAAmBH,IAApB,iBAA4B,oBAAC,gBAAD;AAAkB,QAAA,SAAS,EAAC;AAA5B,yDAd/B,CA7BF,eA6CE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC;AAAT,sBACE,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAC,QAAf;AAAwB,QAAA,OAAO,EAAC,SAAhC;AAA0C,QAAA,KAAK,EAAC,QAAhD;AAAyD,QAAA,IAAI,EAAC,IAA9D;AAAmE,QAAA,OAAO,EAAE;AAAA,iBAAMgB,eAAe,CAACb,KAAD,CAArB;AAAA;AAA5E,sBACE,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC;AAAZ,QADF,CADF,CA7CF,CADF,CADe;AAAA,KAAhB,CADH,CAzGF,CADF,eAoKE,oBAAC,UAAD;AAAY,MAAA,SAAS,EAAC;AAAtB,oBACE,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC,QAAd;AAAuB,MAAA,IAAI,EAAC,IAA5B;AAAiC,MAAA,KAAK,EAAC,SAAvC;AAAiD,MAAA,QAAQ,EAAEhC,YAAY,CAAC4D;AAAxE,oBACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC;AAAZ,MADF,OAC6B5D,YAAY,CAAC4D,OAAb,GAAuB,YAAvB,GAAsC,SADnE,CADF,eAIE,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC,OAAd;AAAsB,MAAA,IAAI,EAAC,IAA3B;AAAgC,MAAA,KAAK,EAAC,QAAtC;AAA+C,MAAA,OAAO,EAAER,WAAxD;AAAqE,MAAA,SAAS,EAAC;AAA/E,oBACE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC;AAAZ,MADF,gCAJF,CApKF,CAfD;AAAA,GADH,CADF,CAJF,CADF;AAwMD,CAzRD;;AA2RA,eAAevD,eAAf","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CInvalidFeedback,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CSelect,\n  CCardTitle,\n  CTextarea,\n  CInputCheckbox,\n} from '@coreui/react/lib';\nimport CIcon from '@coreui/icons-react/lib/CIcon';;\nimport {Formik} from 'formik';\nimport * as Yup from 'yup';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {creatingPromotion} from './promotion.api';\n\n\nimport {useHistory} from 'react-router-dom';\nimport {fetching} from './promotion.reducer';\nimport {PromotionStatus} from './contants';\n\nimport {getCustomerType} from '../../customer/CustomerType/customer-type.api';\nimport {globalizedcustomerTypeSelectors} from '../../customer/CustomerType/customer-type.reducer';\nimport Select from 'react-select';\nimport {getProduct} from '../../product/ProductList/product.api';\nimport {globalizedProductSelectors} from '../../product/ProductList/product.reducer';\n\nconst validationSchema = function() {\n  return Yup.object().shape({\n    name: Yup.string()\n        .min(5, `Tên phải lớn hơn 5 kí tự`)\n        .required('Tên không để trống'),\n    startTime: Yup.string().required('Ngày bắt đầu không để trống'),\n    endTime: Yup.string().required('Ngày kết thúc không để trống'),\n  });\n};\n\nimport {validate} from '../../../../shared/utils/normalize';\nconst {selectAll} = globalizedcustomerTypeSelectors;\nconst {selectAll: selectAllProduct} = globalizedProductSelectors;\n\nconst CreatePromotion = () => {\n  const {initialState} = useSelector((state) => state.promotion);\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const initialValues = useRef({\n    name: '',\n    description: '',\n    startTime: new Date(),\n    startTime: new Date(),\n    isLock: false,\n    status: PromotionStatus[0].value,\n  });\n\n\n  const customerType = useSelector(selectAll);\n  const products = useSelector(selectAllProduct);\n  useEffect(() => {\n    dispatch(getCustomerType({ page: 0, size: 20, sort: 'createdDate,DESC', dependency: true }));\n    dispatch(getProduct({ page: 0, size: 20, sort: 'createdDate,DESC', status: \"ACTIVE\" }));\n  }, []);\n\n  const [productList, setProductList] = useState([]);\n  const debouncedSearchProduct = useCallback(\n    _.debounce(value => {\n      dispatch(getProduct({ page: 0, size: 20, sort: 'createdDate,DESC', code: value, name: value, status: 'ACTIVE' }));\n    }, 1000),\n    []\n  );\n\n  const onSearchProduct = value => {\n    debouncedSearchProduct(value);\n  };\n  useEffect(() => {\n    if (customerType.length > 0) {\n      initialValues.current.customerType = customerType[0].id;\n    }\n  }, [customerType]);\n\n  const onAddProduct = () => {\n    const data = {product: {id: ''}, buy: 0, gift: 0};\n    setProductList([...productList, data]);\n  };\n\n  const onSelectedProduct = (item, index) => {\n    const copyArr = [...productList];\n    const foundedIndex = copyArr.findIndex((product) => product.product.id === item.value);\n    if (foundedIndex >= 0) {\n      copyArr.splice(index, 1);\n    } else {\n      copyArr[index].product = {id: item.value};\n    }\n    setProductList(copyArr);\n  };\n\n  const onChangeProductPromotion = (value, index, type) => {\n    const copyArr = [...productList];\n    copyArr[index][type] = value;\n    setProductList(copyArr);\n  };\n\n  const onSubmit = (values, {resetForm}) => {\n    dispatch(fetching());\n    values.customerType = values.current?.customerType;\n    values.promotionProduct = productList;\n    values.type = 'SHORTTERM';\n    dispatch(creatingPromotion(values));\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  const onRemoveProduct = (index) => {\n    const copyArr = [...productList];\n    copyArr.splice(index, 1);\n    setProductList(copyArr);\n  };\n\n  return (\n    <CCard>\n      <CCardHeader class=\"card-header\">\n        <CCardTitle>Thêm mới chương trình bán hàng</CCardTitle>\n      </CCardHeader>\n      <CCardBody>\n        <Formik initialValues={initialValues.current} validate={validate(validationSchema)} onSubmit={onSubmit}>\n          {({\n            values,\n            errors,\n            touched,\n\n\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue,\n\n\n            handleReset\n            ,\n          }) => (\n            <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n              <CRow>\n                <CCol lg=\"6\">\n                  <CFormGroup>\n                    <CLabel htmlFor=\"lastName\">Tên chương trình bán hàng</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"name\"\n                      id=\"name\"\n                      placeholder=\"Tên chương trình bán hàng\"\n                      autoComplete=\"name\"\n                      valid={errors?.name?.length > 5 || null}\n                      invalid={errors.name}\n                      required\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.name}\n                    />\n                    <CInvalidFeedback>{errors.name}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"userName\">Mô tả</CLabel>\n                    <CTextarea\n                      type=\"text\"\n                      name=\"description\"\n                      id=\"description\"\n                      placeholder=\"Mô tả\"\n                      autoComplete=\"description\"\n                      valid={errors.description || null}\n                      invalid={touched.description && !!errors.description}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.description}\n                    />\n                    <CInvalidFeedback>{errors.description}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"customerType\">Đối tượng khách hàng áp dụng</CLabel>\n                    <CSelect\n                      custom\n                      name=\"customerType\"\n                      id=\"customerType\"\n                      value={values.customerType}\n                      onChange={(e) => {\n                        setFieldValue('customerType', e.target.value);\n                      }}\n                    >\n                      {customerType &&\n                        customerType.map((item) => (\n                          <option key={item.id} value={item.id}>\n                            {item.name}\n                          </option>\n                        ))}\n                    </CSelect>\n                    <CInvalidFeedback>{errors.customerType}</CInvalidFeedback>\n                  </CFormGroup>\n                </CCol>\n                <CCol lg=\"6\">\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Thời gian bắt đầu</CLabel>\n                    <CInput type=\"date\" id=\"startTime\" name=\"startTime\" onChange={handleChange} placeholder=\"Thời gian bắt đầu\" />\n                    <CInvalidFeedback className=\"d-block\">{errors.startTime}</CInvalidFeedback>\n                  </CFormGroup>\n\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Thời gian kết thúc</CLabel>\n                    <CInput type=\"date\" id=\"endTime\" name=\"endTime\" onChange={handleChange} placeholder=\"Thời gian kết thúc\" />\n                    <CInvalidFeedback className=\"d-block\">{errors.endTime}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup variant=\"custom-checkbox\" className=\"pb-3\">\n                    <CInputCheckbox\n                      custom\n                      id=\"isLock\"\n                      name=\"isLock\"\n                      valid={!errors.isLock}\n                      invalid={touched.isLock && !!errors.isLock}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                    />\n                    <CLabel variant=\"custom-checkbox\" htmlFor=\"isLock\">\n                      Khóa chương trình\n                    </CLabel>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Trạng thái</CLabel>\n                    <CSelect\n                      custom\n                      name=\"status\"\n                      id=\"status\"\n                      value={values.status}\n                      onChange={(e) => {\n                        setFieldValue('status', e.target.value);\n                      }}\n                    >\n                      {PromotionStatus.map((item) => (\n                        <option key={item.value} value={item.value}>\n                          {item.title}\n                        </option>\n                      ))}\n                    </CSelect>\n                  </CFormGroup>\n                </CCol>\n                <CButton color=\"primary\" variant=\"outline\" shape=\"square\" size=\"sm\" className=\"ml-3\" onClick={onAddProduct}>\n                  <CIcon name={'cilArrowCircleRight'} className=\"mr-2\" />\n                  Thêm sản phẩm\n                </CButton>\n                <CCol lg=\"12\">\n                  {productList.map((item, index) => (\n                    <CFormGroup key={index} className=\"mt-3\">\n                      <CRow className=\"d-flex align-items-center\">\n                        <CCol lg=\"4\">\n                          <CLabel htmlFor=\"password\">Sản phẩm</CLabel>\n                          <Select\n                            defaultValue={productList[index]?.id}\n                            onChange={(event) => onSelectedProduct(event, index)}\n                            onInputChange={onSearchProduct}\n                            options={products.map((item) => ({\n                              value: item.id,\n                              label: `${item.code}-${item.name}`,\n                            }))}\n                          />\n                        </CCol>\n                        <CCol lg=\"4\">\n                          <CLabel htmlFor=\"password\">Mua</CLabel>\n                          <CInput\n                            type=\"number\"\n                            name=\"buy\"\n                            id=\"buy\"\n                            placeholder=\"Dung tích\"\n                            autoComplete=\"buy\"\n                            onChange={(event) => onChangeProductPromotion(event.target.value, index, 'buy')}\n                            invalid={!productList[index].buy}\n                            valid={productList[index].buy}\n                            onBlur={handleBlur}\n                            value={productList[index].buy}\n                          />\n                          {!productList[index].buy && <CInvalidFeedback className=\"d-block\">Giá trị phải lớn hơn 0</CInvalidFeedback>}\n                        </CCol>\n                        <CCol lg=\"3\">\n                          <CLabel htmlFor=\"password\">Tặng</CLabel>\n                          <CInput\n                            type=\"number\"\n                            name=\"gift\"\n                            id=\"gift\"\n                            placeholder=\"Dung tích\"\n                            autoComplete=\"gift\"\n                            onChange={(event) => onChangeProductPromotion(event.target.value, index, 'gift')}\n                            invalid={!productList[index].gift}\n                            valid={productList[index].gift}\n                            onBlur={handleBlur}\n                            value={productList[index].gift}\n                          />\n                          {!productList[index].gift && <CInvalidFeedback className=\"d-block\">Giá trị phải lớn hơn 0</CInvalidFeedback>}\n                        </CCol>\n                        <CCol lg=\"1\">\n                          <CButton color=\"danger\" variant=\"outline\" shape=\"square\" size=\"sm\" onClick={() => onRemoveProduct(index)}>\n                            <CIcon name=\"cilXCircle\" />\n                          </CButton>\n                        </CCol>\n                      </CRow>\n                    </CFormGroup>\n                  ))}\n                </CCol>\n              </CRow>\n              <CFormGroup className=\"d-flex justify-content-center\">\n                <CButton type=\"submit\" size=\"lg\" color=\"primary\" disabled={initialState.loading}>\n                  <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Tạo mới'}\n                </CButton>\n                <CButton type=\"reset\" size=\"lg\" color=\"danger\" onClick={handleReset} className=\"ml-5\">\n                  <CIcon name=\"cil-ban\" /> Xóa nhập liệu\n                </CButton>\n              </CFormGroup>\n            </CForm>\n          )}\n        </Formik>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default CreatePromotion;\n"]}]}