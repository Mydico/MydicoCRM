{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/Promotions.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/Promotions.js","mtime":1620033033944},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgppbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBDQ2FyZEJvZHksIENCYWRnZSwgQ0J1dHRvbiwgQ0NvbGxhcHNlLCBDRGF0YVRhYmxlLCBDQ2FyZCwgQ0NhcmRIZWFkZXIsIENSb3csIENDb2wsIENQYWdpbmF0aW9uLCBDTW9kYWwsIENNb2RhbEJvZHksIENNb2RhbEZvb3RlciwgQ01vZGFsSGVhZGVyLCBDTW9kYWxUaXRsZSB9IGZyb20gJ0Bjb3JldWkvcmVhY3QnOyAvLyBpbXBvcnQgdXNlcnNEYXRhIGZyb20gJy4uLy4uLy4uL3VzZXJzL1VzZXJzRGF0YS5qcyc7CgppbXBvcnQgQ0ljb24gZnJvbSAnQGNvcmV1aS9pY29ucy1yZWFjdCc7CmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgZ2V0UHJvbW90aW9uLCB1cGRhdGVQcm9tb3Rpb24gfSBmcm9tICcuL3Byb21vdGlvbi5hcGkuanMnOwppbXBvcnQgeyBnbG9iYWxpemVkUHJvbW90aW9uU2VsZWN0b3JzLCByZXNldCB9IGZyb20gJy4vcHJvbW90aW9uLnJlZHVjZXIuanMnOwppbXBvcnQgeyB1c2VIaXN0b3J5IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7Cgp2YXIgUHJvbW90aW9uID0gZnVuY3Rpb24gUHJvbW90aW9uKHByb3BzKSB7CiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKFtdKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIF9kZXRhaWxzID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0RGV0YWlscyA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBzZWxlY3RlZFBybyA9IHVzZVJlZih7CiAgICBpZDogbnVsbCwKICAgIGlzTG9jazogZmFsc2UKICB9KTsKCiAgdmFyIF91c2VTZWxlY3RvciA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnByb21vdGlvbjsKICB9KSwKICAgICAgaW5pdGlhbFN0YXRlID0gX3VzZVNlbGVjdG9yLmluaXRpYWxTdGF0ZTsKCiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZSgxKSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICBhY3RpdmVQYWdlID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0QWN0aXZlUGFnZSA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBfdXNlU3RhdGU1ID0gdXNlU3RhdGUoZmFsc2UpLAogICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksCiAgICAgIHByaW1hcnkgPSBfdXNlU3RhdGU2WzBdLAogICAgICBzZXRQcmltYXJ5ID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTcgPSB1c2VTdGF0ZSgyMCksCiAgICAgIF91c2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU3LCAxKSwKICAgICAgc2l6ZSA9IF91c2VTdGF0ZThbMF07CgogIHZhciBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7CiAgdmFyIGhpc3RvcnkgPSB1c2VIaXN0b3J5KCk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoKGdldFByb21vdGlvbigpKTsKICAgIGRpc3BhdGNoKHJlc2V0KCkpOwogIH0sIFtdKTsKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGFjdGl2ZVBhZ2UgPiAxKSBkaXNwYXRjaChnZXRQcm9tb3Rpb24oewogICAgICBwYWdlOiBhY3RpdmVQYWdlIC0gMSwKICAgICAgc2l6ZTogc2l6ZSwKICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLGRlc2MnCiAgICB9KSk7CiAgfSwgW2FjdGl2ZVBhZ2VdKTsKICB2YXIgc2VsZWN0QWxsID0gZ2xvYmFsaXplZFByb21vdGlvblNlbGVjdG9ycy5zZWxlY3RBbGw7CiAgdmFyIFByb21vdGlvbnMgPSB1c2VTZWxlY3RvcihzZWxlY3RBbGwpOwoKICB2YXIgY29tcHV0ZWRJdGVtcyA9IGZ1bmN0aW9uIGNvbXB1dGVkSXRlbXMoaXRlbXMpIHsKICAgIHJldHVybiBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgdmFyIF9pdGVtJGN1c3RvbWVyVHlwZSwgX2l0ZW0kZGVzY3JpcHRpb247CgogICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICBjdXN0b21lclR5cGU6ICgoX2l0ZW0kY3VzdG9tZXJUeXBlID0gaXRlbS5jdXN0b21lclR5cGUpID09PSBudWxsIHx8IF9pdGVtJGN1c3RvbWVyVHlwZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kY3VzdG9tZXJUeXBlLm5hbWUpIHx8ICcnLAogICAgICAgIGRlc2NyaXB0aW9uOiAoKF9pdGVtJGRlc2NyaXB0aW9uID0gaXRlbS5kZXNjcmlwdGlvbikgPT09IG51bGwgfHwgX2l0ZW0kZGVzY3JpcHRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGRlc2NyaXB0aW9uLmxlbmd0aCkgPiAxMCA/ICIiLmNvbmNhdChpdGVtLmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCAyNTApLCAiLi4uIikgOiBpdGVtLmRlc2NyaXB0aW9uCiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgdmFyIHRvZ2dsZURldGFpbHMgPSBmdW5jdGlvbiB0b2dnbGVEZXRhaWxzKGluZGV4KSB7CiAgICB2YXIgcG9zaXRpb24gPSBfZGV0YWlscy5pbmRleE9mKGluZGV4KTsKCiAgICB2YXIgbmV3RGV0YWlscyA9IF9kZXRhaWxzLnNsaWNlKCk7CgogICAgaWYgKHBvc2l0aW9uICE9PSAtMSkgewogICAgICBuZXdEZXRhaWxzLnNwbGljZShwb3NpdGlvbiwgMSk7CiAgICB9IGVsc2UgewogICAgICBuZXdEZXRhaWxzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShfZGV0YWlscyksIFtpbmRleF0pOwogICAgfQoKICAgIHNldERldGFpbHMobmV3RGV0YWlscyk7CiAgfTsgLy8gQ29kZQlUw6puIGNoxrDGoW5nIHRyw6xuaCBiw6FuIGjDoG5nCU5nxrDhu51pIGxpw6puIGzhuqFjCU7Eg20gU2luaAnEkGnhu4duIHRob+G6oWkJTmjDom4gdmnDqm4gcXXhuqNuIGzDvQlMb+G6oWkgY2jGsMahbmcgdHLDrG5oIGLDoW4gaMOgbmcJUGjDom4gbG/huqFpCVPhu61hCVThuqFvIMSRxqFuCgoKICB2YXIgZmllbGRzID0gW3sKICAgIGtleTogJ29yZGVyJywKICAgIGxhYmVsOiAnU1RUJywKICAgIF9zdHlsZTogewogICAgICB3aWR0aDogJzElJwogICAgfSwKICAgIGZpbHRlcjogZmFsc2UKICB9LCB7CiAgICBrZXk6ICduYW1lJywKICAgIGxhYmVsOiAnVMOqbiBjaMawxqFuZyB0csOsbmggYsOhbiBow6BuZycsCiAgICBfc3R5bGU6IHsKICAgICAgd2lkdGg6ICcyMCUnCiAgICB9CiAgfSwgewogICAga2V5OiAndHlwZScsCiAgICBsYWJlbDogJ0xv4bqhaSBjaMawxqFuZyB0csOsbmgnLAogICAgX3N0eWxlOiB7CiAgICAgIHdpZHRoOiAnMTUlJwogICAgfQogIH0sIHsKICAgIGtleTogJ3N0YXJ0VGltZScsCiAgICBsYWJlbDogJ1Ro4budaSBnaWFuIGLhuq90IMSR4bqndScsCiAgICBfc3R5bGU6IHsKICAgICAgd2lkdGg6ICcxNSUnCiAgICB9CiAgfSwgewogICAga2V5OiAnZW5kVGltZScsCiAgICBsYWJlbDogJ1Ro4budaSBnaWFuIGvhur90IHRow7pjJywKICAgIF9zdHlsZTogewogICAgICB3aWR0aDogJzE1JScKICAgIH0KICB9LCB7CiAgICBrZXk6ICdjdXN0b21lclR5cGUnLAogICAgbGFiZWw6ICfEkOG7kWkgdMaw4bujbmcgw6FwIGThu6VuZycsCiAgICBfc3R5bGU6IHsKICAgICAgd2lkdGg6ICcxNSUnCiAgICB9CiAgfSwgewogICAga2V5OiAnaXNMb2NrJywKICAgIGxhYmVsOiAnVHLhuqFuZyB0aMOhaScsCiAgICBfc3R5bGU6IHsKICAgICAgd2lkdGg6ICcxMCUnCiAgICB9CiAgfSwgewogICAga2V5OiAnZGVzY3JpcHRpb24nLAogICAgbGFiZWw6ICdNw7QgdOG6oycsCiAgICBfc3R5bGU6IHsKICAgICAgd2lkdGg6ICcyMCUnCiAgICB9CiAgfSwgewogICAga2V5OiAnc2hvd19kZXRhaWxzJywKICAgIGxhYmVsOiAnJywKICAgIF9zdHlsZTogewogICAgICB3aWR0aDogJzEwJScKICAgIH0sCiAgICBmaWx0ZXI6IGZhbHNlCiAgfV07CgogIHZhciBnZXRCYWRnZSA9IGZ1bmN0aW9uIGdldEJhZGdlKHN0YXR1cykgewogICAgc3dpdGNoIChzdGF0dXMpIHsKICAgICAgY2FzZSBmYWxzZToKICAgICAgICByZXR1cm4gJ3N1Y2Nlc3MnOwoKICAgICAgY2FzZSB0cnVlOgogICAgICAgIHJldHVybiAnZGFuZ2VyJzsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuICdzdWNjZXNzJzsKICAgIH0KICB9OwoKICB2YXIgZ2V0QmFkZ2VUeXBlID0gZnVuY3Rpb24gZ2V0QmFkZ2VUeXBlKHN0YXR1cykgewogICAgc3dpdGNoIChzdGF0dXMpIHsKICAgICAgY2FzZSAnU0hPUlRURVJNJzoKICAgICAgICByZXR1cm4gJ2luZm8nOwoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gJ3ByaW1hcnknOwogICAgfQogIH07CgogIHZhciBfdXNlU3RhdGU5ID0gdXNlU3RhdGUoW10pLAogICAgICBfdXNlU3RhdGUxMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTksIDEpOwoKICB2YXIgY3N2Q29udGVudCA9IGNvbXB1dGVkSXRlbXMoUHJvbW90aW9ucykubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhpdGVtKS5qb2luKCcsJyk7CiAgfSkuam9pbignXG4nKTsKICB2YXIgY3N2Q29kZSA9ICdkYXRhOnRleHQvY3N2O2NoYXJzZXQ9dXRmLTgsU0VQPSwlMEEnICsgZW5jb2RlVVJJQ29tcG9uZW50KGNzdkNvbnRlbnQpOwoKICB2YXIgdG9DcmVhdGVQcm9tb3Rpb24gPSBmdW5jdGlvbiB0b0NyZWF0ZVByb21vdGlvbigpIHsKICAgIGhpc3RvcnkucHVzaCgiIi5jb25jYXQocHJvcHMubWF0Y2gudXJsLCAibmV3IikpOwogIH07CgogIHZhciB0b0NyZWF0ZUxvbmdUZXJtUHJvbW90aW9uID0gZnVuY3Rpb24gdG9DcmVhdGVMb25nVGVybVByb21vdGlvbigpIHsKICAgIGhpc3RvcnkucHVzaCgiIi5jb25jYXQocHJvcHMubWF0Y2gudXJsLCAibmV3L2xvbmd0ZXJtIikpOwogIH07CgogIHZhciB0b0VkaXRQcm9tb3Rpb24gPSBmdW5jdGlvbiB0b0VkaXRQcm9tb3Rpb24odXNlcklkKSB7CiAgICBoaXN0b3J5LnB1c2goIiIuY29uY2F0KHByb3BzLm1hdGNoLnVybCkuY29uY2F0KHVzZXJJZCwgIi9lZGl0IikpOwogIH07CgogIHZhciB0b0VkaXRMb25nVGVybVByb21vdGlvbiA9IGZ1bmN0aW9uIHRvRWRpdExvbmdUZXJtUHJvbW90aW9uKHVzZXJJZCkgewogICAgaGlzdG9yeS5wdXNoKCIiLmNvbmNhdChwcm9wcy5tYXRjaC51cmwpLmNvbmNhdCh1c2VySWQsICIvbG9uZ3Rlcm0iKSk7CiAgfTsKCiAgdmFyIG9uRmlsdGVyQ29sdW1uID0gZnVuY3Rpb24gb25GaWx0ZXJDb2x1bW4odmFsdWUpIHsKICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID4gMCkgewogICAgICBkaXNwYXRjaChnZXRQcm9tb3Rpb24oX29iamVjdFNwcmVhZCh7CiAgICAgICAgcGFnZTogMCwKICAgICAgICBzaXplOiBzaXplLAogICAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxkZXNjJwogICAgICB9LCB2YWx1ZSkpKTsKICAgIH0KICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGluaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3MpIHsKICAgICAgc2V0UHJpbWFyeShmYWxzZSk7CiAgICAgIGRpc3BhdGNoKGdldFByb21vdGlvbigpKTsKICAgICAgZGlzcGF0Y2gocmVzZXQoKSk7CiAgICB9CiAgfSwgW2luaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3NdKTsKCiAgdmFyIGxvY2tQcm9tb3Rpb24gPSBmdW5jdGlvbiBsb2NrUHJvbW90aW9uKCkgewogICAgZGlzcGF0Y2godXBkYXRlUHJvbW90aW9uKHsKICAgICAgaWQ6IHNlbGVjdGVkUHJvLmN1cnJlbnQuaWQsCiAgICAgIGlzTG9jazogIXNlbGVjdGVkUHJvLmN1cnJlbnQuaXNMb2NrCiAgICB9KSk7CiAgfTsKCiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEhlYWRlciwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgIG5hbWU6ICJjaWwtZ3JpZCIKICB9KSwgIiBEYW5oIHNceEUxY2ggY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCBiXHhFMW4gaFx4RTBuZyIsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgIGNvbG9yOiAic3VjY2VzcyIsCiAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICBjbGFzc05hbWU6ICJtbC0zIiwKICAgIG9uQ2xpY2s6IHRvQ3JlYXRlUHJvbW90aW9uCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgIG5hbWU6ICJjaWwtcGx1cyIKICB9KSwgIiBUaFx4RUFtIG1cdTFFREJpIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmggbmdcdTFFQUZuIGhcdTFFQTFuIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgIGNvbG9yOiAiaW5mbyIsCiAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICBjbGFzc05hbWU6ICJtbC0zIiwKICAgIG9uQ2xpY2s6IHRvQ3JlYXRlTG9uZ1Rlcm1Qcm9tb3Rpb24KICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgbmFtZTogImNpbC1wbHVzIgogIH0pLCAiIFRoXHhFQW0gbVx1MUVEQmkgY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCBkXHhFMGkgaFx1MUVBMW4iKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkQm9keSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgY29sb3I6ICJwcmltYXJ5IiwKICAgIGNsYXNzTmFtZTogIm1iLTIiLAogICAgaHJlZjogY3N2Q29kZSwKICAgIGRvd25sb2FkOiAiY29yZXVpLXRhYmxlLWRhdGEuY3N2IiwKICAgIHRhcmdldDogIl9ibGFuayIKICB9LCAiVFx1MUVBM2kgZXhjZWwgKC5jc3YpIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENEYXRhVGFibGUsIHsKICAgIGl0ZW1zOiBjb21wdXRlZEl0ZW1zKFByb21vdGlvbnMpLAogICAgZmllbGRzOiBmaWVsZHMsCiAgICBjb2x1bW5GaWx0ZXI6IHRydWUsCiAgICB0YWJsZUZpbHRlcjogdHJ1ZSwKICAgIGNsZWFuZXI6IHRydWUsCiAgICBpdGVtc1BlclBhZ2VTZWxlY3Q6IHsKICAgICAgbGFiZWw6ICdT4buRIGzGsOG7o25nIHRyw6puIG3hu5l0IHRyYW5nJywKICAgICAgdmFsdWVzOiBbMjAsIDMwLCA1MF0KICAgIH0sCiAgICBpdGVtc1BlclBhZ2U6IDIwLAogICAgaG92ZXI6IHRydWUsCiAgICBzb3J0ZXI6IHRydWUgLy8gbG9hZGluZwogICAgLy8gb25Sb3dDbGljaz17KGl0ZW0saW5kZXgsY29sLGUpID0+IGNvbnNvbGUubG9nKGl0ZW0saW5kZXgsY29sLGUpfQogICAgLAogICAgb25QYWdlQ2hhbmdlOiBmdW5jdGlvbiBvblBhZ2VDaGFuZ2UodmFsKSB7CiAgICAgIHJldHVybiBjb25zb2xlLmxvZygnbmV3IHBhZ2U6JywgdmFsKTsKICAgIH0sCiAgICBvblBhZ2VzQ2hhbmdlOiBmdW5jdGlvbiBvblBhZ2VzQ2hhbmdlKHZhbCkgewogICAgICByZXR1cm4gY29uc29sZS5sb2coJ25ldyBwYWdlczonLCB2YWwpOwogICAgfSwKICAgIG9uUGFnaW5hdGlvbkNoYW5nZTogZnVuY3Rpb24gb25QYWdpbmF0aW9uQ2hhbmdlKHZhbCkgewogICAgICByZXR1cm4gY29uc29sZS5sb2coJ25ldyBwYWdpbmF0aW9uOicsIHZhbCk7CiAgICB9IC8vIG9uRmlsdGVyZWRJdGVtc0NoYW5nZT17KHZhbCkgPT4gY29uc29sZS5sb2coJ25ldyBmaWx0ZXJlZCBpdGVtczonLCB2YWwpfQogICAgLy8gb25Tb3J0ZXJWYWx1ZUNoYW5nZT17KHZhbCkgPT4gY29uc29sZS5sb2coJ25ldyBzb3J0ZXIgdmFsdWU6JywgdmFsKX0KICAgICwKICAgIG9uVGFibGVGaWx0ZXJDaGFuZ2U6IGZ1bmN0aW9uIG9uVGFibGVGaWx0ZXJDaGFuZ2UodmFsKSB7CiAgICAgIHJldHVybiBjb25zb2xlLmxvZygnbmV3IHRhYmxlIGZpbHRlcjonLCB2YWwpOwogICAgfSwKICAgIG9uQ29sdW1uRmlsdGVyQ2hhbmdlOiBvbkZpbHRlckNvbHVtbiwKICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgIG9yZGVyOiBmdW5jdGlvbiBvcmRlcihpdGVtLCBpbmRleCkgewogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBpbmRleCArIDEpOwogICAgICB9LAogICAgICBpc0xvY2s6IGZ1bmN0aW9uIGlzTG9jayhpdGVtKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCYWRnZSwgewogICAgICAgICAgY29sb3I6IGdldEJhZGdlKGl0ZW0uaXNMb2NrKQogICAgICAgIH0sIGl0ZW0uaXNMb2NrID8gJ8SQw6Mga2jDs2EnIDogJ8SQYW5nIG3hu58nKSk7CiAgICAgIH0sCiAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUoaXRlbSkgewogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQmFkZ2UsIHsKICAgICAgICAgIGNvbG9yOiBnZXRCYWRnZVR5cGUoaXRlbS50eXBlKQogICAgICAgIH0sIGl0ZW0udHlwZSA9PT0gJ1NIT1JUVEVSTScgPyAnTkfhuq5OIEjhuqBOJyA6ICdEw4BJIEjhuqBOJykpOwogICAgICB9LAogICAgICBzaG93X2RldGFpbHM6IGZ1bmN0aW9uIHNob3dfZGV0YWlscyhpdGVtKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImQtZmxleCBweS0yIgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgICAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICAgICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgICAgICBzaXplOiAic20iLAogICAgICAgICAgY2xhc3NOYW1lOiAibXItMyIsCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBpdGVtLnR5cGUgPT09ICdTSE9SVFRFUk0nID8gdG9FZGl0UHJvbW90aW9uKGl0ZW0uaWQpIDogdG9FZGl0TG9uZ1Rlcm1Qcm9tb3Rpb24oaXRlbS5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgICAgIG5hbWU6ICJjaWwtcGVuY2lsIgogICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIsCiAgICAgICAgICBjbGFzc05hbWU6ICJtci0zIiwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgIHRvZ2dsZURldGFpbHMoaXRlbS5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgICAgIG5hbWU6ICJjaWxab29tIgogICAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIsCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBzZWxlY3RlZFByby5jdXJyZW50ID0gewogICAgICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgICAgIGlzTG9jazogaXRlbS5pc0xvY2sKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc2V0UHJpbWFyeSghcHJpbWFyeSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgICAgIG5hbWU6ICFpdGVtLmlzTG9jayA/ICdjaWxMb2NrTG9ja2VkJyA6ICdjaWxMb2NrVW5sb2NrZWQnCiAgICAgICAgfSkpKTsKICAgICAgfSwKICAgICAgZGV0YWlsczogZnVuY3Rpb24gZGV0YWlscyhpdGVtKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2xsYXBzZSwgewogICAgICAgICAgc2hvdzogX2RldGFpbHMuaW5jbHVkZXMoaXRlbS5pZCkKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoNSIsIG51bGwsICJUaFx4RjRuZyB0aW4gbmdcdTAxQjBcdTFFRERpIGRceEY5bmciKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICAgICAgbGc6ICI2IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgICAgICB9LCAiVFx4RUFuIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmggYlx4RTFuIGhceEUwbmc6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05O2E1IgogICAgICAgIH0sIGl0ZW0ubmFtZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICAgICAgfSwgIk5nXHhFMHkgYlx1MUVBRnQgXHUwMTExXHUxRUE3dToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICAgICAgfSwgaXRlbS5zdGFydFRpbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgICAgIH0sICJOZ1x4RTB5IGtcdTFFQkZ0IHRoXHhGQWM6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgICAgIH0sIGl0ZW0uZW5kVGltZSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICAgICAgbGc6ICI2IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgICAgICB9LCAiVFx1MUVENW5nIGRvYW5oIHRodToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICAgICAgfSwgaXRlbS50b3RhbFJldmVudWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgICAgIH0sICJcdTAxMTBcdTFFRDFpIHRcdTAxQjBcdTFFRTNuZyBceEUxcCBkXHUxRUU1bmciKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICAgICAgfSwgaXRlbS5jdXN0b21lclR5cGUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgICAgIH0sICJNXHhGNCB0XHUxRUEzOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgICAgICB9LCBpdGVtLmRlc2NyaXB0aW9uKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgICAgICB9LCAiVHJcdTFFQTFuZyB0aFx4RTFpIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgICAgIH0sIGl0ZW0uaXNMb2NrID8gJ8SQw6Mga2jDs2EnIDogJ8SQYW5nIG3hu58nKSkpKSkpOwogICAgICB9CiAgICB9CiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENQYWdpbmF0aW9uLCB7CiAgICBhY3RpdmVQYWdlOiBhY3RpdmVQYWdlLAogICAgcGFnZXM6IE1hdGguZmxvb3IoaW5pdGlhbFN0YXRlLnRvdGFsSXRlbSAvIDIwKSArIDEsCiAgICBvbkFjdGl2ZVBhZ2VDaGFuZ2U6IGZ1bmN0aW9uIG9uQWN0aXZlUGFnZUNoYW5nZShpKSB7CiAgICAgIHJldHVybiBzZXRBY3RpdmVQYWdlKGkpOwogICAgfQogIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ01vZGFsLCB7CiAgICBzaG93OiBwcmltYXJ5LAogICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHsKICAgICAgcmV0dXJuIHNldFByaW1hcnkoIXByaW1hcnkpOwogICAgfSwKICAgIGNvbG9yOiAicHJpbWFyeSIKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTW9kYWxIZWFkZXIsIHsKICAgIGNsb3NlQnV0dG9uOiB0cnVlCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ01vZGFsVGl0bGUsIG51bGwsICJLaFx4RjNhIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmgiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENNb2RhbEJvZHksIG51bGwsICJCXHUxRUExbiBjXHhGMyBjaFx1MUVBRmMgY2hcdTFFQUZuIG11XHUxRUQxbiAiLmNvbmNhdChzZWxlY3RlZFByby5jdXJyZW50LmlzTG9jayA/ICdt4bufIGtow7NhJyA6ICdraMOzYScsICIgY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaCBuXHhFMHkga2hceEY0bmc/IikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTW9kYWxGb290ZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICBvbkNsaWNrOiBsb2NrUHJvbW90aW9uCiAgfSwgIlx1MDExMFx1MUVEM25nIFx4RkQiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgY29sb3I6ICJzZWNvbmRhcnkiLAogICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgcmV0dXJuIHNldFByaW1hcnkoIXByaW1hcnkpOwogICAgfQogIH0sICJIXHUxRUU3eSIpKSkpOwp9OwoKZXhwb3J0IGRlZmF1bHQgUHJvbW90aW9uOw=="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Promotion/Promotions.js"],"names":["React","useEffect","useRef","useState","CCardBody","CBadge","CButton","CCollapse","CDataTable","CCard","CCardHeader","CRow","CCol","CPagination","CModal","CModalBody","CModalFooter","CModalHeader","CModalTitle","CIcon","useDispatch","useSelector","getPromotion","updatePromotion","globalizedPromotionSelectors","reset","useHistory","Promotion","props","details","setDetails","selectedPro","id","isLock","state","promotion","initialState","activePage","setActivePage","primary","setPrimary","size","dispatch","history","page","sort","selectAll","Promotions","computedItems","items","map","item","customerType","name","description","length","substring","toggleDetails","index","position","indexOf","newDetails","slice","splice","fields","key","label","_style","width","filter","getBadge","status","getBadgeType","csvContent","Object","values","join","csvCode","encodeURIComponent","toCreatePromotion","push","match","url","toCreateLongTermPromotion","toEditPromotion","userId","toEditLongTermPromotion","onFilterColumn","value","keys","updatingSuccess","lockPromotion","current","val","console","log","order","type","show_details","includes","startTime","endTime","totalRevenue","Math","floor","totalItem","i"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\nimport {\n  CCardBody,\n  CBadge,\n  CButton,\n  CCollapse,\n  CDataTable,\n  CCard,\n  CCardHeader,\n  CRow,\n  CCol,\n  CPagination,\n  CModal,\n  CModalBody,\n  CModalFooter,\n  CModalHeader,\n  CModalTitle,\n} from '@coreui/react';\n// import usersData from '../../../users/UsersData.js';\nimport CIcon from '@coreui/icons-react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {getPromotion, updatePromotion} from './promotion.api.js';\nimport {globalizedPromotionSelectors, reset} from './promotion.reducer.js';\nimport {useHistory} from 'react-router-dom';\n\nconst Promotion = (props) => {\n  const [details, setDetails] = useState([]);\n  const selectedPro = useRef({id: null, isLock: false});\n  const {initialState} = useSelector((state) => state.promotion);\n  const [activePage, setActivePage] = useState(1);\n  const [primary, setPrimary] = useState(false);\n  const [size] = useState(20);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  useEffect(() => {\n    dispatch(getPromotion());\n    dispatch(reset());\n  }, []);\n\n  useEffect(() => {\n    if (activePage > 1) dispatch(getPromotion({page: activePage - 1, size: size, sort: 'createdDate,desc'}));\n  }, [activePage]);\n\n  const {selectAll} = globalizedPromotionSelectors;\n  const Promotions = useSelector(selectAll);\n  const computedItems = (items) => {\n    return items.map((item) => {\n      return {\n        ...item,\n        customerType: item.customerType?.name || '',\n        description: item.description?.length > 10 ? `${item.description.substring(0, 250)}...` : item.description,\n      };\n    });\n  };\n  const toggleDetails = (index) => {\n    const position = details.indexOf(index);\n    let newDetails = details.slice();\n    if (position !== -1) {\n      newDetails.splice(position, 1);\n    } else {\n      newDetails = [...details, index];\n    }\n    setDetails(newDetails);\n  };\n\n  // Code\tTên chương trình bán hàng\tNgười liên lạc\tNăm Sinh\tĐiện thoại\tNhân viên quản lý\tLoại chương trình bán hàng\tPhân loại\tSửa\tTạo đơn\n  const fields = [\n    {\n      key: 'order',\n      label: 'STT',\n      _style: {width: '1%'},\n      filter: false,\n    },\n    {key: 'name', label: 'Tên chương trình bán hàng', _style: {width: '20%'}},\n    {key: 'type', label: 'Loại chương trình', _style: {width: '15%'}},\n    {key: 'startTime', label: 'Thời gian bắt đầu', _style: {width: '15%'}},\n    {key: 'endTime', label: 'Thời gian kết thúc', _style: {width: '15%'}},\n    {key: 'customerType', label: 'Đối tượng áp dụng', _style: {width: '15%'}},\n    {key: 'isLock', label: 'Trạng thái', _style: {width: '10%'}},\n    {key: 'description', label: 'Mô tả', _style: {width: '20%'}},\n    {\n      key: 'show_details',\n      label: '',\n      _style: {width: '10%'},\n      filter: false,\n    },\n  ];\n\n  const getBadge = (status) => {\n    switch (status) {\n      case false:\n        return 'success';\n      case true:\n        return 'danger';\n      default:\n        return 'success';\n    }\n  };\n\n  const getBadgeType = (status) => {\n    switch (status) {\n      case 'SHORTTERM':\n        return 'info';\n      default:\n        return 'primary';\n    }\n  };\n  const [,] = useState([]);\n  const csvContent = computedItems(Promotions)\n      .map((item) => Object.values(item).join(','))\n      .join('\\n');\n  const csvCode = 'data:text/csv;charset=utf-8,SEP=,%0A' + encodeURIComponent(csvContent);\n  const toCreatePromotion = () => {\n    history.push(`${props.match.url}new`);\n  };\n  const toCreateLongTermPromotion = () => {\n    history.push(`${props.match.url}new/longterm`);\n  };\n  const toEditPromotion = (userId) => {\n    history.push(`${props.match.url}${userId}/edit`);\n  };\n  const toEditLongTermPromotion = (userId) => {\n    history.push(`${props.match.url}${userId}/longterm`);\n  };\n\n  const onFilterColumn = (value) => {\n    if (Object.keys(value).length > 0) {\n      dispatch(getPromotion({page: 0, size: size, sort: 'createdDate,desc', ...value}));\n    }\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      setPrimary(false);\n      dispatch(getPromotion());\n      dispatch(reset());\n    }\n  }, [initialState.updatingSuccess]);\n\n  const lockPromotion = () => {\n    dispatch(updatePromotion({id: selectedPro.current.id, isLock: !selectedPro.current.isLock}));\n  };\n\n  return (\n    <CCard>\n      <CCardHeader>\n        <CIcon name=\"cil-grid\" /> Danh sách chương trình bán hàng\n        <CButton color=\"success\" variant=\"outline\" className=\"ml-3\" onClick={toCreatePromotion}>\n          <CIcon name=\"cil-plus\" /> Thêm mới chương trình ngắn hạn\n        </CButton>\n        <CButton color=\"info\" variant=\"outline\" className=\"ml-3\" onClick={toCreateLongTermPromotion}>\n          <CIcon name=\"cil-plus\" /> Thêm mới chương trình dài hạn\n        </CButton>\n      </CCardHeader>\n      <CCardBody>\n        <CButton color=\"primary\" className=\"mb-2\" href={csvCode} download=\"coreui-table-data.csv\" target=\"_blank\">\n          Tải excel (.csv)\n        </CButton>\n        <CDataTable\n          items={computedItems(Promotions)}\n          fields={fields}\n          columnFilter\n          tableFilter\n          cleaner\n          itemsPerPageSelect={{label: 'Số lượng trên một trang', values: [20, 30, 50]}}\n          itemsPerPage={20}\n          hover\n          sorter\n          // loading\n          // onRowClick={(item,index,col,e) => console.log(item,index,col,e)}\n          onPageChange={(val) => console.log('new page:', val)}\n          onPagesChange={(val) => console.log('new pages:', val)}\n          onPaginationChange={(val) => console.log('new pagination:', val)}\n          // onFilteredItemsChange={(val) => console.log('new filtered items:', val)}\n          // onSorterValueChange={(val) => console.log('new sorter value:', val)}\n          onTableFilterChange={(val) => console.log('new table filter:', val)}\n          onColumnFilterChange={onFilterColumn}\n          scopedSlots={{\n            order: (item, index) => <td>{index + 1}</td>,\n            isLock: (item) => (\n              <td>\n                <CBadge color={getBadge(item.isLock)}>{item.isLock ? 'Đã khóa' : 'Đang mở'}</CBadge>\n              </td>\n            ),\n            type: (item) => (\n              <td>\n                <CBadge color={getBadgeType(item.type)}>{item.type === 'SHORTTERM' ? 'NGẮN HẠN' : 'DÀI HẠN'}</CBadge>\n              </td>\n            ),\n            show_details: (item) => {\n              return (\n                <td className=\"d-flex py-2\">\n                  <CButton\n                    color=\"primary\"\n                    variant=\"outline\"\n                    shape=\"square\"\n                    size=\"sm\"\n                    className=\"mr-3\"\n                    onClick={() => {\n                      item.type === 'SHORTTERM' ? toEditPromotion(item.id) : toEditLongTermPromotion(item.id);\n                    }}\n                  >\n                    <CIcon name=\"cil-pencil\" />\n                  </CButton>\n                  <CButton\n                    color=\"primary\"\n                    variant=\"outline\"\n                    shape=\"square\"\n                    size=\"sm\"\n                    className=\"mr-3\"\n                    onClick={() => {\n                      toggleDetails(item.id);\n                    }}\n                  >\n                    <CIcon name=\"cilZoom\" />\n                  </CButton>\n                  <CButton\n                    color=\"primary\"\n                    variant=\"outline\"\n                    shape=\"square\"\n                    size=\"sm\"\n                    onClick={() => {\n                      selectedPro.current = {id: item.id, isLock: item.isLock};\n                      setPrimary(!primary);\n                    }}\n                  >\n                    <CIcon name={!item.isLock ? 'cilLockLocked' : 'cilLockUnlocked'} />\n                  </CButton>\n                </td>\n              );\n            },\n            details: (item) => {\n              return (\n                <CCollapse show={details.includes(item.id)}>\n                  <CCardBody>\n                    <h5>Thông tin người dùng</h5>\n                    <CRow>\n                      <CCol lg=\"6\">\n                        <dl className=\"row\">\n                          <dt className=\"col-sm-3\">Tên chương trình bán hàng:</dt>\n                          <dd className=\"col-sm-9;a5\">{item.name}</dd>\n                        </dl>\n                        <dl className=\"row\">\n                          <dt className=\"col-sm-3\">Ngày bắt đầu:</dt>\n                          <dd className=\"col-sm-9\">{item.startTime}</dd>\n                        </dl>\n                        <dl className=\"row\">\n                          <dt className=\"col-sm-3\">Ngày kết thúc:</dt>\n                          <dd className=\"col-sm-9\">{item.endTime}</dd>\n                        </dl>\n                      </CCol>\n                      <CCol lg=\"6\">\n                        <dl className=\"row\">\n                          <dt className=\"col-sm-3\">Tổng doanh thu:</dt>\n                          <dd className=\"col-sm-9\">{item.totalRevenue}</dd>\n                        </dl>\n                        <dl className=\"row\">\n                          <dt className=\"col-sm-3\">Đối tượng áp dụng</dt>\n                          <dd className=\"col-sm-9\">{item.customerType}</dd>\n                        </dl>\n                        <dl className=\"row\">\n                          <dt className=\"col-sm-3\">Mô tả:</dt>\n                          <dd className=\"col-sm-9\">{item.description}</dd>\n                        </dl>\n                        <dl className=\"row\">\n                          <dt className=\"col-sm-3\">Trạng thái</dt>\n                          <dd className=\"col-sm-9\">{item.isLock ? 'Đã khóa' : 'Đang mở'}</dd>\n                        </dl>\n                      </CCol>\n                    </CRow>\n                  </CCardBody>\n                </CCollapse>\n              );\n            },\n          }}\n        />\n        <CPagination\n          activePage={activePage}\n          pages={Math.floor(initialState.totalItem / 20) + 1}\n          onActivePageChange={(i) => setActivePage(i)}\n        />\n      </CCardBody>\n      <CModal show={primary} onClose={() => setPrimary(!primary)} color=\"primary\">\n        <CModalHeader closeButton>\n          <CModalTitle>Khóa chương trình</CModalTitle>\n        </CModalHeader>\n        <CModalBody>{`Bạn có chắc chắn muốn ${selectedPro.current.isLock ? 'mở khóa' : 'khóa'} chương trình này không?`}</CModalBody>\n        <CModalFooter>\n          <CButton color=\"primary\" onClick={lockPromotion}>\n            Đồng ý\n          </CButton>\n          <CButton color=\"secondary\" onClick={() => setPrimary(!primary)}>\n            Hủy\n          </CButton>\n        </CModalFooter>\n      </CModal>\n    </CCard>\n  );\n};\n\nexport default Promotion;\n"]}]}