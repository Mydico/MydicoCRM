{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Orders/EditOrder.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Orders/EditOrder.js","mtime":1625903362136},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShvYmopIHsgaWYgKG9iaiA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgZGVzdHJ1Y3R1cmUgdW5kZWZpbmVkIik7IH0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAidW5kZWZpbmVkIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQoKaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBDQnV0dG9uLCBDQ2FyZCwgQ0NhcmRIZWFkZXIsIENDYXJkQm9keSwgQ0NvbCwgQ0Zvcm0sIENDb2xsYXBzZSwgQ0NhcmRUaXRsZSwgQ0xhYmVsLCBDSW5wdXQsIENSb3csIENGb3JtR3JvdXAsIENUZXh0YXJlYSB9IGZyb20gJ0Bjb3JldWkvcmVhY3QvbGliJzsKaW1wb3J0IENJY29uIGZyb20gJ0Bjb3JldWkvaWNvbnMtcmVhY3QvbGliL0NJY29uJzsKaW1wb3J0IHsgRm9ybWlrIH0gZnJvbSAnZm9ybWlrJzsKaW1wb3J0ICogYXMgWXVwIGZyb20gJ3l1cCc7CmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgZWRpdFNlbGZPcmRlciwgZ2V0RGV0YWlsT3JkZXIsIGdldE9yZGVyRGV0YWlsLCB1cGRhdGVPcmRlciB9IGZyb20gJy4vb3JkZXIuYXBpJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgeyBnbG9iYWxpemVkT3JkZXJzU2VsZWN0b3JzIH0gZnJvbSAnLi9vcmRlci5yZWR1Y2VyJzsKaW1wb3J0IFNlbGVjdCBmcm9tICdyZWFjdC1zZWxlY3QnOwppbXBvcnQgeyBjdXJyZW5jeU1hc2sgfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2N1cnJlbmN5LWlucHV0L2N1cnJlbmN5LWlucHV0JzsKaW1wb3J0IE1hc2tlZElucHV0IGZyb20gJ3JlYWN0LXRleHQtbWFzayc7CmltcG9ydCB7IGdsb2JhbGl6ZWRQcm9tb3Rpb25TZWxlY3RvcnMgfSBmcm9tICcuLi9Qcm9tb3Rpb24vcHJvbW90aW9uLnJlZHVjZXInOwppbXBvcnQgeyBnZXREZXRhaWxQcm9kdWN0UHJvbW90aW9uLCBnZXRQcm9tb3Rpb24gfSBmcm9tICcuLi9Qcm9tb3Rpb24vcHJvbW90aW9uLmFwaSc7CmltcG9ydCB7IGdsb2JhbGl6ZWRXYXJlaG91c2VTZWxlY3RvcnMgfSBmcm9tICcuLi8uLi93YXJlaG91c2UvV2FyZWhvdXNlL3dhcmVob3VzZS5yZWR1Y2VyJzsKaW1wb3J0IHsgZ2V0V2FyZWhvdXNlIH0gZnJvbSAnLi4vLi4vd2FyZWhvdXNlL1dhcmVob3VzZS93YXJlaG91c2UuYXBpJzsKaW1wb3J0IHsgZ2xvYmFsaXplZFByb2R1Y3RXYXJlaG91c2VTZWxlY3RvcnMgfSBmcm9tICcuLi8uLi93YXJlaG91c2UvUHJvZHVjdC9wcm9kdWN0LXdhcmVob3VzZS5yZWR1Y2VyJzsKaW1wb3J0IHsgZmlsdGVyUHJvZHVjdEluU3RvcmUsIGdldFByb2R1Y3RJbnN0b3JlLCBnZXRQcm9kdWN0V2FyZWhvdXNlQnlGaWVsZCB9IGZyb20gJy4uLy4uL3dhcmVob3VzZS9Qcm9kdWN0L3Byb2R1Y3Qtd2FyZWhvdXNlLmFwaSc7CmltcG9ydCB7IEZvcm1GZWVkYmFjaywgVGFibGUgfSBmcm9tICdyZWFjdHN0cmFwJzsKaW1wb3J0IHsgT3JkZXJTdGF0dXMgfSBmcm9tICcuL29yZGVyLXN0YXR1cyc7CmltcG9ydCB7IGNvbmZpcm1BbGVydCB9IGZyb20gJ3JlYWN0LWNvbmZpcm0tYWxlcnQnOyAvLyBJbXBvcnQKCmltcG9ydCAncmVhY3QtY29uZmlybS1hbGVydC9zcmMvcmVhY3QtY29uZmlybS1hbGVydC5jc3MnOyAvLyBJbXBvcnQgY3NzCgppbXBvcnQgeyB1c2VyU2FmZVNlbGVjdG9yLCByZW1vdmVQZXJtaXNzaW9uIH0gZnJvbSAnLi4vLi4vbG9naW4vYXV0aGVudGljYXRlLnJlZHVjZXIuanMnOwppbXBvcnQgY2l0aWVzIGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC91dGlscy9jaXR5JzsKaW1wb3J0IGRpc3RyaWN0IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC91dGlscy9kaXN0cmljdC5qc29uJzsKCnZhciB2YWxpZGF0aW9uU2NoZW1hID0gZnVuY3Rpb24gdmFsaWRhdGlvblNjaGVtYSgpIHsKICByZXR1cm4gWXVwLm9iamVjdCgpLnNoYXBlKHsKICAgIGN1c3RvbWVyOiBZdXAub2JqZWN0KCkucmVxdWlyZWQoJ0tow6FjaCBow6BuZyAga2jDtG5nIMSR4buDIHRy4buRbmcnKS5udWxsYWJsZSgpLAogICAgcHJvbW90aW9uOiBZdXAub2JqZWN0KCkucmVxdWlyZWQoJ0NoxrDGoW5nIHRyw6xuaCBiw6FuIGjDoG5nIGtow7RuZyDEkeG7gyB0cuG7kW5nJykubnVsbGFibGUoKQogIH0pOwp9OwoKaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvdXRpbHMvbm9ybWFsaXplJzsKaW1wb3J0IHsgYmxvY2tJbnZhbGlkQ2hhciB9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC91dGlscy9oZWxwZXInOwp2YXIgbWFwcGluZ1R5cGUgPSB7CiAgU0hPUlRURVJNOiAnTmfhuq9uIGjhuqFuJywKICBMT05HVEVSTTogJ0TDoGkgaOG6oW4nCn07CnZhciBzZWxlY3RBbGxQcm9tb3Rpb24gPSBnbG9iYWxpemVkUHJvbW90aW9uU2VsZWN0b3JzLnNlbGVjdEFsbDsKdmFyIHNlbGVjdEFsbFdhcmVob3VzZSA9IGdsb2JhbGl6ZWRXYXJlaG91c2VTZWxlY3RvcnMuc2VsZWN0QWxsOwp2YXIgc2VsZWN0QWxsUHJvZHVjdEluV2FyZWhvdXNlID0gZ2xvYmFsaXplZFByb2R1Y3RXYXJlaG91c2VTZWxlY3RvcnMuc2VsZWN0QWxsOwp2YXIgc2VsZWN0QnlJZCA9IGdsb2JhbGl6ZWRPcmRlcnNTZWxlY3RvcnMuc2VsZWN0QnlJZDsKCnZhciBFZGl0T3JkZXIgPSBmdW5jdGlvbiBFZGl0T3JkZXIocHJvcHMpIHsKICB2YXIgX3VzZVNlbGVjdG9yID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUub3JkZXI7CiAgfSksCiAgICAgIGluaXRpYWxTdGF0ZSA9IF91c2VTZWxlY3Rvci5pbml0aWFsU3RhdGU7CgogIHZhciBfdXNlU2VsZWN0b3IyID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucHJvbW90aW9uOwogIH0pLAogICAgICBwcm9tb3Rpb25TdGF0ZSA9IF91c2VTZWxlY3RvcjIuaW5pdGlhbFN0YXRlOwoKICB2YXIgX3VzZVNlbGVjdG9yMyA9IHVzZVNlbGVjdG9yKHVzZXJTYWZlU2VsZWN0b3IpLAogICAgICBhY2NvdW50ID0gX3VzZVNlbGVjdG9yMy5hY2NvdW50OwoKICB2YXIgaW5pdGlhbFZhbHVlcyA9IHsKICAgIGN1c3RvbWVyOiBudWxsLAogICAgcHJvbW90aW9uOiBudWxsLAogICAgb3JkZXJEZXRhaWxzOiBbXSwKICAgIGNvZGU6ICcnLAogICAgbm90ZTogJycsCiAgICBhZGRyZXNzOiAnJywKICAgIHN0YXR1czogT3JkZXJTdGF0dXMuV0FJVElORwogIH07CiAgdmFyIGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTsKICB2YXIgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKTsKICB2YXIgcHJvbW90aW9ucyA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbFByb21vdGlvbik7CiAgdmFyIHByb2R1Y3RJbldhcmVob3VzZXMgPSB1c2VTZWxlY3RvcihzZWxlY3RBbGxQcm9kdWN0SW5XYXJlaG91c2UpOwogIHZhciBvcmRlciA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHNlbGVjdEJ5SWQoc3RhdGUsIHByb3BzLm1hdGNoLnBhcmFtcy5pZCk7CiAgfSk7CiAgdmFyIHdhcmVob3VzZXMgPSB1c2VTZWxlY3RvcihzZWxlY3RBbGxXYXJlaG91c2UpOwoKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUobnVsbCksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBzZWxlY3RlZFByb21vdGlvbiA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldFNlbGVjdGVkUHJvbW90aW9uID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShudWxsKSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICBzZWxlY3RlZFdhcmVob3VzZSA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldFNlbGVjdGVkV2FyZWhvdXNlID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTUgPSB1c2VTdGF0ZShbXSksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgcHJvZHVjdExpc3QgPSBfdXNlU3RhdGU2WzBdLAogICAgICBzZXRQcm9kdWN0TGlzdCA9IF91c2VTdGF0ZTZbMV07CgogIHZhciBfdXNlU3RhdGU3ID0gdXNlU3RhdGUobnVsbCksCiAgICAgIF91c2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU3LCAyKSwKICAgICAgaW5pdFZhbHVlc1N0YXRlID0gX3VzZVN0YXRlOFswXSwKICAgICAgc2V0SW5pdFZhbHVlc1N0YXRlID0gX3VzZVN0YXRlOFsxXTsKCiAgdmFyIF91c2VTdGF0ZTkgPSB1c2VTdGF0ZSh0cnVlKSwKICAgICAgX3VzZVN0YXRlMTAgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU5LCAyKSwKICAgICAgaXNTZWxlY3RlZFdhcmVob3VzZSA9IF91c2VTdGF0ZTEwWzBdLAogICAgICBzZXRJc1NlbGVjdGVkV2FyZWhvdXNlID0gX3VzZVN0YXRlMTBbMV07CgogIHZhciBfdXNlU3RhdGUxMSA9IHVzZVN0YXRlKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlMTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxMSwgMiksCiAgICAgIHNob3dQcm9kdWN0UHJvbW90aW9uID0gX3VzZVN0YXRlMTJbMF0sCiAgICAgIHNldFNob3dQcm9kdWN0UHJvbW90aW9uID0gX3VzZVN0YXRlMTJbMV07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2FjY291bnQkZGVwYXJ0bWVudDsKCiAgICBkaXNwYXRjaChnZXRQcm9tb3Rpb24oewogICAgICBwYWdlOiAwLAogICAgICBzaXplOiAyMCwKICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLERFU0MnLAogICAgICBkZXBlbmRlbmN5OiB0cnVlLAogICAgICBpc0xvY2s6IDAKICAgIH0pKTsKICAgIGRpc3BhdGNoKGdldERldGFpbE9yZGVyKHsKICAgICAgaWQ6IHByb3BzLm1hdGNoLnBhcmFtcy5pZCwKICAgICAgZGVwZW5kZW5jeTogdHJ1ZQogICAgfSkpOwogICAgZGlzcGF0Y2goZ2V0V2FyZWhvdXNlKHsKICAgICAgZGVwYXJ0bWVudDogSlNPTi5zdHJpbmdpZnkoWygoX2FjY291bnQkZGVwYXJ0bWVudCA9IGFjY291bnQuZGVwYXJ0bWVudCkgPT09IG51bGwgfHwgX2FjY291bnQkZGVwYXJ0bWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FjY291bnQkZGVwYXJ0bWVudC5pZCkgfHwgJyddKSwKICAgICAgZGVwZW5kZW5jeTogdHJ1ZQogICAgfSkpOwogIH0sIFtdKTsKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKG9yZGVyKSB7CiAgICAgIHNldEluaXRWYWx1ZXNTdGF0ZShvcmRlcik7CiAgICAgIHNldFNlbGVjdGVkUHJvbW90aW9uKG9yZGVyLnByb21vdGlvbik7CiAgICAgIHNldFNlbGVjdGVkV2FyZWhvdXNlKG9yZGVyLnN0b3JlKTsKICAgICAgZGlzcGF0Y2goZ2V0RGV0YWlsUHJvZHVjdFByb21vdGlvbih7CiAgICAgICAgcHJvbW90aW9uOiBvcmRlci5wcm9tb3Rpb24uaWQKICAgICAgfSkpOwogICAgICBkaXNwYXRjaChnZXRPcmRlckRldGFpbCh7CiAgICAgICAgb3JkZXJJZDogcHJvcHMubWF0Y2gucGFyYW1zLmlkLAogICAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgICAgfSkpOwogICAgfQogIH0sIFtvcmRlcl0pOwogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShpbml0aWFsU3RhdGUub3JkZXJEZXRhaWxzKSkgewogICAgICB2YXIgcHJvZHVjdEFyciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaW5pdGlhbFN0YXRlLm9yZGVyRGV0YWlscykpOwoKICAgICAgaWYgKGluaXRpYWxTdGF0ZS5vcmRlckRldGFpbHMubGVuZ3RoID4gMCkgewogICAgICAgIHNldFNlbGVjdGVkV2FyZWhvdXNlKGluaXRpYWxTdGF0ZS5vcmRlckRldGFpbHNbMF0uc3RvcmUpOwogICAgICAgIGRpc3BhdGNoKGdldFByb2R1Y3RXYXJlaG91c2VCeUZpZWxkKHsKICAgICAgICAgIHN0b3JlOiBvcmRlci5zdG9yZS5pZCwKICAgICAgICAgIHByb2R1Y3Q6IEpTT04uc3RyaW5naWZ5KGluaXRpYWxTdGF0ZS5vcmRlckRldGFpbHMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVtLnByb2R1Y3QuaWQ7CiAgICAgICAgICB9KSksCiAgICAgICAgICBkZXBlbmRlbmN5OiB0cnVlCiAgICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKG51bWJlck9mUXVhbnRpdHlJblN0b3JlKSB7CiAgICAgICAgICBpZiAobnVtYmVyT2ZRdWFudGl0eUluU3RvcmUgJiYgQXJyYXkuaXNBcnJheShudW1iZXJPZlF1YW50aXR5SW5TdG9yZS5wYXlsb2FkKSAmJiBudW1iZXJPZlF1YW50aXR5SW5TdG9yZS5wYXlsb2FkLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgbnVtYmVyT2ZRdWFudGl0eUluU3RvcmUucGF5bG9hZC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgdmFyIGZvdW5kZWRJbmRleCA9IHByb2R1Y3RBcnIuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5wcm9kdWN0LmlkID09PSBlbGVtZW50LnByb2R1Y3QuaWQ7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGlmIChmb3VuZGVkSW5kZXggIT09IC0xKSB7CiAgICAgICAgICAgICAgICBwcm9kdWN0QXJyW2ZvdW5kZWRJbmRleF0ucXVhbnRpdHlJblN0b3JlID0gZWxlbWVudC5xdWFudGl0eTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHNldFByb2R1Y3RMaXN0KHByb2R1Y3RBcnIpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgW2luaXRpYWxTdGF0ZS5vcmRlckRldGFpbHNdKTsKCiAgdmFyIG9uU3VibWl0ID0gZnVuY3Rpb24gb25TdWJtaXQodmFsdWVzLCBfcmVmKSB7CiAgICBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5KF9yZWYpOwoKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdmFsdWVzLCBfdmFsdWVzMiwgX3ZhbHVlczM7CgogICAgICB2YWx1ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbHVlcykpOwogICAgICBpZiAoIXZhbHVlcy5hZGRyZXNzKSB2YWx1ZXMuYWRkcmVzcyA9IHNlbGVjdGVkQ3VzdG9tZXIuYWRkcmVzczsKCiAgICAgIGlmIChzZWxlY3RlZFByb21vdGlvbikgewogICAgICAgIHZhbHVlcy5wcm9tb3Rpb24gPSBzZWxlY3RlZFByb21vdGlvbjsKICAgICAgfQoKICAgICAgdmFsdWVzLm9yZGVyRGV0YWlscyA9IHByb2R1Y3RMaXN0OwogICAgICB2YWx1ZXMudG90YWxNb25leSA9IChfdmFsdWVzID0gdmFsdWVzKSA9PT0gbnVsbCB8fCBfdmFsdWVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWVzLm9yZGVyRGV0YWlscy5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgY3VycmVudCkgewogICAgICAgIHJldHVybiBzdW0gKyBjdXJyZW50LnByaWNlUmVhbCAqIGN1cnJlbnQucXVhbnRpdHk7CiAgICAgIH0sIDApOwogICAgICB2YWx1ZXMucmVhbE1vbmV5ID0gKF92YWx1ZXMyID0gdmFsdWVzKSA9PT0gbnVsbCB8fCBfdmFsdWVzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlczIub3JkZXJEZXRhaWxzLnJlZHVjZShmdW5jdGlvbiAoc3VtLCBjdXJyZW50KSB7CiAgICAgICAgcmV0dXJuIHN1bSArIChjdXJyZW50LnByaWNlUmVhbCAqIGN1cnJlbnQucXVhbnRpdHkgLSBjdXJyZW50LnByaWNlUmVhbCAqIGN1cnJlbnQucXVhbnRpdHkgKiBjdXJyZW50LnJlZHVjZVBlcmNlbnQgLyAxMDApOwogICAgICB9LCAwKTsKICAgICAgdmFsdWVzLnJlZHVjZU1vbmV5ID0gKF92YWx1ZXMzID0gdmFsdWVzKSA9PT0gbnVsbCB8fCBfdmFsdWVzMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlczMub3JkZXJEZXRhaWxzLnJlZHVjZShmdW5jdGlvbiAoc3VtLCBjdXJyZW50KSB7CiAgICAgICAgcmV0dXJuIHN1bSArIGN1cnJlbnQucHJpY2VSZWFsICogY3VycmVudC5xdWFudGl0eSAqIGN1cnJlbnQucmVkdWNlUGVyY2VudCAvIDEwMDsKICAgICAgfSwgMCk7CgogICAgICBpZiAodmFsdWVzLnN0YXR1cyA9PT0gT3JkZXJTdGF0dXMuQ0FOQ0VMKSB7CiAgICAgICAgdmFsdWVzLnN0YXR1cyA9IE9yZGVyU3RhdHVzLldBSVRJTkc7CiAgICAgIH0KCiAgICAgIGlmICh2YWx1ZXMuY3JlYXRlZEJ5ICE9PSBhY2NvdW50LmxvZ2luICYmICghYWNjb3VudC5icmFuY2ggfHwgIWFjY291bnQuYnJhbmNoLmFsbG93KSkgewogICAgICAgIGRpc3BhdGNoKHVwZGF0ZU9yZGVyKHZhbHVlcykpOwogICAgICB9IGVsc2UgewogICAgICAgIGRpc3BhdGNoKGVkaXRTZWxmT3JkZXIodmFsdWVzKSk7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgdmFyIG9uU2VsZWN0UHJvbW90aW9uID0gZnVuY3Rpb24gb25TZWxlY3RQcm9tb3Rpb24oX3JlZjIpIHsKICAgIHZhciB2YWx1ZSA9IF9yZWYyLnZhbHVlOwogICAgdmFyIGFyciA9IHByb21vdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChjdXN0b21lcikgewogICAgICByZXR1cm4gY3VzdG9tZXIuaWQgPT09IHZhbHVlOwogICAgfSk7CgogICAgaWYgKGFyci5sZW5ndGggPT09IDEpIHsKICAgICAgc2V0U2VsZWN0ZWRQcm9tb3Rpb24oYXJyWzBdKTsKICAgIH0KICB9OwoKICB2YXIgb25TZWxlY3RlZFByb2R1Y3QgPSBmdW5jdGlvbiBvblNlbGVjdGVkUHJvZHVjdChfcmVmMywgaW5kZXgpIHsKICAgIHZhciB2YWx1ZSA9IF9yZWYzLnZhbHVlOwogICAgdmFyIGFyciA9IHByb2R1Y3RJbldhcmVob3VzZXMuZmlsdGVyKGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgIHJldHVybiBwcm9kdWN0LnByb2R1Y3QuaWQgPT09IHZhbHVlOwogICAgfSk7CgogICAgaWYgKGFyci5sZW5ndGggPT09IDEpIHsKICAgICAgdmFyIGNvcHlBcnIgPSBfdG9Db25zdW1hYmxlQXJyYXkocHJvZHVjdExpc3QpOwoKICAgICAgY29weUFycltpbmRleF0ucHJpY2VSZWFsID0gTnVtYmVyKGFyclswXS5wcm9kdWN0LnByaWNlKTsKICAgICAgY29weUFycltpbmRleF0ucHJvZHVjdCA9IGFyclswXS5wcm9kdWN0OwogICAgICBzZXRQcm9kdWN0TGlzdChjb3B5QXJyKTsKICAgICAgb25DaGFuZ2VRdWFudGl0eSh7CiAgICAgICAgdGFyZ2V0OiB7CiAgICAgICAgICB2YWx1ZTogMQogICAgICAgIH0KICAgICAgfSwgaW5kZXgpOwogICAgfQogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoc2VsZWN0ZWRQcm9tb3Rpb24gIT09IG51bGwgJiYgc2VsZWN0ZWRQcm9tb3Rpb24gIT09IHZvaWQgMCAmJiBzZWxlY3RlZFByb21vdGlvbi5pZCkgewogICAgICBkaXNwYXRjaChnZXREZXRhaWxQcm9kdWN0UHJvbW90aW9uKHsKICAgICAgICBwcm9tb3Rpb246IHNlbGVjdGVkUHJvbW90aW9uLmlkLAogICAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgICAgfSkpOwogICAgfQogIH0sIFtzZWxlY3RlZFByb21vdGlvbl0pOwogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoc2VsZWN0ZWRXYXJlaG91c2UgIT09IG51bGwgJiYgc2VsZWN0ZWRXYXJlaG91c2UgIT09IHZvaWQgMCAmJiBzZWxlY3RlZFdhcmVob3VzZS5pZCkgewogICAgICBkaXNwYXRjaChmaWx0ZXJQcm9kdWN0SW5TdG9yZSh7CiAgICAgICAgc3RvcmU6IHNlbGVjdGVkV2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkV2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZFdhcmVob3VzZS5pZCwKICAgICAgICBwYWdlOiAwLAogICAgICAgIHNpemU6IDIwLAogICAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJywKICAgICAgICBkZXBlbmRlbmN5OiB0cnVlCiAgICAgIH0pKTsKICAgIH0KICB9LCBbc2VsZWN0ZWRXYXJlaG91c2VdKTsKCiAgdmFyIG9uQWRkUHJvZHVjdCA9IGZ1bmN0aW9uIG9uQWRkUHJvZHVjdCgpIHsKICAgIGlmIChzZWxlY3RlZFdhcmVob3VzZSAhPT0gbnVsbCAmJiBzZWxlY3RlZFdhcmVob3VzZSAhPT0gdm9pZCAwICYmIHNlbGVjdGVkV2FyZWhvdXNlLmlkKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIHByb2R1Y3Q6IHt9LAogICAgICAgIHF1YW50aXR5OiAxLAogICAgICAgIHF1YW50aXR5QW5kR2lmdDogMCwKICAgICAgICByZWR1Y2VQZXJjZW50OiAwLAogICAgICAgIHN0b3JlOiB7CiAgICAgICAgICBpZDogc2VsZWN0ZWRXYXJlaG91c2UuaWQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNldFByb2R1Y3RMaXN0KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocHJvZHVjdExpc3QpLCBbZGF0YV0pKTsKICAgIH0gZWxzZSB7CiAgICAgIHNldElzU2VsZWN0ZWRXYXJlaG91c2UoZmFsc2UpOwogICAgfQogIH07CgogIHZhciBkZWJvdW5jZWRTZWFyY2hQcm9kdWN0ID0gXy5kZWJvdW5jZShmdW5jdGlvbiAodmFsdWUpIHsKICAgIGRpc3BhdGNoKGZpbHRlclByb2R1Y3RJblN0b3JlKHsKICAgICAgc3RvcmU6IHNlbGVjdGVkV2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkV2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZFdhcmVob3VzZS5pZCwKICAgICAgcGFnZTogMCwKICAgICAgc2l6ZTogMjAsCiAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJywKICAgICAgbmFtZTogdmFsdWUsCiAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgIH0pKTsKICB9LCAzMDApOwoKICB2YXIgb25TZWFyY2hQcm9kdWN0ID0gZnVuY3Rpb24gb25TZWFyY2hQcm9kdWN0KHZhbHVlKSB7CiAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA+IDApIHsKICAgICAgZGVib3VuY2VkU2VhcmNoUHJvZHVjdCh2YWx1ZSk7CiAgICB9CiAgfTsKCiAgdmFyIGRlYm91bmNlZFNlYXJjaFByb2R1Y3RJblN0b3JlID0gXy5kZWJvdW5jZShmdW5jdGlvbiAoY29weUFyciwgaW5kZXgpIHsKICAgIGRpc3BhdGNoKGdldFByb2R1Y3RJbnN0b3JlKHsKICAgICAgc3RvcmVJZDogc2VsZWN0ZWRXYXJlaG91c2UuaWQsCiAgICAgIHByb2R1Y3RJZDogY29weUFycltpbmRleF0ucHJvZHVjdC5pZAogICAgfSkpLnRoZW4oZnVuY3Rpb24gKG51bWJlck9mUXVhbnRpdHlJblN0b3JlKSB7CiAgICAgIGlmIChudW1iZXJPZlF1YW50aXR5SW5TdG9yZSAmJiBBcnJheS5pc0FycmF5KG51bWJlck9mUXVhbnRpdHlJblN0b3JlLnBheWxvYWQpICYmIG51bWJlck9mUXVhbnRpdHlJblN0b3JlLnBheWxvYWQubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBfbnVtYmVyT2ZRdWFudGl0eUluU3Q7CgogICAgICAgIGNvcHlBcnJbaW5kZXhdLnF1YW50aXR5SW5TdG9yZSA9IChudW1iZXJPZlF1YW50aXR5SW5TdG9yZSA9PT0gbnVsbCB8fCBudW1iZXJPZlF1YW50aXR5SW5TdG9yZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9udW1iZXJPZlF1YW50aXR5SW5TdCA9IG51bWJlck9mUXVhbnRpdHlJblN0b3JlLnBheWxvYWRbMF0pID09PSBudWxsIHx8IF9udW1iZXJPZlF1YW50aXR5SW5TdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX251bWJlck9mUXVhbnRpdHlJblN0LnF1YW50aXR5KSB8fCAwOwogICAgICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogICAgICB9CiAgICB9KTsKICB9LCAxMDAwKTsKCiAgdmFyIG9uU2VhcmNoUHJvZHVjdEluc3RvcmUgPSBmdW5jdGlvbiBvblNlYXJjaFByb2R1Y3RJbnN0b3JlKGNvcHlBcnIsIGluZGV4KSB7CiAgICBpZiAoIWNvcHlBcnJbaW5kZXhdLnF1YW50aXR5SW5TdG9yZSkgewogICAgICBkZWJvdW5jZWRTZWFyY2hQcm9kdWN0SW5TdG9yZShjb3B5QXJyLCBpbmRleCk7CiAgICB9CiAgfTsKCiAgdmFyIG9uQ2hhbmdlUXVhbnRpdHkgPSBmdW5jdGlvbiBvbkNoYW5nZVF1YW50aXR5KF9yZWY0LCBpbmRleCkgewogICAgdmFyIHRhcmdldCA9IF9yZWY0LnRhcmdldDsKCiAgICB2YXIgY29weUFyciA9IF90b0NvbnN1bWFibGVBcnJheShwcm9kdWN0TGlzdCk7CgogICAgY29uc29sZS5sb2codGFyZ2V0LnZhbHVlKTsKICAgIGNvcHlBcnJbaW5kZXhdLnF1YW50aXR5ID0gTnVtYmVyKHRhcmdldC52YWx1ZSkudG9TdHJpbmcoKTsKICAgIGNvcHlBcnJbaW5kZXhdLnByaWNlVG90YWwgPSBjb3B5QXJyW2luZGV4XS5xdWFudGl0eSAqIGNvcHlBcnJbaW5kZXhdLnByaWNlUmVhbDsKCiAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9tb3Rpb25TdGF0ZS5wcm9tb3Rpb25Qcm9kdWN0cykgJiYgY29weUFycltpbmRleF0uYXR0YWNoVG8gPT09IG51bGwpIHsKICAgICAgdmFyIGZvdW5kZWQgPSBwcm9tb3Rpb25TdGF0ZS5wcm9tb3Rpb25Qcm9kdWN0cy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5wcm9kdWN0LmlkID09PSBjb3B5QXJyW2luZGV4XS5wcm9kdWN0LmlkOwogICAgICB9KTsKCiAgICAgIGlmIChmb3VuZGVkLmxlbmd0aCA+IDApIHsKICAgICAgICBpZiAodGFyZ2V0LnZhbHVlID49IGZvdW5kZWRbMF0uYnV5KSB7CiAgICAgICAgICB2YXIgcmF0aW8gPSBmb3VuZGVkWzBdLmdpZnQgLyBmb3VuZGVkWzBdLmJ1eTsKICAgICAgICAgIHZhciBnaWZ0ID0gTWF0aC5mbG9vcih0YXJnZXQudmFsdWUgKiByYXRpbyk7CiAgICAgICAgICB2YXIgZXhpc3RFeHRyYVByb2R1Y3RJbmRleCA9IGNvcHlBcnIuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVtLmF0dGFjaFRvID09PSBpbmRleDsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChleGlzdEV4dHJhUHJvZHVjdEluZGV4ICE9PSAtMSkgewogICAgICAgICAgICBjb3B5QXJyW2V4aXN0RXh0cmFQcm9kdWN0SW5kZXhdLnF1YW50aXR5ID0gZ2lmdDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBleHRyYVByb2R1Y3QgPSB7CiAgICAgICAgICAgICAgcHJvZHVjdDogY29weUFycltpbmRleF0ucHJvZHVjdCwKICAgICAgICAgICAgICBxdWFudGl0eTogZ2lmdCwKICAgICAgICAgICAgICByZWR1Y2VQZXJjZW50OiAxMDAsCiAgICAgICAgICAgICAgcHJpY2VSZWFsOiBOdW1iZXIoY29weUFycltpbmRleF0ucHJvZHVjdC5wcmljZSksCiAgICAgICAgICAgICAgc3RvcmU6IHsKICAgICAgICAgICAgICAgIGlkOiBzZWxlY3RlZFdhcmVob3VzZS5pZAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZm9sbG93SW5kZXg6IGluZGV4CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvcHlBcnIuc3BsaWNlKGluZGV4ICsgMSwgMCwgZXh0cmFQcm9kdWN0KTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb3B5QXJyW2luZGV4XS5xdWFudGl0eUFuZEdpZnQgPSBOdW1iZXIoZ2lmdCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKHNlbGVjdGVkV2FyZWhvdXNlICYmIGNvcHlBcnJbaW5kZXhdLnByb2R1Y3QpIHsKICAgICAgc2V0UHJvZHVjdExpc3QoY29weUFycik7CiAgICAgIG9uU2VhcmNoUHJvZHVjdEluc3RvcmUoY29weUFyciwgaW5kZXgpOwogICAgfQoKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvbkNoYW5nZVByaWNlID0gZnVuY3Rpb24gb25DaGFuZ2VQcmljZShfcmVmNSwgaW5kZXgpIHsKICAgIHZhciB0YXJnZXQgPSBfcmVmNS50YXJnZXQ7CiAgICB2YXIgY29weUFyciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocHJvZHVjdExpc3QpKTsKICAgIGNvcHlBcnJbaW5kZXhdLnByaWNlUmVhbCA9IE51bWJlcih0YXJnZXQudmFsdWUucmVwbGFjZSgvXEQvZywgJycpKTsKICAgIGNvcHlBcnJbaW5kZXhdLnByaWNlVG90YWwgPSBjb3B5QXJyW2luZGV4XS5xdWFudGl0eSAqIGNvcHlBcnJbaW5kZXhdLnByaWNlUmVhbDsKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvbkNoYW5nZVJlZHVjZVBlcmNlbnQgPSBmdW5jdGlvbiBvbkNoYW5nZVJlZHVjZVBlcmNlbnQoX3JlZjYsIGluZGV4KSB7CiAgICB2YXIgdGFyZ2V0ID0gX3JlZjYudGFyZ2V0OwoKICAgIHZhciBjb3B5QXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KHByb2R1Y3RMaXN0KTsKCiAgICBjb3B5QXJyW2luZGV4XS5yZWR1Y2VQZXJjZW50ID0gdGFyZ2V0LnZhbHVlID4gMTAwID8gMTAwIDogTnVtYmVyKHRhcmdldC52YWx1ZSkudG9TdHJpbmcoKTsKICAgIGNvcHlBcnJbaW5kZXhdLnByaWNlVG90YWwgPSBjb3B5QXJyW2luZGV4XS5wcmljZVJlYWwgKiBjb3B5QXJyW2luZGV4XS5xdWFudGl0eSAtIGNvcHlBcnJbaW5kZXhdLnByaWNlUmVhbCAqIGNvcHlBcnJbaW5kZXhdLnF1YW50aXR5ICogY29weUFycltpbmRleF0ucmVkdWNlUGVyY2VudCAvIDEwMDsKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHZhciBvblNlbGVjdFdhcmVob3VzZSA9IGZ1bmN0aW9uIG9uU2VsZWN0V2FyZWhvdXNlKF9yZWY3KSB7CiAgICB2YXIgdmFsdWUgPSBfcmVmNy52YWx1ZTsKICAgIHNldFNlbGVjdGVkV2FyZWhvdXNlKHZhbHVlKTsKICAgIHNldElzU2VsZWN0ZWRXYXJlaG91c2UodHJ1ZSk7CiAgfTsKCiAgdmFyIGVkaXRBbGVydCA9IGZ1bmN0aW9uIGVkaXRBbGVydCh2YWx1ZXMsIF9yZWY4KSB7CiAgICB2YXIgc2V0U3VibWl0dGluZyA9IF9yZWY4LnNldFN1Ym1pdHRpbmcsCiAgICAgICAgc2V0RXJyb3JzID0gX3JlZjguc2V0RXJyb3JzOwogICAgY29uZmlybUFsZXJ0KHsKICAgICAgdGl0bGU6ICdYw6FjIG5o4bqtbicsCiAgICAgIG1lc3NhZ2U6ICdC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gbMawdSDEkcahbiBow6BuZyBuw6B5PycsCiAgICAgIGJ1dHRvbnM6IFt7CiAgICAgICAgbGFiZWw6ICfEkOG7k25nIMO9JywKICAgICAgICBvbkNsaWNrOiBvblN1Ym1pdCh2YWx1ZXMsIHsKICAgICAgICAgIHNldFN1Ym1pdHRpbmc6IHNldFN1Ym1pdHRpbmcsCiAgICAgICAgICBzZXRFcnJvcnM6IHNldEVycm9ycwogICAgICAgIH0pCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ0jhu6d5JwogICAgICB9XQogICAgfSk7CiAgfTsKCiAgdmFyIG9uUmVtb3ZlUHJvZHVjdCA9IGZ1bmN0aW9uIG9uUmVtb3ZlUHJvZHVjdChpbmRleCkgewogICAgdmFyIGNvcHlBcnIgPSBfdG9Db25zdW1hYmxlQXJyYXkocHJvZHVjdExpc3QpOwoKICAgIGNvcHlBcnIuc3BsaWNlKGluZGV4LCAxKTsKICAgIHNldFByb2R1Y3RMaXN0KGNvcHlBcnIpOwogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoaW5pdGlhbFN0YXRlLnVwZGF0aW5nU3VjY2VzcykgewogICAgICBkaXNwYXRjaChyZW1vdmVQZXJtaXNzaW9uKCkpOwogICAgICBoaXN0b3J5LmdvQmFjaygpOwogICAgfQogIH0sIFtpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzXSk7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1paywgewogICAgaW5pdGlhbFZhbHVlczogaW5pdFZhbHVlc1N0YXRlIHx8IGluaXRpYWxWYWx1ZXMsCiAgICBlbmFibGVSZWluaXRpYWxpemU6IHRydWUsCiAgICB2YWxpZGF0ZTogdmFsaWRhdGUodmFsaWRhdGlvblNjaGVtYSksCiAgICBvblN1Ym1pdDogZWRpdEFsZXJ0CiAgfSwgZnVuY3Rpb24gKF9yZWY5KSB7CiAgICB2YXIgX3ZhbHVlcyRjdXN0b21lciwgX3ZhbHVlcyRjdXN0b21lcjIsIF92YWx1ZXMkY3VzdG9tZXIzLCBfdmFsdWVzJGN1c3RvbWVyNCwgX3ZhbHVlcyRjdXN0b21lcjQkZGVwLCBfdmFsdWVzJGN1c3RvbWVyNSwgX2NpdGllcyRmaWx0ZXIkLCBfZGlzdHJpY3QkZmlsdGVyJCwgX3ZhbHVlcyRjdXN0b21lcjgsIF92YWx1ZXMkY3VzdG9tZXI4JHR5cCwgX3ZhbHVlcyRwcm9tb3Rpb24sIF92YWx1ZXMkcHJvbW90aW9uMiwgX3ZhbHVlcyRzdG9yZSwgX3NlbGVjdGVkV2FyZWhvdXNlJGNpLCBfc2VsZWN0ZWRXYXJlaG91c2UkZGksIF9zZWxlY3RlZFdhcmVob3VzZSR3YSwgX3ZhbHVlcyRjdXN0b21lcjk7CgogICAgdmFyIHZhbHVlcyA9IF9yZWY5LnZhbHVlcywKICAgICAgICBlcnJvcnMgPSBfcmVmOS5lcnJvcnMsCiAgICAgICAgdG91Y2hlZCA9IF9yZWY5LnRvdWNoZWQsCiAgICAgICAgaGFuZGxlQ2hhbmdlID0gX3JlZjkuaGFuZGxlQ2hhbmdlLAogICAgICAgIGhhbmRsZUJsdXIgPSBfcmVmOS5oYW5kbGVCbHVyLAogICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWY5LmhhbmRsZVN1Ym1pdCwKICAgICAgICBzZXRGaWVsZFZhbHVlID0gX3JlZjkuc2V0RmllbGRWYWx1ZTsKICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybSwgewogICAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0LAogICAgICBub1ZhbGlkYXRlOiB0cnVlLAogICAgICBuYW1lOiAic2ltcGxlRm9ybSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkLCB7CiAgICAgIGNsYXNzTmFtZTogImNhcmQtYWNjZW50LXByaW1hcnkiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEhlYWRlciwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRUaXRsZSwgbnVsbCwgIlRoXHhGNG5nIHRpbiBraFx4RTFjaCBoXHhFMG5nIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI2IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIk1ceEUzIGtoXHhFMWNoIGhceEUwbmc6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCAoX3ZhbHVlcyRjdXN0b21lciA9IHZhbHVlcy5jdXN0b21lcikgPT09IG51bGwgfHwgX3ZhbHVlcyRjdXN0b21lciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlcyRjdXN0b21lci5jb2RlKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJIXHUxRUNEIHRceEVBbjoiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIChfdmFsdWVzJGN1c3RvbWVyMiA9IHZhbHVlcy5jdXN0b21lcikgPT09IG51bGwgfHwgX3ZhbHVlcyRjdXN0b21lcjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZXMkY3VzdG9tZXIyLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlNcdTFFRDEgXHUwMTExaVx1MUVDN24gdGhvXHUxRUExaToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIChfdmFsdWVzJGN1c3RvbWVyMyA9IHZhbHVlcy5jdXN0b21lcikgPT09IG51bGwgfHwgX3ZhbHVlcyRjdXN0b21lcjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZXMkY3VzdG9tZXIzLnRlbCkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiQ2hpIG5oXHhFMW5oOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgKF92YWx1ZXMkY3VzdG9tZXI0ID0gdmFsdWVzLmN1c3RvbWVyKSA9PT0gbnVsbCB8fCBfdmFsdWVzJGN1c3RvbWVyNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF92YWx1ZXMkY3VzdG9tZXI0JGRlcCA9IF92YWx1ZXMkY3VzdG9tZXI0LmRlcGFydG1lbnQpID09PSBudWxsIHx8IF92YWx1ZXMkY3VzdG9tZXI0JGRlcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlcyRjdXN0b21lcjQkZGVwLm5hbWUpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI2IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlx1MDExMFx1MUVDQmEgY2hcdTFFQzk6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCAoX3ZhbHVlcyRjdXN0b21lcjUgPSB2YWx1ZXMuY3VzdG9tZXIpID09PSBudWxsIHx8IF92YWx1ZXMkY3VzdG9tZXI1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWVzJGN1c3RvbWVyNS5hZGRyZXNzKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJUaFx4RTBuaCBwaFx1MUVEMToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sICgoX2NpdGllcyRmaWx0ZXIkID0gY2l0aWVzLmZpbHRlcihmdW5jdGlvbiAoY2l0eSkgewogICAgICB2YXIgX3ZhbHVlcyRjdXN0b21lcjY7CgogICAgICByZXR1cm4gY2l0eS52YWx1ZSA9PT0gKChfdmFsdWVzJGN1c3RvbWVyNiA9IHZhbHVlcy5jdXN0b21lcikgPT09IG51bGwgfHwgX3ZhbHVlcyRjdXN0b21lcjYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZXMkY3VzdG9tZXI2LmNpdHkpOwogICAgfSlbMF0pID09PSBudWxsIHx8IF9jaXRpZXMkZmlsdGVyJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NpdGllcyRmaWx0ZXIkLmxhYmVsKSB8fCAnJykpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiUXVcdTFFQURuIGh1eVx1MUVDN246IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCAoKF9kaXN0cmljdCRmaWx0ZXIkID0gZGlzdHJpY3QuZmlsdGVyKGZ1bmN0aW9uIChjaXR5KSB7CiAgICAgIHZhciBfdmFsdWVzJGN1c3RvbWVyNzsKCiAgICAgIHJldHVybiBjaXR5LnZhbHVlID09PSAoKF92YWx1ZXMkY3VzdG9tZXI3ID0gdmFsdWVzLmN1c3RvbWVyKSA9PT0gbnVsbCB8fCBfdmFsdWVzJGN1c3RvbWVyNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlcyRjdXN0b21lcjcuZGlzdHJpY3QpOwogICAgfSlbMF0pID09PSBudWxsIHx8IF9kaXN0cmljdCRmaWx0ZXIkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGlzdHJpY3QkZmlsdGVyJC5sYWJlbCkgfHwgJycpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIkxvXHUxRUExaSBraFx4RTFjaCBoXHhFMG5nOiAiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIChfdmFsdWVzJGN1c3RvbWVyOCA9IHZhbHVlcy5jdXN0b21lcikgPT09IG51bGwgfHwgX3ZhbHVlcyRjdXN0b21lcjggPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdmFsdWVzJGN1c3RvbWVyOCR0eXAgPSBfdmFsdWVzJGN1c3RvbWVyOC50eXBlKSA9PT0gbnVsbCB8fCBfdmFsdWVzJGN1c3RvbWVyOCR0eXAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZXMkY3VzdG9tZXI4JHR5cC5uYW1lKSkpKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgewogICAgICBjbGFzc05hbWU6ICJjYXJkLWFjY2VudC1pbmZvIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkVGl0bGUsIG51bGwsICJDaFx1MDFCMFx1MDFBMW5nIHRyXHhFQ25oIGtodXlcdTFFQkZuIG1cdTFFQTFpIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIHsKICAgICAgY2xhc3NOYW1lOiAibWItMyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgc206IDQKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAibGFzdE5hbWUiCiAgICB9LCAiQ2hcdTFFQ0RuIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmggYlx4RTFuIGhceEUwbmciKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShpdGVtKSB7CiAgICAgICAgc2V0RmllbGRWYWx1ZSgncHJvbW90aW9uJywgewogICAgICAgICAgaWQ6IGl0ZW0udmFsdWUsCiAgICAgICAgICBuYW1lOiBpdGVtLmxhYmVsCiAgICAgICAgfSk7CiAgICAgICAgb25TZWxlY3RQcm9tb3Rpb24oaXRlbSk7CiAgICAgIH0sCiAgICAgIHZhbHVlOiB7CiAgICAgICAgdmFsdWU6IChfdmFsdWVzJHByb21vdGlvbiA9IHZhbHVlcy5wcm9tb3Rpb24pID09PSBudWxsIHx8IF92YWx1ZXMkcHJvbW90aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWVzJHByb21vdGlvbi5pZCwKICAgICAgICBsYWJlbDogKF92YWx1ZXMkcHJvbW90aW9uMiA9IHZhbHVlcy5wcm9tb3Rpb24pID09PSBudWxsIHx8IF92YWx1ZXMkcHJvbW90aW9uMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlcyRwcm9tb3Rpb24yLm5hbWUKICAgICAgfSwKICAgICAgbmFtZTogInByb21vdGlvbiIsCiAgICAgIG9wdGlvbnM6IHByb21vdGlvbnMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBpdGVtLmlkLAogICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdChpdGVtLm5hbWUpCiAgICAgICAgfTsKICAgICAgfSkKICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1GZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLnByb21vdGlvbikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJUXHhFQW4gY2hcdTAxQjBcdTAxQTFuZyB0clx4RUNuaDoiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkUHJvbW90aW9uID09PSBudWxsIHx8IHNlbGVjdGVkUHJvbW90aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZFByb21vdGlvbi5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJOZ1x4RTB5IGJcdTFFQUZ0IFx1MDExMVx1MUVBN3U6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZFByb21vdGlvbiA9PT0gbnVsbCB8fCBzZWxlY3RlZFByb21vdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRQcm9tb3Rpb24uc3RhcnRUaW1lKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJOZ1x4RTB5IGtcdTFFQkZ0IHRoXHhGQWM6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZFByb21vdGlvbiA9PT0gbnVsbCB8fCBzZWxlY3RlZFByb21vdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRQcm9tb3Rpb24uZW5kVGltZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiTG9cdTFFQTFpIGNoXHUwMUIwXHUwMUExbmcgdHJceEVDbmg6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBtYXBwaW5nVHlwZVtzZWxlY3RlZFByb21vdGlvbiA9PT0gbnVsbCB8fCBzZWxlY3RlZFByb21vdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRQcm9tb3Rpb24udHlwZV0pKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgc2hhcGU6ICJzcXVhcmUiLAogICAgICBzaXplOiAic20iLAogICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgIHNldFNob3dQcm9kdWN0UHJvbW90aW9uKCFzaG93UHJvZHVjdFByb21vdGlvbik7CiAgICAgIH0KICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICJjaWxab29tIgogICAgfSksICIgWGVtIHNcdTFFQTNuIHBoXHUxRUE5bSBceEUxcCBkXHUxRUU1bmciKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbGxhcHNlLCB7CiAgICAgIHNob3c6IHNob3dQcm9kdWN0UHJvbW90aW9uCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoNSIsIG51bGwsICJUaFx4RjRuZyB0aW4gc1x1MUVBM24gcGhcdTFFQTltIGtodXlcdTFFQkZuIG1cdTFFQTFpIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI2IgogICAgfSwgQXJyYXkuaXNBcnJheShwcm9tb3Rpb25TdGF0ZS5wcm9tb3Rpb25Qcm9kdWN0cykgJiYgcHJvbW90aW9uU3RhdGUucHJvbW90aW9uUHJvZHVjdHMubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICAgIGNsYXNzTmFtZTogInJvdyIsCiAgICAgICAga2V5OiBpbmRleAogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTYiCiAgICAgIH0sICIiLmNvbmNhdChpdGVtLnByb2R1Y3QubmFtZSwgIiAiKS5jb25jYXQoaXRlbS5wcm9kdWN0LnZvbHVtZSwgIm1sIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTgiCiAgICAgIH0sICJNdWEgIi5jb25jYXQoaXRlbS5idXksICIgVFx1MUVCN25nICIpLmNvbmNhdChpdGVtLmdpZnQpKSk7CiAgICB9KSkpKSkpKSwgcHJvZHVjdExpc3QubGVuZ3RoID09PSAwICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkLCB7CiAgICAgIGNsYXNzTmFtZTogImNhcmQtYWNjZW50LWluZm8iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEhlYWRlciwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRUaXRsZSwgbnVsbCwgIktobyBoXHhFMG5nIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIHsKICAgICAgY2xhc3NOYW1lOiAibWItMyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgc206IDQKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAibGFzdE5hbWUiCiAgICB9LCAiQ2hcdTFFQ0RuIEtobyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGl0ZW0pIHsKICAgICAgICBzZXRGaWVsZFZhbHVlKCdzdG9yZScsIGl0ZW0udmFsdWUpOwogICAgICAgIG9uU2VsZWN0V2FyZWhvdXNlKGl0ZW0pOwogICAgICB9LAogICAgICB2YWx1ZTogewogICAgICAgIHZhbHVlOiB2YWx1ZXMuc3RvcmUsCiAgICAgICAgbGFiZWw6IChfdmFsdWVzJHN0b3JlID0gdmFsdWVzLnN0b3JlKSA9PT0gbnVsbCB8fCBfdmFsdWVzJHN0b3JlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWVzJHN0b3JlLm5hbWUKICAgICAgfSwKICAgICAgb3B0aW9uczogd2FyZWhvdXNlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IGl0ZW0sCiAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KGl0ZW0ubmFtZSkKICAgICAgICB9OwogICAgICB9KQogICAgfSksICFpc1NlbGVjdGVkV2FyZWhvdXNlICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1GZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgIkJcdTFFQTFuIHBoXHUxRUEzaSBjaFx1MUVDRG4ga2hvIGhceEUwbmciKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkbCIsIHsKICAgICAgY2xhc3NOYW1lOiAicm93IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImR0IiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tMyIKICAgIH0sICJUXHhFQW4ga2hvOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IG51bGwgfHwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkV2FyZWhvdXNlLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlNcdTFFRDEgXHUwMTExaVx1MUVDN24gdGhvXHUxRUExaToiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkV2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkV2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZFdhcmVob3VzZS50ZWwpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlx1MDExMFx1MUVDQmEgY2hcdTFFQzk6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gbnVsbCB8fCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRXYXJlaG91c2UuYWRkcmVzcykpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjYiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiVGhceEUwbmggcGhcdTFFRDE6IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkZCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTkiCiAgICB9LCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gbnVsbCB8fCBzZWxlY3RlZFdhcmVob3VzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9zZWxlY3RlZFdhcmVob3VzZSRjaSA9IHNlbGVjdGVkV2FyZWhvdXNlLmNpdHkpID09PSBudWxsIHx8IF9zZWxlY3RlZFdhcmVob3VzZSRjaSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NlbGVjdGVkV2FyZWhvdXNlJGNpLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRsIiwgewogICAgICBjbGFzc05hbWU6ICJyb3ciCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZHQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS0zIgogICAgfSwgIlF1XHUxRUFEbiBodXlcdTFFQzduOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGQiLCB7CiAgICAgIGNsYXNzTmFtZTogImNvbC1zbS05IgogICAgfSwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IG51bGwgfHwgc2VsZWN0ZWRXYXJlaG91c2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfc2VsZWN0ZWRXYXJlaG91c2UkZGkgPSBzZWxlY3RlZFdhcmVob3VzZS5kaXN0cmljdCkgPT09IG51bGwgfHwgX3NlbGVjdGVkV2FyZWhvdXNlJGRpID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2VsZWN0ZWRXYXJlaG91c2UkZGkubmFtZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGwiLCB7CiAgICAgIGNsYXNzTmFtZTogInJvdyIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkdCIsIHsKICAgICAgY2xhc3NOYW1lOiAiY29sLXNtLTMiCiAgICB9LCAiWFx4RTMgcGhcdTAxQjBcdTFFRERuZzoiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRkIiwgewogICAgICBjbGFzc05hbWU6ICJjb2wtc20tOSIKICAgIH0sIHNlbGVjdGVkV2FyZWhvdXNlID09PSBudWxsIHx8IHNlbGVjdGVkV2FyZWhvdXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3NlbGVjdGVkV2FyZWhvdXNlJHdhID0gc2VsZWN0ZWRXYXJlaG91c2Uud2FyZCkgPT09IG51bGwgfHwgX3NlbGVjdGVkV2FyZWhvdXNlJHdhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2VsZWN0ZWRXYXJlaG91c2Ukd2EubmFtZSkpKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICBjb2xvcjogInByaW1hcnkiLAogICAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgc2l6ZTogInNtIiwKICAgICAgY2xhc3NOYW1lOiAibWwtMyBtYi0zIiwKICAgICAgb25DbGljazogb25BZGRQcm9kdWN0CiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICBuYW1lOiAnY2lsQXJyb3dDaXJjbGVSaWdodCcsCiAgICAgIGNsYXNzTmFtZTogIm1yLTIiCiAgICB9KSwgIlRoXHhFQW0gc1x1MUVBM24gcGhcdTFFQTltIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhYmxlLCB7CiAgICAgIHJlc3BvbnNpdmU6IHRydWUsCiAgICAgIHN0cmlwZWQ6IHRydWUKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aGVhZCIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIG51bGwsICJTXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIlx1MDExMFx1MDFBMW4gdlx1MUVDQiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCBudWxsLCAiRHVuZyB0XHhFRGNoIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIG51bGwsICJTXHUxRUQxIGxcdTAxQjBcdTFFRTNuZyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCBudWxsLCAiXHUwMTEwXHUwMUExbiBnaVx4RTEiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIlRoXHhFMG5oIHRpXHUxRUMxbiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCBudWxsLCAiQ2hpXHUxRUJGdCBraFx1MUVBNXUiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIlRoYW5oIHRvXHhFMW4iKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGJvZHkiLCBudWxsLCBwcm9kdWN0TGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgIHZhciBfaXRlbSRwcm9kdWN0LCBfaXRlbSRwcm9kdWN0MiwgX2l0ZW0kcHJvZHVjdDMsIF9pdGVtJHByb2R1Y3Q0OwoKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIHsKICAgICAgICBrZXk6IGluZGV4LAogICAgICAgIHN0eWxlOiBpdGVtLnF1YW50aXR5SW5TdG9yZSAhPT0gdW5kZWZpbmVkICYmIE51bWJlcihpdGVtLnF1YW50aXR5KSArIChOdW1iZXIoaXRlbS5xdWFudGl0eUFuZEdpZnQpIHx8IDApID4gaXRlbS5xdWFudGl0eUluU3RvcmUgPyB7CiAgICAgICAgICBib3hTaGFkb3c6ICcwcHggMHB4IDZweCA1cHggcmVkJwogICAgICAgIH0gOiB7fQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIG1pbldpZHRoOiAzMDAKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICB2YWx1ZTogKF9pdGVtJHByb2R1Y3QgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3QuaWQsCiAgICAgICAgICBsYWJlbDogKF9pdGVtJHByb2R1Y3QyID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdDIubmFtZQogICAgICAgIH0sCiAgICAgICAgb25JbnB1dENoYW5nZTogb25TZWFyY2hQcm9kdWN0LAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgcmV0dXJuIG9uU2VsZWN0ZWRQcm9kdWN0KGV2ZW50LCBpbmRleCk7CiAgICAgICAgfSwKICAgICAgICBtZW51UG9ydGFsVGFyZ2V0OiBkb2N1bWVudC5ib2R5LAogICAgICAgIG9wdGlvbnM6IHByb2R1Y3RJbldhcmVob3VzZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICB2YXIgX2l0ZW0kcHJvZHVjdCRwcm9kdWN0OwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbHVlOiBpdGVtLnByb2R1Y3QuaWQsCiAgICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQoKF9pdGVtJHByb2R1Y3QkcHJvZHVjdCA9IGl0ZW0ucHJvZHVjdC5wcm9kdWN0QnJhbmQpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3QkcHJvZHVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdCRwcm9kdWN0LmNvZGUsICItIikuY29uY2F0KGl0ZW0ucHJvZHVjdC5uYW1lLCAiLSIpLmNvbmNhdChpdGVtLnByb2R1Y3Qudm9sdW1lKQogICAgICAgICAgfTsKICAgICAgICB9KQogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIChfaXRlbSRwcm9kdWN0MyA9IGl0ZW0ucHJvZHVjdCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3QzLnVuaXQpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCAoX2l0ZW0kcHJvZHVjdDQgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3Q0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0NC52b2x1bWUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIG1pbldpZHRoOiAxMDAKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgIG1pbjogMSwKICAgICAgICBuYW1lOiAiY29kZSIsCiAgICAgICAgaWQ6ICJjb2RlIiwKICAgICAgICBvbktleURvd246IGJsb2NrSW52YWxpZENoYXIsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gb25DaGFuZ2VRdWFudGl0eShldmVudCwgaW5kZXgpOwogICAgICAgIH0sCiAgICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICAgIHZhbHVlOiBpdGVtLnF1YW50aXR5CiAgICAgIH0pLCBpdGVtLnF1YW50aXR5SW5TdG9yZSAhPT0gdW5kZWZpbmVkICYmIE51bWJlcihpdGVtLnF1YW50aXR5KSArIChOdW1iZXIoaXRlbS5xdWFudGl0eUFuZEdpZnQpIHx8IDApID4gaXRlbS5xdWFudGl0eUluU3RvcmUgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybUZlZWRiYWNrLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgICAgfSwgIlNcdTFFRDEgbFx1MDFCMFx1MUVFM25nIHNcdTFFQTNuIHBoXHUxRUE5bSB2XHhFMCBxdVx4RTAgdFx1MUVCN25nIGxcdTFFREJuIGhcdTAxQTFuIHNcdTFFRDEgbFx1MDFCMFx1MUVFM25nIHRyb25nIGtobyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBtaW5XaWR0aDogMjUwCiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNYXNrZWRJbnB1dCwgewogICAgICAgIG1hc2s6IGN1cnJlbmN5TWFzaywKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBvbkNoYW5nZVByaWNlKGV2ZW50LCBpbmRleCk7CiAgICAgICAgfSwKICAgICAgICB2YWx1ZTogdHlwZW9mIHByb2R1Y3RMaXN0W2luZGV4XS5wcmljZVJlYWwgIT09ICdudW1iZXInID8gbmV3IEludGwuTnVtYmVyRm9ybWF0KCd2aS1WTicsIHsKICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgICAgY3VycmVuY3k6ICdWTkQnCiAgICAgICAgfSkuZm9ybWF0KHByb2R1Y3RMaXN0W2luZGV4XS5wcmljZVJlYWwpIDogcHJvZHVjdExpc3RbaW5kZXhdLnByaWNlUmVhbCwKICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyZWYsIHByb3BzKSB7CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCBfZXh0ZW5kcyh7CiAgICAgICAgICAgIGlubmVyUmVmOiByZWYKICAgICAgICAgIH0sIHByb3BzKSk7CiAgICAgICAgfQogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIChpdGVtLnByaWNlUmVhbCAqIGl0ZW0ucXVhbnRpdHkpLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgICBzdHlsZTogJ2N1cnJlbmN5JywKICAgICAgICBjdXJyZW5jeTogJ1ZORCcKICAgICAgfSkgfHwgJycpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIG1pbldpZHRoOiAxMDAKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgIG1pbjogMCwKICAgICAgICBtYXg6IDEwMCwKICAgICAgICBvbktleURvd246IGJsb2NrSW52YWxpZENoYXIsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gb25DaGFuZ2VSZWR1Y2VQZXJjZW50KGV2ZW50LCBpbmRleCk7CiAgICAgICAgfSwKICAgICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgICAgdmFsdWU6IGl0ZW0ucmVkdWNlUGVyY2VudAogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIChpdGVtLnByaWNlUmVhbCAqIGl0ZW0ucXVhbnRpdHkgLSBpdGVtLnByaWNlUmVhbCAqIGl0ZW0ucXVhbnRpdHkgKiBpdGVtLnJlZHVjZVBlcmNlbnQgLyAxMDApLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgICBzdHlsZTogJ2N1cnJlbmN5JywKICAgICAgICBjdXJyZW5jeTogJ1ZORCcKICAgICAgfSkgfHwgJycpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIG1pbldpZHRoOiAxMDAKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICBzaXplOiAic20iLAogICAgICAgIGNsYXNzTmFtZTogIm1yLTMiLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICByZXR1cm4gb25SZW1vdmVQcm9kdWN0KGluZGV4KTsKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgICAgbmFtZTogImNpbFhDaXJjbGUiCiAgICAgIH0pKSkpOwogICAgfSkpKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkVGl0bGUsIG51bGwsICJUaFx4RjRuZyB0aW4ga2hceEUxYyIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNCIsCiAgICAgIHNtOiAiNSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAidXNlck5hbWUiCiAgICB9LCAiXHUwMTEwXHUxRUNCYSBjaFx1MUVDOSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDVGV4dGFyZWEsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAiYWRkcmVzcyIsCiAgICAgIGlkOiAiYWRkcmVzcyIsCiAgICAgIHBsYWNlaG9sZGVyOiAiXHUwMTEwXHUxRUNCYSBjaFx1MUVDOSIsCiAgICAgIGF1dG9Db21wbGV0ZTogImFkZHJlc3MiLAogICAgICB2YWxpZDogZXJyb3JzLmFkZHJlc3MgfHwgbnVsbCwKICAgICAgaW52YWxpZDogdG91Y2hlZC5hZGRyZXNzICYmICEhZXJyb3JzLmFkZHJlc3MsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5hZGRyZXNzIHx8ICgoX3ZhbHVlcyRjdXN0b21lcjkgPSB2YWx1ZXMuY3VzdG9tZXIpID09PSBudWxsIHx8IF92YWx1ZXMkY3VzdG9tZXI5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWVzJGN1c3RvbWVyOS5hZGRyZXNzKQogICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInVzZXJOYW1lIgogICAgfSwgIkdoaSBjaFx4RkEiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1RleHRhcmVhLCB7CiAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgbmFtZTogIm5vdGUiLAogICAgICBpZDogIm5vdGUiLAogICAgICBwbGFjZWhvbGRlcjogImdoaSBjaFx4RkEiLAogICAgICBhdXRvQ29tcGxldGU6ICJub3RlIiwKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICB2YWx1ZTogdmFsdWVzLm5vdGUKICAgIH0pKSwgdmFsdWVzLnN0YXR1cyA9PT0gJ0NBTkNFTCcgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJ1c2VyTmFtZSIKICAgIH0sICJMXHhGRCBkbyBoXHUxRUU3eSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDVGV4dGFyZWEsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAicmVqZWN0IiwKICAgICAgaWQ6ICJyZWplY3QiLAogICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgICAgYXV0b0NvbXBsZXRlOiAibm90ZSIsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5yZWplY3QKICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI0IiwKICAgICAgc206ICI1IiwKICAgICAgY2xhc3NOYW1lOiAibWwtYXV0byIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhYmxlLCB7CiAgICAgIGNsYXNzTmFtZTogInRhYmxlLWNsZWFyIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRib2R5IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICBjbGFzc05hbWU6ICJsZWZ0IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsICJUXHUxRUQ1bmcgc1x1MUVEMSBsXHUwMUIwXHUxRUUzbmciKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgY2xhc3NOYW1lOiAicmlnaHQiCiAgICB9LCBwcm9kdWN0TGlzdC5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgY3VycmVudCkgewogICAgICByZXR1cm4gc3VtICsgTnVtYmVyKGN1cnJlbnQucXVhbnRpdHkpOwogICAgfSwgMCkgfHwgJycpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICBjbGFzc05hbWU6ICJsZWZ0IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsICJUXHUxRUQ1bmcgdGlcdTFFQzFuIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgfSwgcHJvZHVjdExpc3QucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGN1cnJlbnQpIHsKICAgICAgcmV0dXJuIHN1bSArIGN1cnJlbnQucHJpY2VSZWFsICogY3VycmVudC5xdWFudGl0eTsKICAgIH0sIDApLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgc3R5bGU6ICdjdXJyZW5jeScsCiAgICAgIGN1cnJlbmN5OiAnVk5EJwogICAgfSkgfHwgJycpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICBjbGFzc05hbWU6ICJsZWZ0IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsICJDaGlcdTFFQkZ0IGtoXHUxRUE1dSIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICBjbGFzc05hbWU6ICJyaWdodCIKICAgIH0sIHByb2R1Y3RMaXN0LnJlZHVjZShmdW5jdGlvbiAoc3VtLCBjdXJyZW50KSB7CiAgICAgIHJldHVybiBzdW0gKyBjdXJyZW50LnByaWNlUmVhbCAqIGN1cnJlbnQucXVhbnRpdHkgKiBjdXJyZW50LnJlZHVjZVBlcmNlbnQgLyAxMDA7CiAgICB9LCAwKS50b0xvY2FsZVN0cmluZygnaXQtSVQnLCB7CiAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICBjdXJyZW5jeTogJ1ZORCcKICAgIH0pIHx8ICcnKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgY2xhc3NOYW1lOiAibGVmdCIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAiVGlcdTFFQzFuIHRoYW5oIHRvXHhFMW4iKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgY2xhc3NOYW1lOiAicmlnaHQiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgcHJvZHVjdExpc3QucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGN1cnJlbnQpIHsKICAgICAgcmV0dXJuIHN1bSArIChjdXJyZW50LnByaWNlUmVhbCAqIGN1cnJlbnQucXVhbnRpdHkgLSBjdXJyZW50LnByaWNlUmVhbCAqIGN1cnJlbnQucXVhbnRpdHkgKiBjdXJyZW50LnJlZHVjZVBlcmNlbnQgLyAxMDApOwogICAgfSwgMCkudG9Mb2NhbGVTdHJpbmcoJ2l0LUlUJywgewogICAgICBzdHlsZTogJ2N1cnJlbmN5JywKICAgICAgY3VycmVuY3k6ICdWTkQnCiAgICB9KSB8fCAnJykpKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCB7CiAgICAgIGNsYXNzTmFtZTogImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgc2l6ZTogImxnIiwKICAgICAgY2xhc3NOYW1lOiAiYnRuIGJ0bi1zdWNjZXNzIgogICAgfSwgJ0zGsHUgbOG6oWknLCAiICIsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgIG5hbWU6ICJjaWwtc2F2ZSIKICAgIH0pKSkpKSkpKTsKICB9KTsKfTsKCmV4cG9ydCBkZWZhdWx0IEVkaXRPcmRlcjs="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Orders/EditOrder.js"],"names":["React","useCallback","useEffect","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CCollapse","CCardTitle","CLabel","CInput","CRow","CFormGroup","CTextarea","CIcon","Formik","Yup","useDispatch","useSelector","editSelfOrder","getDetailOrder","getOrderDetail","updateOrder","_","useHistory","globalizedOrdersSelectors","Select","currencyMask","MaskedInput","globalizedPromotionSelectors","getDetailProductPromotion","getPromotion","globalizedWarehouseSelectors","getWarehouse","globalizedProductWarehouseSelectors","filterProductInStore","getProductInstore","getProductWarehouseByField","FormFeedback","Table","OrderStatus","confirmAlert","userSafeSelector","removePermission","cities","district","validationSchema","object","shape","customer","required","nullable","promotion","validate","blockInvalidChar","mappingType","SHORTTERM","LONGTERM","selectAllPromotion","selectAll","selectAllWarehouse","selectAllProductInWarehouse","selectById","EditOrder","props","state","order","initialState","promotionState","account","initialValues","orderDetails","code","note","address","status","WAITING","dispatch","history","promotions","productInWarehouses","match","params","id","warehouses","selectedPromotion","setSelectedPromotion","selectedWarehouse","setSelectedWarehouse","productList","setProductList","initValuesState","setInitValuesState","isSelectedWarehouse","setIsSelectedWarehouse","showProductPromotion","setShowProductPromotion","page","size","sort","dependency","isLock","department","JSON","stringify","store","orderId","Array","isArray","productArr","parse","length","product","map","item","then","numberOfQuantityInStore","payload","forEach","element","foundedIndex","findIndex","quantityInStore","quantity","onSubmit","values","selectedCustomer","totalMoney","reduce","sum","current","priceReal","realMoney","reducePercent","reduceMoney","CANCEL","createdBy","login","branch","allow","onSelectPromotion","value","arr","filter","onSelectedProduct","index","copyArr","Number","price","onChangeQuantity","target","onAddProduct","data","quantityAndGift","debouncedSearchProduct","debounce","name","onSearchProduct","Object","keys","debouncedSearchProductInStore","storeId","productId","onSearchProductInstore","console","log","toString","priceTotal","promotionProducts","attachTo","founded","buy","ratio","gift","Math","floor","existExtraProductIndex","extraProduct","followIndex","splice","onChangePrice","replace","onChangeReducePercent","onSelectWarehouse","editAlert","setSubmitting","setErrors","title","message","buttons","label","onClick","onRemoveProduct","updatingSuccess","goBack","errors","touched","handleChange","handleBlur","handleSubmit","setFieldValue","tel","city","type","startTime","endTime","volume","ward","undefined","boxShadow","minWidth","event","document","body","productBrand","unit","Intl","NumberFormat","style","currency","format","ref","toLocaleString","reject"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CCollapse,\n  CCardTitle,\n  CLabel,\n  CInput,\n  CRow,\n  CFormGroup,\n  CTextarea\n} from '@coreui/react/lib';\nimport CIcon from '@coreui/icons-react/lib/CIcon';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { editSelfOrder, getDetailOrder, getOrderDetail, updateOrder } from './order.api';\nimport _ from 'lodash';\nimport { useHistory } from 'react-router-dom';\nimport { globalizedOrdersSelectors } from './order.reducer';\nimport Select from 'react-select';\nimport { currencyMask } from '../../../components/currency-input/currency-input';\nimport MaskedInput from 'react-text-mask';\nimport { globalizedPromotionSelectors } from '../Promotion/promotion.reducer';\nimport { getDetailProductPromotion, getPromotion } from '../Promotion/promotion.api';\nimport { globalizedWarehouseSelectors } from '../../warehouse/Warehouse/warehouse.reducer';\nimport { getWarehouse } from '../../warehouse/Warehouse/warehouse.api';\nimport { globalizedProductWarehouseSelectors } from '../../warehouse/Product/product-warehouse.reducer';\nimport {\n  filterProductInStore,\n  getProductInstore,\n  getProductWarehouseByField\n} from '../../warehouse/Product/product-warehouse.api';\nimport { FormFeedback, Table } from 'reactstrap';\nimport { OrderStatus } from './order-status';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\nimport { userSafeSelector, removePermission } from '../../login/authenticate.reducer.js';\nimport cities from '../../../../shared/utils/city';\nimport district from '../../../../shared/utils/district.json';\nconst validationSchema = function() {\n  return Yup.object().shape({\n    customer: Yup.object()\n      .required('Khách hàng  không để trống')\n      .nullable(),\n    promotion: Yup.object()\n      .required('Chương trình bán hàng không để trống')\n      .nullable()\n  });\n};\n\nimport { validate } from '../../../../shared/utils/normalize';\nimport { blockInvalidChar } from '../../../../shared/utils/helper';\n\nconst mappingType = {\n  SHORTTERM: 'Ngắn hạn',\n  LONGTERM: 'Dài hạn'\n};\nconst { selectAll: selectAllPromotion } = globalizedPromotionSelectors;\nconst { selectAll: selectAllWarehouse } = globalizedWarehouseSelectors;\nconst { selectAll: selectAllProductInWarehouse } = globalizedProductWarehouseSelectors;\nconst { selectById } = globalizedOrdersSelectors;\nconst EditOrder = props => {\n  const { initialState } = useSelector(state => state.order);\n  const { initialState: promotionState } = useSelector(state => state.promotion);\n  const { account } = useSelector(userSafeSelector);\n\n  const initialValues = {\n    customer: null,\n    promotion: null,\n    orderDetails: [],\n    code: '',\n    note: '',\n    address: '',\n    status: OrderStatus.WAITING\n  };\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const promotions = useSelector(selectAllPromotion);\n  const productInWarehouses = useSelector(selectAllProductInWarehouse);\n  const order = useSelector(state => selectById(state, props.match.params.id));\n  const warehouses = useSelector(selectAllWarehouse);\n\n  const [selectedPromotion, setSelectedPromotion] = useState(null);\n  const [selectedWarehouse, setSelectedWarehouse] = useState(null);\n  const [productList, setProductList] = useState([]);\n  const [initValuesState, setInitValuesState] = useState(null);\n  const [isSelectedWarehouse, setIsSelectedWarehouse] = useState(true);\n  const [showProductPromotion, setShowProductPromotion] = useState(false);\n\n  useEffect(() => {\n    dispatch(getPromotion({ page: 0, size: 20, sort: 'createdDate,DESC', dependency: true, isLock: 0 }));\n    dispatch(getDetailOrder({ id: props.match.params.id, dependency: true }));\n    dispatch(getWarehouse({ department: JSON.stringify([account.department?.id || '']), dependency: true }));\n  }, []);\n\n  useEffect(() => {\n    if (order) {\n      setInitValuesState(order);\n      setSelectedPromotion(order.promotion);\n      setSelectedWarehouse(order.store);\n      dispatch(getDetailProductPromotion({ promotion: order.promotion.id }));\n      dispatch(getOrderDetail({ orderId: props.match.params.id, dependency: true }));\n    }\n  }, [order]);\n\n  useEffect(() => {\n    if (Array.isArray(initialState.orderDetails)) {\n      const productArr = JSON.parse(JSON.stringify(initialState.orderDetails));\n\n      if (initialState.orderDetails.length > 0) {\n        setSelectedWarehouse(initialState.orderDetails[0].store);\n        dispatch(\n          getProductWarehouseByField({\n            store: order.store.id,\n            product: JSON.stringify(initialState.orderDetails.map(item => item.product.id)),\n            dependency: true\n          })\n        ).then(numberOfQuantityInStore => {\n          if (numberOfQuantityInStore && Array.isArray(numberOfQuantityInStore.payload) && numberOfQuantityInStore.payload.length > 0) {\n            numberOfQuantityInStore.payload.forEach(element => {\n              const foundedIndex = productArr.findIndex(item => item.product.id === element.product.id);\n              if (foundedIndex !== -1) {\n                productArr[foundedIndex].quantityInStore = element.quantity;\n              }\n            });\n          }\n          setProductList(productArr);\n        });\n      }\n    }\n  }, [initialState.orderDetails]);\n\n  const onSubmit = (values, {}) => () => {\n    values = JSON.parse(JSON.stringify(values));\n    if (!values.address) values.address = selectedCustomer.address;\n    if (selectedPromotion) {\n      values.promotion = selectedPromotion;\n    }\n\n    values.orderDetails = productList;\n    values.totalMoney = values?.orderDetails.reduce((sum, current) => sum + current.priceReal * current.quantity, 0);\n    values.realMoney = values?.orderDetails.reduce(\n      (sum, current) => sum + (current.priceReal * current.quantity - (current.priceReal * current.quantity * current.reducePercent) / 100),\n      0\n    );\n    values.reduceMoney = values?.orderDetails.reduce(\n      (sum, current) => sum + (current.priceReal * current.quantity * current.reducePercent) / 100,\n      0\n    );\n    if (values.status === OrderStatus.CANCEL) {\n      values.status = OrderStatus.WAITING;\n    }\n    if (values.createdBy !== account.login && (!account.branch || !account.branch.allow)) {\n      dispatch(updateOrder(values));\n    } else {\n      dispatch(editSelfOrder(values));\n    }\n  };\n\n  const onSelectPromotion = ({ value }) => {\n    const arr = promotions.filter(customer => customer.id === value);\n    if (arr.length === 1) {\n      setSelectedPromotion(arr[0]);\n    }\n  };\n\n  const onSelectedProduct = ({ value }, index) => {\n    const arr = productInWarehouses.filter(product => product.product.id === value);\n    if (arr.length === 1) {\n      const copyArr = [...productList];\n      copyArr[index].priceReal = Number(arr[0].product.price);\n      copyArr[index].product = arr[0].product;\n      setProductList(copyArr);\n      onChangeQuantity({ target: { value: 1 } }, index);\n    }\n  };\n\n  useEffect(() => {\n    if (selectedPromotion?.id) {\n      dispatch(getDetailProductPromotion({ promotion: selectedPromotion.id, dependency: true }));\n    }\n  }, [selectedPromotion]);\n\n  useEffect(() => {\n    if (selectedWarehouse?.id) {\n      dispatch(\n        filterProductInStore({\n          store: selectedWarehouse?.id,\n          page: 0,\n          size: 20,\n          sort: 'createdDate,DESC',\n          dependency: true\n        })\n      );\n    }\n  }, [selectedWarehouse]);\n\n  const onAddProduct = () => {\n    if (selectedWarehouse?.id) {\n      const data = { product: {}, quantity: 1, quantityAndGift: 0, reducePercent: 0, store: { id: selectedWarehouse.id } };\n      setProductList([...productList, data]);\n    } else {\n      setIsSelectedWarehouse(false);\n    }\n  };\n\n  const debouncedSearchProduct = _.debounce(value => {\n    dispatch(\n      filterProductInStore({\n        store: selectedWarehouse?.id,\n        page: 0,\n        size: 20,\n        sort: 'createdDate,DESC',\n        name: value,\n        dependency: true\n      })\n    );\n  }, 300);\n\n  const onSearchProduct = value => {\n    if(Object.keys(value).length > 0){\n      debouncedSearchProduct(value);\n    }\n  };\n\n  const debouncedSearchProductInStore = _.debounce((copyArr, index) => {\n    dispatch(\n      getProductInstore({\n        storeId: selectedWarehouse.id,\n        productId: copyArr[index].product.id\n      })\n    ).then(numberOfQuantityInStore => {\n      if (numberOfQuantityInStore && Array.isArray(numberOfQuantityInStore.payload) && numberOfQuantityInStore.payload.length > 0) {\n        copyArr[index].quantityInStore = numberOfQuantityInStore?.payload[0]?.quantity || 0;\n        setProductList(copyArr);\n      }\n    });\n  }, 1000);\n\n  const onSearchProductInstore = (copyArr, index) => {\n    if (!copyArr[index].quantityInStore) {\n      debouncedSearchProductInStore(copyArr, index);\n    }\n  };\n\n  const onChangeQuantity = ({ target }, index) => {\n    const copyArr = [...productList];\n    console.log(target.value)\n    copyArr[index].quantity = Number(target.value).toString();\n    copyArr[index].priceTotal = copyArr[index].quantity * copyArr[index].priceReal;\n    if (Array.isArray(promotionState.promotionProducts) && copyArr[index].attachTo === null) {\n      const founded = promotionState.promotionProducts.filter(item => item.product.id === copyArr[index].product.id);\n      if (founded.length > 0) {\n        if (target.value >= founded[0].buy) {\n          const ratio = founded[0].gift / founded[0].buy;\n          const gift = Math.floor(target.value * ratio);\n          const existExtraProductIndex = copyArr.findIndex(item => item.attachTo === index);\n          if (existExtraProductIndex !== -1) {\n            copyArr[existExtraProductIndex].quantity = gift;\n          } else {\n            const extraProduct = {\n              product: copyArr[index].product,\n              quantity: gift,\n              reducePercent: 100,\n              priceReal: Number(copyArr[index].product.price),\n              store: { id: selectedWarehouse.id },\n              followIndex: index\n            };\n            copyArr.splice(index + 1, 0, extraProduct);\n          }\n          copyArr[index].quantityAndGift = Number(gift);\n        }\n      }\n    }\n    if (selectedWarehouse && copyArr[index].product) {\n      setProductList(copyArr);\n      onSearchProductInstore(copyArr, index);\n    }\n    setProductList(copyArr);\n  };\n\n  const onChangePrice = ({ target }, index) => {\n    const copyArr = JSON.parse(JSON.stringify(productList));\n    copyArr[index].priceReal = Number(target.value.replace(/\\D/g, ''));\n    copyArr[index].priceTotal = copyArr[index].quantity * copyArr[index].priceReal;\n    setProductList(copyArr);\n  };\n\n  const onChangeReducePercent = ({ target }, index) => {\n    const copyArr = [...productList];\n    copyArr[index].reducePercent = target.value > 100 ? 100 :  Number(target.value).toString();\n    copyArr[index].priceTotal =\n      copyArr[index].priceReal * copyArr[index].quantity -\n      (copyArr[index].priceReal * copyArr[index].quantity * copyArr[index].reducePercent) / 100;\n\n    setProductList(copyArr);\n  };\n\n  const onSelectWarehouse = ({ value }) => {\n    setSelectedWarehouse(value);\n    setIsSelectedWarehouse(true);\n  };\n\n  const editAlert = (values, { setSubmitting, setErrors }) => {\n    confirmAlert({\n      title: 'Xác nhận',\n      message: 'Bạn có chắc chắn muốn lưu đơn hàng này?',\n      buttons: [\n        {\n          label: 'Đồng ý',\n          onClick: onSubmit(values, { setSubmitting, setErrors })\n        },\n        {\n          label: 'Hủy'\n        }\n      ]\n    });\n  };\n\n  const onRemoveProduct = index => {\n    const copyArr = [...productList];\n    copyArr.splice(index, 1);\n    setProductList(copyArr);\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      dispatch(removePermission());\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  return (\n    <Formik initialValues={initValuesState || initialValues} enableReinitialize validate={validate(validationSchema)} onSubmit={editAlert}>\n      {({\n        values,\n        errors,\n        touched,\n\n        handleChange,\n        handleBlur,\n        handleSubmit,\n        setFieldValue\n      }) => {\n        return (\n          <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n            <CCard className=\"card-accent-primary\">\n              <CCardHeader>\n                <CCardTitle>Thông tin khách hàng</CCardTitle>\n              </CCardHeader>\n\n              <CCardBody>\n                <CRow>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Mã khách hàng:</dt>\n                      <dd className=\"col-sm-9\">{values.customer?.code}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Họ tên:</dt>\n                      <dd className=\"col-sm-9\">{values.customer?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Số điện thoại:</dt>\n                      <dd className=\"col-sm-9\">{values.customer?.tel}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Chi nhánh:</dt>\n                      <dd className=\"col-sm-9\">{values.customer?.department?.name}</dd>\n                    </dl>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Địa chỉ:</dt>\n                      <dd className=\"col-sm-9\">{values.customer?.address}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Thành phố:</dt>\n                      <dd className=\"col-sm-9\">{cities.filter(city => city.value === values.customer?.city)[0]?.label || ''}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Quận huyện:</dt>\n                      <dd className=\"col-sm-9\">{district.filter(city => city.value === values.customer?.district)[0]?.label || ''}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Loại khách hàng: </dt>\n                      <dd className=\"col-sm-9\">{values.customer?.type?.name}</dd>\n                    </dl>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n            <CCard className=\"card-accent-info\">\n              <CCardHeader>\n                <CCardTitle>Chương trình khuyến mại</CCardTitle>\n              </CCardHeader>\n              <CCardBody>\n                <CFormGroup>\n                  <CRow className=\"mb-3\">\n                    <CCol sm={4}>\n                      <CLabel htmlFor=\"lastName\">Chọn chương trình bán hàng</CLabel>\n                      <Select\n                        onChange={item => {\n                          setFieldValue('promotion', { id: item.value, name: item.label });\n                          onSelectPromotion(item);\n                        }}\n                        value={{\n                          value: values.promotion?.id,\n                          label: values.promotion?.name\n                        }}\n                        name=\"promotion\"\n                        options={promotions.map(item => ({\n                          value: item.id,\n                          label: `${item.name}`\n                        }))}\n                      />\n                    </CCol>\n                  </CRow>\n                  <FormFeedback className=\"d-block\">{errors.promotion}</FormFeedback>\n                </CFormGroup>\n                <CRow>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Tên chương trình:</dt>\n                      <dd className=\"col-sm-9\">{selectedPromotion?.name}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Ngày bắt đầu:</dt>\n                      <dd className=\"col-sm-9\">{selectedPromotion?.startTime}</dd>\n                    </dl>\n                  </CCol>\n                  <CCol lg=\"6\">\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Ngày kết thúc:</dt>\n                      <dd className=\"col-sm-9\">{selectedPromotion?.endTime}</dd>\n                    </dl>\n                    <dl className=\"row\">\n                      <dt className=\"col-sm-3\">Loại chương trình:</dt>\n                      <dd className=\"col-sm-9\">{mappingType[selectedPromotion?.type]}</dd>\n                    </dl>\n                  </CCol>\n                </CRow>\n                <CButton\n                  color=\"primary\"\n                  variant=\"outline\"\n                  shape=\"square\"\n                  size=\"sm\"\n                  onClick={() => {\n                    setShowProductPromotion(!showProductPromotion);\n                  }}\n                >\n                  <CIcon name=\"cilZoom\" /> Xem sản phẩm áp dụng\n                </CButton>\n                <CCollapse show={showProductPromotion}>\n                  <CCardBody>\n                    <h5>Thông tin sản phẩm khuyến mại</h5>\n                    <CRow>\n                      <CCol lg=\"6\">\n                        {Array.isArray(promotionState.promotionProducts) &&\n                          promotionState.promotionProducts.map((item, index) => (\n                            <dl className=\"row\" key={index}>\n                              <dt className=\"col-sm-6\">{`${item.product.name} ${item.product.volume}ml`}</dt>\n                              <dd className=\"col-sm-8\">{`Mua ${item.buy} Tặng ${item.gift}`}</dd>\n                            </dl>\n                          ))}\n                      </CCol>\n                    </CRow>\n                  </CCardBody>\n                </CCollapse>\n              </CCardBody>\n            </CCard>\n            {productList.length === 0 && (\n              <CCard className=\"card-accent-info\">\n                <CCardHeader>\n                  <CCardTitle>Kho hàng</CCardTitle>\n                </CCardHeader>\n                <CCardBody>\n                  <CRow className=\"mb-3\">\n                    <CCol sm={4}>\n                      <CLabel htmlFor=\"lastName\">Chọn Kho</CLabel>\n                      <Select\n                        onChange={item => {\n                          setFieldValue('store', item.value);\n                          onSelectWarehouse(item);\n                        }}\n                        value={{\n                          value: values.store,\n                          label: values.store?.name\n                        }}\n                        options={warehouses.map(item => ({\n                          value: item,\n                          label: `${item.name}`\n                        }))}\n                      />\n                      {!isSelectedWarehouse && <FormFeedback className=\"d-block\">Bạn phải chọn kho hàng</FormFeedback>}\n                    </CCol>\n                  </CRow>\n                  <CRow>\n                    <CCol lg=\"6\">\n                      <dl className=\"row\">\n                        <dt className=\"col-sm-3\">Tên kho:</dt>\n                        <dd className=\"col-sm-9\">{selectedWarehouse?.name}</dd>\n                      </dl>\n                      <dl className=\"row\">\n                        <dt className=\"col-sm-3\">Số điện thoại:</dt>\n                        <dd className=\"col-sm-9\">{selectedWarehouse?.tel}</dd>\n                      </dl>\n                      <dl className=\"row\">\n                        <dt className=\"col-sm-3\">Địa chỉ:</dt>\n                        <dd className=\"col-sm-9\">{selectedWarehouse?.address}</dd>\n                      </dl>\n                    </CCol>\n                    <CCol lg=\"6\">\n                      <dl className=\"row\">\n                        <dt className=\"col-sm-3\">Thành phố:</dt>\n                        <dd className=\"col-sm-9\">{selectedWarehouse?.city?.name}</dd>\n                      </dl>\n                      <dl className=\"row\">\n                        <dt className=\"col-sm-3\">Quận huyện:</dt>\n                        <dd className=\"col-sm-9\">{selectedWarehouse?.district?.name}</dd>\n                      </dl>\n                      <dl className=\"row\">\n                        <dt className=\"col-sm-3\">Xã phường:</dt>\n                        <dd className=\"col-sm-9\">{selectedWarehouse?.ward?.name}</dd>\n                      </dl>\n                    </CCol>\n                  </CRow>\n                </CCardBody>\n              </CCard>\n            )}\n\n            <CButton color=\"primary\" variant=\"outline\" shape=\"square\" size=\"sm\" className=\"ml-3 mb-3\" onClick={onAddProduct}>\n              <CIcon name={'cilArrowCircleRight'} className=\"mr-2\" />\n              Thêm sản phẩm\n            </CButton>\n            <CCard>\n              <CCardBody>\n                <Table responsive striped>\n                  <thead>\n                    <tr>\n                      <th>Sản phẩm</th>\n                      <th>Đơn vị</th>\n                      <th>Dung tích</th>\n                      <th>Số lượng</th>\n                      <th>Đơn giá</th>\n                      <th>Thành tiền</th>\n                      <th>Chiết khấu</th>\n                      <th>Thanh toán</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {productList.map((item, index) => {\n                      return (\n                        <tr\n                          key={index}\n                          style={\n                            item.quantityInStore !== undefined &&\n                            Number(item.quantity) + (Number(item.quantityAndGift) || 0) > item.quantityInStore\n                              ? {\n                                  boxShadow: '0px 0px 6px 5px red'\n                                }\n                              : {}\n                          }\n                        >\n                          <td style={{ minWidth: 300 }}>\n                            <Select\n                              value={{\n                                value: item.product?.id,\n                                label: item.product?.name\n                              }}\n                              onInputChange={onSearchProduct}\n                              onChange={event => onSelectedProduct(event, index)}\n                              menuPortalTarget={document.body}\n                              options={productInWarehouses.map(item => ({\n                                value: item.product.id,\n                                label: `${item.product.productBrand?.code}-${item.product.name}-${item.product.volume}`\n                              }))}\n                            />\n                          </td>\n                          <td>{item.product?.unit}</td>\n                          <td>{item.product?.volume}</td>\n                          <td style={{ minWidth: 100 }}>\n                            <CInput\n                              type=\"number\"\n                              min={1}\n                              name=\"code\"\n                              id=\"code\"\n                              onKeyDown={blockInvalidChar}\n                              onChange={event => onChangeQuantity(event, index)}\n                              onBlur={handleBlur}\n                              value={item.quantity}\n                            />\n                            {item.quantityInStore !== undefined &&\n                              Number(item.quantity) + (Number(item.quantityAndGift) || 0) > item.quantityInStore && (\n                                <FormFeedback className=\"d-block\">Số lượng sản phẩm và quà tặng lớn hơn số lượng trong kho</FormFeedback>\n                              )}\n                          </td>\n                          <td style={{ minWidth: 250 }}>\n                            {\n                              <MaskedInput\n                                mask={currencyMask}\n                                onChange={event => onChangePrice(event, index)}\n                                value={\n                                  typeof productList[index].priceReal !== 'number'\n                                    ? new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(\n                                        productList[index].priceReal\n                                      )\n                                    : productList[index].priceReal\n                                }\n                                render={(ref, props) => <CInput innerRef={ref} {...props} />}\n                              />\n                            }\n                          </td>\n                          <td>\n                            {(item.priceReal * item.quantity).toLocaleString('it-IT', {\n                              style: 'currency',\n                              currency: 'VND'\n                            }) || ''}\n                          </td>\n\n                          <td style={{ minWidth: 100 }}>\n                            <CInput\n                              type=\"number\"\n                              min={0}\n                              max={100}\n                              onKeyDown={blockInvalidChar}\n                              onChange={event => onChangeReducePercent(event, index)}\n                              onBlur={handleBlur}\n                              value={item.reducePercent}\n                            />\n                          </td>\n                          <td>\n                            {(item.priceReal * item.quantity - (item.priceReal * item.quantity * item.reducePercent) / 100).toLocaleString(\n                              'it-IT',\n                              {\n                                style: 'currency',\n                                currency: 'VND'\n                              }\n                            ) || ''}\n                          </td>\n                          <td style={{ minWidth: 100 }}>\n                            <CButton\n                              color=\"danger\"\n                              variant=\"outline\"\n                              shape=\"square\"\n                              size=\"sm\"\n                              className=\"mr-3\"\n                              onClick={() => onRemoveProduct(index)}\n                            >\n                              <CIcon name=\"cilXCircle\" />\n                            </CButton>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </Table>\n              </CCardBody>\n            </CCard>\n            <CCard>\n              <CCardHeader>\n                <CCardTitle>Thông tin khác</CCardTitle>\n              </CCardHeader>\n              <CCardBody>\n                <CRow>\n                  <CCol lg=\"4\" sm=\"5\">\n                    <CFormGroup>\n                      <CLabel htmlFor=\"userName\">Địa chỉ</CLabel>\n                      <CTextarea\n                        type=\"text\"\n                        name=\"address\"\n                        id=\"address\"\n                        placeholder=\"Địa chỉ\"\n                        autoComplete=\"address\"\n                        valid={errors.address || null}\n                        invalid={touched.address && !!errors.address}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.address || values.customer?.address}\n                      />\n                    </CFormGroup>\n                    <CFormGroup>\n                      <CLabel htmlFor=\"userName\">Ghi chú</CLabel>\n                      <CTextarea\n                        type=\"text\"\n                        name=\"note\"\n                        id=\"note\"\n                        placeholder=\"ghi chú\"\n                        autoComplete=\"note\"\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                        value={values.note}\n                      />\n                    </CFormGroup>\n                    {values.status === 'CANCEL' && (\n                      <CFormGroup>\n                        <CLabel htmlFor=\"userName\">Lý do hủy</CLabel>\n                        <CTextarea\n                          type=\"text\"\n                          name=\"reject\"\n                          id=\"reject\"\n                          disabled\n                          autoComplete=\"note\"\n                          onChange={handleChange}\n                          onBlur={handleBlur}\n                          value={values.reject}\n                        />\n                      </CFormGroup>\n                    )}\n                  </CCol>\n                  <CCol lg=\"4\" sm=\"5\" className=\"ml-auto\">\n                    <Table className=\"table-clear\">\n                      <tbody>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Tổng số lượng</strong>\n                          </td>\n                          <td className=\"right\">{productList.reduce((sum, current) => sum + Number(current.quantity), 0) || ''}</td>\n                        </tr>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Tổng tiền</strong>\n                          </td>\n                          <td className=\"right\">\n                            {productList\n                              .reduce((sum, current) => sum + current.priceReal * current.quantity, 0)\n                              .toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                          </td>\n                        </tr>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Chiết khấu</strong>\n                          </td>\n                          <td className=\"right\">\n                            {productList\n                              .reduce((sum, current) => sum + (current.priceReal * current.quantity * current.reducePercent) / 100, 0)\n                              .toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                          </td>\n                        </tr>\n                        <tr>\n                          <td className=\"left\">\n                            <strong>Tiền thanh toán</strong>\n                          </td>\n                          <td className=\"right\">\n                            <strong>\n                              {productList\n                                .reduce(\n                                  (sum, current) =>\n                                    sum +\n                                    (current.priceReal * current.quantity -\n                                      (current.priceReal * current.quantity * current.reducePercent) / 100),\n                                  0\n                                )\n                                .toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                            </strong>\n                          </td>\n                        </tr>\n                      </tbody>\n                    </Table>\n                    <CFormGroup className=\"d-flex justify-content-center\">\n                      <CButton type=\"submit\" size=\"lg\" className=\"btn btn-success\">\n                        {'Lưu lại'} <CIcon name=\"cil-save\" />\n                      </CButton>\n                    </CFormGroup>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n          </CForm>\n        );\n      }}\n    </Formik>\n  );\n};\n\nexport default EditOrder;\n"]}]}