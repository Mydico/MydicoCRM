{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Orders/Order.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Orders/Order.js","mtime":1626204875552},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgppbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgQ0NhcmRCb2R5LCBDQmFkZ2UsIENCdXR0b24sIENDb2xsYXBzZSwgQ0RhdGFUYWJsZSwgQ0NhcmQsIENDYXJkSGVhZGVyLCBDUm93LCBDQ29sLCBDUGFnaW5hdGlvbiB9IGZyb20gJ0Bjb3JldWkvcmVhY3QvbGliJzsKaW1wb3J0IENJY29uIGZyb20gJ0Bjb3JldWkvaWNvbnMtcmVhY3QvbGliL0NJY29uJzsKaW1wb3J0IHsgdXNlRGlzcGF0Y2gsIHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnOwppbXBvcnQgeyBlZGl0U2VsZk9yZGVyLCBnZXRPcmRlciwgdXBkYXRlU3RhdHVzT3JkZXIgfSBmcm9tICcuL29yZGVyLmFwaSc7CmltcG9ydCB7IGdsb2JhbGl6ZWRPcmRlcnNTZWxlY3RvcnMsIHJlc2V0IH0gZnJvbSAnLi9vcmRlci5yZWR1Y2VyJzsKaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgeyBUYWJsZSB9IGZyb20gJ3JlYWN0c3RyYXAnOwppbXBvcnQgeyBPcmRlclN0YXR1cyB9IGZyb20gJy4vb3JkZXItc3RhdHVzJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgeyBjb25maXJtQWxlcnQgfSBmcm9tICdyZWFjdC1jb25maXJtLWFsZXJ0JzsgLy8gSW1wb3J0CgppbXBvcnQgJ3JlYWN0LWNvbmZpcm0tYWxlcnQvc3JjL3JlYWN0LWNvbmZpcm0tYWxlcnQuY3NzJzsgLy8gSW1wb3J0IGNzcwoKaW1wb3J0IHsgdXNlclNhZmVTZWxlY3RvciwgYWRkUGVybWlzc2lvbiB9IGZyb20gJy4uLy4uL2xvZ2luL2F1dGhlbnRpY2F0ZS5yZWR1Y2VyLmpzJzsKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgQ0Zvcm1Hcm91cCwgQ0lucHV0LCBDTGFiZWwsIENUZXh0YXJlYSB9IGZyb20gJ0Bjb3JldWkvcmVhY3QnOwppbXBvcnQgU2VsZWN0IGZyb20gJ3JlYWN0LXNlbGVjdCc7CmltcG9ydCBjaXRpZXMgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL3V0aWxzL2NpdHknOwppbXBvcnQgZGlzdHJpY3QgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL3V0aWxzL2Rpc3RyaWN0Lmpzb24nOwp2YXIgbWFwcGluZ1N0YXR1cyA9IHsKICBXQUlUSU5HOiAnQ0jhu5wgRFVZ4buGVCcsCiAgQVBQUk9WRUQ6ICfEkMODIERVWeG7hlQnLAogIENSRUFURV9DT0Q6ICfEkMODIFThuqBPIFbhuqxOIMSQxqBOJywKICBDQU5DRUw6ICfEkMODIEjhu6ZZJywKICBDT0RfQVBQUk9WRUQ6ICfEkMODIERVWeG7hlQgVuG6rE4gxJDGoE4nLAogIFJFSkVDVEVEOiAnVOG7qiBDSOG7kEkgVuG6rE4gxJDGoE4nLAogIFNVUFBMWV9XQUlUSU5HOiAnxJDhu6JJIFhV4bqkVCBLSE8nLAogIFNISVBQSU5HOiAnxJBBTkcgVuG6rE4gQ0hVWeG7gk4nLAogIFNVQ0NFU1M6ICdHSUFPIFRIw4BOSCBDw5RORycsCiAgQ09EX0NBTkNFTDogJ0jhu6ZZIFbhuqxOIMSQxqBOJwp9Owp2YXIgc3RhdHVzTGlzdCA9IFt7CiAgdmFsdWU6ICdXQUlUSU5HJywKICBsYWJlbDogJ0NI4bucIERVWeG7hlQnCn0sIHsKICB2YWx1ZTogJ0FQUFJPVkVEJywKICBsYWJlbDogJ8SQw4MgRFVZ4buGVCcKfSwgewogIHZhbHVlOiAnQ1JFQVRFX0NPRCcsCiAgbGFiZWw6ICfEkMODIFThuqBPIFbhuqxOIMSQxqBOJwp9LCB7CiAgdmFsdWU6ICdDQU5DRUwnLAogIGxhYmVsOiAnxJDDgyBI4bumWScKfSwgewogIHZhbHVlOiAnQ09EX0FQUFJPVkVEJywKICBsYWJlbDogJ8SQw4MgRFVZ4buGVCBW4bqsTiDEkMagTicKfSwgewogIHZhbHVlOiAnUkVKRUNURUQnLAogIGxhYmVsOiAnVOG7qiBDSOG7kEkgVuG6rE4gxJDGoE4nCn0sIHsKICB2YWx1ZTogJ1NVUFBMWV9XQUlUSU5HJywKICBsYWJlbDogJ8SQ4buiSSBYVeG6pFQgS0hPJwp9LCB7CiAgdmFsdWU6ICdTSElQUElORycsCiAgbGFiZWw6ICfEkEFORyBW4bqsTiBDSFVZ4buCTicKfSwgewogIHZhbHVlOiAnU1VDQ0VTUycsCiAgbGFiZWw6ICdHSUFPIFRIw4BOSCBDw5RORycKfSwgewogIHZhbHVlOiAnQ09EX0NBTkNFTCcsCiAgbGFiZWw6ICdI4bumWSBW4bqsTiDEkMagTicKfV07CnZhciBzZWxlY3RBbGwgPSBnbG9iYWxpemVkT3JkZXJzU2VsZWN0b3JzLnNlbGVjdEFsbDsgLy8gQ29kZQlUw6puIGPhu61hIGjDoG5nL8SR4bqhaSBsw70JTmfGsOG7nWkgbGnDqm4gbOG6oWMJTsSDbSBTaW5oCcSQaeG7h24gdGhv4bqhaQlOaMOibiB2acOqbiBxdeG6o24gbMO9CcSRxqFuIGjDoG5nZwlQaMOibiBsb+G6oWkJU+G7rWEJVOG6oW8gxJHGoW4KCnZhciBmaWVsZHMgPSBbewogIGtleTogJ29yZGVyJywKICBsYWJlbDogJ1NUVCcsCiAgX3N0eWxlOiB7CiAgICB3aWR0aDogJzElJwogIH0sCiAgZmlsdGVyOiBmYWxzZQp9LCB7CiAga2V5OiAnc2hvd19kZXRhaWxzJywKICBsYWJlbDogJ1hlbSBjaGkgdGnhur90JywKICBfc3R5bGU6IHsKICAgIHdpZHRoOiAnMSUnCiAgfSwKICBmaWx0ZXI6IGZhbHNlCn0sIHsKICBrZXk6ICdjb2RlJywKICBsYWJlbDogJ03DoyDEkcahbiBow6BuZycsCiAgX3N0eWxlOiB7CiAgICB3aWR0aDogJzEwJScKICB9Cn0sIHsKICBrZXk6ICdjdXN0b21lck5hbWUnLAogIGxhYmVsOiAnVMOqbiBraMOhY2ggaMOgbmcvxJHhuqFpIGzDvScsCiAgX3N0eWxlOiB7CiAgICB3aWR0aDogJzE1JScKICB9Cn0sIHsKICBrZXk6ICdjcmVhdGVkQnknLAogIGxhYmVsOiAnTmfGsOG7nWkgdOG6oW8nLAogIF9zdHlsZTogewogICAgd2lkdGg6ICcxMCUnCiAgfQp9LCB7CiAga2V5OiAncXVhbnRpdHknLAogIGxhYmVsOiAnVOG7lW5nIHPhuqNuIHBo4bqpbScsCiAgX3N0eWxlOiB7CiAgICB3aWR0aDogJzEwJScKICB9LAogIGZpbHRlcjogZmFsc2UKfSwgewogIGtleTogJ3RvdGFsJywKICBsYWJlbDogJ1Rp4buBbiB0aGFuaCB0b8OhbicsCiAgX3N0eWxlOiB7CiAgICB3aWR0aDogJzEwJScKICB9LAogIGZpbHRlcjogZmFsc2UKfSwgewogIGtleTogJ2NyZWF0ZWREYXRlJywKICBsYWJlbDogJ05nw6B5IHThuqFvJywKICBfc3R5bGU6IHsKICAgIHdpZHRoOiAnMTAlJwogIH0sCiAgZmlsdGVyOiBmYWxzZQp9LCB7CiAga2V5OiAnc3RhdHVzJywKICBsYWJlbDogJ1Ry4bqhbmcgdGjDoWknLAogIF9zdHlsZTogewogICAgd2lkdGg6ICcxMCUnCiAgfSwKICBmaWx0ZXI6IGZhbHNlCn0sIHsKICBrZXk6ICdhY3Rpb24nLAogIGxhYmVsOiAnJywKICBfc3R5bGU6IHsKICAgIHdpZHRoOiAnMzAlJwogIH0sCiAgZmlsdGVyOiBmYWxzZQp9XTsKCnZhciBnZXRCYWRnZSA9IGZ1bmN0aW9uIGdldEJhZGdlKHN0YXR1cykgewogIHN3aXRjaCAoc3RhdHVzKSB7CiAgICBjYXNlICdBUFBST1ZFRCc6CiAgICAgIHJldHVybiAnc3VjY2Vzcyc7CgogICAgY2FzZSAnQ1JFQVRFX0NPRCc6CiAgICAgIHJldHVybiAnaW5mbyc7CgogICAgY2FzZSAnV0FJVElORyc6CiAgICAgIHJldHVybiAnd2FybmluZyc7CgogICAgY2FzZSAnQ0FOQ0VMJzoKICAgICAgcmV0dXJuICdkYW5nZXInOwoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiAncHJpbWFyeSc7CiAgfQp9OwoKdmFyIE9yZGVyID0gZnVuY3Rpb24gT3JkZXIocHJvcHMpIHsKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoW10pLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgX2RldGFpbHMgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXREZXRhaWxzID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VTZWxlY3RvciA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLm9yZGVyOwogIH0pLAogICAgICBpbml0aWFsU3RhdGUgPSBfdXNlU2VsZWN0b3IuaW5pdGlhbFN0YXRlOwoKICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKDEpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGFjdGl2ZVBhZ2UgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRBY3RpdmVQYWdlID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTUgPSB1c2VTdGF0ZSg1MCksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgc2l6ZSA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFNpemUgPSBfdXNlU3RhdGU2WzFdOwoKICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpOwogIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpOwogIHZhciByZWplY3RSZWYgPSB1c2VSZWYoJycpOwogIHZhciBwYXJhbVJlZiA9IHVzZVJlZihudWxsKTsKCiAgdmFyIF91c2VTZWxlY3RvcjIgPSB1c2VTZWxlY3Rvcih1c2VyU2FmZVNlbGVjdG9yKSwKICAgICAgYWNjb3VudCA9IF91c2VTZWxlY3RvcjIuYWNjb3VudDsKCiAgdmFyIGlzQWRtaW4gPSBhY2NvdW50LmF1dGhvcml0aWVzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0gPT09ICdST0xFX0FETUlOJzsKICB9KS5sZW5ndGggPiAwOwogIHZhciBvcmRlcnMgPSB1c2VTZWxlY3RvcihzZWxlY3RBbGwpOwoKICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gUmVhY3QudXNlU3RhdGUoewogICAgc3RhcnREYXRlOiBudWxsLAogICAgZW5kRGF0ZTogbnVsbAogIH0pLAogICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSwKICAgICAgZGF0ZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sCiAgICAgIHNldERhdGUgPSBfUmVhY3QkdXNlU3RhdGUyWzFdOwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGRhdGUuZW5kRGF0ZSAmJiBkYXRlLnN0YXJ0RGF0ZSkgewogICAgICB2YXIgcGFyYW1zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICBwYWdlOiBhY3RpdmVQYWdlIC0gMSwKICAgICAgICBzaXplOiBzaXplLAogICAgICAgIHNvcnQ6ICdjcmVhdGVkRGF0ZSxERVNDJwogICAgICB9LCBwYXJhbVJlZi5jdXJyZW50KSwgZGF0ZSk7CgogICAgICBkaXNwYXRjaChnZXRPcmRlcihwYXJhbXMpKTsKICAgIH0KICB9LCBbZGF0ZV0pOwogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBkaXNwYXRjaChyZXNldCgpKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdvcmRlcicsIEpTT04uc3RyaW5naWZ5KHt9KSk7CiAgfSwgW10pOwogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICB2YXIgbG9jYWxQYXJhbXMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFyYW1zJyk7CgogICAgdmFyIHBhcmFtcyA9IF9vYmplY3RTcHJlYWQoewogICAgICBwYWdlOiBhY3RpdmVQYWdlIC0gMSwKICAgICAgc2l6ZTogc2l6ZSwKICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLERFU0MnCiAgICB9LCBwYXJhbVJlZi5jdXJyZW50KTsKCiAgICBpZiAobG9jYWxQYXJhbXMpIHsKICAgICAgcGFyYW1zID0gSlNPTi5wYXJzZShsb2NhbFBhcmFtcyk7CiAgICAgIHNldEFjdGl2ZVBhZ2UocGFyYW1zLnBhZ2UgKyAxKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BhcmFtcycpOwogICAgfQoKICAgIGRpc3BhdGNoKGdldE9yZGVyKHBhcmFtcykpOwogIH0sIFthY3RpdmVQYWdlLCBzaXplXSk7CgogIHZhciBjb21wdXRlZEl0ZW1zID0gZnVuY3Rpb24gY29tcHV0ZWRJdGVtcyhpdGVtcykgewogICAgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICB2YXIgX2l0ZW0kY3VzdG9tZXIsIF9pdGVtJG9yZGVyRGV0YWlscywgX051bWJlcjsKCiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICAgIGN1c3RvbWVyTmFtZTogKF9pdGVtJGN1c3RvbWVyID0gaXRlbS5jdXN0b21lcikgPT09IG51bGwgfHwgX2l0ZW0kY3VzdG9tZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGN1c3RvbWVyLm5hbWUsCiAgICAgICAgY3JlYXRlZEJ5OiBpdGVtLmNyZWF0ZWRCeSB8fCAnJywKICAgICAgICBxdWFudGl0eTogKF9pdGVtJG9yZGVyRGV0YWlscyA9IGl0ZW0ub3JkZXJEZXRhaWxzKSA9PT0gbnVsbCB8fCBfaXRlbSRvcmRlckRldGFpbHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJG9yZGVyRGV0YWlscy5yZWR1Y2UoZnVuY3Rpb24gKHN1bSwgcHJldikgewogICAgICAgICAgcmV0dXJuIHN1bSArIHByZXYucXVhbnRpdHk7CiAgICAgICAgfSwgMCksCiAgICAgICAgY3JlYXRlZERhdGU6IG1vbWVudChpdGVtLmNyZWF0ZWREYXRlKS5mb3JtYXQoJ0RELU1NLVlZWVknKSwKICAgICAgICB0b3RhbDogKChfTnVtYmVyID0gTnVtYmVyKGl0ZW0ucmVhbE1vbmV5KSkgPT09IG51bGwgfHwgX051bWJlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX051bWJlci50b0xvY2FsZVN0cmluZygnaXQtSVQnLCB7CiAgICAgICAgICBzdHlsZTogJ2N1cnJlbmN5JywKICAgICAgICAgIGN1cnJlbmN5OiAnVk5EJwogICAgICAgIH0pKSB8fCAnJwogICAgICB9KTsKICAgIH0pOwogIH07CgogIHZhciB0b2dnbGVEZXRhaWxzID0gZnVuY3Rpb24gdG9nZ2xlRGV0YWlscyhpbmRleCkgewogICAgdmFyIHBvc2l0aW9uID0gX2RldGFpbHMuaW5kZXhPZihpbmRleCk7CgogICAgdmFyIG5ld0RldGFpbHMgPSBfZGV0YWlscy5zbGljZSgpOwoKICAgIGlmIChwb3NpdGlvbiAhPT0gLTEpIHsKICAgICAgbmV3RGV0YWlscy5zcGxpY2UocG9zaXRpb24sIDEpOwogICAgfSBlbHNlIHsKICAgICAgbmV3RGV0YWlscyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoX2RldGFpbHMpLCBbaW5kZXhdKTsKICAgIH0KCiAgICBzZXREZXRhaWxzKG5ld0RldGFpbHMpOwogIH07CgogIHZhciBjc3ZDb250ZW50ID0gb3JkZXJzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoaXRlbSkuam9pbignLCcpOwogIH0pLmpvaW4oJ1xuJyk7CiAgdmFyIGNzdkNvZGUgPSAnZGF0YTp0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04LFNFUD0sJTBBJyArIGVuY29kZVVSSUNvbXBvbmVudChjc3ZDb250ZW50KTsKCiAgdmFyIHRvQ3JlYXRlT3JkZXIgPSBmdW5jdGlvbiB0b0NyZWF0ZU9yZGVyKCkgewogICAgdmFyIHBhcmFtcyA9IF9vYmplY3RTcHJlYWQoewogICAgICBwYWdlOiBhY3RpdmVQYWdlIC0gMSwKICAgICAgc2l6ZTogc2l6ZSwKICAgICAgc29ydDogJ2NyZWF0ZWREYXRlLERFU0MnCiAgICB9LCBwYXJhbVJlZi5jdXJyZW50KTsKCiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGFyYW1zJywgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7CiAgICBoaXN0b3J5LnB1c2goIiIuY29uY2F0KHByb3BzLm1hdGNoLnVybCwgIi9uZXciKSk7CiAgfTsKCiAgdmFyIGRlYm91bmNlZFNlYXJjaENvbHVtbiA9IF8uZGVib3VuY2UoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA+IDApIHsKICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmICghdmFsdWVba2V5XSkgZGVsZXRlIHZhbHVlW2tleV07CiAgICAgIH0pOwogICAgICBwYXJhbVJlZi5jdXJyZW50ID0gdmFsdWU7CiAgICAgIGRpc3BhdGNoKGdldE9yZGVyKF9vYmplY3RTcHJlYWQoewogICAgICAgIHBhZ2U6IDAsCiAgICAgICAgc2l6ZTogc2l6ZSwKICAgICAgICBzb3J0OiAnY3JlYXRlZERhdGUsREVTQycKICAgICAgfSwgdmFsdWUpKSk7CiAgICB9CiAgfSwgMzAwKTsKCiAgdmFyIG9uRmlsdGVyQ29sdW1uID0gZnVuY3Rpb24gb25GaWx0ZXJDb2x1bW4odmFsdWUpIHsKICAgIGRlYm91bmNlZFNlYXJjaENvbHVtbih2YWx1ZSk7CiAgfTsKCiAgdmFyIHRvRWRpdE9yZGVyID0gZnVuY3Rpb24gdG9FZGl0T3JkZXIodHlwZUlkKSB7CiAgICB2YXIgcGFyYW1zID0gX29iamVjdFNwcmVhZCh7CiAgICAgIHBhZ2U6IGFjdGl2ZVBhZ2UgLSAxLAogICAgICBzaXplOiBzaXplLAogICAgICBzb3J0OiAnY3JlYXRlZERhdGUsREVTQycKICAgIH0sIHBhcmFtUmVmLmN1cnJlbnQpOwoKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYXJhbXMnLCBKU09OLnN0cmluZ2lmeShwYXJhbXMpKTsKICAgIGhpc3RvcnkucHVzaCgiIi5jb25jYXQocHJvcHMubWF0Y2gudXJsLCAiLyIpLmNvbmNhdCh0eXBlSWQsICIvZWRpdCIpKTsKICB9OwoKICB2YXIgdG9TZWVCaWxsID0gZnVuY3Rpb24gdG9TZWVCaWxsKGl0ZW0pIHsKICAgIGhpc3RvcnkucHVzaCh7CiAgICAgIHBhdGhuYW1lOiAiIi5jb25jYXQocHJvcHMubWF0Y2gudXJsLCAiL3ByaW50IiksCiAgICAgIHN0YXRlOiB7CiAgICAgICAgaXRlbTogaXRlbQogICAgICB9CiAgICB9KTsKICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGluaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3MpIHsKICAgICAgZGlzcGF0Y2goZ2V0T3JkZXIoKSk7CiAgICAgIGRpc3BhdGNoKHJlc2V0KCkpOwogICAgfQogIH0sIFtpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzXSk7CgogIHZhciBhcHByb3ZlT3JkZXIgPSBmdW5jdGlvbiBhcHByb3ZlT3JkZXIob3JkZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBuZXdPcmRlciA9IHsKICAgICAgICBpZDogb3JkZXIuaWQsCiAgICAgICAgc3RhdHVzOiBPcmRlclN0YXR1cy5BUFBST1ZFRCwKICAgICAgICBhY3Rpb246ICdhcHByb3ZlJywKICAgICAgICBjdXN0b21lcjogb3JkZXIuY3VzdG9tZXIKICAgICAgfTsKICAgICAgZGlzcGF0Y2godXBkYXRlU3RhdHVzT3JkZXIobmV3T3JkZXIpKTsKICAgIH07CiAgfTsKCiAgdmFyIGNhbmNlbE9yZGVyID0gZnVuY3Rpb24gY2FuY2VsT3JkZXIob3JkZXIpIHsKICAgIHZhciBuZXdPcmRlciA9IHsKICAgICAgaWQ6IG9yZGVyLmlkLAogICAgICBzdGF0dXM6IE9yZGVyU3RhdHVzLkNBTkNFTCwKICAgICAgYWN0aW9uOiAnY2FuY2VsJywKICAgICAgY3VzdG9tZXI6IG9yZGVyLmN1c3RvbWVyLAogICAgICBjcmVhdGVkQnk6IG9yZGVyLmNyZWF0ZWRCeSwKICAgICAgcmVqZWN0OiByZWplY3RSZWYuY3VycmVudAogICAgfTsKCiAgICBpZiAob3JkZXIuY3JlYXRlZEJ5ICE9PSBhY2NvdW50LmxvZ2luICYmICghYWNjb3VudC5icmFuY2ggfHwgIWFjY291bnQuYnJhbmNoLmFsbG93KSkgewogICAgICBkaXNwYXRjaCh1cGRhdGVTdGF0dXNPcmRlcihuZXdPcmRlcikpOwogICAgfSBlbHNlIHsKICAgICAgZGlzcGF0Y2goZWRpdFNlbGZPcmRlcihuZXdPcmRlcikpOwogICAgfQogIH07CgogIHZhciBkZWxldGVPcmRlciA9IGZ1bmN0aW9uIGRlbGV0ZU9yZGVyKG9yZGVyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgbmV3T3JkZXIgPSB7CiAgICAgICAgaWQ6IG9yZGVyLmlkLAogICAgICAgIHN0YXR1czogT3JkZXJTdGF0dXMuREVMRVRFRCwKICAgICAgICBhY3Rpb246ICdkZWxldGUnLAogICAgICAgIGN1c3RvbWVyOiBvcmRlci5jdXN0b21lcgogICAgICB9OwogICAgICBkaXNwYXRjaCh1cGRhdGVTdGF0dXNPcmRlcihuZXdPcmRlcikpOwogICAgfTsKICB9OwoKICB2YXIgY3JlYXRlQ29kT3JkZXIgPSBmdW5jdGlvbiBjcmVhdGVDb2RPcmRlcihvcmRlcikgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG5ld09yZGVyID0gewogICAgICAgIGlkOiBvcmRlci5pZCwKICAgICAgICBzdGF0dXM6IE9yZGVyU3RhdHVzLkNSRUFURV9DT0QsCiAgICAgICAgYWN0aW9uOiAnY3JlYXRlLWNvZCcsCiAgICAgICAgY3VzdG9tZXI6IG9yZGVyLmN1c3RvbWVyCiAgICAgIH07CiAgICAgIGRpc3BhdGNoKHVwZGF0ZVN0YXR1c09yZGVyKG5ld09yZGVyKSk7CiAgICB9OwogIH07CgogIHZhciBhcHByb3ZlQWxlcnQgPSBmdW5jdGlvbiBhcHByb3ZlQWxlcnQoaXRlbSkgewogICAgY29uZmlybUFsZXJ0KHsKICAgICAgdGl0bGU6ICdYw6FjIG5o4bqtbicsCiAgICAgIG1lc3NhZ2U6ICdC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gZHV54buHdCDEkcahbiBow6BuZyBuw6B5PycsCiAgICAgIGJ1dHRvbnM6IFt7CiAgICAgICAgbGFiZWw6ICfEkOG7k25nIMO9JywKICAgICAgICBvbkNsaWNrOiBhcHByb3ZlT3JkZXIoaXRlbSkKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAnSOG7p3knCiAgICAgIH1dCiAgICB9KTsKICB9OwoKICB2YXIgY2FuY2VsQWxlcnQgPSBmdW5jdGlvbiBjYW5jZWxBbGVydChpdGVtKSB7CiAgICBjb25maXJtQWxlcnQoewogICAgICBjdXN0b21VSTogZnVuY3Rpb24gY3VzdG9tVUkoX3JlZikgewogICAgICAgIHZhciBvbkNsb3NlID0gX3JlZi5vbkNsb3NlOwogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgY2xhc3NOYW1lOiAicmVhY3QtY29uZmlybS1hbGVydC1ib2R5IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoMSIsIG51bGwsICJYXHhFMWMgbmhcdTFFQURuIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgIkJcdTFFQTFuIGNceEYzIGNoXHUxRUFGYyBjaFx1MUVBRm4gbXVcdTFFRDFuIGhcdTFFRTd5IFx1MDExMVx1MDFBMW4gaFx4RTBuZyBuXHhFMHk/IiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENUZXh0YXJlYSwgewogICAgICAgICAgcGxhY2Vob2xkZXI6ICJOaFx1MUVBRHAgbFx4RkQgZG8gaFx1MUVFN3kiLAogICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybiByZWplY3RSZWYuY3VycmVudCA9IGV2ZW50LnRhcmdldC52YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJlYWN0LWNvbmZpcm0tYWxlcnQtYnV0dG9uLWdyb3VwIgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICBvbkNsaWNrOiBvbkNsb3NlCiAgICAgICAgfSwgIktoXHhGNG5nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBjYW5jZWxPcmRlcihpdGVtKTsKICAgICAgICAgICAgb25DbG9zZSgpOwogICAgICAgICAgfQogICAgICAgIH0sICJcdTAxMTBcdTFFRDNuZyBceEZEIikpKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgdmFyIGRlbGV0ZUFsZXJ0ID0gZnVuY3Rpb24gZGVsZXRlQWxlcnQoaXRlbSkgewogICAgY29uZmlybUFsZXJ0KHsKICAgICAgdGl0bGU6ICdYw6FjIG5o4bqtbicsCiAgICAgIG1lc3NhZ2U6ICdC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4geMOzYSDEkcahbiBow6BuZyBuw6B5PycsCiAgICAgIGJ1dHRvbnM6IFt7CiAgICAgICAgbGFiZWw6ICfEkOG7k25nIMO9JywKICAgICAgICBvbkNsaWNrOiBkZWxldGVPcmRlcihpdGVtKQogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICdI4buneScKICAgICAgfV0KICAgIH0pOwogIH07CgogIHZhciBjb2RBbGVydCA9IGZ1bmN0aW9uIGNvZEFsZXJ0KGl0ZW0pIHsKICAgIGNvbmZpcm1BbGVydCh7CiAgICAgIHRpdGxlOiAnWMOhYyBuaOG6rW4nLAogICAgICBtZXNzYWdlOiAnQuG6oW4gY8OzIGNo4bqvYyBjaOG6r24gbXXhu5FuIHThuqFvIHbhuq1uIMSRxqFuIGNobyDEkcahbiBow6BuZyBuw6B5PycsCiAgICAgIGJ1dHRvbnM6IFt7CiAgICAgICAgbGFiZWw6ICfEkOG7k25nIMO9JywKICAgICAgICBvbkNsaWNrOiBjcmVhdGVDb2RPcmRlcihpdGVtKQogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICdI4buneScKICAgICAgfV0KICAgIH0pOwogIH07CgogIHZhciByZW5kZXJCdXR0b25TdGF0dXMgPSBmdW5jdGlvbiByZW5kZXJCdXR0b25TdGF0dXMoaXRlbSkgewogICAgdmFyIF9hY2NvdW50JGJyYW5jaCwgX2FjY291bnQkYnJhbmNoMjsKCiAgICBzd2l0Y2ggKGl0ZW0uc3RhdHVzKSB7CiAgICAgIGNhc2UgT3JkZXJTdGF0dXMuV0FJVElORzoKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgbnVsbCwgKGlzQWRtaW4gfHwgYWNjb3VudC5yb2xlLmZpbHRlcihmdW5jdGlvbiAocm9sKSB7CiAgICAgICAgICByZXR1cm4gcm9sLm1ldGhvZCA9PT0gJ1BVVCcgJiYgcm9sLmVudGl0eSA9PT0gJy9hcGkvb3JkZXJzL2FwcHJvdmUnOwogICAgICAgIH0pLmxlbmd0aCA+IDApICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGFwcHJvdmVBbGVydChpdGVtKTsKICAgICAgICAgIH0sCiAgICAgICAgICBjb2xvcjogInN1Y2Nlc3MiLAogICAgICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICAgICAgc2hhcGU6ICJzcXVhcmUiLAogICAgICAgICAgc2l6ZTogInNtIiwKICAgICAgICAgIGNsYXNzTmFtZTogIm1yLTEiCiAgICAgICAgfSwgIkRVWVx1MUVDNlQgXHUwMTEwXHUwMUEwTiBIXHhDME5HIiksIChpc0FkbWluIHx8IGl0ZW0uY3JlYXRlZEJ5ID09PSBhY2NvdW50LmxvZ2luIHx8IGFjY291bnQucm9sZS5maWx0ZXIoZnVuY3Rpb24gKHJvbCkgewogICAgICAgICAgcmV0dXJuIHJvbC5tZXRob2QgPT09ICdQVVQnICYmIHJvbC5lbnRpdHkgPT09ICcvYXBpL29yZGVycy9jYW5jZWwnOwogICAgICAgIH0pLmxlbmd0aCA+IDApICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGNhbmNlbEFsZXJ0KGl0ZW0pOwogICAgICAgICAgfSwKICAgICAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIKICAgICAgICB9LCAiSFx1MUVFNlkgXHUwMTEwXHUwMUEwTiBIXHhDME5HIiksIChpdGVtLmNyZWF0ZWRCeSA9PT0gYWNjb3VudC5sb2dpbiB8fCBpc0FkbWluIHx8IGFjY291bnQucm9sZS5maWx0ZXIoZnVuY3Rpb24gKHJvbCkgewogICAgICAgICAgcmV0dXJuIHJvbC5tZXRob2QgPT09ICdQVVQnICYmIHJvbC5lbnRpdHkgPT09ICcvYXBpL29yZGVycyc7CiAgICAgICAgfSkubGVuZ3RoID4gMCkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhldmVudCkgewogICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgZGlzcGF0Y2goYWRkUGVybWlzc2lvbih7CiAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgICAgICAgICBlbnRpdHk6ICcvYXBpL29yZGVycycsCiAgICAgICAgICAgICAgaXNTZWxmOiB0cnVlCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgdG9FZGl0T3JkZXIoaXRlbS5pZCk7CiAgICAgICAgICB9LAogICAgICAgICAgY29sb3I6ICJ3YXJuaW5nIiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICAgICAgbmFtZTogImNpbC1wZW5jaWwiCiAgICAgICAgfSksICJDSFx1MUVDOE5IIFNcdTFFRUNBIikpOwoKICAgICAgY2FzZSBPcmRlclN0YXR1cy5BUFBST1ZFRDoKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgbnVsbCwgKGlzQWRtaW4gfHwgYWNjb3VudC5yb2xlLmZpbHRlcihmdW5jdGlvbiAocm9sKSB7CiAgICAgICAgICByZXR1cm4gcm9sLm1ldGhvZCA9PT0gJ1BVVCcgJiYgcm9sLmVudGl0eSA9PT0gJy9hcGkvb3JkZXJzL2NyZWF0ZS1jb2QnOwogICAgICAgIH0pLmxlbmd0aCA+IDApICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGNvZEFsZXJ0KGl0ZW0pOwogICAgICAgICAgfSwKICAgICAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgICAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICAgICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgICAgICBzaXplOiAic20iCiAgICAgICAgfSwgIlRcdTFFQTBPIFZcdTFFQUNOIFx1MDExMFx1MDFBME4iKSwgaXNBZG1pbiB8fCAoKF9hY2NvdW50JGJyYW5jaCA9IGFjY291bnQuYnJhbmNoKSA9PT0gbnVsbCB8fCBfYWNjb3VudCRicmFuY2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2NvdW50JGJyYW5jaC5hbGxvdykgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhldmVudCkgewogICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgdG9FZGl0T3JkZXIoaXRlbS5pZCk7CiAgICAgICAgICB9LAogICAgICAgICAgY29sb3I6ICJ3YXJuaW5nIiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICAgICAgbmFtZTogImNpbC1wZW5jaWwiCiAgICAgICAgfSksICJDSFx1MUVDOE5IIFNcdTFFRUNBIiksIGlzQWRtaW4gfHwgKChfYWNjb3VudCRicmFuY2gyID0gYWNjb3VudC5icmFuY2gpID09PSBudWxsIHx8IF9hY2NvdW50JGJyYW5jaDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2NvdW50JGJyYW5jaDIuYWxsb3cpICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGNhbmNlbEFsZXJ0KGl0ZW0pOwogICAgICAgICAgfSwKICAgICAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIKICAgICAgICB9LCAiSFx1MUVFNlkgXHUwMTEwXHUwMUEwTiBIXHhDME5HIikpOwoKICAgICAgY2FzZSBPcmRlclN0YXR1cy5DUkVBVEVfQ09EOgogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICAgICAgICBjb2xvcjogImluZm8iLAogICAgICAgICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgICAgICAgc2hhcGU6ICJzcXVhcmUiLAogICAgICAgICAgc2l6ZTogInNtIiwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIHRvU2VlQmlsbChpdGVtKTsKICAgICAgICAgIH0KICAgICAgICB9LCAiWEVNIFZcdTFFQUNOIFx1MDExMFx1MDFBME4iKTsKCiAgICAgIGNhc2UgT3JkZXJTdGF0dXMuQ0FOQ0VMOgogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCBudWxsLCAoaXNBZG1pbiB8fCBhY2NvdW50LnJvbGUuZmlsdGVyKGZ1bmN0aW9uIChyb2wpIHsKICAgICAgICAgIHJldHVybiByb2wubWV0aG9kID09PSAnUFVUJyAmJiByb2wuZW50aXR5ID09PSAnL2FwaS9vcmRlcnMnICYmICFyb2wuaXNTZWxmOwogICAgICAgIH0pLmxlbmd0aCA+IDApICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIHRvRWRpdE9yZGVyKGl0ZW0uaWQpOwogICAgICAgICAgfSwKICAgICAgICAgIGNvbG9yOiAid2FybmluZyIsCiAgICAgICAgICB2YXJpYW50OiAib3V0bGluZSIsCiAgICAgICAgICBzaGFwZTogInNxdWFyZSIsCiAgICAgICAgICBzaXplOiAic20iLAogICAgICAgICAgY2xhc3NOYW1lOiAibXItMSIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICAgICAgbmFtZTogImNpbC1wZW5jaWwiCiAgICAgICAgfSksICJDSFx1MUVDOE5IIFNcdTFFRUNBIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGRlbGV0ZUFsZXJ0KGl0ZW0pOwogICAgICAgICAgfSwKICAgICAgICAgIGNvbG9yOiAic2Vjb25kYXJ5IiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIsCiAgICAgICAgICBjbGFzc05hbWU6ICJtci0xIgogICAgICAgIH0sICJYXHhEM0EgXHUwMTEwXHUwMUEwTiIpKTsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfTsKCiAgdmFyIG1lbW9Db21wdXRlZEl0ZW1zID0gUmVhY3QudXNlQ2FsbGJhY2soZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICByZXR1cm4gY29tcHV0ZWRJdGVtcyhpdGVtcyk7CiAgfSwgW10pOwogIHZhciBtZW1vTGlzdGVkID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gbWVtb0NvbXB1dGVkSXRlbXMob3JkZXJzKTsKICB9LCBbb3JkZXJzXSk7CgogIHZhciB0b0RldGFpbE9yZGVyID0gZnVuY3Rpb24gdG9EZXRhaWxPcmRlcihpZCkgewogICAgaGlzdG9yeS5wdXNoKCIiLmNvbmNhdChwcm9wcy5tYXRjaC51cmwsICIvIikuY29uY2F0KGlkLCAiL2RldGFpbCIpKTsKICB9OwoKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkSGVhZGVyLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgbmFtZTogImNpbC1ncmlkIgogIH0pLCAiIERhbmggc1x4RTFjaCBcdTAxMTFcdTAxQTFuIGhceEUwbmciLCAoaXNBZG1pbiB8fCBhY2NvdW50LnJvbGUuZmlsdGVyKGZ1bmN0aW9uIChyb2wpIHsKICAgIHJldHVybiByb2wubWV0aG9kID09PSAnUE9TVCcgJiYgcm9sLmVudGl0eSA9PT0gJy9hcGkvb3JkZXJzJzsKICB9KS5sZW5ndGggPiAwKSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQnV0dG9uLCB7CiAgICBjb2xvcjogInN1Y2Nlc3MiLAogICAgdmFyaWFudDogIm91dGxpbmUiLAogICAgY2xhc3NOYW1lOiAibWwtMyIsCiAgICBvbkNsaWNrOiB0b0NyZWF0ZU9yZGVyCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgIG5hbWU6ICJjaWwtcGx1cyIKICB9KSwgIiBUaFx4RUFtIG1cdTFFREJpIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICBjbGFzc05hbWU6ICJtYi0yIiwKICAgIGhyZWY6IGNzdkNvZGUsCiAgICBkb3dubG9hZDogImN1c3RvbWVydHlwZXMuY3N2IiwKICAgIHRhcmdldDogIl9ibGFuayIKICB9LCAiVFx1MUVBM2kgZXhjZWwgKC5jc3YpIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIHsKICAgIGNsYXNzTmFtZTogIm1sLTAgbXQtNCIKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIG51bGwsICJUXHUxRUQ1bmcgOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIlx4QTBceEEwIi5jb25jYXQoaW5pdGlhbFN0YXRlLnRvdGFsSXRlbSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgcm93OiB0cnVlLAogICAgeHM6ICIxMiIsCiAgICBtZDogIjEyIiwKICAgIGxnOiAiMTIiLAogICAgY2xhc3NOYW1lOiAibWwtMiBtdC0zIgogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIHsKICAgIHJvdzogdHJ1ZQogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgaHRtbEZvcjogImRhdGUtaW5wdXQiCiAgfSwgIlRcdTFFRUIgbmdceEUweSIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgeHM6ICIxMiIsCiAgICBtZDogIjkiLAogICAgbGc6ICIxMiIKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgIHR5cGU6ICJkYXRlIiwKICAgIGlkOiAiZGF0ZS1pbnB1dCIsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICByZXR1cm4gc2V0RGF0ZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGUpLCB7fSwgewogICAgICAgIHN0YXJ0RGF0ZTogZS50YXJnZXQudmFsdWUKICAgICAgfSkpOwogICAgfSwKICAgIG5hbWU6ICJkYXRlLWlucHV0IiwKICAgIHBsYWNlaG9sZGVyOiAiZGF0ZSIKICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCB7CiAgICByb3c6IHRydWUsCiAgICBjbGFzc05hbWU6ICJtbC0zIgogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgaHRtbEZvcjogImRhdGUtaW5wdXQiCiAgfSwgIlx1MDExMFx1MUVCRm4gbmdceEUweSIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgeHM6ICIxMiIsCiAgICBtZDogIjkiLAogICAgbGc6ICIxMiIKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgIHR5cGU6ICJkYXRlIiwKICAgIGlkOiAiZGF0ZS1pbnB1dCIsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICByZXR1cm4gc2V0RGF0ZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGUpLCB7fSwgewogICAgICAgIGVuZERhdGU6IGUudGFyZ2V0LnZhbHVlCiAgICAgIH0pKTsKICAgIH0sCiAgICBuYW1lOiAiZGF0ZS1pbnB1dCIsCiAgICBwbGFjZWhvbGRlcjogImRhdGUiCiAgfSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENEYXRhVGFibGUsIHsKICAgIGl0ZW1zOiBtZW1vTGlzdGVkLAogICAgZmllbGRzOiBmaWVsZHMsCiAgICBjb2x1bW5GaWx0ZXI6IHRydWUsCiAgICBpdGVtc1BlclBhZ2VTZWxlY3Q6IHsKICAgICAgbGFiZWw6ICdT4buRIGzGsOG7o25nIHRyw6puIG3hu5l0IHRyYW5nJywKICAgICAgdmFsdWVzOiBbNTAsIDEwMCwgMTUwLCAyMDBdCiAgICB9LAogICAgaXRlbXNQZXJQYWdlOiBzaXplLAogICAgaG92ZXI6IHRydWUsCiAgICBzb3J0ZXI6IHRydWUsCiAgICBub0l0ZW1zVmlldzogewogICAgICBub1Jlc3VsdHM6ICdLaMO0bmcgdMOsbSB0aOG6pXkga+G6v3QgcXXhuqMnLAogICAgICBub0l0ZW1zOiAnS2jDtG5nIGPDsyBk4buvIGxp4buHdScKICAgIH0gLy8gbG9hZGluZwogICAgLAogICAgb25QYWdpbmF0aW9uQ2hhbmdlOiBmdW5jdGlvbiBvblBhZ2luYXRpb25DaGFuZ2UodmFsKSB7CiAgICAgIHJldHVybiBzZXRTaXplKHZhbCk7CiAgICB9LAogICAgb25Db2x1bW5GaWx0ZXJDaGFuZ2U6IG9uRmlsdGVyQ29sdW1uLAogICAgb25Sb3dDbGljazogZnVuY3Rpb24gb25Sb3dDbGljayh2YWwpIHsKICAgICAgcmV0dXJuIHRvRGV0YWlsT3JkZXIodmFsLmlkKTsKICAgIH0sCiAgICBjb2x1bW5GaWx0ZXJTbG90OiB7CiAgICAgIHN0YXR1czogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWluV2lkdGg6IDIwMAogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGl0ZW0pIHsKICAgICAgICAgIG9uRmlsdGVyQ29sdW1uKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGFyYW1SZWYuY3VycmVudCksIHt9LCB7CiAgICAgICAgICAgIHN0YXR1czogKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS52YWx1ZSkgfHwgJycKICAgICAgICAgIH0pKTsKICAgICAgICB9LAogICAgICAgIGlzQ2xlYXJhYmxlOiB0cnVlLAogICAgICAgIHBsYWNlaG9sZGVyOiAiQ2hcdTFFQ0RuIHRyXHUxRUExbmcgdGhceEUxaSIsCiAgICAgICAgb3B0aW9uczogc3RhdHVzTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbHVlOiBpdGVtLnZhbHVlLAogICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbAogICAgICAgICAgfTsKICAgICAgICB9KQogICAgICB9KSkKICAgIH0sCiAgICBzY29wZWRTbG90czogewogICAgICBvcmRlcjogZnVuY3Rpb24gb3JkZXIoaXRlbSwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgKGFjdGl2ZVBhZ2UgLSAxKSAqIHNpemUgKyBpbmRleCArIDEpOwogICAgICB9LAogICAgICBzdGF0dXM6IGZ1bmN0aW9uIHN0YXR1cyhpdGVtKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCYWRnZSwgewogICAgICAgICAgY29sb3I6IGdldEJhZGdlKGl0ZW0uc3RhdHVzKQogICAgICAgIH0sIG1hcHBpbmdTdGF0dXNbaXRlbS5zdGF0dXNdKSk7CiAgICAgIH0sCiAgICAgIGNyZWF0ZWREYXRlOiBmdW5jdGlvbiBjcmVhdGVkRGF0ZShpdGVtKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIGl0ZW0uY3JlYXRlZERhdGUuc3Vic3RyKDAsIDEwKSk7CiAgICAgIH0sCiAgICAgIHNob3dfZGV0YWlsczogZnVuY3Rpb24gc2hvd19kZXRhaWxzKGl0ZW0pIHsKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAicHktMiBkLWZsZXgiCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgICAgIHZhcmlhbnQ6ICJvdXRsaW5lIiwKICAgICAgICAgIHNoYXBlOiAic3F1YXJlIiwKICAgICAgICAgIHNpemU6ICJzbSIsCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7CiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICB0b2dnbGVEZXRhaWxzKGl0ZW0uaWQpOwogICAgICAgICAgfQogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJY29uLCB7CiAgICAgICAgICBuYW1lOiAiY2lsWm9vbSIKICAgICAgICB9KSkpOwogICAgICB9LAogICAgICBhY3Rpb246IGZ1bmN0aW9uIGFjdGlvbihpdGVtKSB7CiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInB5LTIgZC1mbGV4IgogICAgICAgIH0sIHJlbmRlckJ1dHRvblN0YXR1cyhpdGVtKSk7CiAgICAgIH0sCiAgICAgIGRldGFpbHM6IGZ1bmN0aW9uIGRldGFpbHMoaXRlbSkgewogICAgICAgIHZhciBfZGlzdHJpY3QkZmlsdGVyJCwgX2NpdGllcyRmaWx0ZXIkLCBfaXRlbSRwcm9tb3Rpb24sIF9pdGVtJHByb21vdGlvbjIsIF9pdGVtJHByb21vdGlvbjMsIF9pdGVtJHByb21vdGlvbjQsIF9pdGVtJHByb21vdGlvbjUsIF9pdGVtJHByb21vdGlvbjUkY3VzdDsKCiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2xsYXBzZSwgewogICAgICAgICAgc2hvdzogX2RldGFpbHMuaW5jbHVkZXMoaXRlbS5pZCkKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZEJvZHksIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoNSIsIG51bGwsICJUaFx4RjRuZyB0aW4gXHUwMTExXHUwMUExbiBoXHhFMG5nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIHsKICAgICAgICAgIGNsYXNzTmFtZTogIm1iLTQiCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICAgICAgc206ICI0IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoNiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogIm1iLTMiCiAgICAgICAgfSwgIlRcdTFFREJpOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsIGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5jdXN0b21lci5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0uYWRkcmVzcyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAiIi5jb25jYXQoKChfZGlzdHJpY3QkZmlsdGVyJCA9IGRpc3RyaWN0LmZpbHRlcihmdW5jdGlvbiAoZGlzdCkgewogICAgICAgICAgdmFyIF9pdGVtJGN1c3RvbWVyMjsKCiAgICAgICAgICByZXR1cm4gZGlzdC52YWx1ZSA9PT0gKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJGN1c3RvbWVyMiA9IGl0ZW0uY3VzdG9tZXIpID09PSBudWxsIHx8IF9pdGVtJGN1c3RvbWVyMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kY3VzdG9tZXIyLmRpc3RyaWN0KTsKICAgICAgICB9KVswXSkgPT09IG51bGwgfHwgX2Rpc3RyaWN0JGZpbHRlciQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kaXN0cmljdCRmaWx0ZXIkLmxhYmVsKSB8fCAnJywgIiwgIikuY29uY2F0KCgoX2NpdGllcyRmaWx0ZXIkID0gY2l0aWVzLmZpbHRlcihmdW5jdGlvbiAoY2l0eSkgewogICAgICAgICAgdmFyIF9pdGVtJGN1c3RvbWVyMzsKCiAgICAgICAgICByZXR1cm4gY2l0eS52YWx1ZSA9PT0gKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJGN1c3RvbWVyMyA9IGl0ZW0uY3VzdG9tZXIpID09PSBudWxsIHx8IF9pdGVtJGN1c3RvbWVyMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kY3VzdG9tZXIzLmNpdHkpOwogICAgICAgIH0pWzBdKSA9PT0gbnVsbCB8fCBfY2l0aWVzJGZpbHRlciQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaXRpZXMkZmlsdGVyJC5sYWJlbCkgfHwgJycpKSwgJyAnLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgIlBob25lOiAiLCBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0uY3VzdG9tZXIudGVsKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgICAgIHNtOiAiNCIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaDYiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJtYi0zIgogICAgICAgIH0sICJDaFx1MDFCMFx1MDFBMW5nIHRyXHhFQ25oIGJceEUxbiBoXHhFMG5nOiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsICIgIiwgaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2l0ZW0kcHJvbW90aW9uID0gaXRlbS5wcm9tb3Rpb24pID09PSBudWxsIHx8IF9pdGVtJHByb21vdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvbW90aW9uLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaXRlbSRwcm9tb3Rpb24yID0gaXRlbS5wcm9tb3Rpb24pID09PSBudWxsIHx8IF9pdGVtJHByb21vdGlvbjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb21vdGlvbjIuZGVzY3JpcHRpb24ubGVuZ3RoKSA+IDMwID8gIiIuY29uY2F0KGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJHByb21vdGlvbjMgPSBpdGVtLnByb21vdGlvbikgPT09IG51bGwgfHwgX2l0ZW0kcHJvbW90aW9uMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvbW90aW9uMy5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgMzApKSA6IGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJHByb21vdGlvbjQgPSBpdGVtLnByb21vdGlvbikgPT09IG51bGwgfHwgX2l0ZW0kcHJvbW90aW9uNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvbW90aW9uNC5kZXNjcmlwdGlvbiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAiTG9cdTFFQTFpIGtoXHhFMWNoIGhceEUwbmc6ICIsIGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJHByb21vdGlvbjUgPSBpdGVtLnByb21vdGlvbikgPT09IG51bGwgfHwgX2l0ZW0kcHJvbW90aW9uNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJHByb21vdGlvbjUkY3VzdCA9IF9pdGVtJHByb21vdGlvbjUuY3VzdG9tZXJUeXBlKSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9tb3Rpb241JGN1c3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb21vdGlvbjUkY3VzdC5uYW1lKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWJsZSwgewogICAgICAgICAgc3RyaXBlZDogdHJ1ZSwKICAgICAgICAgIHJlc3BvbnNpdmU6IHRydWUKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGhlYWQiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJjZW50ZXIiCiAgICAgICAgfSwgIiMiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIlRceEVBbiBzXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgbnVsbCwgIkR1bmcgdFx4RURjaCIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJjZW50ZXIiCiAgICAgICAgfSwgIlNcdTFFRDEgbFx1MDFCMFx1MUVFM25nIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0aCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgICAgIH0sICJcdTAxMTBcdTAxQTFuIGdpXHhFMSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJyaWdodCIKICAgICAgICB9LCAiQ2hpXHUxRUJGdCBraFx1MUVBNXUoJSkiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAicmlnaHQiCiAgICAgICAgfSwgIlRcdTFFRDVuZyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJyaWdodCIKICAgICAgICB9LCAiVGhceEUwbmggdGlcdTFFQzFuIikpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRib2R5IiwgbnVsbCwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSgoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLm9yZGVyRGV0YWlscykgfHwgW10pKS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICB2YXIgX2l0ZW0kcHJvZHVjdCwgX2l0ZW0kcHJvZHVjdDIsIF9pdGVtJHByb2R1Y3QzLCBfaXRlbSRwcm9kdWN0NCwgX2l0ZW0kcHJvZHVjdDUsIF9pdGVtJHByb2R1Y3Q2OwoKICAgICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCB7CiAgICAgICAgICAgIGtleTogaW5kZXgKICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIGluZGV4ICsgMSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIChfaXRlbSRwcm9kdWN0ID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0Lm5hbWUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCAoX2l0ZW0kcHJvZHVjdDIgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3QyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0Mi52b2x1bWUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBpdGVtLnF1YW50aXR5KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgTnVtYmVyKGl0ZW0ucHJpY2VSZWFsIHx8ICgoX2l0ZW0kcHJvZHVjdDMgPSBpdGVtLnByb2R1Y3QpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3QzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0My5wcmljZSkpLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeScsCiAgICAgICAgICAgIGN1cnJlbmN5OiAnVk5EJwogICAgICAgICAgfSkgfHwgJycpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBpdGVtLnJlZHVjZVBlcmNlbnQsICIlIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIChOdW1iZXIoaXRlbS5wcmljZVJlYWwgfHwgKChfaXRlbSRwcm9kdWN0NCA9IGl0ZW0ucHJvZHVjdCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdDQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3Q0LnByaWNlKSkgKiBpdGVtLnF1YW50aXR5KS50b0xvY2FsZVN0cmluZygnaXQtSVQnLCB7CiAgICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgICAgICBjdXJyZW5jeTogJ1ZORCcKICAgICAgICAgIH0pIHx8ICcnKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgKE51bWJlcihpdGVtLnByaWNlUmVhbCB8fCAoKF9pdGVtJHByb2R1Y3Q1ID0gaXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfaXRlbSRwcm9kdWN0NSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdDUucHJpY2UpKSAqIGl0ZW0ucXVhbnRpdHkgLSBOdW1iZXIoaXRlbS5wcmljZVJlYWwgfHwgKChfaXRlbSRwcm9kdWN0NiA9IGl0ZW0ucHJvZHVjdCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdDYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJHByb2R1Y3Q2LnByaWNlKSkgKiBpdGVtLnF1YW50aXR5ICogaXRlbS5yZWR1Y2VQZXJjZW50IC8gMTAwKS50b0xvY2FsZVN0cmluZygnaXQtSVQnLCB7CiAgICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgICAgICBjdXJyZW5jeTogJ1ZORCcKICAgICAgICAgIH0pIHx8ICcnKSk7CiAgICAgICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1JvdywgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICAgICAgbGc6ICI0IiwKICAgICAgICAgIHNtOiAiNSIKICAgICAgICB9LCAiR2hpIGNoXHhGQTogIiwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsIGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5ub3RlKSwgaXRlbS5zdGF0dXMgPT09ICdDQU5DRUwnICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAiTFx4RkQgZG8gaFx1MUVFN3k6ICIsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0ucmVqZWN0KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgICAgICBsZzogIjQiLAogICAgICAgICAgc206ICI1IiwKICAgICAgICAgIGNsYXNzTmFtZTogIm1sLWF1dG8iCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGFibGUsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInRhYmxlLWNsZWFyIgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogImxlZnQiCiAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsICJUXHUxRUQ1bmcgc1x1MUVEMSBsXHUwMUIwXHUxRUUzbmciKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgICAgIH0sIChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0ub3JkZXJEZXRhaWxzLnJlZHVjZShmdW5jdGlvbiAoc3VtLCBjdXJyZW50KSB7CiAgICAgICAgICByZXR1cm4gc3VtICsgY3VycmVudC5xdWFudGl0eTsKICAgICAgICB9LCAwKSkgfHwgJycpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAibGVmdCIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIlRcdTFFRDVuZyB0aVx1MUVDMW4iKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgICAgIH0sIE51bWJlcigoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLnRvdGFsTW9uZXkpIHx8ICcwJykudG9Mb2NhbGVTdHJpbmcoJ2l0LUlUJywgewogICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeScsCiAgICAgICAgICBjdXJyZW5jeTogJ1ZORCcKICAgICAgICB9KSB8fCAnJykpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidHIiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJsZWZ0IgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAiQ2hpXHUxRUJGdCBraFx1MUVBNXUiKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogInJpZ2h0IgogICAgICAgIH0sIE51bWJlcigoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLnJlZHVjZU1vbmV5KSB8fCAnMCcpLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgICAgY3VycmVuY3k6ICdWTkQnCiAgICAgICAgfSkgfHwgJycpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAibGVmdCIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIlRpXHUxRUMxbiB0aGFuaCB0b1x4RTFuIikpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJyaWdodCIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgTnVtYmVyKChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0ucmVhbE1vbmV5KSB8fCAnMCcpLnRvTG9jYWxlU3RyaW5nKCdpdC1JVCcsIHsKICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgICAgY3VycmVuY3k6ICdWTkQnCiAgICAgICAgfSkgfHwgJycpKSkpKSkpKSk7CiAgICAgIH0KICAgIH0KICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1BhZ2luYXRpb24sIHsKICAgIGFjdGl2ZVBhZ2U6IGFjdGl2ZVBhZ2UsCiAgICBwYWdlczogTWF0aC5mbG9vcihpbml0aWFsU3RhdGUudG90YWxJdGVtIC8gMjApICsgMSwKICAgIG9uQWN0aXZlUGFnZUNoYW5nZTogZnVuY3Rpb24gb25BY3RpdmVQYWdlQ2hhbmdlKGkpIHsKICAgICAgcmV0dXJuIHNldEFjdGl2ZVBhZ2UoaSk7CiAgICB9CiAgfSkpKTsKfTsKCmV4cG9ydCBkZWZhdWx0IE9yZGVyOw=="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/sales/Orders/Order.js"],"names":["React","useCallback","useEffect","useRef","useState","CCardBody","CBadge","CButton","CCollapse","CDataTable","CCard","CCardHeader","CRow","CCol","CPagination","CIcon","useDispatch","useSelector","editSelfOrder","getOrder","updateStatusOrder","globalizedOrdersSelectors","reset","useHistory","Table","OrderStatus","moment","confirmAlert","userSafeSelector","addPermission","_","CFormGroup","CInput","CLabel","CTextarea","Select","cities","district","mappingStatus","WAITING","APPROVED","CREATE_COD","CANCEL","COD_APPROVED","REJECTED","SUPPLY_WAITING","SHIPPING","SUCCESS","COD_CANCEL","statusList","value","label","selectAll","fields","key","_style","width","filter","getBadge","status","Order","props","details","setDetails","state","order","initialState","activePage","setActivePage","size","setSize","dispatch","history","rejectRef","paramRef","account","isAdmin","authorities","item","length","orders","startDate","endDate","date","setDate","params","page","sort","current","localStorage","setItem","JSON","stringify","localParams","getItem","parse","removeItem","computedItems","items","map","customerName","customer","name","createdBy","quantity","orderDetails","reduce","sum","prev","createdDate","format","total","Number","realMoney","toLocaleString","style","currency","toggleDetails","index","position","indexOf","newDetails","slice","splice","csvContent","Object","values","join","csvCode","encodeURIComponent","toCreateOrder","push","match","url","debouncedSearchColumn","debounce","keys","forEach","onFilterColumn","toEditOrder","typeId","toSeeBill","pathname","updatingSuccess","approveOrder","newOrder","id","action","cancelOrder","reject","login","branch","allow","deleteOrder","DELETED","createCodOrder","approveAlert","title","message","buttons","onClick","cancelAlert","customUI","onClose","event","target","deleteAlert","codAlert","renderButtonStatus","role","rol","method","entity","stopPropagation","isSelf","memoComputedItems","memoListed","useMemo","toDetailOrder","totalItem","e","noResults","noItems","val","minWidth","substr","show_details","includes","address","dist","city","tel","promotion","description","substring","customerType","product","volume","priceReal","price","reducePercent","note","totalMoney","reduceMoney","Math","floor","i"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { CCardBody, CBadge, CButton, CCollapse, CDataTable, CCard, CCardHeader, CRow, CCol, CPagination } from '@coreui/react/lib';\nimport CIcon from '@coreui/icons-react/lib/CIcon';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { editSelfOrder, getOrder, updateStatusOrder } from './order.api';\nimport { globalizedOrdersSelectors, reset } from './order.reducer';\nimport { useHistory } from 'react-router-dom';\nimport { Table } from 'reactstrap';\nimport { OrderStatus } from './order-status';\nimport moment from 'moment';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\nimport { userSafeSelector, addPermission } from '../../login/authenticate.reducer.js';\nimport _ from 'lodash';\nimport { CFormGroup, CInput, CLabel, CTextarea } from '@coreui/react';\nimport Select from 'react-select';\nimport cities from '../../../../shared/utils/city';\nimport district from '../../../../shared/utils/district.json';\nconst mappingStatus = {\n  WAITING: 'CH DUYT',\n  APPROVED: ' DUYT',\n  CREATE_COD: ' TO VN N',\n  CANCEL: ' HY',\n  COD_APPROVED: ' DUYT VN N',\n  REJECTED: 'T CHI VN N',\n  SUPPLY_WAITING: 'I XUT KHO',\n  SHIPPING: 'ANG VN CHUYN',\n  SUCCESS: 'GIAO THNH CNG',\n  COD_CANCEL: 'HY VN N'\n};\n\nconst statusList = [\n  {\n    value: 'WAITING',\n    label: 'CH DUYT'\n  },\n  {\n    value: 'APPROVED',\n    label: ' DUYT'\n  },\n  {\n    value: 'CREATE_COD',\n    label: ' TO VN N'\n  },\n  {\n    value: 'CANCEL',\n    label: ' HY'\n  },\n  {\n    value: 'COD_APPROVED',\n    label: ' DUYT VN N'\n  },\n  {\n    value: 'REJECTED',\n    label: 'T CHI VN N'\n  },\n  {\n    value: 'SUPPLY_WAITING',\n    label: 'I XUT KHO'\n  },\n  {\n    value: 'SHIPPING',\n    label: 'ANG VN CHUYN'\n  },\n  {\n    value: 'SUCCESS',\n    label: 'GIAO THNH CNG'\n  },\n  {\n    value: 'COD_CANCEL',\n    label: 'HY VN N'\n  }\n];\nconst { selectAll } = globalizedOrdersSelectors;\n// Code\tTn ca hng/i l\tNgi lin lc\tNm Sinh\tin thoi\tNhn vin qun l\tn hngg\tPhn loi\tSa\tTo n\nconst fields = [\n  {\n    key: 'order',\n    label: 'STT',\n    _style: { width: '1%' },\n    filter: false\n  },\n  {\n    key: 'show_details',\n    label: 'Xem chi tit',\n    _style: { width: '1%' },\n    filter: false\n  },\n  { key: 'code', label: 'M n hng', _style: { width: '10%' } },\n  { key: 'customerName', label: 'Tn khch hng/i l', _style: { width: '15%' } },\n  { key: 'createdBy', label: 'Ngi to', _style: { width: '10%' } },\n  { key: 'quantity', label: 'Tng sn phm', _style: { width: '10%' }, filter: false },\n  { key: 'total', label: 'Tin thanh ton', _style: { width: '10%' }, filter: false },\n  { key: 'createdDate', label: 'Ngy to', _style: { width: '10%' }, filter: false },\n  { key: 'status', label: 'Trng thi', _style: { width: '10%' }, filter: false },\n  {\n    key: 'action',\n    label: '',\n    _style: { width: '30%' },\n    filter: false\n  }\n];\n\nconst getBadge = status => {\n  switch (status) {\n    case 'APPROVED':\n      return 'success';\n    case 'CREATE_COD':\n      return 'info';\n    case 'WAITING':\n      return 'warning';\n    case 'CANCEL':\n      return 'danger';\n    default:\n      return 'primary';\n  }\n};\nconst Order = props => {\n  const [details, setDetails] = useState([]);\n  const { initialState } = useSelector(state => state.order);\n  const [activePage, setActivePage] = useState(1);\n  const [size, setSize] = useState(50);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const rejectRef = useRef('');\n  const paramRef = useRef(null);\n  const { account } = useSelector(userSafeSelector);\n  const isAdmin = account.authorities.filter(item => item === 'ROLE_ADMIN').length > 0;\n  const orders = useSelector(selectAll);\n\n  const [date, setDate] = React.useState({ startDate: null, endDate: null });\n\n  useEffect(() => {\n    if (date.endDate && date.startDate) {\n      const params = { page: activePage - 1, size, sort: 'createdDate,DESC', ...paramRef.current, ...date };\n      dispatch(getOrder(params));\n    }\n  }, [date]);\n  useEffect(() => {\n    dispatch(reset());\n    localStorage.setItem('order', JSON.stringify({}));\n  }, []);\n\n  useEffect(() => {\n    const localParams = localStorage.getItem('params');\n    let params = { page: activePage - 1, size, sort: 'createdDate,DESC', ...paramRef.current };\n    if (localParams) {\n      params = JSON.parse(localParams);\n      setActivePage(params.page + 1);\n      localStorage.removeItem('params');\n    }\n    dispatch(getOrder(params));\n  }, [activePage, size]);\n\n  const computedItems = items => {\n    return items.map(item => {\n      return {\n        ...item,\n        customerName: item.customer?.name,\n        createdBy: item.createdBy || '',\n        quantity: item.orderDetails?.reduce((sum, prev) => sum + prev.quantity, 0),\n        createdDate: moment(item.createdDate).format('DD-MM-YYYY'),\n        total: Number(item.realMoney)?.toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''\n      };\n    });\n  };\n\n  const toggleDetails = index => {\n    const position = details.indexOf(index);\n    let newDetails = details.slice();\n    if (position !== -1) {\n      newDetails.splice(position, 1);\n    } else {\n      newDetails = [...details, index];\n    }\n    setDetails(newDetails);\n  };\n\n  const csvContent = orders.map(item => Object.values(item).join(',')).join('\\n');\n  const csvCode = 'data:text/csv;charset=utf-8,SEP=,%0A' + encodeURIComponent(csvContent);\n  const toCreateOrder = () => {\n    const params = { page: activePage - 1, size, sort: 'createdDate,DESC', ...paramRef.current };\n    localStorage.setItem('params', JSON.stringify(params));\n    history.push(`${props.match.url}/new`);\n  };\n\n  const debouncedSearchColumn = _.debounce(value => {\n    if (Object.keys(value).length > 0) {\n      Object.keys(value).forEach(key => {\n        if (!value[key]) delete value[key];\n      });\n      paramRef.current = value;\n      dispatch(getOrder({ page: 0, size: size, sort: 'createdDate,DESC', ...value }));\n    }\n  }, 300);\n\n  const onFilterColumn = value => {\n    debouncedSearchColumn(value);\n  };\n\n  const toEditOrder = typeId => {\n    const params = { page: activePage - 1, size, sort: 'createdDate,DESC', ...paramRef.current };\n    localStorage.setItem('params', JSON.stringify(params));\n    history.push(`${props.match.url}/${typeId}/edit`);\n  };\n\n  const toSeeBill = item => {\n    history.push({\n      pathname: `${props.match.url}/print`,\n      state: {\n        item\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      dispatch(getOrder());\n      dispatch(reset());\n    }\n  }, [initialState.updatingSuccess]);\n\n  const approveOrder = order => () => {\n    const newOrder = {\n      id: order.id,\n      status: OrderStatus.APPROVED,\n      action: 'approve',\n      customer: order.customer\n    };\n    dispatch(updateStatusOrder(newOrder));\n  };\n\n  const cancelOrder = order => {\n    const newOrder = {\n      id: order.id,\n      status: OrderStatus.CANCEL,\n      action: 'cancel',\n      customer: order.customer,\n      createdBy: order.createdBy,\n      reject: rejectRef.current\n    };\n    if (order.createdBy !== account.login && (!account.branch || !account.branch.allow)) {\n      dispatch(updateStatusOrder(newOrder));\n    } else {\n      dispatch(editSelfOrder(newOrder));\n    }\n  };\n\n  const deleteOrder = order => () => {\n    const newOrder = {\n      id: order.id,\n      status: OrderStatus.DELETED,\n      action: 'delete',\n      customer: order.customer\n    };\n    dispatch(updateStatusOrder(newOrder));\n  };\n\n  const createCodOrder = order => () => {\n    const newOrder = {\n      id: order.id,\n      status: OrderStatus.CREATE_COD,\n      action: 'create-cod',\n      customer: order.customer\n    };\n    dispatch(updateStatusOrder(newOrder));\n  };\n\n  const approveAlert = item => {\n    confirmAlert({\n      title: 'Xc nhn',\n      message: 'Bn c chc chn mun duyt n hng ny?',\n      buttons: [\n        {\n          label: 'ng ',\n          onClick: approveOrder(item)\n        },\n        {\n          label: 'Hy'\n        }\n      ]\n    });\n  };\n\n  const cancelAlert = item => {\n    confirmAlert({\n      customUI: ({ onClose }) => {\n        return (\n          <div className=\"react-confirm-alert-body\">\n            <h1>Xc nhn</h1>\n            <p>Bn c chc chn mun hy n hng ny?</p>\n            <CTextarea placeholder=\"Nhp l do hy\" onChange={event => (rejectRef.current = event.target.value)} />\n            <div className=\"react-confirm-alert-button-group\">\n              <button onClick={onClose}>Khng</button>\n              <button\n                onClick={() => {\n                  cancelOrder(item);\n                  onClose();\n                }}\n              >\n                ng \n              </button>\n            </div>\n          </div>\n        );\n      }\n    });\n  };\n\n  const deleteAlert = item => {\n    confirmAlert({\n      title: 'Xc nhn',\n      message: 'Bn c chc chn mun xa n hng ny?',\n      buttons: [\n        {\n          label: 'ng ',\n          onClick: deleteOrder(item)\n        },\n        {\n          label: 'Hy'\n        }\n      ]\n    });\n  };\n\n  const codAlert = item => {\n    confirmAlert({\n      title: 'Xc nhn',\n      message: 'Bn c chc chn mun to vn n cho n hng ny?',\n      buttons: [\n        {\n          label: 'ng ',\n          onClick: createCodOrder(item)\n        },\n        {\n          label: 'Hy'\n        }\n      ]\n    });\n  };\n  const renderButtonStatus = item => {\n    switch (item.status) {\n      case OrderStatus.WAITING:\n        return (\n          <CCol>\n            {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/orders/approve').length > 0) && (\n              <CButton\n                onClick={event => {\n                  event.stopPropagation();\n                  approveAlert(item);\n                }}\n                color=\"success\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n                className=\"mr-1\"\n              >\n                DUYT N HNG\n              </CButton>\n            )}\n            {(isAdmin ||\n              item.createdBy === account.login ||\n              account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/orders/cancel').length > 0) && (\n              <CButton\n                onClick={event => {\n                  event.stopPropagation();\n                  cancelAlert(item);\n                }}\n                color=\"danger\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n              >\n                HY N HNG\n              </CButton>\n            )}\n            {(item.createdBy === account.login ||\n              isAdmin ||\n              account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/orders').length > 0) && (\n              <CButton\n                onClick={event => {\n                  event.stopPropagation();\n                  dispatch(addPermission({ method: 'PUT', entity: '/api/orders', isSelf: true }));\n                  toEditOrder(item.id);\n                }}\n                color=\"warning\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n              >\n                <CIcon name=\"cil-pencil\" />\n                CHNH SA\n              </CButton>\n            )}\n          </CCol>\n        );\n      case OrderStatus.APPROVED:\n        return (\n          <CCol>\n            {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/orders/create-cod').length > 0) && (\n              <CButton\n                onClick={event => {\n                  event.stopPropagation();\n                  codAlert(item);\n                }}\n                color=\"primary\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n              >\n                TO VN N\n              </CButton>\n            )}\n            {isAdmin ||\n              (account.branch?.allow && (\n                <CButton\n                  onClick={event => {\n                    event.stopPropagation();\n                    toEditOrder(item.id);\n                  }}\n                  color=\"warning\"\n                  variant=\"outline\"\n                  shape=\"square\"\n                  size=\"sm\"\n                >\n                  <CIcon name=\"cil-pencil\" />\n                  CHNH SA\n                </CButton>\n              ))}\n            {isAdmin ||\n              (account.branch?.allow && (\n                <CButton\n                  onClick={event => {\n                    event.stopPropagation();\n                    cancelAlert(item);\n                  }}\n                  color=\"danger\"\n                  variant=\"outline\"\n                  shape=\"square\"\n                  size=\"sm\"\n                >\n                  HY N HNG\n                </CButton>\n              ))}\n          </CCol>\n        );\n      case OrderStatus.CREATE_COD:\n        return (\n          <CButton\n            color=\"info\"\n            variant=\"outline\"\n            shape=\"square\"\n            size=\"sm\"\n            onClick={event => {\n              event.stopPropagation();\n              toSeeBill(item);\n            }}\n          >\n            XEM VN N\n          </CButton>\n        );\n      case OrderStatus.CANCEL:\n        return (\n          <CCol>\n            {(isAdmin || account.role.filter(rol => rol.method === 'PUT' && rol.entity === '/api/orders' && !rol.isSelf).length > 0) && (\n              <CButton\n                onClick={event => {\n                  event.stopPropagation();\n                  toEditOrder(item.id);\n                }}\n                color=\"warning\"\n                variant=\"outline\"\n                shape=\"square\"\n                size=\"sm\"\n                className=\"mr-1\"\n              >\n                <CIcon name=\"cil-pencil\" />\n                CHNH SA\n              </CButton>\n            )}\n            <CButton\n              onClick={event => {\n                event.stopPropagation();\n                deleteAlert(item);\n              }}\n              color=\"secondary\"\n              variant=\"outline\"\n              shape=\"square\"\n              size=\"sm\"\n              className=\"mr-1\"\n            >\n              XA N\n            </CButton>\n          </CCol>\n        );\n      default:\n        break;\n    }\n  };\n\n  const memoComputedItems = React.useCallback(items => computedItems(items), []);\n  const memoListed = React.useMemo(() => memoComputedItems(orders), [orders]);\n  const toDetailOrder = id => {\n    history.push(`${props.match.url}/${id}/detail`);\n  };\n  return (\n    <CCard>\n      <CCardHeader>\n        <CIcon name=\"cil-grid\" /> Danh sch n hng\n        {(isAdmin || account.role.filter(rol => rol.method === 'POST' && rol.entity === '/api/orders').length > 0) && (\n          <CButton color=\"success\" variant=\"outline\" className=\"ml-3\" onClick={toCreateOrder}>\n            <CIcon name=\"cil-plus\" /> Thm mi\n          </CButton>\n        )}\n      </CCardHeader>\n      <CCardBody>\n        <CButton color=\"primary\" className=\"mb-2\" href={csvCode} download=\"customertypes.csv\" target=\"_blank\">\n          Ti excel (.csv)\n        </CButton>\n        <CRow className=\"ml-0 mt-4\">\n          <CLabel>Tng :</CLabel>\n          <strong>{`\\u00a0\\u00a0${initialState.totalItem}`}</strong>\n        </CRow>\n        <CFormGroup row xs=\"12\" md=\"12\" lg=\"12\" className=\"ml-2 mt-3\">\n          <CFormGroup row>\n            <CCol>\n              <CLabel htmlFor=\"date-input\">T ngy</CLabel>\n            </CCol>\n            <CCol xs=\"12\" md=\"9\" lg=\"12\">\n              <CInput\n                type=\"date\"\n                id=\"date-input\"\n                onChange={e =>\n                  setDate({\n                    ...date,\n                    startDate: e.target.value\n                  })\n                }\n                name=\"date-input\"\n                placeholder=\"date\"\n              />\n            </CCol>\n          </CFormGroup>\n          <CFormGroup row className=\"ml-3\">\n            <CCol>\n              <CLabel htmlFor=\"date-input\">n ngy</CLabel>\n            </CCol>\n            <CCol xs=\"12\" md=\"9\" lg=\"12\">\n              <CInput\n                type=\"date\"\n                id=\"date-input\"\n                onChange={e =>\n                  setDate({\n                    ...date,\n                    endDate: e.target.value\n                  })\n                }\n                name=\"date-input\"\n                placeholder=\"date\"\n              />\n            </CCol>\n          </CFormGroup>\n        </CFormGroup>\n        <CDataTable\n          items={memoListed}\n          fields={fields}\n          columnFilter\n          itemsPerPageSelect={{ label: 'S lng trn mt trang', values: [50, 100, 150, 200] }}\n          itemsPerPage={size}\n          hover\n          sorter\n          noItemsView={{\n            noResults: 'Khng tm thy kt qu',\n            noItems: 'Khng c d liu'\n          }}\n          // loading\n          onPaginationChange={val => setSize(val)}\n          onColumnFilterChange={onFilterColumn}\n          onRowClick={val => toDetailOrder(val.id)}\n          columnFilterSlot={{\n            status: (\n              <div style={{ minWidth: 200 }}>\n                <Select\n                  onChange={item => {\n                    onFilterColumn({ ...paramRef.current, status: item?.value || '' });\n                  }}\n                  isClearable\n                  placeholder=\"Chn trng thi\"\n                  options={statusList.map(item => ({\n                    value: item.value,\n                    label: item.label\n                  }))}\n                />\n              </div>\n            )\n          }}\n          scopedSlots={{\n            order: (item, index) => <td>{(activePage - 1) * size + index + 1}</td>,\n            status: item => (\n              <td>\n                <CBadge color={getBadge(item.status)}>{mappingStatus[item.status]}</CBadge>\n              </td>\n            ),\n            createdDate: item => <td>{item.createdDate.substr(0, 10)}</td>,\n\n            show_details: item => {\n              return (\n                <td className=\"py-2 d-flex\">\n                  <CButton\n                    color=\"primary\"\n                    variant=\"outline\"\n                    shape=\"square\"\n                    size=\"sm\"\n                    onClick={event => {\n                      event.stopPropagation();\n                      toggleDetails(item.id);\n                    }}\n                  >\n                    <CIcon name=\"cilZoom\" />\n                  </CButton>\n                </td>\n              );\n            },\n            action: item => {\n              return <td className=\"py-2 d-flex\">{renderButtonStatus(item)}</td>;\n            },\n            details: item => {\n              return (\n                <CCollapse show={details.includes(item.id)}>\n                  <CCardBody>\n                    <h5>Thng tin n hng</h5>\n                    <CRow className=\"mb-4\">\n                      <CCol sm=\"4\">\n                        <h6 className=\"mb-3\">Ti:</h6>\n                        <div>\n                          <strong>{item?.customer.name}</strong>\n                        </div>\n                        <div>{item?.address}</div>\n                        <div>{`${district.filter(dist => dist.value === item?.customer?.district)[0]?.label || ''}, ${cities.filter(\n                          city => city.value === item?.customer?.city\n                        )[0]?.label || ''}`}</div>{' '}\n                        <div>Phone: {item?.customer.tel}</div>\n                      </CCol>\n                      <CCol sm=\"4\">\n                        <h6 className=\"mb-3\">Chng trnh bn hng:</h6>\n                        <div>\n                          <strong> {item?.promotion?.name}</strong>\n                        </div>\n                        <div>\n                          {item?.promotion?.description.length > 30\n                            ? `${item?.promotion?.description.substring(0, 30)}`\n                            : item?.promotion?.description}\n                        </div>\n                        <div>Loi khch hng: {item?.promotion?.customerType?.name}</div>\n                      </CCol>\n                    </CRow>\n                    <Table striped responsive>\n                      <thead>\n                        <tr>\n                          <th className=\"center\">#</th>\n                          <th>Tn sn phm</th>\n                          <th>Dung tch</th>\n                          <th className=\"center\">S lng</th>\n                          <th className=\"right\">n gi</th>\n                          <th className=\"right\">Chit khu(%)</th>\n                          <th className=\"right\">Tng</th>\n                          <th className=\"right\">Thnh tin</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {JSON.parse(JSON.stringify(item?.orderDetails || [])).map((item, index) => {\n                          return (\n                            <tr key={index}>\n                              <td>{index + 1}</td>\n                              <td>{item.product?.name}</td>\n                              <td>{item.product?.volume}</td>\n                              <td>{item.quantity}</td>\n                              <td>\n                                {Number(item.priceReal || item.product?.price).toLocaleString('it-IT', {\n                                  style: 'currency',\n                                  currency: 'VND'\n                                }) || ''}\n                              </td>\n                              <td>{item.reducePercent}%</td>\n                              <td>\n                                {(Number(item.priceReal || item.product?.price) * item.quantity).toLocaleString('it-IT', {\n                                  style: 'currency',\n                                  currency: 'VND'\n                                }) || ''}\n                              </td>\n                              <td>\n                                {(\n                                  Number(item.priceReal || item.product?.price) * item.quantity -\n                                  (Number(item.priceReal || item.product?.price) * item.quantity * item.reducePercent) / 100\n                                ).toLocaleString('it-IT', {\n                                  style: 'currency',\n                                  currency: 'VND'\n                                }) || ''}\n                              </td>\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </Table>\n                    <CRow>\n                      <CCol lg=\"4\" sm=\"5\">\n                        Ghi ch: <strong>{item?.note}</strong>\n                        {item.status === 'CANCEL' && (\n                          <div>\n                            L do hy: <strong>{item?.reject}</strong>\n                          </div>\n                        )}\n                      </CCol>\n                      <CCol lg=\"4\" sm=\"5\" className=\"ml-auto\">\n                        <Table className=\"table-clear\">\n                          <tbody>\n                            <tr>\n                              <td className=\"left\">\n                                <strong>Tng s lng</strong>\n                              </td>\n                              <td className=\"right\">{item?.orderDetails.reduce((sum, current) => sum + current.quantity, 0) || ''}</td>\n                            </tr>\n                            <tr>\n                              <td className=\"left\">\n                                <strong>Tng tin</strong>\n                              </td>\n                              <td className=\"right\">\n                                {Number(item?.totalMoney || '0').toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                              </td>\n                            </tr>\n                            <tr>\n                              <td className=\"left\">\n                                <strong>Chit khu</strong>\n                              </td>\n                              <td className=\"right\">\n                                {Number(item?.reduceMoney || '0').toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                              </td>\n                            </tr>\n                            <tr>\n                              <td className=\"left\">\n                                <strong>Tin thanh ton</strong>\n                              </td>\n                              <td className=\"right\">\n                                <strong>\n                                  {Number(item?.realMoney || '0').toLocaleString('it-IT', { style: 'currency', currency: 'VND' }) || ''}\n                                </strong>\n                              </td>\n                            </tr>\n                          </tbody>\n                        </Table>\n                      </CCol>\n                    </CRow>\n                  </CCardBody>\n                </CCollapse>\n              );\n            }\n          }}\n        />\n        <CPagination\n          activePage={activePage}\n          pages={Math.floor(initialState.totalItem / 20) + 1}\n          onActivePageChange={i => setActivePage(i)}\n        />\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default Order;\n"]}]}