{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/login/authenticate.reducer.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/login/authenticate.reducer.js","mtime":1608230988858},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9leHRyYVJlZHVjZXJzOwoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgppbXBvcnQgeyBjcmVhdGVBc3luY1RodW5rLCBjcmVhdGVTbGljZSB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBTdG9yYWdlIH0gZnJvbSAncmVhY3QtamhpcHN0ZXInOwp2YXIgQVVUSF9UT0tFTl9LRVkgPSAnYXV0aGVudGljYXRpb25Ub2tlbic7CnZhciBpbml0aWFsU3RhdGUgPSB7CiAgbG9hZGluZzogZmFsc2UsCiAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSwKICBsb2dpblN1Y2Nlc3M6IGZhbHNlLAogIGxvZ2luRXJyb3I6IGZhbHNlLAogIC8vIEVycm9ycyByZXR1cm5lZCBmcm9tIHNlcnZlciBzaWRlCiAgYWNjb3VudDoge30sCiAgZXJyb3JNZXNzYWdlOiBudWxsLAogIC8vIEVycm9ycyByZXR1cm5lZCBmcm9tIHNlcnZlciBzaWRlCiAgcmVkaXJlY3RNZXNzYWdlOiBudWxsLAogIHNlc3Npb25IYXNCZWVuRmV0Y2hlZDogZmFsc2UsCiAgaWRUb2tlbjogbnVsbCwKICBsb2dvdXRVcmw6IG51bGwKfTsKZXhwb3J0IHZhciBsb2dpbiA9IGNyZWF0ZUFzeW5jVGh1bmsoJ2FwaS9hdXRoZW50aWNhdGUnLCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShfcmVmLCB0aHVua0FQSSkgewogICAgdmFyIHVzZXJuYW1lLCBwYXNzd29yZCwgcmVtZW1iZXJNZSwgcmVzdWx0LCBiZWFyZXJUb2tlbiwgand0OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB1c2VybmFtZSA9IF9yZWYudXNlcm5hbWUsIHBhc3N3b3JkID0gX3JlZi5wYXNzd29yZCwgcmVtZW1iZXJNZSA9IF9yZWYucmVtZW1iZXJNZTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnYXBpL2F1dGhlbnRpY2F0ZScsIHsKICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgICAgICAgICAgIHJlbWVtYmVyTWU6IHJlbWVtYmVyTWUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBiZWFyZXJUb2tlbiA9IHJlc3VsdC5kYXRhLmlkX3Rva2VuOwoKICAgICAgICAgICAgaWYgKGJlYXJlclRva2VuKSB7CiAgICAgICAgICAgICAgand0ID0gYmVhcmVyVG9rZW47CgogICAgICAgICAgICAgIGlmIChyZW1lbWJlck1lKSB7CiAgICAgICAgICAgICAgICBTdG9yYWdlLmxvY2FsLnNldChBVVRIX1RPS0VOX0tFWSwgand0KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgU3RvcmFnZS5zZXNzaW9uLnNldChBVVRIX1RPS0VOX0tFWSwgand0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICByZXR1cm4gdGh1bmtBUEkuZGlzcGF0Y2goZ2V0U2Vzc2lvbigpKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB0aHVua0FQSS5yZWplY3RXaXRoVmFsdWUoX2NvbnRleHQudDAucmVzcG9uc2UuZGF0YSkpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCAxMV1dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MikgewogICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKZXhwb3J0IHZhciBnZXRTZXNzaW9uID0gY3JlYXRlQXN5bmNUaHVuaygnYXBpL2FjY291bnQnLCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodGh1bmtBUEkpIHsKICAgIHZhciBhY2NvdW50UmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldCgnYXBpL2FjY291bnQnKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGFjY291bnRSZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgYWNjb3VudFJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA3OwogICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB0aHVua0FQSS5yZWplY3RXaXRoVmFsdWUoX2NvbnRleHQyLnQwLnJlc3BvbnNlLmRhdGEpKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1swLCA3XV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHsKICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CnZhciBzbGljZSA9IGNyZWF0ZVNsaWNlKHsKICBuYW1lOiAndXNlcicsCiAgaW5pdGlhbFN0YXRlOiBpbml0aWFsU3RhdGUsCiAgcmVkdWNlcnM6IHsKICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIHJlcXVlc3Qoc3RhdGUsIGFjdGlvbikgewogICAgICBzdGF0ZS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgc3RhdGUuZXJyb3JNZXNzYWdlID0gbnVsbDsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChzdGF0ZSwgYWN0aW9uKSB7CiAgICAgIHN0YXRlID0gaW5pdGlhbFN0YXRlOwogICAgfSwKICAgIGNsZWFyQXV0aFRva2VuOiBmdW5jdGlvbiBjbGVhckF1dGhUb2tlbigpIHsKICAgICAgaWYgKFN0b3JhZ2UubG9jYWwuZ2V0KEFVVEhfVE9LRU5fS0VZKSkgewogICAgICAgIFN0b3JhZ2UubG9jYWwucmVtb3ZlKEFVVEhfVE9LRU5fS0VZKTsKICAgICAgfQoKICAgICAgaWYgKFN0b3JhZ2Uuc2Vzc2lvbi5nZXQoQVVUSF9UT0tFTl9LRVkpKSB7CiAgICAgICAgU3RvcmFnZS5zZXNzaW9uLnJlbW92ZShBVVRIX1RPS0VOX0tFWSk7CiAgICAgIH0KICAgIH0KICB9LAogIGV4dHJhUmVkdWNlcnM6IChfZXh0cmFSZWR1Y2VycyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2V4dHJhUmVkdWNlcnMsIGxvZ2luLmZ1bGZpbGxlZCwgZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHsKICAgIHN0YXRlLmxvZ2luU3VjY2VzcyA9IHRydWU7CiAgICBzdGF0ZS5sb2FkaW5nID0gZmFsc2U7CiAgICBzdGF0ZS5sb2dpbkVycm9yID0gZmFsc2U7CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfZXh0cmFSZWR1Y2VycywgZ2V0U2Vzc2lvbi5mdWxmaWxsZWQsIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7CiAgICB2YXIgaXNBdXRoZW50aWNhdGVkID0gYWN0aW9uLnBheWxvYWQgJiYgYWN0aW9uLnBheWxvYWQuYWN0aXZhdGVkOwogICAgc3RhdGUuYWNjb3VudCA9IGFjdGlvbi5wYXlsb2FkOwogICAgc3RhdGUuaXNBdXRoZW50aWNhdGVkID0gaXNBdXRoZW50aWNhdGVkOwogICAgc3RhdGUubG9hZGluZyA9IGZhbHNlOwogICAgc3RhdGUuc2Vzc2lvbkhhc0JlZW5GZXRjaGVkID0gdHJ1ZTsKICB9KSwgX2RlZmluZVByb3BlcnR5KF9leHRyYVJlZHVjZXJzLCBsb2dpbi5yZWplY3RlZCwgZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHsKICAgIHN0YXRlLmxvZ2luRXJyb3IgPSBhY3Rpb24ucGF5bG9hZC5zdGF0dXNDb2RlOwogICAgc3RhdGUuZXJyb3JNZXNzYWdlID0gYWN0aW9uLnBheWxvYWQubWVzc2FnZTsKICB9KSwgX2V4dHJhUmVkdWNlcnMpCn0pOwpleHBvcnQgZGVmYXVsdCBzbGljZS5yZWR1Y2VyOyAvLyBBY3Rpb25zCgp2YXIgX3NsaWNlJGFjdGlvbnMgPSBzbGljZS5hY3Rpb25zLAogICAgcmVxdWVzdCA9IF9zbGljZSRhY3Rpb25zLnJlcXVlc3QsCiAgICBsb2dvdXQgPSBfc2xpY2UkYWN0aW9ucy5sb2dvdXQsCiAgICBjbGVhckF1dGhUb2tlbiA9IF9zbGljZSRhY3Rpb25zLmNsZWFyQXV0aFRva2VuOyAvLyBleHBvcnQgY29uc3QgbG9naW4gPSAodXNlcm5hbWUsIHBhc3N3b3JkLCByZW1lbWJlck1lID0gZmFsc2UpID0+IGFzeW5jICgKLy8gICBkaXNwYXRjaCwKLy8gICBnZXRTdGF0ZQovLyApID0+IHsKLy8gICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNwYXRjaCh7Ci8vICAgICB0eXBlOiBBQ1RJT05fVFlQRVMuTE9HSU4sCi8vICAgICBwYXlsb2FkOiBheGlvcy5wb3N0KCJhcGkvYXV0aGVudGljYXRlIiwgeyB1c2VybmFtZSwgcGFzc3dvcmQsIHJlbWVtYmVyTWUgfSksCi8vICAgfSk7Ci8vICAgY29uc3QgYmVhcmVyVG9rZW4gPSByZXN1bHQudmFsdWUuaGVhZGVycy5hdXRob3JpemF0aW9uOwovLyAgIGlmIChiZWFyZXJUb2tlbiAmJiBiZWFyZXJUb2tlbi5zbGljZSgwLCA3KSA9PT0gIkJlYXJlciAiKSB7Ci8vICAgICBjb25zdCBqd3QgPSBiZWFyZXJUb2tlbi5zbGljZSg3LCBiZWFyZXJUb2tlbi5sZW5ndGgpOwovLyAgICAgaWYgKHJlbWVtYmVyTWUpIHsKLy8gICAgICAgU3RvcmFnZS5sb2NhbC5zZXQoQVVUSF9UT0tFTl9LRVksIGp3dCk7Ci8vICAgICB9IGVsc2UgewovLyAgICAgICBTdG9yYWdlLnNlc3Npb24uc2V0KEFVVEhfVE9LRU5fS0VZLCBqd3QpOwovLyAgICAgfQovLyAgIH0KLy8gICBhd2FpdCBkaXNwYXRjaChnZXRTZXNzaW9uKCkpOwovLyB9Ow=="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/login/authenticate.reducer.js"],"names":["createAsyncThunk","createSlice","axios","Storage","AUTH_TOKEN_KEY","initialState","loading","isAuthenticated","loginSuccess","loginError","account","errorMessage","redirectMessage","sessionHasBeenFetched","idToken","logoutUrl","login","thunkAPI","username","password","rememberMe","post","result","bearerToken","data","id_token","jwt","local","set","session","dispatch","getSession","rejectWithValue","response","get","accountResponse","slice","name","reducers","request","state","action","logout","clearAuthToken","remove","extraReducers","fulfilled","payload","activated","rejected","statusCode","message","reducer","actions"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { Storage } from 'react-jhipster';\nconst AUTH_TOKEN_KEY = 'authenticationToken';\n\nconst initialState = {\n  loading: false,\n  isAuthenticated: false,\n  loginSuccess: false,\n  loginError: false, // Errors returned from server side\n  account: {},\n  errorMessage: null, // Errors returned from server side\n  redirectMessage: null,\n  sessionHasBeenFetched: false,\n  idToken: null,\n  logoutUrl: null,\n};\nexport const login = createAsyncThunk('api/authenticate', async ({ username, password, rememberMe }, thunkAPI) => {\n  try {\n    const result = await axios.post('api/authenticate', {\n      username,\n      password,\n      rememberMe,\n    });\n    const bearerToken = result.data.id_token;\n    if (bearerToken) {\n      const jwt = bearerToken;\n      if (rememberMe) {\n        Storage.local.set(AUTH_TOKEN_KEY, jwt);\n      } else {\n        Storage.session.set(AUTH_TOKEN_KEY, jwt);\n      }\n    }\n    await thunkAPI.dispatch(getSession());\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.response.data);\n  }\n});\n\nexport const getSession = createAsyncThunk('api/account', async thunkAPI => {\n  try {\n    const accountResponse = await axios.get('api/account');\n    return accountResponse.data;\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.response.data);\n  }\n});\n\nconst slice = createSlice({\n  name: 'user',\n  initialState: initialState,\n  reducers: {\n    request: (state, action) => {\n      state.loading = true;\n      state.errorMessage = null;\n    },\n    logout: (state, action) => {\n      state = initialState;\n    },\n    clearAuthToken: () => {\n      if (Storage.local.get(AUTH_TOKEN_KEY)) {\n        Storage.local.remove(AUTH_TOKEN_KEY);\n      }\n      if (Storage.session.get(AUTH_TOKEN_KEY)) {\n        Storage.session.remove(AUTH_TOKEN_KEY);\n      }\n    },\n  },\n  extraReducers: {\n    // Add reducers for additional action types here, and handle loading state as needed\n    [login.fulfilled]: (state, action) => {\n      state.loginSuccess = true;\n      state.loading = false;\n      state.loginError = false;\n    },\n    [getSession.fulfilled]: (state, action) => {\n      const isAuthenticated = action.payload && action.payload.activated;\n      state.account = action.payload;\n      state.isAuthenticated = isAuthenticated;\n      state.loading = false;\n      state.sessionHasBeenFetched = true;\n    },\n    [login.rejected]: (state, action) => {\n      state.loginError = action.payload.statusCode;\n      state.errorMessage = action.payload.message;\n    },\n  },\n});\n\nexport default slice.reducer;\n\n// Actions\n\nconst { request, logout, clearAuthToken } = slice.actions;\n\n// export const login = (username, password, rememberMe = false) => async (\n//   dispatch,\n//   getState\n// ) => {\n//   const result = await dispatch({\n//     type: ACTION_TYPES.LOGIN,\n//     payload: axios.post(\"api/authenticate\", { username, password, rememberMe }),\n//   });\n//   const bearerToken = result.value.headers.authorization;\n//   if (bearerToken && bearerToken.slice(0, 7) === \"Bearer \") {\n//     const jwt = bearerToken.slice(7, bearerToken.length);\n//     if (rememberMe) {\n//       Storage.local.set(AUTH_TOKEN_KEY, jwt);\n//     } else {\n//       Storage.session.set(AUTH_TOKEN_KEY, jwt);\n//     }\n//   }\n//   await dispatch(getSession());\n// };\n"]}]}