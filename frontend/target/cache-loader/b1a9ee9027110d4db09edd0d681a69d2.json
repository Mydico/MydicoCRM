{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/login/authenticate.reducer.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/login/authenticate.reducer.js","mtime":1619209863619},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9leHRyYVJlZHVjZXJzOwoKZnVuY3Rpb24gX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShvYmopIHsgaWYgKG9iaiA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgZGVzdHJ1Y3R1cmUgdW5kZWZpbmVkIik7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQoKaW1wb3J0IHsgY3JlYXRlQXN5bmNUaHVuaywgY3JlYXRlU2xpY2UgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgU3RvcmFnZSB9IGZyb20gJ3JlYWN0LWpoaXBzdGVyJzsKdmFyIEFVVEhfVE9LRU5fS0VZID0gJ2F1dGhlbnRpY2F0aW9uVG9rZW4nOwp2YXIgaW5pdGlhbFN0YXRlID0gewogIGxvYWRpbmc6IGZhbHNlLAogIGlzQXV0aGVudGljYXRlZDogZmFsc2UsCiAgbG9naW5TdWNjZXNzOiBmYWxzZSwKICBsb2dpbkVycm9yOiBmYWxzZSwKICAvLyBFcnJvcnMgcmV0dXJuZWQgZnJvbSBzZXJ2ZXIgc2lkZQogIGFjY291bnQ6IHt9LAogIGVycm9yTWVzc2FnZTogbnVsbCwKICAvLyBFcnJvcnMgcmV0dXJuZWQgZnJvbSBzZXJ2ZXIgc2lkZQogIHJlZGlyZWN0TWVzc2FnZTogbnVsbCwKICBzZXNzaW9uSGFzQmVlbkZldGNoZWQ6IGZhbHNlLAogIGlkVG9rZW46IG51bGwsCiAgbG9nb3V0VXJsOiBudWxsCn07CmV4cG9ydCB2YXIgbG9naW4gPSBjcmVhdGVBc3luY1RodW5rKCdhcGkvYXV0aGVudGljYXRlJywgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZiwgdGh1bmtBUEkpIHsKICAgIHZhciB1c2VybmFtZSwgcGFzc3dvcmQsIHJlbWVtYmVyTWUsIHJlc3VsdCwgYmVhcmVyVG9rZW4sIGp3dDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdXNlcm5hbWUgPSBfcmVmLnVzZXJuYW1lLCBwYXNzd29yZCA9IF9yZWYucGFzc3dvcmQsIHJlbWVtYmVyTWUgPSBfcmVmLnJlbWVtYmVyTWU7CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJ2FwaS9hdXRoZW50aWNhdGUnLCB7CiAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgICAgICAgICByZW1lbWJlck1lOiByZW1lbWJlck1lCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgYmVhcmVyVG9rZW4gPSByZXN1bHQuZGF0YS5pZF90b2tlbjsKCiAgICAgICAgICAgIGlmIChiZWFyZXJUb2tlbikgewogICAgICAgICAgICAgIGp3dCA9IGJlYXJlclRva2VuOwoKICAgICAgICAgICAgICBpZiAocmVtZW1iZXJNZSkgewogICAgICAgICAgICAgICAgU3RvcmFnZS5sb2NhbC5zZXQoQVVUSF9UT0tFTl9LRVksIGp3dCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIFN0b3JhZ2Uuc2Vzc2lvbi5zZXQoQVVUSF9UT0tFTl9LRVksIGp3dCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgcmV0dXJuIHRodW5rQVBJLmRpc3BhdGNoKGdldFNlc3Npb24oKSk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgdGh1bmtBUEkucmVqZWN0V2l0aFZhbHVlKF9jb250ZXh0LnQwLnJlc3BvbnNlLmRhdGEpKTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTFdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHsKICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CmV4cG9ydCB2YXIgZ2V0U2Vzc2lvbiA9IGNyZWF0ZUFzeW5jVGh1bmsoJ2FwaS9hY2NvdW50JywgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHRodW5rQVBJKSB7CiAgICB2YXIgYWNjb3VudFJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoJ2FwaS9hY2NvdW50Jyk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBhY2NvdW50UmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGFjY291bnRSZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNzsKICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgdGh1bmtBUEkucmVqZWN0V2l0aFZhbHVlKF9jb250ZXh0Mi50MC5yZXNwb25zZS5kYXRhKSk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gzKSB7CiAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwp2YXIgc2xpY2UgPSBjcmVhdGVTbGljZSh7CiAgbmFtZTogJ3VzZXInLAogIGluaXRpYWxTdGF0ZTogaW5pdGlhbFN0YXRlLAogIHJlZHVjZXJzOiB7CiAgICByZXF1ZXN0OiBmdW5jdGlvbiByZXF1ZXN0KHN0YXRlKSB7CiAgICAgIHN0YXRlLmxvYWRpbmcgPSB0cnVlOwogICAgICBzdGF0ZS5lcnJvck1lc3NhZ2UgPSBudWxsOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlID0gaW5pdGlhbFN0YXRlOwogICAgfSwKICAgIGNsZWFyQXV0aFRva2VuOiBmdW5jdGlvbiBjbGVhckF1dGhUb2tlbigpIHsKICAgICAgaWYgKFN0b3JhZ2UubG9jYWwuZ2V0KEFVVEhfVE9LRU5fS0VZKSkgewogICAgICAgIFN0b3JhZ2UubG9jYWwucmVtb3ZlKEFVVEhfVE9LRU5fS0VZKTsKICAgICAgfQoKICAgICAgaWYgKFN0b3JhZ2Uuc2Vzc2lvbi5nZXQoQVVUSF9UT0tFTl9LRVkpKSB7CiAgICAgICAgU3RvcmFnZS5zZXNzaW9uLnJlbW92ZShBVVRIX1RPS0VOX0tFWSk7CiAgICAgIH0KICAgIH0KICB9LAogIGV4dHJhUmVkdWNlcnM6IChfZXh0cmFSZWR1Y2VycyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2V4dHJhUmVkdWNlcnMsIGxvZ2luLmZ1bGZpbGxlZCwgZnVuY3Rpb24gKHN0YXRlKSB7CiAgICBzdGF0ZS5sb2dpblN1Y2Nlc3MgPSB0cnVlOwogICAgc3RhdGUubG9hZGluZyA9IGZhbHNlOwogICAgc3RhdGUubG9naW5FcnJvciA9IGZhbHNlOwogIH0pLCBfZGVmaW5lUHJvcGVydHkoX2V4dHJhUmVkdWNlcnMsIGdldFNlc3Npb24uZnVsZmlsbGVkLCBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikgewogICAgdmFyIGlzQXV0aGVudGljYXRlZCA9IGFjdGlvbi5wYXlsb2FkICYmIGFjdGlvbi5wYXlsb2FkLmFjdGl2YXRlZDsKICAgIHN0YXRlLmFjY291bnQgPSBhY3Rpb24ucGF5bG9hZDsKICAgIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IGlzQXV0aGVudGljYXRlZDsKICAgIHN0YXRlLmxvYWRpbmcgPSBmYWxzZTsKICAgIHN0YXRlLnNlc3Npb25IYXNCZWVuRmV0Y2hlZCA9IHRydWU7CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfZXh0cmFSZWR1Y2VycywgbG9naW4ucmVqZWN0ZWQsIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7CiAgICBzdGF0ZS5sb2dpbkVycm9yID0gYWN0aW9uLnBheWxvYWQuc3RhdHVzQ29kZTsKICAgIHN0YXRlLmVycm9yTWVzc2FnZSA9IGFjdGlvbi5wYXlsb2FkLm1lc3NhZ2U7CiAgfSksIF9leHRyYVJlZHVjZXJzKQp9KTsKZXhwb3J0IGRlZmF1bHQgc2xpY2UucmVkdWNlcjsgLy8gQWN0aW9ucwoKX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShzbGljZS5hY3Rpb25zKTsgLy8gZXhwb3J0IGNvbnN0IGxvZ2luID0gKHVzZXJuYW1lLCBwYXNzd29yZCwgcmVtZW1iZXJNZSA9IGZhbHNlKSA9PiBhc3luYyAoCi8vICAgZGlzcGF0Y2gsCi8vICAgZ2V0U3RhdGUKLy8gKSA9PiB7Ci8vICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzcGF0Y2goewovLyAgICAgdHlwZTogQUNUSU9OX1RZUEVTLkxPR0lOLAovLyAgICAgcGF5bG9hZDogYXhpb3MucG9zdCgiYXBpL2F1dGhlbnRpY2F0ZSIsIHsgdXNlcm5hbWUsIHBhc3N3b3JkLCByZW1lbWJlck1lIH0pLAovLyAgIH0pOwovLyAgIGNvbnN0IGJlYXJlclRva2VuID0gcmVzdWx0LnZhbHVlLmhlYWRlcnMuYXV0aG9yaXphdGlvbjsKLy8gICBpZiAoYmVhcmVyVG9rZW4gJiYgYmVhcmVyVG9rZW4uc2xpY2UoMCwgNykgPT09ICJCZWFyZXIgIikgewovLyAgICAgY29uc3Qgand0ID0gYmVhcmVyVG9rZW4uc2xpY2UoNywgYmVhcmVyVG9rZW4ubGVuZ3RoKTsKLy8gICAgIGlmIChyZW1lbWJlck1lKSB7Ci8vICAgICAgIFN0b3JhZ2UubG9jYWwuc2V0KEFVVEhfVE9LRU5fS0VZLCBqd3QpOwovLyAgICAgfSBlbHNlIHsKLy8gICAgICAgU3RvcmFnZS5zZXNzaW9uLnNldChBVVRIX1RPS0VOX0tFWSwgand0KTsKLy8gICAgIH0KLy8gICB9Ci8vICAgYXdhaXQgZGlzcGF0Y2goZ2V0U2Vzc2lvbigpKTsKLy8gfTs="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/login/authenticate.reducer.js"],"names":["createAsyncThunk","createSlice","axios","Storage","AUTH_TOKEN_KEY","initialState","loading","isAuthenticated","loginSuccess","loginError","account","errorMessage","redirectMessage","sessionHasBeenFetched","idToken","logoutUrl","login","thunkAPI","username","password","rememberMe","post","result","bearerToken","data","id_token","jwt","local","set","session","dispatch","getSession","rejectWithValue","response","get","accountResponse","slice","name","reducers","request","state","logout","clearAuthToken","remove","extraReducers","fulfilled","action","payload","activated","rejected","statusCode","message","reducer","actions"],"mappings":"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","sourcesContent":["import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport {Storage} from 'react-jhipster';\nconst AUTH_TOKEN_KEY = 'authenticationToken';\n\nconst initialState = {\n  loading: false,\n  isAuthenticated: false,\n  loginSuccess: false,\n  loginError: false, // Errors returned from server side\n  account: {},\n  errorMessage: null, // Errors returned from server side\n  redirectMessage: null,\n  sessionHasBeenFetched: false,\n  idToken: null,\n  logoutUrl: null,\n};\nexport const login = createAsyncThunk('api/authenticate', async ({username, password, rememberMe}, thunkAPI) => {\n  try {\n    const result = await axios.post('api/authenticate', {\n      username,\n      password,\n      rememberMe,\n    });\n    const bearerToken = result.data.id_token;\n    if (bearerToken) {\n      const jwt = bearerToken;\n      if (rememberMe) {\n        Storage.local.set(AUTH_TOKEN_KEY, jwt);\n      } else {\n        Storage.session.set(AUTH_TOKEN_KEY, jwt);\n      }\n    }\n    await thunkAPI.dispatch(getSession());\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.response.data);\n  }\n});\n\nexport const getSession = createAsyncThunk('api/account', async (thunkAPI) => {\n  try {\n    const accountResponse = await axios.get('api/account');\n    return accountResponse.data;\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.response.data);\n  }\n});\n\nconst slice = createSlice({\n  name: 'user',\n  initialState: initialState,\n  reducers: {\n    request: (state ) => {\n      state.loading = true;\n      state.errorMessage = null;\n    },\n    logout: (state ) => {\n      state = initialState;\n    },\n    clearAuthToken: () => {\n      if (Storage.local.get(AUTH_TOKEN_KEY)) {\n        Storage.local.remove(AUTH_TOKEN_KEY);\n      }\n      if (Storage.session.get(AUTH_TOKEN_KEY)) {\n        Storage.session.remove(AUTH_TOKEN_KEY);\n      }\n    },\n  },\n  extraReducers: {\n    // Add reducers for additional action types here, and handle loading state as needed\n    [login.fulfilled]: (state ) => {\n      state.loginSuccess = true;\n      state.loading = false;\n      state.loginError = false;\n    },\n    [getSession.fulfilled]: (state, action) => {\n      const isAuthenticated = action.payload && action.payload.activated;\n      state.account = action.payload;\n      state.isAuthenticated = isAuthenticated;\n      state.loading = false;\n      state.sessionHasBeenFetched = true;\n    },\n    [login.rejected]: (state, action) => {\n      state.loginError = action.payload.statusCode;\n      state.errorMessage = action.payload.message;\n    },\n  },\n});\n\nexport default slice.reducer;\n\n// Actions\n\nconst {} = slice.actions;\n\n// export const login = (username, password, rememberMe = false) => async (\n//   dispatch,\n//   getState\n// ) => {\n//   const result = await dispatch({\n//     type: ACTION_TYPES.LOGIN,\n//     payload: axios.post(\"api/authenticate\", { username, password, rememberMe }),\n//   });\n//   const bearerToken = result.value.headers.authorization;\n//   if (bearerToken && bearerToken.slice(0, 7) === \"Bearer \") {\n//     const jwt = bearerToken.slice(7, bearerToken.length);\n//     if (rememberMe) {\n//       Storage.local.set(AUTH_TOKEN_KEY, jwt);\n//     } else {\n//       Storage.session.set(AUTH_TOKEN_KEY, jwt);\n//     }\n//   }\n//   await dispatch(getSession());\n// };\n"]}]}