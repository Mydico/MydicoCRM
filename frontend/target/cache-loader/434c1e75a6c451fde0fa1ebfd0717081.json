{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/product/ProductList/EditProduct.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/product/ProductList/EditProduct.js","mtime":1619211432175},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90ZW1wbGF0ZU9iamVjdDsKCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAodHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAidW5kZWZpbmVkIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoc3RyaW5ncywgcmF3KSB7IGlmICghcmF3KSB7IHJhdyA9IHN0cmluZ3Muc2xpY2UoMCk7IH0gcmV0dXJuIE9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3RyaW5ncywgeyByYXc6IHsgdmFsdWU6IE9iamVjdC5mcmVlemUocmF3KSB9IH0pKTsgfQoKaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgQ0J1dHRvbiwgQ0NhcmQsIENDYXJkSGVhZGVyLCBDQ2FyZEJvZHksIENDb2wsIENGb3JtLCBDSW52YWxpZEZlZWRiYWNrLCBDRm9ybUdyb3VwLCBDTGFiZWwsIENJbnB1dCwgQ1JvdywgQ0NhcmRUaXRsZSB9IGZyb20gJ0Bjb3JldWkvcmVhY3QnOwppbXBvcnQgQ0ljb24gZnJvbSAnQGNvcmV1aS9pY29ucy1yZWFjdCc7CmltcG9ydCB7IEZvcm1payB9IGZyb20gJ2Zvcm1payc7CmltcG9ydCAqIGFzIFl1cCBmcm9tICd5dXAnOwppbXBvcnQgeyB1c2VEaXNwYXRjaCwgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCB7IGdldERldGFpbFByb2R1Y3QsIHVwZGF0ZVByb2R1Y3QgfSBmcm9tICcuL3Byb2R1Y3QuYXBpJzsKaW1wb3J0IHsgZ2V0UHJvZHVjdEdyb3VwIH0gZnJvbSAnLi4vUHJvZHVjdEdyb3VwL3Byb2R1Y3QtZ3JvdXAuYXBpJzsKaW1wb3J0IFNlbGVjdCBmcm9tICdyZWFjdC1zZWxlY3QnOwppbXBvcnQgeyB1c2VIaXN0b3J5IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IGZldGNoaW5nLCBnbG9iYWxpemVkUHJvZHVjdFNlbGVjdG9ycyB9IGZyb20gJy4vcHJvZHVjdC5yZWR1Y2VyJzsKaW1wb3J0IHsgZ2xvYmFsaXplZHByb2R1Y3RHcm91cHNTZWxlY3RvcnMgfSBmcm9tICcuLi9Qcm9kdWN0R3JvdXAvcHJvZHVjdC1ncm91cC5yZWR1Y2VyJzsKaW1wb3J0IHsgUHJvZHVjdFN0YXR1cywgVW5pdFR5cGUgfSBmcm9tICcuL2NvbnRhbnRzJzsKaW1wb3J0IHsgbWFwcGluZ1N0YXR1cyB9IGZyb20gJy4vQ3JlYXRlUHJvZHVjdCc7CmltcG9ydCBEcm9wem9uZSBmcm9tICdyZWFjdC1kcm9wem9uZS11cGxvYWRlcic7CmltcG9ydCAncmVhY3QtZHJvcHpvbmUtdXBsb2FkZXIvZGlzdC9zdHlsZXMuY3NzJzsKaW1wb3J0IEN1cnJlbmN5SW5wdXQgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9jdXJyZW5jeS1pbnB1dC9jdXJyZW5jeS1pbnB1dCc7CmltcG9ydCB7IGdldENvZGVCeU5hbWUgfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvdXRpbHMvbm9ybWFsaXplJzsKCnZhciB2YWxpZGF0aW9uU2NoZW1hID0gZnVuY3Rpb24gdmFsaWRhdGlvblNjaGVtYSgpIHsKICByZXR1cm4gWXVwLm9iamVjdCgpLnNoYXBlKHsKICAgIG5hbWU6IFl1cC5zdHJpbmcoKS5taW4oNShfdGVtcGxhdGVPYmplY3QgfHwgKF90ZW1wbGF0ZU9iamVjdCA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJUXHhFQW4gcGhcdTFFQTNpIGxcdTFFREJuIGhcdTAxQTFuIDUga1x4RUQgdFx1MUVGMSJdKSkpKS5yZXF1aXJlZCgnVMOqbiBraMO0bmcgxJHhu4MgdHLhu5FuZycpCiAgfSk7Cn07CgppbXBvcnQgeyB2YWxpZGF0ZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC91dGlscy9ub3JtYWxpemUnOwoKdmFyIEVkaXRQcm9kdWN0ID0gZnVuY3Rpb24gRWRpdFByb2R1Y3QocHJvcHMpIHsKICB2YXIgX2luaXRpYWxWYWx1ZXM7CgogIHZhciBfdXNlU2VsZWN0b3IgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5wcm9kdWN0OwogIH0pLAogICAgICBpbml0aWFsU3RhdGUgPSBfdXNlU2VsZWN0b3IuaW5pdGlhbFN0YXRlOwoKICB2YXIgaW5pdGlhbFZhbHVlcyA9IChfaW5pdGlhbFZhbHVlcyA9IHsKICAgIGFnZW50UHJpY2U6IDAsCiAgICBiYXJjb2RlOiAnJywKICAgIGNvZGU6ICcnLAogICAgY3JlYXRlZEJ5OiBudWxsLAogICAgY3JlYXRlZERhdGU6ICcnLAogICAgZGVzYzogJycsCiAgICBpZDogJycsCiAgICBpbWFnZTogJ1tdJywKICAgIGxhc3RNb2RpZmllZEJ5OiBudWxsLAogICAgbGFzdE1vZGlmaWVkRGF0ZTogbnVsbCwKICAgIG5hbWU6ICcnLAogICAgcHJpY2U6IDAsCiAgICBwcm9kdWN0QnJhbmQ6IG51bGwsCiAgICBwcm9kdWN0R3JvdXA6IG51bGwKICB9LCBfZGVmaW5lUHJvcGVydHkoX2luaXRpYWxWYWx1ZXMsICJjb2RlIiwgJycpLCBfZGVmaW5lUHJvcGVydHkoX2luaXRpYWxWYWx1ZXMsICJjcmVhdGVkQnkiLCBudWxsKSwgX2RlZmluZVByb3BlcnR5KF9pbml0aWFsVmFsdWVzLCAiY3JlYXRlZERhdGUiLCAnJyksIF9kZWZpbmVQcm9wZXJ0eShfaW5pdGlhbFZhbHVlcywgImRlc2NyaXB0aW9uIiwgbnVsbCksIF9kZWZpbmVQcm9wZXJ0eShfaW5pdGlhbFZhbHVlcywgImlkIiwgJycpLCBfZGVmaW5lUHJvcGVydHkoX2luaXRpYWxWYWx1ZXMsICJsYXN0TW9kaWZpZWRCeSIsIG51bGwpLCBfZGVmaW5lUHJvcGVydHkoX2luaXRpYWxWYWx1ZXMsICJsYXN0TW9kaWZpZWREYXRlIiwgbnVsbCksIF9kZWZpbmVQcm9wZXJ0eShfaW5pdGlhbFZhbHVlcywgIm5hbWUiLCAnJyksIF9kZWZpbmVQcm9wZXJ0eShfaW5pdGlhbFZhbHVlcywgInN0YXR1cyIsICcnKSwgX2RlZmluZVByb3BlcnR5KF9pbml0aWFsVmFsdWVzLCAidW5pdCIsICcnKSwgX2RlZmluZVByb3BlcnR5KF9pbml0aWFsVmFsdWVzLCAidm9sdW1lIiwgMCksIF9pbml0aWFsVmFsdWVzKTsKICB2YXIgcmVmID0gdXNlUmVmKG51bGwpOwogIHZhciBpbWFnZXMgPSB1c2VSZWYoW10pOwogIHZhciBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7CiAgdmFyIGhpc3RvcnkgPSB1c2VIaXN0b3J5KCk7CgogIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShudWxsKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGluaXRWYWx1ZXMgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRJbml0VmFsdWVzID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIHNlbGVjdEJ5SWQgPSBnbG9iYWxpemVkUHJvZHVjdFNlbGVjdG9ycy5zZWxlY3RCeUlkOwogIHZhciBzZWxlY3RBbGwgPSBnbG9iYWxpemVkcHJvZHVjdEdyb3Vwc1NlbGVjdG9ycy5zZWxlY3RBbGw7CiAgdmFyIHByb2R1Y3QgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBzZWxlY3RCeUlkKHN0YXRlLCBwcm9wcy5tYXRjaC5wYXJhbXMuaWQpOwogIH0pOwoKICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKFtdKSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICBpbml0SW1hZ2VzID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0SW5pdEltYWdlcyA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBwcm9kdWN0R3JvdXAgPSB1c2VTZWxlY3RvcihzZWxlY3RBbGwpOwogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBkaXNwYXRjaChnZXREZXRhaWxQcm9kdWN0KHByb3BzLm1hdGNoLnBhcmFtcy5pZCkpOwogICAgZGlzcGF0Y2goZ2V0UHJvZHVjdEdyb3VwKCkpOwogIH0sIFtdKTsKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKHByb2R1Y3QpIHsKICAgICAgdmFyIF90ZW1wJGltYWdlOwoKICAgICAgdmFyIHRlbXAgPSBfb2JqZWN0U3ByZWFkKHt9LCBwcm9kdWN0KTsKCiAgICAgIHRlbXAuaW1hZ2UgPSBbXTsKCiAgICAgIHRyeSB7CiAgICAgICAgdGVtcC5pbWFnZSA9IEpTT04ucGFyc2UocHJvZHVjdC5pbWFnZSk7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CgogICAgICB2YXIgYXJyUmVxdWVzdCA9IChfdGVtcCRpbWFnZSA9IHRlbXAuaW1hZ2UpID09PSBudWxsIHx8IF90ZW1wJGltYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGVtcCRpbWFnZS5tYXAoZnVuY3Rpb24gKGltYWdlKSB7CiAgICAgICAgcmV0dXJuIGZldGNoKGltYWdlKTsKICAgICAgfSk7CiAgICAgIFByb21pc2UuYWxsKGFyclJlcXVlc3QpLnRoZW4oZnVuY3Rpb24gKGFyclJlcykgewogICAgICAgIHZhciBhcnIgPSBhcnJSZXMubWFwKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHJldHVybiByZXMgPT09IG51bGwgfHwgcmVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXMuYXJyYXlCdWZmZXIoKS50aGVuKGZ1bmN0aW9uIChidWYpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWxlKFtidWZdLCByZXMudXJsLm1hdGNoKC8uKlwvKC4qKSQvKVsxXSwgewogICAgICAgICAgICAgIHR5cGU6ICdpbWFnZS9qcGVnJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIFByb21pc2UuYWxsKGFycikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICByZXR1cm4gc2V0SW5pdEltYWdlcyhyZXMpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgc2V0SW5pdFZhbHVlcyh0ZW1wKTsKICAgIH0KICB9LCBbcHJvZHVjdF0pOwoKICB2YXIgb25TdWJtaXQgPSBmdW5jdGlvbiBvblN1Ym1pdCh2YWx1ZXMsIF9yZWYpIHsKICAgIHZhciByZXNldEZvcm0gPSBfcmVmLnJlc2V0Rm9ybTsKICAgIGRpc3BhdGNoKGZldGNoaW5nKCkpOwogICAgdmFsdWVzLmltYWdlID0gSlNPTi5zdHJpbmdpZnkoaW1hZ2VzLmN1cnJlbnQpOwogICAgZGlzcGF0Y2godXBkYXRlUHJvZHVjdCh2YWx1ZXMpKTsKICAgIHJlc2V0Rm9ybSgpOwogIH07CgogIHZhciBnZXRVcGxvYWRQYXJhbXMgPSBmdW5jdGlvbiBnZXRVcGxvYWRQYXJhbXMoKSB7CiAgICByZXR1cm4gewogICAgICB1cmw6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4Mi9hcGkvZmlsZXMnIDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4Mi9hcGkvZmlsZXMnCiAgICB9OwogIH07CgogIHZhciBoYW5kbGVDaGFuZ2VTdGF0dXMgPSBmdW5jdGlvbiBoYW5kbGVDaGFuZ2VTdGF0dXMoX3JlZjIsIHN0YXR1cykgewogICAgdmFyIHhociA9IF9yZWYyLnhocjsKCiAgICBpZiAoc3RhdHVzID09PSAnZG9uZScpIHsKICAgICAgdmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpOwoKICAgICAgdmFyIGFyciA9IF90b0NvbnN1bWFibGVBcnJheShpbWFnZXMuY3VycmVudCk7CgogICAgICBhcnIucHVzaChyZXNwb25zZVswXS51cmwpOwogICAgICBpbWFnZXMuY3VycmVudCA9IGFycjsKICAgIH0KICB9OwoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgaWYgKGluaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3MpIHsKICAgICAgaGlzdG9yeS5nb0JhY2soKTsKICAgIH0KICB9LCBbaW5pdGlhbFN0YXRlLnVwZGF0aW5nU3VjY2Vzc10pOwoKICB2YXIgcmVuZGVyUHJvZHVjdENvZGUgPSBmdW5jdGlvbiByZW5kZXJQcm9kdWN0Q29kZSgpIHsKICAgIHZhciBfcmVmJGN1cnJlbnQkdmFsdWVzJHAsIF9yZWYkY3VycmVudCR2YWx1ZXMkcDIsIF9yZWYkY3VycmVudCR2YWx1ZXMkcDM7CgogICAgdmFyIGNvZGVOYW1lID0gZ2V0Q29kZUJ5TmFtZShyZWYuY3VycmVudC52YWx1ZXMubmFtZSk7CiAgICB2YXIgY29kZSA9ICIiLmNvbmNhdCgoKF9yZWYkY3VycmVudCR2YWx1ZXMkcCA9IHJlZi5jdXJyZW50LnZhbHVlcy5wcm9kdWN0R3JvdXApID09PSBudWxsIHx8IF9yZWYkY3VycmVudCR2YWx1ZXMkcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9yZWYkY3VycmVudCR2YWx1ZXMkcDIgPSBfcmVmJGN1cnJlbnQkdmFsdWVzJHAucHJvZHVjdEJyYW5kKSA9PT0gbnVsbCB8fCBfcmVmJGN1cnJlbnQkdmFsdWVzJHAyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVmJGN1cnJlbnQkdmFsdWVzJHAyLmNvZGUpIHx8ICcnLCAiXyIpLmNvbmNhdCgoKF9yZWYkY3VycmVudCR2YWx1ZXMkcDMgPSByZWYuY3VycmVudC52YWx1ZXMucHJvZHVjdEdyb3VwKSA9PT0gbnVsbCB8fCBfcmVmJGN1cnJlbnQkdmFsdWVzJHAzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVmJGN1cnJlbnQkdmFsdWVzJHAzLmNvZGUpIHx8ICcnLCAiXyIpLmNvbmNhdChjb2RlTmFtZSwgIl8iKS5jb25jYXQocmVmLmN1cnJlbnQudmFsdWVzLnZvbHVtZSk7CiAgICByZWYuY3VycmVudC5zZXRGaWVsZFZhbHVlKCdjb2RlJywgIiIuY29uY2F0KGNvZGUpKTsKICB9OwoKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkSGVhZGVyLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZFRpdGxlLCBudWxsLCAiQ2hcdTFFQzluaCBzXHUxRUVEYSBzXHUxRUEzbiBwaFx1MUVBOW0iKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkQm9keSwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWlrLCB7CiAgICBpbml0aWFsVmFsdWVzOiBpbml0VmFsdWVzIHx8IGluaXRpYWxWYWx1ZXMsCiAgICBpbm5lclJlZjogcmVmLAogICAgdmFsaWRhdGU6IHZhbGlkYXRlKHZhbGlkYXRpb25TY2hlbWEpLAogICAgZW5hYmxlUmVpbml0aWFsaXplOiB0cnVlLAogICAgb25TdWJtaXQ6IG9uU3VibWl0CiAgfSwgZnVuY3Rpb24gKF9yZWYzKSB7CiAgICB2YXIgX3ZhbHVlcyRwcm9kdWN0R3JvdXAsIF92YWx1ZXMkcHJvZHVjdEdyb3VwJCwgX3ZhbHVlcyRwcm9kdWN0R3JvdXAyOwoKICAgIHZhciB2YWx1ZXMgPSBfcmVmMy52YWx1ZXMsCiAgICAgICAgZXJyb3JzID0gX3JlZjMuZXJyb3JzLAogICAgICAgIGhhbmRsZUNoYW5nZSA9IF9yZWYzLmhhbmRsZUNoYW5nZSwKICAgICAgICBoYW5kbGVCbHVyID0gX3JlZjMuaGFuZGxlQmx1ciwKICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmMy5oYW5kbGVTdWJtaXQsCiAgICAgICAgc2V0RmllbGRWYWx1ZSA9IF9yZWYzLnNldEZpZWxkVmFsdWU7CiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm0sIHsKICAgICAgb25TdWJtaXQ6IGhhbmRsZVN1Ym1pdCwKICAgICAgbm9WYWxpZGF0ZTogdHJ1ZSwKICAgICAgbmFtZTogInNpbXBsZUZvcm0iCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDUm93LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAiY29kZSIKICAgIH0sICJNXHhFMyBzXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgbmFtZTogImNvZGUiLAogICAgICBpZDogImNvZGUiLAogICAgICBwbGFjZWhvbGRlcjogIk1ceEUzIHNcdTFFQTNuIHBoXHUxRUE5bSIsCiAgICAgIGRpc2FibGVkOiB0cnVlLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgIHZhbHVlOiAiIi5jb25jYXQodmFsdWVzLmNvZGUpCiAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAibGFzdE5hbWUiCiAgICB9LCAiVFx4RUFuIHNcdTFFQTNuIHBoXHUxRUE5bSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAibmFtZSIsCiAgICAgIGlkOiAibmFtZSIsCiAgICAgIHBsYWNlaG9sZGVyOiAiVFx4RUFuIHNcdTFFQTNuIHBoXHUxRUE5bSIsCiAgICAgIGF1dG9Db21wbGV0ZTogImZhbWlseS1uYW1lIiwKICAgICAgaW52YWxpZDogZXJyb3JzLm5hbWUsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIGhhbmRsZUNoYW5nZShlKTsKICAgICAgICByZW5kZXJQcm9kdWN0Q29kZSgpOwogICAgICB9LAogICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgIHZhbHVlOiB2YWx1ZXMubmFtZQogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIG51bGwsIGVycm9ycy5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAidXNlck5hbWUiCiAgICB9LCAiTVx4RjQgdFx1MUVBMyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAiZGVzYyIsCiAgICAgIGlkOiAiZGVzYyIsCiAgICAgIHBsYWNlaG9sZGVyOiAiTVx4RjQgdFx1MUVBMyIsCiAgICAgIGF1dG9Db21wbGV0ZTogImRlc2MiLAogICAgICBpbnZhbGlkOiBlcnJvcnMuZGVzYywKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICB2YWx1ZTogdmFsdWVzLmRlc2MKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCBudWxsLCBlcnJvcnMuZGVzYykpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInByb2R1Y3RHcm91cCIKICAgIH0sICJMb1x1MUVBMWkgc1x1MUVBM24gcGhcdTFFQTltIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICBuYW1lOiAicHJvZHVjdEdyb3VwIiwKICAgICAgb25DaGFuZ2U6IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgc2V0RmllbGRWYWx1ZSgncHJvZHVjdEdyb3VwJywgaXRlbS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CgogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICByZW5kZXJQcm9kdWN0Q29kZSgpOwoKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSwKICAgICAgdmFsdWU6IHsKICAgICAgICB2YWx1ZTogdmFsdWVzLnByb2R1Y3RHcm91cCwKICAgICAgICBsYWJlbDogIiIuY29uY2F0KChfdmFsdWVzJHByb2R1Y3RHcm91cCA9IHZhbHVlcy5wcm9kdWN0R3JvdXApID09PSBudWxsIHx8IF92YWx1ZXMkcHJvZHVjdEdyb3VwID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3ZhbHVlcyRwcm9kdWN0R3JvdXAkID0gX3ZhbHVlcyRwcm9kdWN0R3JvdXAucHJvZHVjdEJyYW5kKSA9PT0gbnVsbCB8fCBfdmFsdWVzJHByb2R1Y3RHcm91cCQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZXMkcHJvZHVjdEdyb3VwJC5uYW1lLCAiIC0gIikuY29uY2F0KChfdmFsdWVzJHByb2R1Y3RHcm91cDIgPSB2YWx1ZXMucHJvZHVjdEdyb3VwKSA9PT0gbnVsbCB8fCBfdmFsdWVzJHByb2R1Y3RHcm91cDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZXMkcHJvZHVjdEdyb3VwMi5uYW1lKQogICAgICB9LAogICAgICBvcHRpb25zOiBwcm9kdWN0R3JvdXAubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIF9pdGVtJHByb2R1Y3RCcmFuZDsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBpdGVtLAogICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdCgoX2l0ZW0kcHJvZHVjdEJyYW5kID0gaXRlbS5wcm9kdWN0QnJhbmQpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3RCcmFuZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdEJyYW5kLm5hbWUsICIgLSAiKS5jb25jYXQoaXRlbS5uYW1lKQogICAgICAgIH07CiAgICAgIH0pCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgbnVsbCwgZXJyb3JzLnByb2R1Y3RHcm91cCkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NvbCwgewogICAgICBsZzogIjYiCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInBhc3N3b3JkIgogICAgfSwgIkdpXHhFMSBcdTAxMTFcdTFFQTFpIGxceEZEIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEN1cnJlbmN5SW5wdXQsIHsKICAgICAgbmFtZTogImFnZW50UHJpY2UiLAogICAgICBoYW5kbGVDaGFuZ2U6IGhhbmRsZUNoYW5nZQogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgIH0sIGVycm9ycy5hZ2VudFByaWNlKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICB9LCAiR2lceEUxIFNhbG9uIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEN1cnJlbmN5SW5wdXQsIHsKICAgICAgbmFtZTogInByaWNlIiwKICAgICAgaGFuZGxlQ2hhbmdlOiBoYW5kbGVDaGFuZ2UKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCBlcnJvcnMucHJpY2UpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJ2b2x1bWUiCiAgICB9LCAiRHVuZyB0XHhFRGNoIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgbmFtZTogInZvbHVtZSIsCiAgICAgIGlkOiAidm9sdW1lIiwKICAgICAgcGxhY2Vob2xkZXI6ICJEdW5nIHRceEVEY2giLAogICAgICBhdXRvQ29tcGxldGU6ICJ2b2x1bWUiLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIGhhbmRsZUNoYW5nZShlKTsKICAgICAgICByZW5kZXJQcm9kdWN0Q29kZSgpOwogICAgICB9LAogICAgICB2YWxpZDogZXJyb3JzLnZvbHVtZSwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICB2YWx1ZTogdmFsdWVzLnZvbHVtZQogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgIH0sIGVycm9ycy52b2x1bWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJ1c2VyTmFtZSIKICAgIH0sICJcdTAxMTBcdTAxQTFuIHZcdTFFQ0IiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgIG5hbWU6ICJ1bml0IiwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGl0ZW0pIHsKICAgICAgICBzZXRGaWVsZFZhbHVlKCd1bml0JywgaXRlbS52YWx1ZSk7CiAgICAgIH0sCiAgICAgIHZhbHVlOiB7CiAgICAgICAgdmFsdWU6IHZhbHVlcy51bml0LAogICAgICAgIGxhYmVsOiB2YWx1ZXMudW5pdAogICAgICB9LAogICAgICBvcHRpb25zOiBVbml0VHlwZS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUsCiAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KGl0ZW0udGl0bGUpCiAgICAgICAgfTsKICAgICAgfSkKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCBlcnJvcnMudHlwZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogImNvZGUiCiAgICB9LCAiVHJcdTFFQTFuZyB0aFx4RTFpIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICBuYW1lOiAic3RhdHVzIiwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGl0ZW0pIHsKICAgICAgICBzZXRGaWVsZFZhbHVlKCdzdGF0dXMnLCBpdGVtLnZhbHVlKTsKICAgICAgfSwKICAgICAgdmFsdWU6IHsKICAgICAgICB2YWx1ZTogdmFsdWVzLnN0YXR1cywKICAgICAgICBsYWJlbDogbWFwcGluZ1N0YXR1c1t2YWx1ZXMuc3RhdHVzXQogICAgICB9LAogICAgICBvcHRpb25zOiBQcm9kdWN0U3RhdHVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSwKICAgICAgICAgIGxhYmVsOiBtYXBwaW5nU3RhdHVzW2l0ZW0udGl0bGVdCiAgICAgICAgfTsKICAgICAgfSkKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCBlcnJvcnMuc3RhdHVzKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcHpvbmUsIHsKICAgICAgZ2V0VXBsb2FkUGFyYW1zOiBnZXRVcGxvYWRQYXJhbXMsCiAgICAgIG9uQ2hhbmdlU3RhdHVzOiBoYW5kbGVDaGFuZ2VTdGF0dXMsCiAgICAgIGFjY2VwdDogImltYWdlLyosYXVkaW8vKix2aWRlby8qIiwKICAgICAgaW5wdXRMYWJlbDogIlVwbG9hZCBcdTFFQTJuaCIsCiAgICAgIGlucHV0Q29udGVudDogIktceEU5byB0aFx1MUVBMyBoXHhFQ25oIFx1MUVBM25oIGhvXHUxRUI3YyBiXHUxRUE1bSBcdTAxMTFcdTFFQzMgY2hcdTFFQ0RuIFx1MUVBM25oIiwKICAgICAgc3VibWl0QnV0dG9uQ29udGVudDogIkhvXHhFMG4gdGhceEUwbmgiLAogICAgICBpbnB1dFdpdGhGaWxlc0NvbnRlbnQ6ICJUaFx4RUFtIGZpbGUiLAogICAgICBpbml0aWFsRmlsZXM6IGluaXRJbWFnZXMKICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICBjbGFzc05hbWU6ICJkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIGRpc2FibGVkOiBpbml0aWFsU3RhdGUubG9hZGluZwogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogImNpbC1zYXZlIgogICAgfSksICIgIiwgaW5pdGlhbFN0YXRlLmxvYWRpbmcgPyAnxJBhbmcgeOG7rSBsw70nIDogJ0zGsHUgdGhheSDEkeG7lWknKSkpOwogIH0pKSk7Cn07CgpleHBvcnQgZGVmYXVsdCBFZGl0UHJvZHVjdDs="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/product/ProductList/EditProduct.js"],"names":["React","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CInvalidFeedback","CFormGroup","CLabel","CInput","CRow","CCardTitle","CIcon","Formik","Yup","useDispatch","useSelector","getDetailProduct","updateProduct","getProductGroup","Select","useHistory","fetching","globalizedProductSelectors","globalizedproductGroupsSelectors","ProductStatus","UnitType","mappingStatus","Dropzone","CurrencyInput","getCodeByName","validationSchema","object","shape","name","string","min","required","validate","EditProduct","props","state","product","initialState","initialValues","agentPrice","barcode","code","createdBy","createdDate","desc","id","image","lastModifiedBy","lastModifiedDate","price","productBrand","productGroup","ref","images","dispatch","history","initValues","setInitValues","selectById","selectAll","match","params","initImages","setInitImages","temp","JSON","parse","e","arrRequest","map","fetch","Promise","all","then","arrRes","arr","res","arrayBuffer","buf","File","url","type","onSubmit","values","resetForm","stringify","current","getUploadParams","process","env","NODE_ENV","handleChangeStatus","status","xhr","response","push","updatingSuccess","goBack","renderProductCode","codeName","volume","setFieldValue","errors","handleChange","handleBlur","handleSubmit","item","value","resolve","label","unit","title","loading"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CInvalidFeedback,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n\n  CCardTitle,\n} from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport {Formik} from 'formik';\nimport * as Yup from 'yup';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {getDetailProduct, updateProduct} from './product.api';\nimport {getProductGroup} from '../ProductGroup/product-group.api';\nimport Select from 'react-select';\nimport {useHistory} from 'react-router-dom';\nimport {fetching, globalizedProductSelectors} from './product.reducer';\nimport {globalizedproductGroupsSelectors} from '../ProductGroup/product-group.reducer';\nimport {ProductStatus, UnitType} from './contants';\nimport {mappingStatus} from './CreateProduct';\nimport Dropzone from 'react-dropzone-uploader';\nimport 'react-dropzone-uploader/dist/styles.css';\nimport CurrencyInput from '../../../components/currency-input/currency-input';\nimport {getCodeByName} from '../../../../shared/utils/normalize';\n\nconst validationSchema = function() {\n  return Yup.object().shape({\n    name: Yup.string()\n        .min(5 `Tên phải lớn hơn 5 kí tự`)\n        .required('Tên không để trống'),\n  });\n};\n\nimport { validate } from '../../../../shared/utils/normalize';\n\n\nconst EditProduct = (props) => {\n  const {initialState} = useSelector((state) => state.product);\n  const initialValues = {\n    agentPrice: 0,\n    barcode: '',\n    code: '',\n    createdBy: null,\n    createdDate: '',\n    desc: '',\n    id: '',\n    image: '[]',\n    lastModifiedBy: null,\n    lastModifiedDate: null,\n    name: '',\n    price: 0,\n    productBrand: null,\n    productGroup: null,\n    code: '',\n    createdBy: null,\n    createdDate: '',\n    description: null,\n    id: '',\n    lastModifiedBy: null,\n    lastModifiedDate: null,\n    name: '',\n    status: '',\n    unit: '',\n    volume: 0,\n  };\n  const ref = useRef(null);\n  const images = useRef([]);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [initValues, setInitValues] = useState(null);\n  const {selectById} = globalizedProductSelectors;\n  const {selectAll} = globalizedproductGroupsSelectors;\n  const product = useSelector((state) => selectById(state, props.match.params.id));\n  const [initImages, setInitImages] = useState([]);\n  const productGroup = useSelector(selectAll);\n  useEffect(() => {\n    dispatch(getDetailProduct(props.match.params.id));\n    dispatch(getProductGroup());\n  }, []);\n\n  useEffect(() => {\n    if (product) {\n      const temp = {...product};\n      temp.image = [];\n      try {\n        temp.image = JSON.parse(product.image);\n      } catch (e) {}\n      const arrRequest = temp.image?.map((image) => fetch(image));\n      Promise.all(arrRequest).then((arrRes) => {\n        const arr = arrRes.map((res) => {\n          return res?.arrayBuffer().then((buf) => {\n            return new File([buf], res.url.match(/.*\\/(.*)$/)[1], {type: 'image/jpeg'});\n          });\n        });\n        Promise.all(arr).then((res) => setInitImages(res));\n      });\n      setInitValues(temp);\n    }\n  }, [product]);\n\n  const onSubmit = (values, {resetForm}) => {\n    dispatch(fetching());\n    values.image = JSON.stringify(images.current);\n    dispatch(updateProduct(values));\n    resetForm();\n  };\n\n  const getUploadParams = () => {\n    return {url: process.env.NODE_ENV === 'development' ? 'http://localhost:8082/api/files' : 'http://localhost:8082/api/files'};\n  };\n\n  const handleChangeStatus = ({xhr}, status) => {\n    if (status === 'done') {\n      const response = JSON.parse(xhr.response);\n      const arr = [...images.current];\n      arr.push(response[0].url);\n      images.current = arr;\n    }\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  const renderProductCode = () => {\n    const codeName = getCodeByName(ref.current.values.name);\n    const code = `${ref.current.values.productGroup?.productBrand?.code || ''}_${ref.current.values.productGroup?.code || ''}_${codeName}_${\n      ref.current.values.volume\n    }`;\n    ref.current.setFieldValue('code', `${code}`);\n  };\n  return (\n    <CCard>\n      <CCardHeader>\n        <CCardTitle>Chỉnh sửa sản phẩm</CCardTitle>\n      </CCardHeader>\n      <CCardBody>\n        <Formik\n          initialValues={initValues || initialValues}\n          innerRef={ref}\n          validate={validate(validationSchema)}\n          enableReinitialize\n          onSubmit={onSubmit}\n        >\n          {({\n            values,\n            errors,\n\n\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue\n\n\n            ,\n          }) => (\n            <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n              <CRow>\n                <CCol lg=\"6\">\n                  <CFormGroup>\n                    <CLabel htmlFor=\"code\">Mã sản phẩm</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"code\"\n                      id=\"code\"\n                      placeholder=\"Mã sản phẩm\"\n                      disabled\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={`${values.code}`}\n                    />\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"lastName\">Tên sản phẩm</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"name\"\n                      id=\"name\"\n                      placeholder=\"Tên sản phẩm\"\n                      autoComplete=\"family-name\"\n                      invalid={errors.name}\n                      required\n                      onChange={(e) => {\n                        handleChange(e);\n                        renderProductCode();\n                      }}\n                      onBlur={handleBlur}\n                      value={values.name}\n                    />\n                    <CInvalidFeedback>{errors.name}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"userName\">Mô tả</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"desc\"\n                      id=\"desc\"\n                      placeholder=\"Mô tả\"\n                      autoComplete=\"desc\"\n                      invalid={errors.desc}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.desc}\n                    />\n                    <CInvalidFeedback>{errors.desc}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"productGroup\">Loại sản phẩm</CLabel>\n                    <Select\n                      name=\"productGroup\"\n                      onChange={async (item) => {\n                        setFieldValue('productGroup', item.value);\n                        await Promise.resolve();\n                        renderProductCode();\n                      }}\n                      value={{\n                        value: values.productGroup,\n                        label: `${values.productGroup?.productBrand?.name} - ${values.productGroup?.name}`,\n                      }}\n                      options={productGroup.map((item) => ({\n                        value: item,\n                        label: `${item.productBrand?.name} - ${item.name}`,\n                      }))}\n                    />\n                    <CInvalidFeedback>{errors.productGroup}</CInvalidFeedback>\n                  </CFormGroup>\n                </CCol>\n                <CCol lg=\"6\">\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Giá đại lý</CLabel>\n                    <CurrencyInput name=\"agentPrice\" handleChange={handleChange} />\n                    <CInvalidFeedback className=\"d-block\">{errors.agentPrice}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Giá Salon</CLabel>\n                    <CurrencyInput name=\"price\" handleChange={handleChange} />\n                    <CInvalidFeedback className=\"d-block\">{errors.price}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"volume\">Dung tích</CLabel>\n                    <CInput\n                      type=\"number\"\n                      name=\"volume\"\n                      id=\"volume\"\n                      placeholder=\"Dung tích\"\n                      autoComplete=\"volume\"\n                      onChange={(e) => {\n                        handleChange(e);\n                        renderProductCode();\n                      }}\n                      valid={errors.volume}\n                      onBlur={handleBlur}\n                      value={values.volume}\n                    />\n                    <CInvalidFeedback className=\"d-block\">{errors.volume}</CInvalidFeedback>\n                  </CFormGroup>\n\n                  <CFormGroup>\n                    <CLabel htmlFor=\"userName\">Đơn vị</CLabel>\n                    <Select\n                      name=\"unit\"\n                      onChange={(item) => {\n                        setFieldValue('unit', item.value);\n                      }}\n                      value={{\n                        value: values.unit,\n                        label: values.unit,\n                      }}\n                      options={UnitType.map((item) => ({\n                        value: item.value,\n                        label: `${item.title}`,\n                      }))}\n                    />\n                    <CInvalidFeedback className=\"d-block\">{errors.type}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"code\">Trạng thái</CLabel>\n                    <Select\n                      name=\"status\"\n                      onChange={(item) => {\n                        setFieldValue('status', item.value);\n                      }}\n                      value={{\n                        value: values.status,\n                        label: mappingStatus[values.status],\n                      }}\n                      options={ProductStatus.map((item) => ({\n                        value: item.value,\n                        label: mappingStatus[item.title],\n                      }))}\n                    />\n                    <CInvalidFeedback className=\"d-block\">{errors.status}</CInvalidFeedback>\n                  </CFormGroup>\n                </CCol>\n              </CRow>\n              <CFormGroup>\n                <Dropzone\n                  getUploadParams={getUploadParams}\n                  onChangeStatus={handleChangeStatus}\n                  accept=\"image/*,audio/*,video/*\"\n                  inputLabel=\"Upload Ảnh\"\n                  inputContent=\"Kéo thả hình ảnh hoặc bấm để chọn ảnh\"\n                  submitButtonContent=\"Hoàn thành\"\n                  inputWithFilesContent=\"Thêm file\"\n                  initialFiles={initImages}\n                />\n              </CFormGroup>\n              <CFormGroup className=\"d-flex justify-content-center\">\n                <CButton type=\"submit\" color=\"primary\" disabled={initialState.loading}>\n                  <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Lưu thay đổi'}\n                </CButton>\n              </CFormGroup>\n            </CForm>\n          )}\n        </Formik>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default EditProduct;\n"]}]}