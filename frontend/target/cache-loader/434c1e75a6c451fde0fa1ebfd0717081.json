{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/product/ProductList/EditProduct.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/product/ProductList/EditProduct.js","mtime":1621950736476},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgQ0J1dHRvbiwgQ0NhcmQsIENDYXJkSGVhZGVyLCBDQ2FyZEJvZHksIENDb2wsIENGb3JtLCBDSW52YWxpZEZlZWRiYWNrLCBDRm9ybUdyb3VwLCBDTGFiZWwsIENJbnB1dCwgQ1JvdywgQ0NhcmRUaXRsZSB9IGZyb20gJ0Bjb3JldWkvcmVhY3QvbGliJzsKaW1wb3J0IENJY29uIGZyb20gJ0Bjb3JldWkvaWNvbnMtcmVhY3QvbGliL0NJY29uJzsKOwppbXBvcnQgeyBGb3JtaWsgfSBmcm9tICdmb3JtaWsnOwppbXBvcnQgKiBhcyBZdXAgZnJvbSAneXVwJzsKaW1wb3J0IHsgdXNlRGlzcGF0Y2gsIHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnOwppbXBvcnQgeyBnZXREZXRhaWxQcm9kdWN0LCB1cGRhdGVQcm9kdWN0IH0gZnJvbSAnLi9wcm9kdWN0LmFwaSc7CmltcG9ydCB7IGdldFByb2R1Y3RHcm91cCB9IGZyb20gJy4uL1Byb2R1Y3RHcm91cC9wcm9kdWN0LWdyb3VwLmFwaSc7CmltcG9ydCBTZWxlY3QgZnJvbSAncmVhY3Qtc2VsZWN0JzsKaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nOwppbXBvcnQgeyBmZXRjaGluZywgZ2xvYmFsaXplZFByb2R1Y3RTZWxlY3RvcnMgfSBmcm9tICcuL3Byb2R1Y3QucmVkdWNlcic7CmltcG9ydCB7IGdsb2JhbGl6ZWRwcm9kdWN0R3JvdXBzU2VsZWN0b3JzIH0gZnJvbSAnLi4vUHJvZHVjdEdyb3VwL3Byb2R1Y3QtZ3JvdXAucmVkdWNlcic7CmltcG9ydCB7IFByb2R1Y3RTdGF0dXMsIFVuaXRUeXBlIH0gZnJvbSAnLi9jb250YW50cyc7CmltcG9ydCB7IG1hcHBpbmdTdGF0dXMgfSBmcm9tICcuL0NyZWF0ZVByb2R1Y3QnOwppbXBvcnQgRHJvcHpvbmUgZnJvbSAncmVhY3QtZHJvcHpvbmUtdXBsb2FkZXInOwppbXBvcnQgJ3JlYWN0LWRyb3B6b25lLXVwbG9hZGVyL2Rpc3Qvc3R5bGVzLmNzcyc7CmltcG9ydCBDdXJyZW5jeUlucHV0IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvY3VycmVuY3ktaW5wdXQvY3VycmVuY3ktaW5wdXQnOwppbXBvcnQgeyBnZXRDb2RlQnlOYW1lIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL3V0aWxzL25vcm1hbGl6ZSc7Cgp2YXIgdmFsaWRhdGlvblNjaGVtYSA9IGZ1bmN0aW9uIHZhbGlkYXRpb25TY2hlbWEoKSB7CiAgcmV0dXJuIFl1cC5vYmplY3QoKS5zaGFwZSh7CiAgICBuYW1lOiBZdXAuc3RyaW5nKCkubWluKDUsICJUXHhFQW4gcGhcdTFFQTNpIGxcdTFFREJuIGhcdTAxQTFuIDUga1x4RUQgdFx1MUVGMSIpLnJlcXVpcmVkKCdUw6puIGtow7RuZyDEkeG7gyB0cuG7kW5nJykKICB9KTsKfTsKCmltcG9ydCB7IHZhbGlkYXRlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL3V0aWxzL25vcm1hbGl6ZSc7CnZhciBzZWxlY3RCeUlkID0gZ2xvYmFsaXplZFByb2R1Y3RTZWxlY3RvcnMuc2VsZWN0QnlJZDsKdmFyIHNlbGVjdEFsbCA9IGdsb2JhbGl6ZWRwcm9kdWN0R3JvdXBzU2VsZWN0b3JzLnNlbGVjdEFsbDsKCnZhciBFZGl0UHJvZHVjdCA9IGZ1bmN0aW9uIEVkaXRQcm9kdWN0KHByb3BzKSB7CiAgdmFyIF9pbml0aWFsVmFsdWVzOwoKICB2YXIgX3VzZVNlbGVjdG9yID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucHJvZHVjdDsKICB9KSwKICAgICAgaW5pdGlhbFN0YXRlID0gX3VzZVNlbGVjdG9yLmluaXRpYWxTdGF0ZTsKCiAgdmFyIGluaXRpYWxWYWx1ZXMgPSAoX2luaXRpYWxWYWx1ZXMgPSB7CiAgICBhZ2VudFByaWNlOiAwLAogICAgYmFyY29kZTogJycsCiAgICBjb2RlOiAnJywKICAgIGNyZWF0ZWRCeTogbnVsbCwKICAgIGNyZWF0ZWREYXRlOiAnJywKICAgIGRlc2M6ICcnLAogICAgaWQ6ICcnLAogICAgaW1hZ2U6ICdbXScsCiAgICBsYXN0TW9kaWZpZWRCeTogbnVsbCwKICAgIGxhc3RNb2RpZmllZERhdGU6IG51bGwsCiAgICBuYW1lOiAnJywKICAgIHByaWNlOiAwLAogICAgcHJvZHVjdEJyYW5kOiBudWxsLAogICAgcHJvZHVjdEdyb3VwOiBudWxsCiAgfSwgX2RlZmluZVByb3BlcnR5KF9pbml0aWFsVmFsdWVzLCAiY29kZSIsICcnKSwgX2RlZmluZVByb3BlcnR5KF9pbml0aWFsVmFsdWVzLCAiY3JlYXRlZEJ5IiwgbnVsbCksIF9kZWZpbmVQcm9wZXJ0eShfaW5pdGlhbFZhbHVlcywgImNyZWF0ZWREYXRlIiwgJycpLCBfZGVmaW5lUHJvcGVydHkoX2luaXRpYWxWYWx1ZXMsICJkZXNjcmlwdGlvbiIsIG51bGwpLCBfZGVmaW5lUHJvcGVydHkoX2luaXRpYWxWYWx1ZXMsICJpZCIsICcnKSwgX2RlZmluZVByb3BlcnR5KF9pbml0aWFsVmFsdWVzLCAibGFzdE1vZGlmaWVkQnkiLCBudWxsKSwgX2RlZmluZVByb3BlcnR5KF9pbml0aWFsVmFsdWVzLCAibGFzdE1vZGlmaWVkRGF0ZSIsIG51bGwpLCBfZGVmaW5lUHJvcGVydHkoX2luaXRpYWxWYWx1ZXMsICJuYW1lIiwgJycpLCBfZGVmaW5lUHJvcGVydHkoX2luaXRpYWxWYWx1ZXMsICJzdGF0dXMiLCAnJyksIF9kZWZpbmVQcm9wZXJ0eShfaW5pdGlhbFZhbHVlcywgInVuaXQiLCAnJyksIF9kZWZpbmVQcm9wZXJ0eShfaW5pdGlhbFZhbHVlcywgInZvbHVtZSIsIDApLCBfaW5pdGlhbFZhbHVlcyk7CiAgdmFyIHJlZiA9IHVzZVJlZihudWxsKTsKICB2YXIgaW1hZ2VzID0gdXNlUmVmKFtdKTsKICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpOwogIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpOwoKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUobnVsbCksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBpbml0VmFsdWVzID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0SW5pdFZhbHVlcyA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBwcm9kdWN0ID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4gc2VsZWN0QnlJZChzdGF0ZSwgcHJvcHMubWF0Y2gucGFyYW1zLmlkKTsKICB9KTsKCiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShbXSksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgaW5pdEltYWdlcyA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldEluaXRJbWFnZXMgPSBfdXNlU3RhdGU0WzFdOwoKICB2YXIgcHJvZHVjdEdyb3VwID0gdXNlU2VsZWN0b3Ioc2VsZWN0QWxsKTsKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgZGlzcGF0Y2goZ2V0RGV0YWlsUHJvZHVjdCh7CiAgICAgIGlkOiBwcm9wcy5tYXRjaC5wYXJhbXMuaWQsCiAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgIH0pKTsKICAgIGRpc3BhdGNoKGdldFByb2R1Y3RHcm91cCh7CiAgICAgIHBhZ2U6IDAsCiAgICAgIHNpemU6IDIwLAogICAgICBzb3J0OiAnY3JlYXRlZERhdGUsREVTQycsCiAgICAgIGRlcGVuZGVuY3k6IHRydWUKICAgIH0pKTsKICB9LCBbXSk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChwcm9kdWN0KSB7CiAgICAgIHZhciBfdGVtcCRpbWFnZTsKCiAgICAgIHZhciB0ZW1wID0gX29iamVjdFNwcmVhZCh7fSwgcHJvZHVjdCk7CgogICAgICB0ZW1wLmltYWdlID0gW107CgogICAgICB0cnkgewogICAgICAgIHRlbXAuaW1hZ2UgPSBKU09OLnBhcnNlKHByb2R1Y3QuaW1hZ2UpOwogICAgICB9IGNhdGNoIChlKSB7fQoKICAgICAgdmFyIGFyclJlcXVlc3QgPSAoX3RlbXAkaW1hZ2UgPSB0ZW1wLmltYWdlKSA9PT0gbnVsbCB8fCBfdGVtcCRpbWFnZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RlbXAkaW1hZ2UubWFwKGZ1bmN0aW9uIChpbWFnZSkgewogICAgICAgIHJldHVybiBmZXRjaChpbWFnZSk7CiAgICAgIH0pOwogICAgICBQcm9taXNlLmFsbChhcnJSZXF1ZXN0KS50aGVuKGZ1bmN0aW9uIChhcnJSZXMpIHsKICAgICAgICB2YXIgYXJyID0gYXJyUmVzLm1hcChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICByZXR1cm4gcmVzID09PSBudWxsIHx8IHJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzLmFycmF5QnVmZmVyKCkudGhlbihmdW5jdGlvbiAoYnVmKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRmlsZShbYnVmXSwgcmVzLnVybC5tYXRjaCgvLipcLyguKikkLylbMV0sIHsKICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UvanBlZycKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBQcm9taXNlLmFsbChhcnIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgcmV0dXJuIHNldEluaXRJbWFnZXMocmVzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHNldEluaXRWYWx1ZXModGVtcCk7CiAgICB9CiAgfSwgW3Byb2R1Y3RdKTsKCiAgdmFyIG9uU3VibWl0ID0gZnVuY3Rpb24gb25TdWJtaXQodmFsdWVzLCBfcmVmKSB7CiAgICB2YXIgcmVzZXRGb3JtID0gX3JlZi5yZXNldEZvcm07CiAgICBkaXNwYXRjaChmZXRjaGluZygpKTsKICAgIHZhbHVlcy5pbWFnZSA9IEpTT04uc3RyaW5naWZ5KGltYWdlcy5jdXJyZW50KTsKICAgIGRpc3BhdGNoKHVwZGF0ZVByb2R1Y3QodmFsdWVzKSk7CiAgfTsKCiAgdmFyIGdldFVwbG9hZFBhcmFtcyA9IGZ1bmN0aW9uIGdldFVwbG9hZFBhcmFtcygpIHsKICAgIHJldHVybiB7CiAgICAgIHVybDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyAnaHR0cDovL2xvY2FsaG9zdDo4MDgyL2FwaS9maWxlcycgOiAnaHR0cDovL2xvY2FsaG9zdDo4MDgyL2FwaS9maWxlcycKICAgIH07CiAgfTsKCiAgdmFyIGhhbmRsZUNoYW5nZVN0YXR1cyA9IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZVN0YXR1cyhfcmVmMiwgc3RhdHVzKSB7CiAgICB2YXIgeGhyID0gX3JlZjIueGhyOwoKICAgIGlmIChzdGF0dXMgPT09ICdkb25lJykgewogICAgICB2YXIgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZSk7CgogICAgICB2YXIgYXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KGltYWdlcy5jdXJyZW50KTsKCiAgICAgIGFyci5wdXNoKHJlc3BvbnNlWzBdLnVybCk7CiAgICAgIGltYWdlcy5jdXJyZW50ID0gYXJyOwogICAgfQogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoaW5pdGlhbFN0YXRlLnVwZGF0aW5nU3VjY2VzcykgewogICAgICBoaXN0b3J5LmdvQmFjaygpOwogICAgfQogIH0sIFtpbml0aWFsU3RhdGUudXBkYXRpbmdTdWNjZXNzXSk7CgogIHZhciByZW5kZXJQcm9kdWN0Q29kZSA9IGZ1bmN0aW9uIHJlbmRlclByb2R1Y3RDb2RlKCkgewogICAgdmFyIF9yZWYkY3VycmVudCR2YWx1ZXMkcCwgX3JlZiRjdXJyZW50JHZhbHVlcyRwMiwgX3JlZiRjdXJyZW50JHZhbHVlcyRwMzsKCiAgICB2YXIgY29kZU5hbWUgPSBnZXRDb2RlQnlOYW1lKHJlZi5jdXJyZW50LnZhbHVlcy5uYW1lKTsKICAgIHZhciBjb2RlID0gIiIuY29uY2F0KCgoX3JlZiRjdXJyZW50JHZhbHVlcyRwID0gcmVmLmN1cnJlbnQudmFsdWVzLnByb2R1Y3RHcm91cCkgPT09IG51bGwgfHwgX3JlZiRjdXJyZW50JHZhbHVlcyRwID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3JlZiRjdXJyZW50JHZhbHVlcyRwMiA9IF9yZWYkY3VycmVudCR2YWx1ZXMkcC5wcm9kdWN0QnJhbmQpID09PSBudWxsIHx8IF9yZWYkY3VycmVudCR2YWx1ZXMkcDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZWYkY3VycmVudCR2YWx1ZXMkcDIuY29kZSkgfHwgJycsICJfIikuY29uY2F0KCgoX3JlZiRjdXJyZW50JHZhbHVlcyRwMyA9IHJlZi5jdXJyZW50LnZhbHVlcy5wcm9kdWN0R3JvdXApID09PSBudWxsIHx8IF9yZWYkY3VycmVudCR2YWx1ZXMkcDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZWYkY3VycmVudCR2YWx1ZXMkcDMuY29kZSkgfHwgJycsICJfIikuY29uY2F0KGNvZGVOYW1lLCAiXyIpLmNvbmNhdChyZWYuY3VycmVudC52YWx1ZXMudm9sdW1lKTsKICAgIHJlZi5jdXJyZW50LnNldEZpZWxkVmFsdWUoJ2NvZGUnLCAiIi5jb25jYXQoY29kZSkpOwogIH07CgogIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ2FyZCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRIZWFkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkVGl0bGUsIG51bGwsICJDaFx1MUVDOW5oIHNcdTFFRURhIHNcdTFFQTNuIHBoXHUxRUE5bSIpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtaWssIHsKICAgIGluaXRpYWxWYWx1ZXM6IGluaXRWYWx1ZXMgfHwgaW5pdGlhbFZhbHVlcywKICAgIGlubmVyUmVmOiByZWYsCiAgICB2YWxpZGF0ZTogdmFsaWRhdGUodmFsaWRhdGlvblNjaGVtYSksCiAgICBlbmFibGVSZWluaXRpYWxpemU6IHRydWUsCiAgICBvblN1Ym1pdDogb25TdWJtaXQKICB9LCBmdW5jdGlvbiAoX3JlZjMpIHsKICAgIHZhciBfdmFsdWVzJHByb2R1Y3RHcm91cCwgX3ZhbHVlcyRwcm9kdWN0R3JvdXAkLCBfdmFsdWVzJHByb2R1Y3RHcm91cDI7CgogICAgdmFyIHZhbHVlcyA9IF9yZWYzLnZhbHVlcywKICAgICAgICBlcnJvcnMgPSBfcmVmMy5lcnJvcnMsCiAgICAgICAgaGFuZGxlQ2hhbmdlID0gX3JlZjMuaGFuZGxlQ2hhbmdlLAogICAgICAgIGhhbmRsZUJsdXIgPSBfcmVmMy5oYW5kbGVCbHVyLAogICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYzLmhhbmRsZVN1Ym1pdCwKICAgICAgICBzZXRGaWVsZFZhbHVlID0gX3JlZjMuc2V0RmllbGRWYWx1ZTsKICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybSwgewogICAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0LAogICAgICBub1ZhbGlkYXRlOiB0cnVlLAogICAgICBuYW1lOiAic2ltcGxlRm9ybSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI2IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJjb2RlIgogICAgfSwgIk1ceEUzIHNcdTFFQTNuIHBoXHUxRUE5bSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAiY29kZSIsCiAgICAgIGlkOiAiY29kZSIsCiAgICAgIHBsYWNlaG9sZGVyOiAiTVx4RTMgc1x1MUVBM24gcGhcdTFFQTltIiwKICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6ICIiLmNvbmNhdCh2YWx1ZXMuY29kZSkKICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJsYXN0TmFtZSIKICAgIH0sICJUXHhFQW4gc1x1MUVBM24gcGhcdTFFQTltIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICB0eXBlOiAidGV4dCIsCiAgICAgIG5hbWU6ICJuYW1lIiwKICAgICAgaWQ6ICJuYW1lIiwKICAgICAgcGxhY2Vob2xkZXI6ICJUXHhFQW4gc1x1MUVBM24gcGhcdTFFQTltIiwKICAgICAgYXV0b0NvbXBsZXRlOiAiZmFtaWx5LW5hbWUiLAogICAgICBpbnZhbGlkOiBlcnJvcnMubmFtZSwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIG9uQ2hhbmdlOiAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShlKSB7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlQ2hhbmdlKGUpOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgcmVuZGVyUHJvZHVjdENvZGUoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCksCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5uYW1lCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgbnVsbCwgZXJyb3JzLm5hbWUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJ1c2VyTmFtZSIKICAgIH0sICJNXHhGNCB0XHUxRUEzIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICB0eXBlOiAidGV4dCIsCiAgICAgIG5hbWU6ICJkZXNjIiwKICAgICAgaWQ6ICJkZXNjIiwKICAgICAgcGxhY2Vob2xkZXI6ICJNXHhGNCB0XHUxRUEzIiwKICAgICAgYXV0b0NvbXBsZXRlOiAiZGVzYyIsCiAgICAgIGludmFsaWQ6IGVycm9ycy5kZXNjLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgIHZhbHVlOiB2YWx1ZXMuZGVzYwogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIG51bGwsIGVycm9ycy5kZXNjKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAicHJvZHVjdEdyb3VwIgogICAgfSwgIk5oXHhGM20gc1x1MUVBM24gcGhcdTFFQTltIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdCwgewogICAgICBuYW1lOiAicHJvZHVjdEdyb3VwIiwKICAgICAgb25DaGFuZ2U6IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihpdGVtKSB7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRGaWVsZFZhbHVlKCdwcm9kdWN0R3JvdXAnLCBpdGVtLnZhbHVlKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIHJlbmRlclByb2R1Y3RDb2RlKCk7CgogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MikgewogICAgICAgICAgcmV0dXJuIF9yZWY1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpLAogICAgICB2YWx1ZTogewogICAgICAgIHZhbHVlOiB2YWx1ZXMucHJvZHVjdEdyb3VwLAogICAgICAgIGxhYmVsOiAiIi5jb25jYXQoKF92YWx1ZXMkcHJvZHVjdEdyb3VwID0gdmFsdWVzLnByb2R1Y3RHcm91cCkgPT09IG51bGwgfHwgX3ZhbHVlcyRwcm9kdWN0R3JvdXAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdmFsdWVzJHByb2R1Y3RHcm91cCQgPSBfdmFsdWVzJHByb2R1Y3RHcm91cC5wcm9kdWN0QnJhbmQpID09PSBudWxsIHx8IF92YWx1ZXMkcHJvZHVjdEdyb3VwJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlcyRwcm9kdWN0R3JvdXAkLm5hbWUsICIgLSAiKS5jb25jYXQoKF92YWx1ZXMkcHJvZHVjdEdyb3VwMiA9IHZhbHVlcy5wcm9kdWN0R3JvdXApID09PSBudWxsIHx8IF92YWx1ZXMkcHJvZHVjdEdyb3VwMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlcyRwcm9kdWN0R3JvdXAyLm5hbWUpCiAgICAgIH0sCiAgICAgIG9wdGlvbnM6IHByb2R1Y3RHcm91cC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgX2l0ZW0kcHJvZHVjdEJyYW5kOwoKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IGl0ZW0sCiAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KChfaXRlbSRwcm9kdWN0QnJhbmQgPSBpdGVtLnByb2R1Y3RCcmFuZCkgPT09IG51bGwgfHwgX2l0ZW0kcHJvZHVjdEJyYW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRwcm9kdWN0QnJhbmQubmFtZSwgIiAtICIpLmNvbmNhdChpdGVtLm5hbWUpCiAgICAgICAgfTsKICAgICAgfSkKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCBudWxsLCBlcnJvcnMucHJvZHVjdEdyb3VwKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDQ29sLCB7CiAgICAgIGxnOiAiNiIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICB9LCAiR2lceEUxIFx1MDExMVx1MUVBMWkgbFx4RkQiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ3VycmVuY3lJbnB1dCwgewogICAgICBuYW1lOiAiYWdlbnRQcmljZSIsCiAgICAgIGhhbmRsZUNoYW5nZTogaGFuZGxlQ2hhbmdlCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLmFnZW50UHJpY2UpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgIH0sICJHaVx4RTEgU2Fsb24iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ3VycmVuY3lJbnB1dCwgewogICAgICBuYW1lOiAicHJpY2UiLAogICAgICBoYW5kbGVDaGFuZ2U6IGhhbmRsZUNoYW5nZQogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgIH0sIGVycm9ycy5wcmljZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInZvbHVtZSIKICAgIH0sICJEdW5nIHRceEVEY2giKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0lucHV0LCB7CiAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICBuYW1lOiAidm9sdW1lIiwKICAgICAgaWQ6ICJ2b2x1bWUiLAogICAgICBwbGFjZWhvbGRlcjogIkR1bmcgdFx4RURjaCIsCiAgICAgIGF1dG9Db21wbGV0ZTogInZvbHVtZSIsCiAgICAgIG9uQ2hhbmdlOiAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoZSkgewogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlQ2hhbmdlKGUpOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgcmVuZGVyUHJvZHVjdENvZGUoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gzKSB7CiAgICAgICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCksCiAgICAgIHZhbGlkOiBlcnJvcnMudm9sdW1lLAogICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgIHZhbHVlOiB2YWx1ZXMudm9sdW1lCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLnZvbHVtZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInVzZXJOYW1lIgogICAgfSwgIlx1MDExMFx1MDFBMW4gdlx1MUVDQiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3QsIHsKICAgICAgbmFtZTogInVuaXQiLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoaXRlbSkgewogICAgICAgIHNldEZpZWxkVmFsdWUoJ3VuaXQnLCBpdGVtLnZhbHVlKTsKICAgICAgfSwKICAgICAgdmFsdWU6IHsKICAgICAgICB2YWx1ZTogdmFsdWVzLnVuaXQsCiAgICAgICAgbGFiZWw6IHZhbHVlcy51bml0CiAgICAgIH0sCiAgICAgIG9wdGlvbnM6IFVuaXRUeXBlLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSwKICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQoaXRlbS50aXRsZSkKICAgICAgICB9OwogICAgICB9KQogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgIH0sIGVycm9ycy50eXBlKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAiY29kZSIKICAgIH0sICJUclx1MUVBMW5nIHRoXHhFMWkiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0LCB7CiAgICAgIG5hbWU6ICJzdGF0dXMiLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoaXRlbSkgewogICAgICAgIHNldEZpZWxkVmFsdWUoJ3N0YXR1cycsIGl0ZW0udmFsdWUpOwogICAgICB9LAogICAgICB2YWx1ZTogewogICAgICAgIHZhbHVlOiB2YWx1ZXMuc3RhdHVzLAogICAgICAgIGxhYmVsOiBtYXBwaW5nU3RhdHVzW3ZhbHVlcy5zdGF0dXNdCiAgICAgIH0sCiAgICAgIG9wdGlvbnM6IFByb2R1Y3RTdGF0dXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBpdGVtLnZhbHVlLAogICAgICAgICAgbGFiZWw6IGl0ZW0udGl0bGUKICAgICAgICB9OwogICAgICB9KQogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgIH0sIGVycm9ycy5zdGF0dXMpKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChEcm9wem9uZSwgewogICAgICBnZXRVcGxvYWRQYXJhbXM6IGdldFVwbG9hZFBhcmFtcywKICAgICAgb25DaGFuZ2VTdGF0dXM6IGhhbmRsZUNoYW5nZVN0YXR1cywKICAgICAgYWNjZXB0OiAiaW1hZ2UvKixhdWRpby8qLHZpZGVvLyoiLAogICAgICBpbnB1dExhYmVsOiAiVXBsb2FkIFx1MUVBMm5oIiwKICAgICAgaW5wdXRDb250ZW50OiAiS1x4RTlvIHRoXHUxRUEzIGhceEVDbmggXHUxRUEzbmggaG9cdTFFQjdjIGJcdTFFQTVtIFx1MDExMVx1MUVDMyBjaFx1MUVDRG4gXHUxRUEzbmgiLAogICAgICBzdWJtaXRCdXR0b25Db250ZW50OiAiSG9ceEUwbiB0aFx4RTBuaCIsCiAgICAgIGlucHV0V2l0aEZpbGVzQ29udGVudDogIlRoXHhFQW0gZmlsZSIsCiAgICAgIGluaXRpYWxGaWxlczogaW5pdEltYWdlcwogICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCB7CiAgICAgIGNsYXNzTmFtZTogImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0J1dHRvbiwgewogICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgY29sb3I6ICJwcmltYXJ5IiwKICAgICAgZGlzYWJsZWQ6IGluaXRpYWxTdGF0ZS5sb2FkaW5nCiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSWNvbiwgewogICAgICBuYW1lOiAiY2lsLXNhdmUiCiAgICB9KSwgIiAiLCBpbml0aWFsU3RhdGUubG9hZGluZyA/ICfEkGFuZyB44butIGzDvScgOiAnTMawdSB0aGF5IMSR4buVaScpKSk7CiAgfSkpKTsKfTsKCmV4cG9ydCBkZWZhdWx0IEVkaXRQcm9kdWN0Ow=="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/product/ProductList/EditProduct.js"],"names":["React","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CInvalidFeedback","CFormGroup","CLabel","CInput","CRow","CCardTitle","CIcon","Formik","Yup","useDispatch","useSelector","getDetailProduct","updateProduct","getProductGroup","Select","useHistory","fetching","globalizedProductSelectors","globalizedproductGroupsSelectors","ProductStatus","UnitType","mappingStatus","Dropzone","CurrencyInput","getCodeByName","validationSchema","object","shape","name","string","min","required","validate","selectById","selectAll","EditProduct","props","state","product","initialState","initialValues","agentPrice","barcode","code","createdBy","createdDate","desc","id","image","lastModifiedBy","lastModifiedDate","price","productBrand","productGroup","ref","images","dispatch","history","initValues","setInitValues","match","params","initImages","setInitImages","dependency","page","size","sort","temp","JSON","parse","e","arrRequest","map","fetch","Promise","all","then","arrRes","arr","res","arrayBuffer","buf","File","url","type","onSubmit","values","resetForm","stringify","current","getUploadParams","process","env","NODE_ENV","handleChangeStatus","status","xhr","response","push","updatingSuccess","goBack","renderProductCode","codeName","volume","setFieldValue","errors","handleChange","handleBlur","handleSubmit","item","value","label","unit","title","loading"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CInvalidFeedback,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n\n  CCardTitle,\n} from '@coreui/react/lib';\nimport CIcon from '@coreui/icons-react/lib/CIcon';;\nimport {Formik} from 'formik';\nimport * as Yup from 'yup';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {getDetailProduct, updateProduct} from './product.api';\nimport {getProductGroup} from '../ProductGroup/product-group.api';\nimport Select from 'react-select';\nimport {useHistory} from 'react-router-dom';\nimport {fetching, globalizedProductSelectors} from './product.reducer';\nimport {globalizedproductGroupsSelectors} from '../ProductGroup/product-group.reducer';\nimport {ProductStatus, UnitType} from './contants';\nimport {mappingStatus} from './CreateProduct';\nimport Dropzone from 'react-dropzone-uploader';\nimport 'react-dropzone-uploader/dist/styles.css';\nimport CurrencyInput from '../../../components/currency-input/currency-input';\nimport {getCodeByName} from '../../../../shared/utils/normalize';\n\nconst validationSchema = function() {\n  return Yup.object().shape({\n    name: Yup.string()\n        .min(5, `Tên phải lớn hơn 5 kí tự`)\n        .required('Tên không để trống'),\n  });\n};\n\nimport { validate } from '../../../../shared/utils/normalize';\nconst {selectById} = globalizedProductSelectors;\nconst {selectAll} = globalizedproductGroupsSelectors;\n\nconst EditProduct = (props) => {\n  const {initialState} = useSelector((state) => state.product);\n  const initialValues = {\n    agentPrice: 0,\n    barcode: '',\n    code: '',\n    createdBy: null,\n    createdDate: '',\n    desc: '',\n    id: '',\n    image: '[]',\n    lastModifiedBy: null,\n    lastModifiedDate: null,\n    name: '',\n    price: 0,\n    productBrand: null,\n    productGroup: null,\n    code: '',\n    createdBy: null,\n    createdDate: '',\n    description: null,\n    id: '',\n    lastModifiedBy: null,\n    lastModifiedDate: null,\n    name: '',\n    status: '',\n    unit: '',\n    volume: 0,\n  };\n  const ref = useRef(null);\n  const images = useRef([]);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [initValues, setInitValues] = useState(null);\n\n  const product = useSelector((state) => selectById(state, props.match.params.id));\n  const [initImages, setInitImages] = useState([]);\n  const productGroup = useSelector(selectAll);\n  useEffect(() => {\n    dispatch(getDetailProduct({ id: props.match.params.id, dependency: true }));\n    dispatch(getProductGroup({ page: 0, size: 20, sort: 'createdDate,DESC', dependency: true }));\n  }, []);\n\n  useEffect(() => {\n    if (product) {\n      const temp = {...product};\n      temp.image = [];\n      try {\n        temp.image = JSON.parse(product.image);\n      } catch (e) {}\n      const arrRequest = temp.image?.map((image) => fetch(image));\n      Promise.all(arrRequest).then((arrRes) => {\n        const arr = arrRes.map((res) => {\n          return res?.arrayBuffer().then((buf) => {\n            return new File([buf], res.url.match(/.*\\/(.*)$/)[1], {type: 'image/jpeg'});\n          });\n        });\n        Promise.all(arr).then((res) => setInitImages(res));\n      });\n      setInitValues(temp);\n    }\n  }, [product]);\n\n  const onSubmit = (values, {resetForm}) => {\n    dispatch(fetching());\n    values.image = JSON.stringify(images.current);\n    dispatch(updateProduct(values));\n  };\n\n  const getUploadParams = () => {\n    return {url: process.env.NODE_ENV === 'development' ? 'http://localhost:8082/api/files' : 'http://localhost:8082/api/files'};\n  };\n\n  const handleChangeStatus = ({xhr}, status) => {\n    if (status === 'done') {\n      const response = JSON.parse(xhr.response);\n      const arr = [...images.current];\n      arr.push(response[0].url);\n      images.current = arr;\n    }\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  const renderProductCode = () => {\n    const codeName = getCodeByName(ref.current.values.name);\n    const code = `${ref.current.values.productGroup?.productBrand?.code || ''}_${ref.current.values.productGroup?.code || ''}_${codeName}_${\n      ref.current.values.volume\n    }`;\n    ref.current.setFieldValue('code', `${code}`);\n  };\n  return (\n    <CCard>\n      <CCardHeader>\n        <CCardTitle>Chỉnh sửa sản phẩm</CCardTitle>\n      </CCardHeader>\n      <CCardBody>\n        <Formik\n          initialValues={initValues || initialValues}\n          innerRef={ref}\n          validate={validate(validationSchema)}\n          enableReinitialize\n          onSubmit={onSubmit}\n        >\n          {({\n            values,\n            errors,\n\n\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue\n\n\n            ,\n          }) => (\n            <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n              <CRow>\n                <CCol lg=\"6\">\n                  <CFormGroup>\n                    <CLabel htmlFor=\"code\">Mã sản phẩm</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"code\"\n                      id=\"code\"\n                      placeholder=\"Mã sản phẩm\"\n                      disabled\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={`${values.code}`}\n                    />\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"lastName\">Tên sản phẩm</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"name\"\n                      id=\"name\"\n                      placeholder=\"Tên sản phẩm\"\n                      autoComplete=\"family-name\"\n                      invalid={errors.name}\n                      required\n                      onChange={async (e) => {\n                        await handleChange(e);\n                        renderProductCode();\n                      }}\n                      onBlur={handleBlur}\n                      value={values.name}\n                    />\n                    <CInvalidFeedback>{errors.name}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"userName\">Mô tả</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"desc\"\n                      id=\"desc\"\n                      placeholder=\"Mô tả\"\n                      autoComplete=\"desc\"\n                      invalid={errors.desc}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.desc}\n                    />\n                    <CInvalidFeedback>{errors.desc}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"productGroup\">Nhóm sản phẩm</CLabel>\n                    <Select\n                      name=\"productGroup\"\n                      onChange={async (item) => {\n                        await setFieldValue('productGroup', item.value);\n                        renderProductCode();\n                      }}\n                      value={{\n                        value: values.productGroup,\n                        label: `${values.productGroup?.productBrand?.name} - ${values.productGroup?.name}`,\n                      }}\n                      options={productGroup.map((item) => ({\n                        value: item,\n                        label: `${item.productBrand?.name} - ${item.name}`,\n                      }))}\n                    />\n                    <CInvalidFeedback>{errors.productGroup}</CInvalidFeedback>\n                  </CFormGroup>\n                </CCol>\n                <CCol lg=\"6\">\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Giá đại lý</CLabel>\n                    <CurrencyInput name=\"agentPrice\" handleChange={handleChange} />\n                    <CInvalidFeedback className=\"d-block\">{errors.agentPrice}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Giá Salon</CLabel>\n                    <CurrencyInput name=\"price\" handleChange={handleChange} />\n                    <CInvalidFeedback className=\"d-block\">{errors.price}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"volume\">Dung tích</CLabel>\n                    <CInput\n                      type=\"number\"\n                      name=\"volume\"\n                      id=\"volume\"\n                      placeholder=\"Dung tích\"\n                      autoComplete=\"volume\"\n                      onChange={async (e) => {\n                        await handleChange(e);\n                        renderProductCode();\n                      }}\n                      valid={errors.volume}\n                      onBlur={handleBlur}\n                      value={values.volume}\n                    />\n                    <CInvalidFeedback className=\"d-block\">{errors.volume}</CInvalidFeedback>\n                  </CFormGroup>\n\n                  <CFormGroup>\n                    <CLabel htmlFor=\"userName\">Đơn vị</CLabel>\n                    <Select\n                      name=\"unit\"\n                      onChange={(item) => {\n                        setFieldValue('unit', item.value);\n                      }}\n                      value={{\n                        value: values.unit,\n                        label: values.unit,\n                      }}\n                      options={UnitType.map((item) => ({\n                        value: item.value,\n                        label: `${item.title}`,\n                      }))}\n                    />\n                    <CInvalidFeedback className=\"d-block\">{errors.type}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"code\">Trạng thái</CLabel>\n                    <Select\n                      name=\"status\"\n                      onChange={(item) => {\n                        setFieldValue('status', item.value);\n                      }}\n                      value={{\n                        value: values.status,\n                        label: mappingStatus[values.status],\n                      }}\n                      options={ProductStatus.map((item) => ({\n                        value: item.value,\n                        label: item.title,\n                      }))}\n                    />\n                    <CInvalidFeedback className=\"d-block\">{errors.status}</CInvalidFeedback>\n                  </CFormGroup>\n                </CCol>\n              </CRow>\n              <CFormGroup>\n                <Dropzone\n                  getUploadParams={getUploadParams}\n                  onChangeStatus={handleChangeStatus}\n                  accept=\"image/*,audio/*,video/*\"\n                  inputLabel=\"Upload Ảnh\"\n                  inputContent=\"Kéo thả hình ảnh hoặc bấm để chọn ảnh\"\n                  submitButtonContent=\"Hoàn thành\"\n                  inputWithFilesContent=\"Thêm file\"\n                  initialFiles={initImages}\n                />\n              </CFormGroup>\n              <CFormGroup className=\"d-flex justify-content-center\">\n                <CButton type=\"submit\" color=\"primary\" disabled={initialState.loading}>\n                  <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Lưu thay đổi'}\n                </CButton>\n              </CFormGroup>\n            </CForm>\n          )}\n        </Formik>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default EditProduct;\n"]}]}