{"remainingRequest":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js!/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/product/ProductList/EditProduct.js","dependencies":[{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/product/ProductList/EditProduct.js","mtime":1617025780152},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/source-map-loader/index.js","mtime":499162500000},{"path":"/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/node_modules/eslint-loader/dist/cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gInVuZGVmaW5lZCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgppbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBDQnV0dG9uLCBDQ2FyZCwgQ0NhcmRIZWFkZXIsIENDYXJkQm9keSwgQ0NvbCwgQ0Zvcm0sIENJbnZhbGlkRmVlZGJhY2ssIENGb3JtR3JvdXAsIENMYWJlbCwgQ0lucHV0LCBDUm93LCBDU2VsZWN0IH0gZnJvbSAnQGNvcmV1aS9yZWFjdCc7CmltcG9ydCBDSWNvbiBmcm9tICdAY29yZXVpL2ljb25zLXJlYWN0JzsKaW1wb3J0IHsgRm9ybWlrIH0gZnJvbSAnZm9ybWlrJzsKaW1wb3J0ICogYXMgWXVwIGZyb20gJ3l1cCc7CmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgZ2V0UHJvZHVjdFR5cGUsIGdldERldGFpbFByb2R1Y3QsIGdldERpc3RyaWN0LCB1cGRhdGVQcm9kdWN0IH0gZnJvbSAnLi9wcm9kdWN0LmFwaSc7CmltcG9ydCB7IGdldFByb2R1Y3RHcm91cCB9IGZyb20gJy4uL1Byb2R1Y3RHcm91cC9wcm9kdWN0LWdyb3VwLmFwaSc7CmltcG9ydCBUb2FzdGVyIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvbm90aWZpY2F0aW9ucy90b2FzdGVyL1RvYXN0ZXInOwppbXBvcnQgeyB1c2VIaXN0b3J5IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IGZldGNoaW5nLCBnbG9iYWxpemVkUHJvZHVjdFNlbGVjdG9ycyB9IGZyb20gJy4vcHJvZHVjdC5yZWR1Y2VyJzsKaW1wb3J0IHsgZ2xvYmFsaXplZHByb2R1Y3RHcm91cHNTZWxlY3RvcnMgfSBmcm9tICcuLi9Qcm9kdWN0R3JvdXAvcHJvZHVjdC1ncm91cC5yZWR1Y2VyJzsKaW1wb3J0IHsgUHJvZHVjdFN0YXR1cywgVW5pdFR5cGUgfSBmcm9tICcuL2NvbnRhbnRzJzsKaW1wb3J0IHsgbWFwcGluZ1N0YXR1cyB9IGZyb20gJy4vQ3JlYXRlUHJvZHVjdCc7CmltcG9ydCBEcm9wem9uZSBmcm9tICdyZWFjdC1kcm9wem9uZS11cGxvYWRlcic7CmltcG9ydCAncmVhY3QtZHJvcHpvbmUtdXBsb2FkZXIvZGlzdC9zdHlsZXMuY3NzJzsKCnZhciB2YWxpZGF0aW9uU2NoZW1hID0gZnVuY3Rpb24gdmFsaWRhdGlvblNjaGVtYSh2YWx1ZXMpIHsKICByZXR1cm4gWXVwLm9iamVjdCgpLnNoYXBlKHsKICAgIG5hbWU6IFl1cC5zdHJpbmcoKS5taW4oNSwgIlRceEVBbiBwaFx1MUVBM2kgbFx1MUVEQm4gaFx1MDFBMW4gNSBrXHhFRCB0XHUxRUYxIikucmVxdWlyZWQoJ1TDqm4ga2jDtG5nIMSR4buDIHRy4buRbmcnKQogIH0pOwp9OwoKdmFyIHZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoZ2V0VmFsaWRhdGlvblNjaGVtYSkgewogIHJldHVybiBmdW5jdGlvbiAodmFsdWVzKSB7CiAgICB2YXIgdmFsaWRhdGlvblNjaGVtYSA9IGdldFZhbGlkYXRpb25TY2hlbWEodmFsdWVzKTsKCiAgICB0cnkgewogICAgICB2YWxpZGF0aW9uU2NoZW1hLnZhbGlkYXRlU3luYyh2YWx1ZXMsIHsKICAgICAgICBhYm9ydEVhcmx5OiBmYWxzZQogICAgICB9KTsKICAgICAgcmV0dXJuIHt9OwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgcmV0dXJuIGdldEVycm9yc0Zyb21WYWxpZGF0aW9uRXJyb3IoZXJyb3IpOwogICAgfQogIH07Cn07Cgp2YXIgZ2V0RXJyb3JzRnJvbVZhbGlkYXRpb25FcnJvciA9IGZ1bmN0aW9uIGdldEVycm9yc0Zyb21WYWxpZGF0aW9uRXJyb3IodmFsaWRhdGlvbkVycm9yKSB7CiAgdmFyIEZJUlNUX0VSUk9SID0gMDsKICByZXR1cm4gdmFsaWRhdGlvbkVycm9yLmlubmVyLnJlZHVjZShmdW5jdGlvbiAoZXJyb3JzLCBlcnJvcikgewogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZXJyb3JzKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgZXJyb3IucGF0aCwgZXJyb3IuZXJyb3JzW0ZJUlNUX0VSUk9SXSkpOwogIH0sIHt9KTsKfTsKCnZhciBmaW5kRmlyc3RFcnJvciA9IGZ1bmN0aW9uIGZpbmRGaXJzdEVycm9yKGZvcm1OYW1lLCBoYXNFcnJvcikgewogIHZhciBmb3JtID0gZG9jdW1lbnQuZm9ybXNbZm9ybU5hbWVdOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcm0ubGVuZ3RoOyBpKyspIHsKICAgIGlmIChoYXNFcnJvcihmb3JtW2ldLm5hbWUpKSB7CiAgICAgIGZvcm1baV0uZm9jdXMoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQp9OwoKdmFyIEVkaXRQcm9kdWN0ID0gZnVuY3Rpb24gRWRpdFByb2R1Y3QocHJvcHMpIHsKICB2YXIgX3VzZVNlbGVjdG9yID0gdXNlU2VsZWN0b3IoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucHJvZHVjdDsKICB9KSwKICAgICAgaW5pdGlhbFN0YXRlID0gX3VzZVNlbGVjdG9yLmluaXRpYWxTdGF0ZTsKCiAgdmFyIGluaXRpYWxWYWx1ZXMgPSB7CiAgICBjb2RlOiAnJywKICAgIG5hbWU6ICcnLAogICAgY29udGFjdE5hbWU6ICcnLAogICAgZW1haWw6ICcnLAogICAgdGVsOiAnJywKICAgIGRhdGVPZkJpcnRoOiAnJywKICAgIGNpdHk6IG51bGwsCiAgICBkaXN0cmljdDogbnVsbCwKICAgIGFkZHJlc3M6ICcnLAogICAgYnJhbmNoOiBudWxsLAogICAgdHlwZTogbnVsbCwKICAgIGltYWdlOiBbXSwKICAgIGNyZWF0ZWRZZWFyOiAnJywKICAgIG9iY2x1YkpvaW5UaW1lOiAnJwogIH07CiAgdmFyIHRvYXN0UmVmID0gdXNlUmVmKCk7CiAgdmFyIGltYWdlcyA9IHVzZVJlZihbXSk7CiAgdmFyIGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTsKICB2YXIgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKTsKCiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKG51bGwpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgaW5pdFZhbHVlcyA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldEluaXRWYWx1ZXMgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgc2VsZWN0QnlJZCA9IGdsb2JhbGl6ZWRQcm9kdWN0U2VsZWN0b3JzLnNlbGVjdEJ5SWQ7CiAgdmFyIHNlbGVjdEFsbCA9IGdsb2JhbGl6ZWRwcm9kdWN0R3JvdXBzU2VsZWN0b3JzLnNlbGVjdEFsbDsKICB2YXIgcHJvZHVjdCA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHNlbGVjdEJ5SWQoc3RhdGUsIHByb3BzLm1hdGNoLnBhcmFtcy5pZCk7CiAgfSk7CgogIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoW10pLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGluaXRJbWFnZXMgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRJbml0SW1hZ2VzID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIHByb2R1Y3RHcm91cCA9IHVzZVNlbGVjdG9yKHNlbGVjdEFsbCk7CiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoKGdldERldGFpbFByb2R1Y3QocHJvcHMubWF0Y2gucGFyYW1zLmlkKSk7CiAgICBkaXNwYXRjaChnZXRQcm9kdWN0R3JvdXAoKSk7CiAgfSwgW10pOwogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAocHJvZHVjdCkgewogICAgICB2YXIgX3RlbXAkaW1hZ2U7CgogICAgICB2YXIgdGVtcCA9IF9vYmplY3RTcHJlYWQoe30sIHByb2R1Y3QpOwoKICAgICAgdGVtcC5wcm9kdWN0R3JvdXAgPSB0ZW1wLnByb2R1Y3RHcm91cC5pZDsKICAgICAgdGVtcC5zdGF0dXMgPSB0ZW1wLnN0YXR1czsKICAgICAgdGVtcC51bml0ID0gdGVtcC51bml0OwogICAgICB0ZW1wLmltYWdlID0gW107CgogICAgICB0cnkgewogICAgICAgIHRlbXAuaW1hZ2UgPSBKU09OLnBhcnNlKHByb2R1Y3QuaW1hZ2UpOwogICAgICB9IGNhdGNoIChlKSB7fQoKICAgICAgdmFyIGFyclJlcXVlc3QgPSAoX3RlbXAkaW1hZ2UgPSB0ZW1wLmltYWdlKSA9PT0gbnVsbCB8fCBfdGVtcCRpbWFnZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RlbXAkaW1hZ2UubWFwKGZ1bmN0aW9uIChpbWFnZSkgewogICAgICAgIHJldHVybiBmZXRjaChpbWFnZSk7CiAgICAgIH0pOwogICAgICBQcm9taXNlLmFsbChhcnJSZXF1ZXN0KS50aGVuKGZ1bmN0aW9uIChhcnJSZXMpIHsKICAgICAgICB2YXIgYXJyID0gYXJyUmVzLm1hcChmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICByZXR1cm4gcmVzID09PSBudWxsIHx8IHJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzLmFycmF5QnVmZmVyKCkudGhlbihmdW5jdGlvbiAoYnVmKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRmlsZShbYnVmXSwgcmVzLnVybC5tYXRjaCgvLipcLyguKikkLylbMV0sIHsKICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UvanBlZycKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBQcm9taXNlLmFsbChhcnIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgcmV0dXJuIHNldEluaXRJbWFnZXMocmVzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHNldEluaXRWYWx1ZXModGVtcCk7CiAgICB9CiAgfSwgW3Byb2R1Y3RdKTsKCiAgdmFyIG9uU3VibWl0ID0gZnVuY3Rpb24gb25TdWJtaXQodmFsdWVzLCBfcmVmKSB7CiAgICB2YXIgc2V0U3VibWl0dGluZyA9IF9yZWYuc2V0U3VibWl0dGluZywKICAgICAgICBzZXRFcnJvcnMgPSBfcmVmLnNldEVycm9ycywKICAgICAgICBzZXRTdGF0dXMgPSBfcmVmLnNldFN0YXR1cywKICAgICAgICByZXNldEZvcm0gPSBfcmVmLnJlc2V0Rm9ybTsKICAgIGRpc3BhdGNoKGZldGNoaW5nKCkpOwogICAgZGVsZXRlIHZhbHVlcy5jb2RlOwogICAgdmFsdWVzLmltYWdlID0gSlNPTi5zdHJpbmdpZnkoaW1hZ2VzLmN1cnJlbnQpOwogICAgZGlzcGF0Y2godXBkYXRlUHJvZHVjdCh2YWx1ZXMpKTsKICAgIHJlc2V0Rm9ybSgpOwogIH07CgogIHZhciBnZXRVcGxvYWRQYXJhbXMgPSBmdW5jdGlvbiBnZXRVcGxvYWRQYXJhbXMoKSB7CiAgICByZXR1cm4gewogICAgICB1cmw6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4Mi9hcGkvZmlsZXMnIDogJ2h0dHA6Ly8xMDMuMTIxLjkxLjE0Mjo4MDgyL2FwaS9maWxlcycKICAgIH07CiAgfTsKCiAgdmFyIGhhbmRsZUNoYW5nZVN0YXR1cyA9IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZVN0YXR1cyhfcmVmMiwgc3RhdHVzKSB7CiAgICB2YXIgbWV0YSA9IF9yZWYyLm1ldGEsCiAgICAgICAgZmlsZSA9IF9yZWYyLmZpbGUsCiAgICAgICAgeGhyID0gX3JlZjIueGhyOwoKICAgIGlmIChzdGF0dXMgPT09ICdkb25lJykgewogICAgICB2YXIgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZSk7CgogICAgICB2YXIgYXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KGltYWdlcy5jdXJyZW50KTsKCiAgICAgIGFyci5wdXNoKHJlc3BvbnNlWzBdLnVybCk7CiAgICAgIGltYWdlcy5jdXJyZW50ID0gYXJyOwogICAgfQogIH07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBpZiAoaW5pdGlhbFN0YXRlLnVwZGF0aW5nU3VjY2VzcykgewogICAgICB0b2FzdFJlZi5jdXJyZW50LmFkZFRvYXN0KCk7CiAgICAgIGhpc3RvcnkuZ29CYWNrKCk7CiAgICB9CiAgfSwgW2luaXRpYWxTdGF0ZS51cGRhdGluZ1N1Y2Nlc3NdKTsKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRvYXN0ZXIsIHsKICAgIHJlZjogdG9hc3RSZWYsCiAgICBtZXNzYWdlOiAiVFx1MUVBMW8gbVx1MUVEQmkgc1x1MUVBM24gcGhcdTFFQTltIHRoXHhFMG5oIGNceEY0bmciCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDYXJkSGVhZGVyLCBudWxsLCAiQ2hcdTFFQzluaCBzXHUxRUVEYSBzXHUxRUEzbiBwaFx1MUVBOW0iKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0NhcmRCb2R5LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtaWssIHsKICAgIGluaXRpYWxWYWx1ZXM6IGluaXRWYWx1ZXMgfHwgaW5pdGlhbFZhbHVlcywKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSh2YWxpZGF0aW9uU2NoZW1hKSwKICAgIGVuYWJsZVJlaW5pdGlhbGl6ZTogdHJ1ZSwKICAgIG9uU3VibWl0OiBvblN1Ym1pdAogIH0sIGZ1bmN0aW9uIChfcmVmMykgewogICAgdmFyIF9SZWFjdCRjcmVhdGVFbGVtZW50LCBfUmVhY3QkY3JlYXRlRWxlbWVudDI7CgogICAgdmFyIHZhbHVlcyA9IF9yZWYzLnZhbHVlcywKICAgICAgICBlcnJvcnMgPSBfcmVmMy5lcnJvcnMsCiAgICAgICAgdG91Y2hlZCA9IF9yZWYzLnRvdWNoZWQsCiAgICAgICAgc3RhdHVzID0gX3JlZjMuc3RhdHVzLAogICAgICAgIGRpcnR5ID0gX3JlZjMuZGlydHksCiAgICAgICAgaGFuZGxlQ2hhbmdlID0gX3JlZjMuaGFuZGxlQ2hhbmdlLAogICAgICAgIGhhbmRsZUJsdXIgPSBfcmVmMy5oYW5kbGVCbHVyLAogICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYzLmhhbmRsZVN1Ym1pdCwKICAgICAgICBzZXRGaWVsZFZhbHVlID0gX3JlZjMuc2V0RmllbGRWYWx1ZSwKICAgICAgICBpc1N1Ym1pdHRpbmcgPSBfcmVmMy5pc1N1Ym1pdHRpbmcsCiAgICAgICAgaXNWYWxpZCA9IF9yZWYzLmlzVmFsaWQsCiAgICAgICAgaGFuZGxlUmVzZXQgPSBfcmVmMy5oYW5kbGVSZXNldCwKICAgICAgICBzZXRUb3VjaGVkID0gX3JlZjMuc2V0VG91Y2hlZDsKICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybSwgewogICAgICBvblN1Ym1pdDogaGFuZGxlU3VibWl0LAogICAgICBub1ZhbGlkYXRlOiB0cnVlLAogICAgICBuYW1lOiAic2ltcGxlRm9ybSIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENSb3csIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI2IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJjb2RlIgogICAgfSwgIk1ceEUzIHNcdTFFQTNuIHBoXHUxRUE5bSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAiY29kZSIsCiAgICAgIGlkOiAiY29kZSIsCiAgICAgIHBsYWNlaG9sZGVyOiAiTVx4RTMgc1x1MUVBM24gcGhcdTFFQTltIiwKICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6ICIiLmNvbmNhdCh2YWx1ZXMuY29kZSkKICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJsYXN0TmFtZSIKICAgIH0sICJUXHhFQW4gc1x1MUVBM24gcGhcdTFFQTltIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICB0eXBlOiAidGV4dCIsCiAgICAgIG5hbWU6ICJuYW1lIiwKICAgICAgaWQ6ICJuYW1lIiwKICAgICAgcGxhY2Vob2xkZXI6ICJUXHhFQW4gc1x1MUVBM24gcGhcdTFFQTltIiwKICAgICAgYXV0b0NvbXBsZXRlOiAiZmFtaWx5LW5hbWUiLAogICAgICB2YWxpZDogZXJyb3JzLm5hbWUgfHwgbnVsbCwKICAgICAgaW52YWxpZDogdG91Y2hlZC5uYW1lICYmICEhZXJyb3JzLm5hbWUsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICBvbkJsdXI6IGhhbmRsZUJsdXIsCiAgICAgIHZhbHVlOiB2YWx1ZXMubmFtZQogICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIG51bGwsIGVycm9ycy5uYW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAidXNlck5hbWUiCiAgICB9LCAiTVx4RjQgdFx1MUVBMyIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogInRleHQiLAogICAgICBuYW1lOiAiY29udGFjdE5hbWUiLAogICAgICBpZDogImNvbnRhY3ROYW1lIiwKICAgICAgcGxhY2Vob2xkZXI6ICJNXHhGNCB0XHUxRUEzIiwKICAgICAgYXV0b0NvbXBsZXRlOiAiY29udGFjdE5hbWUiLAogICAgICB2YWxpZDogZXJyb3JzLmRlc2MgfHwgbnVsbCwKICAgICAgaW52YWxpZDogdG91Y2hlZC5kZXNjICYmICEhZXJyb3JzLmRlc2MsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy5kZXNjCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgbnVsbCwgZXJyb3JzLmRlc2MpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJwcm9kdWN0R3JvdXAiCiAgICB9LCAiTG9cdTFFQTFpIHNcdTFFQTNuIHBoXHUxRUE5bSIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDU2VsZWN0LCB7CiAgICAgIGN1c3RvbTogdHJ1ZSwKICAgICAgbmFtZTogInByb2R1Y3RHcm91cCIsCiAgICAgIGlkOiAicHJvZHVjdEdyb3VwIiwKICAgICAgdmFsdWU6IHZhbHVlcy5wcm9kdWN0R3JvdXAsCiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgICAgc2V0RmllbGRWYWx1ZSgncHJvZHVjdEdyb3VwJywgZS50YXJnZXQudmFsdWUpOwogICAgICB9CiAgICB9LCBwcm9kdWN0R3JvdXAgJiYgcHJvZHVjdEdyb3VwLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICB2YXIgX2l0ZW0kcHJvZHVjdEJyYW5kOwoKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJvcHRpb24iLCB7CiAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgIHZhbHVlOiBpdGVtLmlkCiAgICAgIH0sICIiLmNvbmNhdCgoX2l0ZW0kcHJvZHVjdEJyYW5kID0gaXRlbS5wcm9kdWN0QnJhbmQpID09PSBudWxsIHx8IF9pdGVtJHByb2R1Y3RCcmFuZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kcHJvZHVjdEJyYW5kLm5hbWUsICIgLSAiKS5jb25jYXQoaXRlbS5uYW1lKSk7CiAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIG51bGwsIGVycm9ycy50ZWwpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENDb2wsIHsKICAgICAgbGc6ICI2IgogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0xhYmVsLCB7CiAgICAgIGh0bWxGb3I6ICJwYXNzd29yZCIKICAgIH0sICJHaVx4RTEgXHUwMTExXHUxRUExaSBsXHhGRCIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgIG5hbWU6ICJwcmljZSIsCiAgICAgIGlkOiAicHJpY2UiLAogICAgICBwbGFjZWhvbGRlcjogIkdpXHhFMSBcdTAxMTFcdTFFQTFpIGxceEZEIiwKICAgICAgYXV0b0NvbXBsZXRlOiAiYWRkcmVzcyIsCiAgICAgIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIHZhbGlkOiBlcnJvcnMucHJpY2UgfHwgbnVsbCwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICB2YWx1ZTogdmFsdWVzLnByaWNlCiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ludmFsaWRGZWVkYmFjaywgewogICAgICBjbGFzc05hbWU6ICJkLWJsb2NrIgogICAgfSwgZXJyb3JzLnByaWNlKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAidm9sdW1lIgogICAgfSwgIkR1bmcgdFx4RURjaCIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW5wdXQsIHsKICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgIG5hbWU6ICJ2b2x1bWUiLAogICAgICBpZDogInZvbHVtZSIsCiAgICAgIHBsYWNlaG9sZGVyOiAiRHVuZyB0XHhFRGNoIiwKICAgICAgYXV0b0NvbXBsZXRlOiAidm9sdW1lIiwKICAgICAgb25DaGFuZ2U6IGhhbmRsZUNoYW5nZSwKICAgICAgaW52YWxpZDogZXJyb3JzLnZvbHVtZSwKICAgICAgdmFsaWQ6ICFlcnJvcnMudm9sdW1lIHx8IG51bGwsCiAgICAgIG9uQmx1cjogaGFuZGxlQmx1ciwKICAgICAgdmFsdWU6IHZhbHVlcy52b2x1bWUKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCBlcnJvcnMudm9sdW1lKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENGb3JtR3JvdXAsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENMYWJlbCwgewogICAgICBodG1sRm9yOiAicGFzc3dvcmQiCiAgICB9LCAiR2lceEUxIFNhbG9uIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnB1dCwgewogICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgbmFtZTogImFnZW50UHJpY2UiLAogICAgICBpZDogImFnZW50UHJpY2UiLAogICAgICBwbGFjZWhvbGRlcjogIkdpXHhFMSBTYWxvbiIsCiAgICAgIGF1dG9Db21wbGV0ZTogImFnZW50UHJpY2UiLAogICAgICBvbkNoYW5nZTogaGFuZGxlQ2hhbmdlLAogICAgICB2YWxpZDogZXJyb3JzLmFnZW50UHJpY2UgfHwgbnVsbCwKICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLAogICAgICB2YWx1ZTogdmFsdWVzLmFnZW50UHJpY2UKICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCBlcnJvcnMuYWdlbnRQcmljZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogInVzZXJOYW1lIgogICAgfSwgIlx1MDExMFx1MDFBMW4gdlx1MUVDQiIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDU2VsZWN0LCAoX1JlYWN0JGNyZWF0ZUVsZW1lbnQgPSB7CiAgICAgIGN1c3RvbTogdHJ1ZSwKICAgICAgbmFtZTogImNjbW9udGgiCiAgICB9LCBfZGVmaW5lUHJvcGVydHkoX1JlYWN0JGNyZWF0ZUVsZW1lbnQsICJuYW1lIiwgInR5cGUiKSwgX2RlZmluZVByb3BlcnR5KF9SZWFjdCRjcmVhdGVFbGVtZW50LCAiaWQiLCAidHlwZSIpLCBfZGVmaW5lUHJvcGVydHkoX1JlYWN0JGNyZWF0ZUVsZW1lbnQsICJ2YWx1ZSIsIHZhbHVlcy51bml0KSwgX2RlZmluZVByb3BlcnR5KF9SZWFjdCRjcmVhdGVFbGVtZW50LCAib25DaGFuZ2UiLCBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgIHNldEZpZWxkVmFsdWUoJ3VuaXQnLCBlLnRhcmdldC52YWx1ZSk7CiAgICB9KSwgX1JlYWN0JGNyZWF0ZUVsZW1lbnQpLCBVbml0VHlwZS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJvcHRpb24iLCB7CiAgICAgICAga2V5OiBpdGVtLnZhbHVlLAogICAgICAgIHZhbHVlOiBpdGVtLnZhbHVlCiAgICAgIH0sIGl0ZW0udGl0bGUpOwogICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgIGNsYXNzTmFtZTogImQtYmxvY2siCiAgICB9LCBlcnJvcnMudHlwZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDRm9ybUdyb3VwLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDTGFiZWwsIHsKICAgICAgaHRtbEZvcjogImNvZGUiCiAgICB9LCAiVHJcdTFFQTFuZyB0aFx4RTFpIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENTZWxlY3QsIChfUmVhY3QkY3JlYXRlRWxlbWVudDIgPSB7CiAgICAgIGN1c3RvbTogdHJ1ZSwKICAgICAgbmFtZTogImNjbW9udGgiCiAgICB9LCBfZGVmaW5lUHJvcGVydHkoX1JlYWN0JGNyZWF0ZUVsZW1lbnQyLCAibmFtZSIsICJ0eXBlIiksIF9kZWZpbmVQcm9wZXJ0eShfUmVhY3QkY3JlYXRlRWxlbWVudDIsICJpZCIsICJ0eXBlIiksIF9kZWZpbmVQcm9wZXJ0eShfUmVhY3QkY3JlYXRlRWxlbWVudDIsICJ2YWx1ZSIsIHZhbHVlcy5zdGF0dXMpLCBfZGVmaW5lUHJvcGVydHkoX1JlYWN0JGNyZWF0ZUVsZW1lbnQyLCAib25DaGFuZ2UiLCBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgIHNldEZpZWxkVmFsdWUoJ3N0YXR1cycsIGUudGFyZ2V0LnZhbHVlKTsKICAgIH0pLCBfUmVhY3QkY3JlYXRlRWxlbWVudDIpLCBQcm9kdWN0U3RhdHVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIsIHsKICAgICAgICBrZXk6IGl0ZW0udmFsdWUsCiAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUKICAgICAgfSwgbWFwcGluZ1N0YXR1c1tpdGVtLnRpdGxlXSk7CiAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENJbnZhbGlkRmVlZGJhY2ssIHsKICAgICAgY2xhc3NOYW1lOiAiZC1ibG9jayIKICAgIH0sIGVycm9ycy50eXBlKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcHpvbmUsIHsKICAgICAgZ2V0VXBsb2FkUGFyYW1zOiBnZXRVcGxvYWRQYXJhbXMsCiAgICAgIG9uQ2hhbmdlU3RhdHVzOiBoYW5kbGVDaGFuZ2VTdGF0dXMsCiAgICAgIGFjY2VwdDogImltYWdlLyosYXVkaW8vKix2aWRlby8qIiwKICAgICAgaW5wdXRMYWJlbDogIlVwbG9hZCBcdTFFQTJuaCIsCiAgICAgIGlucHV0Q29udGVudDogIktceEU5byB0aFx1MUVBMyBoXHhFQ25oIFx1MUVBM25oIGhvXHUxRUI3YyBiXHUxRUE1bSBcdTAxMTFcdTFFQzMgY2hcdTFFQ0RuIFx1MUVBM25oIiwKICAgICAgc3VibWl0QnV0dG9uQ29udGVudDogIkhvXHhFMG4gdGhceEUwbmgiLAogICAgICBpbnB1dFdpdGhGaWxlc0NvbnRlbnQ6ICJUaFx4RUFtIGZpbGUiLAogICAgICBpbml0aWFsRmlsZXM6IGluaXRJbWFnZXMKICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0Zvcm1Hcm91cCwgewogICAgICBjbGFzc05hbWU6ICJkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciIKICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENCdXR0b24sIHsKICAgICAgdHlwZTogInN1Ym1pdCIsCiAgICAgIGNvbG9yOiAicHJpbWFyeSIsCiAgICAgIGRpc2FibGVkOiBpbml0aWFsU3RhdGUubG9hZGluZwogICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ0ljb24sIHsKICAgICAgbmFtZTogImNpbC1zYXZlIgogICAgfSksICIgIiwgaW5pdGlhbFN0YXRlLmxvYWRpbmcgPyAnxJBhbmcgeOG7rSBsw70nIDogJ0zGsHUgdGhheSDEkeG7lWknKSkpOwogIH0pKSk7Cn07CgpleHBvcnQgZGVmYXVsdCBFZGl0UHJvZHVjdDs="},{"version":3,"sources":["/Users/dmr/PrivateProject/Nodejs/MydicoCRM/frontend/src/views/pages/product/ProductList/EditProduct.js"],"names":["React","useEffect","useRef","useState","CButton","CCard","CCardHeader","CCardBody","CCol","CForm","CInvalidFeedback","CFormGroup","CLabel","CInput","CRow","CSelect","CIcon","Formik","Yup","useDispatch","useSelector","getProductType","getDetailProduct","getDistrict","updateProduct","getProductGroup","Toaster","useHistory","fetching","globalizedProductSelectors","globalizedproductGroupsSelectors","ProductStatus","UnitType","mappingStatus","Dropzone","validationSchema","values","object","shape","name","string","min","required","validate","getValidationSchema","validateSync","abortEarly","error","getErrorsFromValidationError","validationError","FIRST_ERROR","inner","reduce","errors","path","findFirstError","formName","hasError","form","document","forms","i","length","focus","EditProduct","props","state","product","initialState","initialValues","code","contactName","email","tel","dateOfBirth","city","district","address","branch","type","image","createdYear","obclubJoinTime","toastRef","images","dispatch","history","initValues","setInitValues","selectById","selectAll","match","params","id","initImages","setInitImages","productGroup","temp","status","unit","JSON","parse","e","arrRequest","map","fetch","Promise","all","then","arrRes","arr","res","arrayBuffer","buf","File","url","onSubmit","setSubmitting","setErrors","setStatus","resetForm","stringify","current","getUploadParams","process","env","NODE_ENV","handleChangeStatus","meta","file","xhr","response","push","updatingSuccess","addToast","goBack","touched","dirty","handleChange","handleBlur","handleSubmit","setFieldValue","isSubmitting","isValid","handleReset","setTouched","desc","target","value","item","productBrand","price","volume","agentPrice","title","loading"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {\n  CButton,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCol,\n  CForm,\n  CInvalidFeedback,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CRow,\n  CSelect,\n} from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getProductType, getDetailProduct, getDistrict, updateProduct } from './product.api';\nimport { getProductGroup } from '../ProductGroup/product-group.api';\nimport Toaster from '../../../components/notifications/toaster/Toaster';\nimport { useHistory } from 'react-router-dom';\nimport { fetching, globalizedProductSelectors } from './product.reducer';\nimport { globalizedproductGroupsSelectors } from '../ProductGroup/product-group.reducer';\nimport { ProductStatus, UnitType } from './contants';\nimport { mappingStatus } from './CreateProduct';\nimport Dropzone from 'react-dropzone-uploader';\nimport 'react-dropzone-uploader/dist/styles.css';\n\nconst validationSchema = function (values) {\n  return Yup.object().shape({\n    name: Yup.string().min(5, `Tên phải lớn hơn 5 kí tự`).required('Tên không để trống'),\n  });\n};\n\nconst validate = getValidationSchema => {\n  return values => {\n    const validationSchema = getValidationSchema(values);\n    try {\n      validationSchema.validateSync(values, { abortEarly: false });\n      return {};\n    } catch (error) {\n      return getErrorsFromValidationError(error);\n    }\n  };\n};\n\nconst getErrorsFromValidationError = validationError => {\n  const FIRST_ERROR = 0;\n  return validationError.inner.reduce((errors, error) => {\n    return {\n      ...errors,\n      [error.path]: error.errors[FIRST_ERROR],\n    };\n  }, {});\n};\n\nconst findFirstError = (formName, hasError) => {\n  const form = document.forms[formName];\n  for (let i = 0; i < form.length; i++) {\n    if (hasError(form[i].name)) {\n      form[i].focus();\n      break;\n    }\n  }\n};\n\nconst EditProduct = props => {\n  const { initialState } = useSelector(state => state.product);\n  const initialValues = {\n    code: '',\n    name: '',\n    contactName: '',\n    email: '',\n    tel: '',\n    dateOfBirth: '',\n    city: null,\n    district: null,\n    address: '',\n    branch: null,\n    type: null,\n    image: [],\n    createdYear: '',\n    obclubJoinTime: '',\n  };\n  const toastRef = useRef();\n  const images = useRef([]);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [initValues, setInitValues] = useState(null);\n  const { selectById } = globalizedProductSelectors;\n  const { selectAll } = globalizedproductGroupsSelectors;\n  const product = useSelector(state => selectById(state, props.match.params.id));\n  const [initImages, setInitImages] = useState([]);\n  const productGroup = useSelector(selectAll);\n  useEffect(() => {\n    dispatch(getDetailProduct(props.match.params.id));\n    dispatch(getProductGroup());\n  }, []);\n\n  useEffect(() => {\n    if (product) {\n      const temp = { ...product };\n      temp.productGroup = temp.productGroup.id;\n      temp.status = temp.status;\n      temp.unit = temp.unit;\n      temp.image = [];\n      try {\n        temp.image = JSON.parse(product.image);\n      } catch (e) {}\n      const arrRequest = temp.image?.map(image => fetch(image));\n      Promise.all(arrRequest).then(arrRes => {\n        const arr = arrRes.map(res => {\n          return res?.arrayBuffer().then(buf => {\n            return new File([buf], res.url.match(/.*\\/(.*)$/)[1], { type: 'image/jpeg' });\n          });\n        });\n        Promise.all(arr).then(res => setInitImages(res));\n      });\n      setInitValues(temp);\n    }\n  }, [product]);\n\n  const onSubmit = (values, { setSubmitting, setErrors, setStatus, resetForm }) => {\n    dispatch(fetching());\n    delete values.code;\n    values.image = JSON.stringify(images.current);\n    dispatch(updateProduct(values));\n    resetForm();\n  };\n\n  const getUploadParams = () => {\n    return { url: process.env.NODE_ENV === 'development' ? 'http://localhost:8082/api/files' : 'http://103.121.91.142:8082/api/files' };\n  };\n\n  const handleChangeStatus = ({ meta, file, xhr }, status) => {\n    if (status === 'done') {\n      const response = JSON.parse(xhr.response);\n      const arr = [...images.current];\n      arr.push(response[0].url);\n      images.current = arr;\n    }\n  };\n\n  useEffect(() => {\n    if (initialState.updatingSuccess) {\n      toastRef.current.addToast();\n      history.goBack();\n    }\n  }, [initialState.updatingSuccess]);\n\n  return (\n    <CCard>\n      <Toaster ref={toastRef} message=\"Tạo mới sản phẩm thành công\" />\n      <CCardHeader>Chỉnh sửa sản phẩm</CCardHeader>\n      <CCardBody>\n        <Formik initialValues={initValues || initialValues} validate={validate(validationSchema)} enableReinitialize onSubmit={onSubmit}>\n          {({\n            values,\n            errors,\n            touched,\n            status,\n            dirty,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            setFieldValue,\n            isSubmitting,\n            isValid,\n            handleReset,\n            setTouched,\n          }) => (\n            <CForm onSubmit={handleSubmit} noValidate name=\"simpleForm\">\n              <CRow>\n                <CCol lg=\"6\">\n                  <CFormGroup>\n                    <CLabel htmlFor=\"code\">Mã sản phẩm</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"code\"\n                      id=\"code\"\n                      placeholder=\"Mã sản phẩm\"\n                      disabled\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={`${values.code}`}\n                    />\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"lastName\">Tên sản phẩm</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"name\"\n                      id=\"name\"\n                      placeholder=\"Tên sản phẩm\"\n                      autoComplete=\"family-name\"\n                      valid={errors.name || null}\n                      invalid={touched.name && !!errors.name}\n                      required\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.name}\n                    />\n                    <CInvalidFeedback>{errors.name}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"userName\">Mô tả</CLabel>\n                    <CInput\n                      type=\"text\"\n                      name=\"contactName\"\n                      id=\"contactName\"\n                      placeholder=\"Mô tả\"\n                      autoComplete=\"contactName\"\n                      valid={errors.desc || null}\n                      invalid={touched.desc && !!errors.desc}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.desc}\n                    />\n                    <CInvalidFeedback>{errors.desc}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"productGroup\">Loại sản phẩm</CLabel>\n                    <CSelect\n                      custom\n                      name=\"productGroup\"\n                      id=\"productGroup\"\n                      value={values.productGroup}\n                      onChange={e => {\n                        setFieldValue('productGroup', e.target.value);\n                      }}\n                    >\n                      {productGroup &&\n                        productGroup.map(item => (\n                          <option key={item.id} value={item.id}>\n                            {`${item.productBrand?.name} - ${item.name}`}\n                          </option>\n                        ))}\n                    </CSelect>\n                    <CInvalidFeedback>{errors.tel}</CInvalidFeedback>\n                  </CFormGroup>\n                </CCol>\n                <CCol lg=\"6\">\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Giá đại lý</CLabel>\n                    <CInput\n                      type=\"number\"\n                      name=\"price\"\n                      id=\"price\"\n                      placeholder=\"Giá đại lý\"\n                      autoComplete=\"address\"\n                      onChange={handleChange}\n                      valid={errors.price || null}\n                      onBlur={handleBlur}\n                      value={values.price}\n                    />\n                    <CInvalidFeedback className=\"d-block\">{errors.price}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"volume\">Dung tích</CLabel>\n                    <CInput\n                      type=\"number\"\n                      name=\"volume\"\n                      id=\"volume\"\n                      placeholder=\"Dung tích\"\n                      autoComplete=\"volume\"\n                      onChange={handleChange}\n                      invalid={errors.volume}\n                      valid={!errors.volume || null}\n                      onBlur={handleBlur}\n                      value={values.volume}\n                    />\n                    <CInvalidFeedback className=\"d-block\">{errors.volume}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"password\">Giá Salon</CLabel>\n                    <CInput\n                      type=\"number\"\n                      name=\"agentPrice\"\n                      id=\"agentPrice\"\n                      placeholder=\"Giá Salon\"\n                      autoComplete=\"agentPrice\"\n                      onChange={handleChange}\n                      valid={errors.agentPrice || null}\n                      onBlur={handleBlur}\n                      value={values.agentPrice}\n                    />\n                    <CInvalidFeedback className=\"d-block\">{errors.agentPrice}</CInvalidFeedback>\n                  </CFormGroup>\n\n                  <CFormGroup>\n                    <CLabel htmlFor=\"userName\">Đơn vị</CLabel>\n                    <CSelect\n                      custom\n                      name=\"ccmonth\"\n                      name=\"type\"\n                      id=\"type\"\n                      value={values.unit}\n                      onChange={e => {\n                        setFieldValue('unit', e.target.value);\n                      }}\n                    >\n                      {UnitType.map(item => (\n                        <option key={item.value} value={item.value}>\n                          {item.title}\n                        </option>\n                      ))}\n                    </CSelect>\n                    <CInvalidFeedback className=\"d-block\">{errors.type}</CInvalidFeedback>\n                  </CFormGroup>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"code\">Trạng thái</CLabel>\n                    <CSelect\n                      custom\n                      name=\"ccmonth\"\n                      name=\"type\"\n                      id=\"type\"\n                      value={values.status}\n                      onChange={e => {\n                        setFieldValue('status', e.target.value);\n                      }}\n                    >\n                      {ProductStatus.map(item => (\n                        <option key={item.value} value={item.value}>\n                          {mappingStatus[item.title]}\n                        </option>\n                      ))}\n                    </CSelect>\n                    <CInvalidFeedback className=\"d-block\">{errors.type}</CInvalidFeedback>\n                  </CFormGroup>\n                </CCol>\n              </CRow>\n              <CFormGroup>\n                <Dropzone\n                  getUploadParams={getUploadParams}\n                  onChangeStatus={handleChangeStatus}\n                  accept=\"image/*,audio/*,video/*\"\n                  inputLabel=\"Upload Ảnh\"\n                  inputContent=\"Kéo thả hình ảnh hoặc bấm để chọn ảnh\"\n                  submitButtonContent=\"Hoàn thành\"\n                  inputWithFilesContent=\"Thêm file\"\n                  initialFiles={initImages}\n                />\n              </CFormGroup>\n              <CFormGroup className=\"d-flex justify-content-center\">\n                <CButton type=\"submit\" color=\"primary\" disabled={initialState.loading}>\n                  <CIcon name=\"cil-save\" /> {initialState.loading ? 'Đang xử lý' : 'Lưu thay đổi'}\n                </CButton>\n              </CFormGroup>\n            </CForm>\n          )}\n        </Formik>\n      </CCardBody>\n    </CCard>\n  );\n};\n\nexport default EditProduct;\n"]}]}